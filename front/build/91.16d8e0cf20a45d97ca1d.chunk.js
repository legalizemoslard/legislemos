(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{"0iuv":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2B1R"),a("fbCW");var i=r(a("PagR")),l=r(a("uh2p")),o=r(a("5bp4")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a("q1tI")),d=a("Rw3A"),c=a("KLnl"),s=r(a("FInc"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}var p=(0,u.memo)((function(e){var t=e.question,a=e.participationContextId,r=e.participationContextType,n=(0,i.default)(),d=(0,l.default)(t.id),f=(0,o.default)({participationContextId:a,participationContextType:r});return u.default.createElement(s.default,{key:t.id,serie:function(e){return(0,c.isNilOrError)(f)||(0,c.isNilOrError)(d)?void 0:e.relationships.options.data.map((function(e){var t,a=null===(t=d.data.find((function(t){return t&&e.id===t.id})))||void 0===t?void 0:t.attributes.title_multiloc;return{code:e.id,value:f.series.options[e.id],name:a?n(a):"TODOfallbacksomehow"}}))}(t),graphTitleString:n(t.attributes.title_multiloc),graphUnit:"responses",className:"dynamicHeight"})})),m=(0,d.injectIntl)(p);t.default=m},"6I5A":function(e,t,a){"use strict";a("SuFq");var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IdeasByStatusChart=void 0,a("2B1R"),a("tkto");var n=r(a("pVnL")),i=r(a("lwsE")),l=r(a("W8MJ")),o=r(a("PJYZ")),u=r(a("7W2i")),d=r(a("a1gu")),c=r(a("Nsbk")),s=r(a("lSNA")),f=r(a("q1tI")),p=a("T89o"),m=a("Rw3A"),h=r(a("xkfV")),v=a("vOnD"),g=r(a("CHxe")),y=a("4XXU"),b=a("ONLP"),E=r(a("x4KB")),C=a("kyyJ"),x=r(a("V3HD"));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=function(e){(0,u.default)(a,e);var t=T(a);function a(e){var r;return(0,i.default)(this,a),r=t.call(this,e),(0,s.default)((0,o.default)(r),"currentChart",void 0),r.currentChart=f.default.createRef(),r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props.theme,t=e.chartFill,a=e.chartLabelSize,r=e.chartLabelColor,n=e.barHoverColor,i=e.animationBegin,l=e.animationDuration,o=this.props,u=o.currentGroupFilterLabel,d=o.currentGroupFilter,c=o.className,s=o.serie,v=o.intl.formatMessage,E=!s||s.every((function(e){return(0,p.isEmpty)(e)}))||s.length<=0,x=v(h.default.inputs),T=function(e){var t=e.x,n=e.y,i=e.value;return f.default.createElement("text",{x:t,y:n,dx:20,dy:-6,fontFamily:"sans-serif",fill:r,fontSize:a,textAnchor:"middle"}," ",i," ")};return f.default.createElement(b.GraphCard,{className:c},f.default.createElement(b.GraphCardInner,null,f.default.createElement(b.GraphCardHeader,null,f.default.createElement(b.GraphCardTitle,null,f.default.createElement(m.FormattedMessage,h.default.inputsByStatusTitle)),!E&&f.default.createElement(g.default,{name:v(h.default.inputsByStatusTitle),svgNode:this.currentChart,xlsxEndpoint:C.ideasByStatusXlsxEndpoint,currentGroupFilterLabel:u,currentGroupFilter:d})),E?f.default.createElement(b.NoDataContainer,null,f.default.createElement(m.FormattedMessage,h.default.noData)):f.default.createElement(y.ResponsiveContainer,{height:s.length>1?50*s.length:100},f.default.createElement(y.BarChart,{data:s,layout:"vertical",ref:this.currentChart},f.default.createElement(y.Bar,{dataKey:"value",name:x,fill:t,label:f.default.createElement(T,null),barSize:5,animationDuration:l,animationBegin:i},s.map((function(e,a){return f.default.createElement(y.Cell,{key:"cell-".concat(a),fill:e.color&&e.color||t,opacity:.8})}))),f.default.createElement(y.YAxis,{dataKey:"name",type:"category",width:150,stroke:r,fontSize:a,tickLine:!1}),f.default.createElement(y.XAxis,{stroke:r,fontSize:a,type:"number",tick:{transform:"translate(0, 7)"}}),f.default.createElement(y.Tooltip,{isAnimationActive:!1,cursor:{fill:n}})))))}}]),a}(f.default.PureComponent);t.IdeasByStatusChart=P;var k=(0,m.injectIntl)((0,v.withTheme)(P)),w=(0,x.default)((function(e){return f.default.createElement(E.default,(0,n.default)({},e,{stream:C.ideasByStatusStream,convertToGraphFormat:function(t){var a=t.series.ideas,r=t.idea_status;return Object.keys(a).length<=0?null:(0,p.map)(r,(function(t,r){return{value:a[r]||0,name:e.localize(t.title_multiloc),code:r,color:t.color,ordering:t.ordering}}))}}),(function(t){return f.default.createElement(k,(0,n.default)({},t,e))}))}));t.default=w},"8wSe":function(e,t,a){"use strict";a("2B1R"),a("SuFq");var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("07d7"),a("JfAA");var n=r(a("pVnL")),i=r(a("J4zp")),l=r(a("lwsE")),o=r(a("W8MJ")),u=r(a("PJYZ")),d=r(a("7W2i")),c=r(a("a1gu")),s=r(a("Nsbk")),f=r(a("lSNA")),p=r(a("q1tI")),m=a("DtyJ"),h=a("T89o"),v=a("vOnD"),g=a("ufqH"),y=a("kyyJ"),b=r(a("CHxe")),E=a("4XXU"),C=a("ONLP"),x=r(a("xkfV")),T=a("Rw3A");function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=function(e){(0,d.default)(a,e);var t=P(a);function a(e){var r;return(0,l.default)(this,a),r=t.call(this,e),(0,f.default)((0,u.default)(r),"combined$",void 0),(0,f.default)((0,u.default)(r),"currentChart",void 0),(0,f.default)((0,u.default)(r),"formatTick",(function(e){var t=r.props.resolution;return(0,r.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"short"})})),(0,f.default)((0,u.default)(r),"formatLabel",(function(e){var t=r.props.resolution;return(0,r.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"long",year:"numeric"})})),(0,f.default)((0,u.default)(r),"formatSerieChange",(function(e){return e>0?"(+".concat(e.toString(),")"):e<0?"(".concat(e.toString(),")"):null})),r.state={serie:null},r.currentChart=p.default.createRef(),r}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startAt,a=e.endAt,r=e.resolution,n=e.currentGroupFilter,i=e.currentTopicFilter,l=e.currentProjectFilter;this.resubscribe(t,a,r,n,i,l)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.startAt,r=t.endAt,n=t.resolution,i=t.currentGroupFilter,l=t.currentTopicFilter,o=t.currentProjectFilter;a===e.startAt&&r===e.endAt&&n===e.resolution&&i===e.currentGroupFilter&&l===e.currentTopicFilter&&o===e.currentProjectFilter||this.resubscribe(a,r,n,i,l,o)}},{key:"componentWillUnmount",value:function(){this.combined$.unsubscribe()}},{key:"convertAndMergeSeries",value:function(e,t){var a=e.series,r=a.up,n=a.down,i=a.total;return(0,h.isEmpty)(i)||(0,h.isEmpty)(t.series.total)?null:(0,h.map)(i,(function(e,a){return{total:e,down:n[a],up:r[a],date:a,code:a,cumulatedTotal:t.series.total[a]}}))}},{key:"resubscribe",value:function(e,t,a,r,n,l){var o=this;this.combined$&&this.combined$.unsubscribe();var u={queryParameters:{start_at:e,end_at:t,interval:a,project:l,group:r,topic:n}},d=(0,y.votesByTimeStream)(u).observable,c=(0,y.votesByTimeCumulativeStream)(u).observable;this.combined$=(0,m.combineLatest)(d,c).subscribe((function(e){var t=(0,i.default)(e,2),a=t[0],r=t[1],n=o.convertAndMergeSeries(a,r);o.setState({serie:n})}))}},{key:"getFormattedNumbers",value:function(e){if(e&&e.length>0){var t=e[0].cumulatedTotal,a=e[e.length-1].cumulatedTotal,r=a-t,n="";return r>0?n="increase":r<0&&(n="decrease"),{typeOfChange:n,totalNumber:a,formattedSerieChange:this.formatSerieChange(r)}}return{totalNumber:null,formattedSerieChange:null,typeOfChange:""}}},{key:"render",value:function(){var e=this.props.theme,t=e.chartLabelSize,a=e.chartLabelColor,r=e.newLineColor,i=e.animationBegin,l=e.animationDuration,o=e.cartesianGridColor,u=e.newBarFill,d=this.props.intl.formatMessage,c=this.state.serie,s=this.getFormattedNumbers(c),f=this.props,m=f.className,h=f.resolution,v=s.totalNumber,P=s.formattedSerieChange,k=s.typeOfChange;return p.default.createElement(C.GraphCard,{className:m},p.default.createElement(C.GraphCardInner,null,p.default.createElement(C.GraphCardHeader,null,p.default.createElement(C.GraphCardTitle,null,p.default.createElement(T.FormattedMessage,x.default.votes),p.default.createElement(C.GraphCardFigureContainer,null,p.default.createElement(C.GraphCardFigure,null,v),p.default.createElement(C.GraphCardFigureChange,{className:k},P))),c&&p.default.createElement(b.default,(0,n.default)({svgNode:this.currentChart,xlsxEndpoint:y.votesByTimeXlsxEndpoint,name:d(x.default.votes)},this.props))),c?p.default.createElement(E.ResponsiveContainer,null,p.default.createElement(E.ComposedChart,{data:c,margin:{right:40},ref:this.currentChart},p.default.createElement(E.CartesianGrid,{stroke:o,strokeWidth:.5}),p.default.createElement(E.XAxis,{dataKey:"date",interval:"preserveStartEnd",stroke:a,fontSize:t,tick:{transform:"translate(0, 7)"},tickFormatter:this.formatTick,tickLine:!1}),p.default.createElement(E.YAxis,{stroke:a,fontSize:t,yAxisId:"cumulatedTotal",tickLine:!1},p.default.createElement(E.Label,{value:d(x.default.total),angle:-90,position:"center",dx:-15})),p.default.createElement(E.YAxis,{yAxisId:"barValue",orientation:"right",tickLine:!1},p.default.createElement(E.Label,{value:d(x.default.perPeriod,{period:d(x.default[h])}),angle:90,position:"center",dx:15})),p.default.createElement(E.Tooltip,{isAnimationActive:!1,labelFormatter:this.formatLabel}),p.default.createElement(E.Bar,{dataKey:"up",name:d(x.default.numberOfVotesUp),fill:(0,g.rgba)(u,1),animationDuration:l,animationBegin:i,stackId:"1",yAxisId:"barValue",barSize:20}),p.default.createElement(E.Bar,{dataKey:"down",name:d(x.default.numberOfVotesDown),fill:(0,g.rgba)(u,.7),stackId:"1",animationDuration:l,animationBegin:i,stroke:"none",yAxisId:"barValue",barSize:20}),p.default.createElement(E.Line,{type:"monotone",dataKey:"cumulatedTotal",name:d(x.default.total),dot:c&&(null==c?void 0:c.length)<31,stroke:r,fill:r,strokeWidth:1,yAxisId:"cumulatedTotal"}),p.default.createElement(E.Legend,{wrapperStyle:{paddingTop:"20px"}}))):p.default.createElement(C.NoDataContainer,null,p.default.createElement(T.FormattedMessage,x.default.noData))))}}]),a}(p.default.PureComponent),w=(0,T.injectIntl)((0,v.withTheme)(k));t.default=w},D1cK:function(e,t,a){"use strict";a("2B1R"),a("SuFq"),a("4mDm"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("07d7"),a("JfAA");var i=r(a("pVnL")),l=r(a("J4zp")),o=r(a("lwsE")),u=r(a("W8MJ")),d=r(a("PJYZ")),c=r(a("7W2i")),s=r(a("a1gu")),f=r(a("Nsbk")),p=r(a("lSNA")),m=r(a("q1tI")),h=a("DtyJ"),v=a("T89o"),g=a("Rw3A"),y=r(a("xkfV")),b=r(a("CHxe")),E=a("4XXU"),C=a("ONLP"),x=a("FvIY"),T=a("iP56"),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=k(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a("vOnD"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(k=function(e){return e?a:t})(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var A=(0,P.default)(T.Icon).withConfig({displayName:"LineBarChart__InfoIcon",componentId:"us6zef-0"})(["display:flex;align-items:center;cursor:pointer;width:20px;height:22px;margin-left:10px;"]),O=(0,P.default)(E.ResponsiveContainer).withConfig({displayName:"LineBarChart__StyledResponsiveContainer",componentId:"us6zef-1"})([".recharts-wrapper{@media print{margin:0 auto;}}"]),j=function(e){(0,c.default)(a,e);var t=w(a);function a(e){var r;return(0,o.default)(this,a),r=t.call(this,e),(0,p.default)((0,d.default)(r),"combined$",void 0),(0,p.default)((0,d.default)(r),"currentChart",void 0),(0,p.default)((0,d.default)(r),"convertAndMergeSeries",(function(e,t){var a=r.props.graphUnit;return(0,v.isEmpty)(t.series[a])||(0,v.isEmpty)(e.series[a])?null:(0,v.map)(t.series[a],(function(t,r){return{total:t,barValue:e.series[a][r],name:r,code:r}}))})),(0,p.default)((0,d.default)(r),"formatTick",(function(e){var t=r.props.resolution;return(0,r.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"short"})})),(0,p.default)((0,d.default)(r),"formatLabel",(function(e){var t=r.props.resolution;return(0,r.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"long",year:"numeric"})})),(0,p.default)((0,d.default)(r),"formatSerieChange",(function(e){return e>0?"(+".concat(e.toString(),")"):e<0?"(".concat(e.toString(),")"):null})),r.state={serie:null},r.currentChart=m.default.createRef(),r}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.resubscribe()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.startAt,r=t.endAt,n=t.resolution,i=t.currentGroupFilter,l=t.currentTopicFilter,o=t.currentProjectFilter;a===e.startAt&&r===e.endAt&&n===e.resolution&&i===e.currentGroupFilter&&l===e.currentTopicFilter&&o===e.currentProjectFilter||this.resubscribe()}},{key:"componentWillUnmount",value:function(){this.combined$.unsubscribe()}},{key:"resubscribe",value:function(){var e=this,t=this.props,a=t.barStream,r=t.lineStream,n=t.startAt,i=t.endAt,o=t.resolution,u=t.currentProjectFilter,d=t.currentGroupFilter,c=t.currentTopicFilter;this.combined$&&this.combined$.unsubscribe();var s={queryParameters:{start_at:n,end_at:i,interval:o,project:u,group:d,topic:c}},f=a(s).observable,p=r(s).observable;this.combined$=(0,h.combineLatest)(f,p).subscribe((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1],i=e.convertAndMergeSeries(r,n);e.setState({serie:i})}))}},{key:"getFormattedNumbers",value:function(e){if(e){var t=e&&e[0].total,a=e&&e[e.length-1].total,r=a-t,n="";return r>0?n="increase":r<0&&(n="decrease"),{typeOfChange:n,totalNumber:a,formattedSerieChange:this.formatSerieChange(r)}}return{totalNumber:null,formattedSerieChange:null,typeOfChange:""}}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.props,a=t.className,r=t.graphTitle,n=t.infoMessage,l=t.resolution,o=this.state.serie,u=this.props.theme,d=u.chartLabelSize,c=u.chartLabelColor,s=u.cartesianGridColor,f=u.newBarFill,p=u.newLineColor,h=this.getFormattedNumbers(o),T=h.totalNumber,P=h.formattedSerieChange,k=h.typeOfChange,w=!o||o.every((function(e){return(0,v.isEmpty)(e)}))||o.length<=0;return m.default.createElement(C.GraphCard,{className:a},m.default.createElement(C.GraphCardInner,null,m.default.createElement(C.GraphCardHeader,null,m.default.createElement(C.GraphCardTitle,null,r,n&&m.default.createElement(x.Popup,{basic:!0,trigger:m.default.createElement("div",null,m.default.createElement(A,{name:"info"})),content:n,position:"top left"}),m.default.createElement(C.GraphCardFigureContainer,null,m.default.createElement(C.GraphCardFigure,null,T),m.default.createElement(C.GraphCardFigureChange,{className:k},P))),!w&&m.default.createElement(b.default,(0,i.default)({svgNode:this.currentChart,name:r},this.props))),w?m.default.createElement(C.NoDataContainer,null,m.default.createElement(g.FormattedMessage,y.default.noData)):m.default.createElement(O,null,m.default.createElement(E.ComposedChart,{data:null!=o?o:void 0,reverseStackOrder:!0,ref:this.currentChart},m.default.createElement(E.CartesianGrid,{stroke:s,strokeWidth:.5}),m.default.createElement(E.XAxis,{dataKey:"name",interval:"preserveStartEnd",stroke:c,fontSize:d,tick:{transform:"translate(0, 7)"},tickFormatter:this.formatTick,tickLine:!1}),m.default.createElement(E.YAxis,{yAxisId:"total",stroke:c,fontSize:d,tickLine:!1},m.default.createElement(E.Label,{value:e(y.default.total),angle:-90,position:"center",dx:-15})),m.default.createElement(E.YAxis,{yAxisId:"barValue",orientation:"right",allowDecimals:!1,tickLine:!1},m.default.createElement(E.Label,{value:e(y.default.perPeriod,{period:e(y.default[l])}),angle:90,position:"center",dx:15})),m.default.createElement(E.Tooltip,{isAnimationActive:!1,labelFormatter:this.formatLabel,cursor:{strokeWidth:1}}),m.default.createElement(E.Bar,{dataKey:"barValue",yAxisId:"barValue",barSize:20,fill:f,fillOpacity:1,name:e(y.default.totalForPeriod,{period:e(y.default[l])})}),m.default.createElement(E.Line,{type:"monotone",yAxisId:"total",dataKey:"total",activeDot:Boolean(o&&(null==o?void 0:o.length)<31),stroke:p,fill:p,strokeWidth:1,name:e(y.default.total)}),m.default.createElement(E.Legend,{wrapperStyle:{paddingTop:"20px"}})))))}}]),a}(m.default.PureComponent),S=(0,g.injectIntl)((0,P.withTheme)(j));t.default=S},FInc:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ResponseGraph=void 0;var i=m(a("q1tI")),l=a("Rw3A"),o=r(a("xkfV")),u=m(a("vOnD")),d=a("KLnl"),c=a("4XXU"),s=a("ONLP"),f=r(a("CHxe"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,a&&a.set(e,r),r}var h=(0,u.default)(c.ResponsiveContainer).withConfig({displayName:"ResponseGraph__StyledResponsiveContainer",componentId:"sc-18xzbeu-0"})([".recharts-wrapper{@media print{margin:0 auto;}padding:20px;padding-top:0px;}"]),v=(0,u.default)(s.GraphCardInner).withConfig({displayName:"ResponseGraph__StyledGraphCardInner",componentId:"sc-18xzbeu-1"})(["border:none;"]),g=(0,i.memo)((function(e){var t=e.graphTitleString,a=e.serie,r=(0,u.useTheme)(),n=i.default.createRef(),p=r.chartLabelSize,m=r.chartCategorySize,g=r.chartLabelColor,y=r.animationBegin,b=r.animationDuration,E=r.newBarFill,C=function(e){var t=e.x,a=e.y,r=e.value;return i.default.createElement("g",{style:{pointerEvents:"none"}},i.default.createElement("text",{x:t,y:a,dx:30,dy:-6,fill:g,fontSize:m,textAnchor:"left"},r))},x=function(e){var t=e.x,a=e.y,r=e.value;return i.default.createElement("g",{style:{pointerEvents:"none"}},i.default.createElement("text",{x:t,y:a,dx:5,dy:-6,fill:g,fontSize:m,textAnchor:"right",fontWeight:"800"},r||"0"))};return i.default.createElement(v,null,i.default.createElement(s.GraphCardHeader,null,i.default.createElement(s.GraphCardTitle,null,t),!(0,d.isNilOrError)(a)&&i.default.createElement(f.default,{svgNode:n,name:t})),(0,d.isNilOrError)(a)?i.default.createElement(s.NoDataContainer,null,i.default.createElement(l.FormattedMessage,o.default.noData)):i.default.createElement(h,{height:(null==a?void 0:a.length)>1?50*a.length:100},i.default.createElement(c.BarChart,{data:a,layout:"vertical",ref:n,margin:{right:20,top:10}},i.default.createElement(c.Bar,{name:"Count",dataKey:"value",fill:E,barSize:5,animationDuration:b,animationBegin:y},i.default.createElement(c.LabelList,{dataKey:"name",position:"top",content:i.default.createElement(C,null)}),i.default.createElement(c.LabelList,{dataKey:"value",position:"insideTopRight",offset:-20,content:i.default.createElement(x,null)})),i.default.createElement(c.YAxis,{dataKey:"name",type:"category",width:150,stroke:g,fontSize:p,tickLine:!1,hide:!0}),i.default.createElement(c.XAxis,{stroke:g,fontSize:p,type:"number",tick:{transform:"translate(0, 7)"},hide:!0}))))}));t.ResponseGraph=g;var y=(0,l.injectIntl)(g);t.default=y},LWG9:function(e,t,a){"use strict";a("2B1R"),a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a("pVnL")),l=r(a("lwsE")),o=r(a("W8MJ")),u=r(a("PJYZ")),d=r(a("7W2i")),c=r(a("a1gu")),s=r(a("Nsbk")),f=r(a("lSNA")),p=r(a("q1tI")),m=a("T89o"),h=a("Rw3A"),v=r(a("xkfV")),g=r(a("CHxe")),y=a("4XXU"),b=a("ONLP"),E=a("FvIY"),C=a("iP56"),x=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a("vOnD"));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=(0,x.default)(C.Icon).withConfig({displayName:"BarChartActiveUsersByTime__InfoIcon",componentId:"sc-1w9qkqt-0"})(["display:flex;align-items:center;cursor:pointer;width:20px;height:22px;margin-left:10px;"]),w=(0,x.default)(y.ResponsiveContainer).withConfig({displayName:"BarChartActiveUsersByTime__StyledResponsiveContainer",componentId:"sc-1w9qkqt-1"})([".recharts-wrapper{@media print{margin:0 auto;}}"]),A=function(e){(0,d.default)(a,e);var t=P(a);function a(e){var r;return(0,l.default)(this,a),r=t.call(this,e),(0,f.default)((0,u.default)(r),"subscription",void 0),(0,f.default)((0,u.default)(r),"currentChart",void 0),(0,f.default)((0,u.default)(r),"convertToGraphFormat",(function(e){var t=r.props.graphUnit;return(0,m.isEmpty)(e.series[t])?null:(0,m.map)(e.series[t],(function(e,t){return{value:e,name:t,code:t}}))})),(0,f.default)((0,u.default)(r),"formatTick",(function(e){var t=r.props.resolution;return(0,r.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"short"})})),(0,f.default)((0,u.default)(r),"formatLabel",(function(e){var t=r.props.resolution;return(0,r.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"long",year:"numeric"})})),r.state={serie:null},r.currentChart=p.default.createRef(),r}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startAt,a=e.endAt,r=e.resolution,n=e.currentGroupFilter,i=e.currentTopicFilter,l=e.currentProjectFilter;this.resubscribe(t,a,r,l,n,i)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.startAt,r=t.endAt,n=t.resolution,i=t.currentGroupFilter,l=t.currentTopicFilter,o=t.currentProjectFilter;a===e.startAt&&r===e.endAt&&n===e.resolution&&i===e.currentGroupFilter&&l===e.currentTopicFilter&&o===e.currentProjectFilter||this.resubscribe(a,r,n,o,i,l)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"resubscribe",value:function(e,t,a,r,n,i){var l=this,o=this.props.stream;this.subscription&&this.subscription.unsubscribe(),this.subscription=o({queryParameters:{start_at:e,end_at:t,interval:a,project:r,group:n,topic:i}}).observable.subscribe((function(e){var t=l.convertToGraphFormat(e);l.setState({serie:t})}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.graphTitle,r=e.infoMessage,n=this.state.serie,l=this.props.theme,o=l.chartLabelSize,u=l.chartLabelColor,d=l.barHoverColor,c=l.animationBegin,s=l.animationDuration,f=l.newBarFill,C=!n||n.every((function(e){return(0,m.isEmpty)(e)}))||n.length<=0;return p.default.createElement(b.GraphCard,{className:t},p.default.createElement(b.GraphCardInner,null,p.default.createElement(b.GraphCardHeader,null,p.default.createElement(b.GraphCardTitle,null,a,r&&p.default.createElement(E.Popup,{basic:!0,trigger:p.default.createElement("div",null,p.default.createElement(k,{name:"info"})),content:r,position:"top left"})),!C&&p.default.createElement(g.default,(0,i.default)({svgNode:this.currentChart,name:a},this.props))),C?p.default.createElement(b.NoDataContainer,null,p.default.createElement(h.FormattedMessage,v.default.noData)):p.default.createElement(w,null,p.default.createElement(y.BarChart,{data:null!=n?n:void 0,ref:this.currentChart},p.default.createElement(y.Bar,{dataKey:"value",name:a,fill:f,animationDuration:s,animationBegin:c,isAnimationActive:!0}),p.default.createElement(y.XAxis,{dataKey:"name",stroke:u,fontSize:o,tick:{transform:"translate(0, 7)"},tickFormatter:this.formatTick}),p.default.createElement(y.YAxis,{stroke:u,fontSize:o}),p.default.createElement(y.Tooltip,{isAnimationActive:!1,labelFormatter:this.formatLabel,cursor:{fill:d}})))))}}]),a}(p.default.PureComponent),O=(0,h.injectIntl)((0,x.withTheme)(A));t.default=O},Pju7:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HorizontalBarChartWithoutStream=void 0,a("ma9I"),a("yq1k"),a("2B1R"),a("ToJy");var i=m(a("q1tI")),l=a("Rw3A"),o=r(a("xkfV")),u=m(a("vOnD")),d=a("KLnl"),c=a("4XXU"),s=a("ONLP"),f=r(a("CHxe"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,a&&a.set(e,r),r}var h=(0,u.default)(c.ResponsiveContainer).withConfig({displayName:"HorizontalBarChartWithoutStream__StyledResponsiveContainer",componentId:"vahak8-0"})([".recharts-wrapper{@media print{margin:0 auto;}padding:20px;padding-top:0px;}"]),v=(0,i.memo)((function(e){var t=e.className,a=e.graphTitleString,r=e.serie,n=e.graphUnit,p=(0,u.useTheme)(),m=i.default.createRef(),v=p.chartLabelSize,g=p.chartCategorySize,y=p.chartLabelColor,b=p.animationBegin,E=p.animationDuration,C=p.newBarFill,x=function(e){var t=e.x,a=e.y,r=e.value;return i.default.createElement("g",{style:{pointerEvents:"none"}},i.default.createElement("text",{x:t,y:a,dx:30,dy:-6,fill:y,fontSize:g,textAnchor:"left"},r))},T=function(e){var t=e.x,a=e.y,r=e.value;return i.default.createElement("g",{style:{pointerEvents:"none"}},i.default.createElement("text",{x:t,y:a,dx:5,dy:-6,fill:y,fontSize:g,textAnchor:"right",fontWeight:"800"},r))};return i.default.createElement(s.GraphCard,{className:t},i.default.createElement(s.GraphCardInner,null,i.default.createElement(s.GraphCardHeader,null,i.default.createElement(s.GraphCardTitle,null,a),!(0,d.isNilOrError)(r)&&i.default.createElement(f.default,{svgNode:m,name:a})),(0,d.isNilOrError)(r)?i.default.createElement(s.NoDataContainer,null,i.default.createElement(l.FormattedMessage,o.default.noData)):i.default.createElement(h,{height:(null==r?void 0:r.length)>1?50*r.length:100},i.default.createElement(c.BarChart,{data:r,layout:"vertical",ref:m,margin:{right:20,top:10}},i.default.createElement(c.Bar,{dataKey:"value",name:"Total",opacity:0,barSize:["ideas","votes"].includes(n)?30:20,animationDuration:E,animationBegin:b,onClick:function(e){var t=e.slug;(0,d.isNilOrError)(t)||window.open("".concat(window.location.origin,"/ideas/").concat(t))},cursor:"pointer"}),i.default.createElement(c.Bar,{name:"Downvotes",stackId:"votes",dataKey:"down",fill:C,barSize:["ideas","votes"].includes(n)?5:20,animationDuration:E,animationBegin:b},"ideas"===n&&r.sort((function(e,t){return e.ordering&&t.ordering?e.ordering-t.ordering:-1})).map((function(e,t){return i.default.createElement(c.Cell,{key:"cell-".concat(t),fill:e.color&&e.color||C,opacity:.8})})),i.default.createElement(c.LabelList,{dataKey:"name",position:"top",content:i.default.createElement(x,null)}),i.default.createElement(c.LabelList,{dataKey:"value",position:"insideTopRight",offset:-20,content:i.default.createElement(T,null)})),i.default.createElement(c.Bar,{name:"Upvotes",stackId:"votes",dataKey:"up",fill:C,opacity:.7,barSize:["ideas","votes"].includes(n)?5:20,animationDuration:E,animationBegin:b},"ideas"===n&&r.map((function(e,t){return i.default.createElement(c.Cell,{key:"cell-".concat(t),fill:e.color&&e.color||C,opacity:.4})}))),i.default.createElement(c.YAxis,{dataKey:"name",type:"category",width:150,stroke:y,fontSize:v,tickLine:!1,hide:!0}),i.default.createElement(c.XAxis,{stroke:y,fontSize:v,type:"number",tick:{transform:"translate(0, 7)"},hide:!0})))))}));t.HorizontalBarChartWithoutStream=v;var g=(0,l.injectIntl)(v);t.default=g},a0g4:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("pVnL"));a("yWo2"),a("ma9I"),a("2B1R");var i=r(a("q1tI")),l=a("ifvJ"),o=a("T89o"),u=r(a("vOnD")),d=r(a("x4KB")),c=a("kyyJ"),s=a("96Cm"),f=a("Rw3A"),p=r(a("V3HD")),m=r(a("xkfV")),h=r(a("PagR")),v=a("ONLP"),g=a("KLnl"),y="10px",b=u.default.div.withConfig({displayName:"ParticipationPerTopic__Column",componentId:"xriw5p-0"})(["display:inline-flex;flex-direction:column;"]),E=u.default.div.withConfig({displayName:"ParticipationPerTopic__Row",componentId:"xriw5p-1"})(["display:inline-flex;flex-direction:row;margin:auto;"]),C=u.default.div.withConfig({displayName:"ParticipationPerTopic__TopicName",componentId:"xriw5p-2"})(["padding:1px;font-size:",";word-break:break-all;width:auto;height:20px;margin-right:10px;margin-bottom:",";"],s.fontSizes.small,y),x=u.default.div.withConfig({displayName:"ParticipationPerTopic__ParticipationType",componentId:"xriw5p-3"})(["padding:1px;font-size:",";width:",";height:20px;text-align:center;margin-bottom:",";"],s.fontSizes.base,"100px",y),T=u.default.div.withConfig({displayName:"ParticipationPerTopic__Cell",componentId:"xriw5p-4"})(["background-color:",";height:20px;width:cellWidth;border:1px solid #f1f1f1;border-radius:2px;margin-bottom:",";transition:0.3s;:hover{background-color:",";}"],(function(e){return e.cellColor}),y,s.colors.background),P=u.default.p.withConfig({displayName:"ParticipationPerTopic__Value",componentId:"xriw5p-5"})(["margin:auto;font-size:",";text-align:center;opacity:0;:hover{opacity:1;}"],s.fontSizes.xs),k=function(e,t){var a=e/w[t]*50+49,r=100-(e/w[t]*60+5);return"hsl(185, ".concat(a,"%, ").concat(r,"%)")},w={},A=function(e){return function(t){var a=t.series,r=t.topics;w[e]=0;var n=(0,o.map)(r,(function(t,r){var n=t.title_multiloc;return a[e][r]>w[e]&&(w[e]=a[e][r]),{nameMultiloc:n,value:a[e][r]||0,code:r}})),i=(0,o.sortBy)(n,"code");return i.length>0?i:null}},O=(0,l.adopt)({ideasByTopic:function(e){var t=e.projectId,a=e.endAt,r=e.render;return i.default.createElement(d.default,{currentProjectFilter:t,stream:c.ideasByTopicStream,endAt:a,convertToGraphFormat:A("ideas")},r)},commentsByTopic:function(e){var t=e.projectId,a=e.endAt,r=e.render;return i.default.createElement(d.default,{currentProjectFilter:t,stream:c.commentsByTopicStream,endAt:a,convertToGraphFormat:A("comments")},r)},votesByTopic:function(e){var t=e.projectId,a=e.endAt,r=e.render;return i.default.createElement(d.default,{currentProjectFilter:t,stream:c.votesByTopicStream,endAt:a,convertToGraphFormat:A("total")},r)}}),j=(0,f.injectIntl)((0,p.default)((function(e){var t=e.votesByTopic,a=e.commentsByTopic,r=e.ideasByTopic,n=e.className,l=(0,h.default)();return i.default.createElement(i.default.Fragment,null,i.default.createElement(v.GraphCard,{className:n},i.default.createElement(v.GraphCardInner,null,i.default.createElement(v.GraphCardHeader,null,i.default.createElement(v.GraphCardTitle,null,i.default.createElement(f.FormattedMessage,m.default.participationPerTopic))),(0,g.isNilOrError)(t)||(0,g.isNilOrError)(a)||(0,g.isNilOrError)(r)?i.default.createElement(v.NoDataContainer,null,i.default.createElement(f.FormattedMessage,m.default.noData)):i.default.createElement(E,null,i.default.createElement(b,null,i.default.createElement(x,null),r.serie&&r.serie.map((function(e,t){return i.default.createElement(C,{key:t},l(e.nameMultiloc))}))),i.default.createElement(b,null,i.default.createElement(x,null,i.default.createElement(f.FormattedMessage,m.default.inputs)),r.serie&&r.serie.map((function(e,t){return i.default.createElement(T,{key:t,cellColor:k(e.value,"ideas")},i.default.createElement(P,null,e.value))}))),i.default.createElement(b,null,i.default.createElement(x,null,i.default.createElement(f.FormattedMessage,m.default.comments)),a.serie&&a.serie.map((function(e,t){return i.default.createElement(T,{key:t,cellColor:k(e.value,"comments")},i.default.createElement(P,null,e.value))}))),i.default.createElement(b,null,i.default.createElement(x,null,i.default.createElement(f.FormattedMessage,m.default.votes)),t.serie&&t.serie.map((function(e,t){return i.default.createElement(T,{key:t,cellColor:k(e.value,"total")},i.default.createElement(P,null,e.value))})))))))})));t.default=function(e){return i.default.createElement(O,e,(function(t){return i.default.createElement(j,(0,n.default)({},t,e))}))}},h2Qt:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a("pVnL"));a("2B1R");var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a("q1tI")),o=a("ifvJ"),u=r(a("3Bzs")),d=a("KLnl"),c=a("ONLP"),s=r(a("0iuv")),f=a("Loij"),p=a("Rw3A"),m=r(a("xkfV"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}var v=(0,l.memo)((function(e){var t=e.participationContextId,a=e.participationContextType,r=e.pollQuestions,n=e.participationContextTitle;return l.default.createElement("div",null,!(0,d.isNilOrError)(n)&&"phase"===a&&l.default.createElement(f.SubSectionTitle,null,n),l.default.createElement(c.GraphsContainer,null,!(0,d.isNilOrError)(r)&&r.length>0?r.map((function(e){return l.default.createElement(c.GraphCard,{className:"dynamicHeight ".concat(1===r.length?"fullWidth":""),key:e.id},l.default.createElement(c.GraphCardInner,null,l.default.createElement(s.default,{question:e,participationContextId:t,participationContextType:a})))})):l.default.createElement(c.GraphCard,{className:"dynamicHeight fullWidth"},l.default.createElement(c.GraphCardInner,null,l.default.createElement(c.NoDataContainer,null,l.default.createElement(p.FormattedMessage,m.default.noData))))))})),g=(0,o.adopt)({pollQuestions:function(e){var t=e.participationContextId,a=e.participationContextType,r=e.render;return l.default.createElement(u.default,{participationContextId:t,participationContextType:a},r)}}),y=(0,p.injectIntl)(v);t.default=function(e){return l.default.createElement(g,e,(function(t){return l.default.createElement(y,(0,i.default)({},e,t))}))}},njoe:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2B1R"),a("TeQF"),a("yq1k"),a("JTJg");var i=r(a("pVnL")),l=r(a("J4zp")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,a&&a.set(e,r);return r}(a("q1tI")),u=a("ifvJ"),d=r(a("PagR")),c=a("KLnl"),s=r(a("wd/R")),f=a("Rw3A"),p=r(a("vOnD")),m=r(a("xkfV")),h=r(a("TDU/")),v=a("ONLP"),g=r(a("anjn")),y=r(a("M8tl")),b=a("kyyJ"),E=a("96Cm"),C=a("Loij"),x=r(a("3A/8")),T=r(a("Pju7")),P=r(a("6I5A")),k=r(a("a0g4")),w=r(a("D1cK")),A=r(a("8wSe")),O=r(a("LWG9")),j=r(a("h2Qt")),S=r(a("Yjdl")),M=r(a("M7uY")),R=a("dtw8");function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(F=function(e){return e?a:t})(e)}var N=p.default.div.withConfig({displayName:"ProjectReport__Section",componentId:"glftf9-0"})(["margin-bottom:20px;"]),I=p.default.div.withConfig({displayName:"ProjectReport__Phase",componentId:"glftf9-1"})(["display:flex;margin-bottom:20px;flex-direction:column;padding:10px;border:",";border-radius:",";"],(function(e){return e.isCurrentPhase?"solid 3px ".concat(E.colors.border):"solid 1px ".concat(E.colors.adminBorder)}),(function(e){return e.theme.borderRadius})),B=p.default.div.withConfig({displayName:"ProjectReport__RowSection",componentId:"glftf9-2"})(["display:flex;justify-content:space-between;flex-direction:row;margin-bottom:20px;"]),D=p.default.div.withConfig({displayName:"ProjectReport__TimelineSection",componentId:"glftf9-3"})(["display:inline-flex;flex-wrap:wrap;margin:-24px 0 20px -24px;width:calc(100% + 24px);> *{margin:24px 0 0 24px;}"]),_=(0,o.memo)((function(e){var t,a=e.project,r=e.phases,n=e.mostVotedIdeas,u=e.intl,p=u.formatMessage,g=u.formatDate;if((0,c.isNilOrError)(a))return null;var y=(0,d.default)(),E="timeline"===a.attributes.process_type,M=(0,o.useState)("month"),R=(0,l.default)(M,2),F=R[0],_=R[1],L=(0,o.useState)(null),G=(0,l.default)(L,2),W=G[0],z=G[1],K=(0,o.useState)(null),V=(0,l.default)(K,2),q=V[0],U=V[1];(0,o.useEffect)((function(){if(E){if(!(0,c.isNilOrError)(r)&&r.length>0){var e=r[0].attributes.start_at,t=r[r.length-1].attributes.end_at;z(e),U(t);var n=J((0,s.default)(e),(0,s.default)(t));_(n)}}else{var i=a.attributes.created_at;z(i),U((0,s.default)().toISOString());var l=J((0,s.default)(i),(0,s.default)());_(l)}}),[a,r]);var J=function(e,t){var a=s.default.duration(t.diff(e));return a?a.asMonths()>6?"month":a.asWeeks()>4?"week":"day":"month"},H=function(e){return g(e,{day:"month"===F?void 0:"2-digit",month:"short"})},X=null==n||null===(t=n.list)||void 0===t?void 0:t.map((function(e){return{code:e.id,value:e.attributes.upvotes_count+e.attributes.downvotes_count,up:e.attributes.upvotes_count,down:e.attributes.downvotes_count,name:y(e.attributes.title_multiloc),slug:e.attributes.slug}})),Y=(E?(0,c.isNilOrError)(r)?[]:r.map((function(e){return e.attributes.participation_method})):[a.attributes.participation_method]).filter((function(e,t,a){return e&&a.indexOf(e)===t})),Z=y(a.attributes.title_multiloc),$={ideation:m.default.ideationAndFeedback,information:m.default.information,survey:m.default.survey,budgeting:m.default.budgeting,poll:m.default.poll,volunteering:m.default.volunteering};return o.default.createElement(o.default.Fragment,null,o.default.createElement(B,null,o.default.createElement(C.PageTitle,null,o.default.createElement(x.default,{value:a.attributes.title_multiloc})),o.default.createElement(h.default,{value:F,onChange:_})),E&&o.default.createElement(N,null,o.default.createElement(D,null,!(0,c.isNilOrError)(r)&&r.length>0?r.map((function(e,t){var r,n,l;return o.default.createElement(I,{key:t,isCurrentPhase:e.id===(null==a||null===(r=a.relationships)||void 0===r||null===(n=r.current_phase)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.id)},o.default.createElement("p",null,o.default.createElement(f.FormattedMessage,(0,i.default)({},m.default.fromTo,{values:{from:H(e.attributes.start_at),to:H(e.attributes.end_at)}}))),o.default.createElement(f.FormattedMessage,$[e.attributes.participation_method]),o.default.createElement("div",null,y(e.attributes.title_multiloc)))})):o.default.createElement(f.FormattedMessage,m.default.noPhase))),Y!==["information"]&&W&&q&&o.default.createElement(N,null,o.default.createElement(C.SectionTitle,null,o.default.createElement(f.FormattedMessage,m.default.sectionWho)),o.default.createElement(v.GraphsContainer,null,o.default.createElement(O.default,{startAt:W,endAt:q,stream:b.activeUsersByTimeStream,resolution:F,graphUnit:"users",graphUnitMessageKey:"users",graphTitle:p(m.default.participantsOverTimeTitle),xlsxEndpoint:b.activeUsersByTimeCumulativeXlsxEndpoint,currentProjectFilter:a.id,currentProjectFilterLabel:Z}),o.default.createElement(S.default,{id:"app.containers.Admin.dashboard.reports.ProjectReport.graphs",startAt:W,endAt:q,participationMethods:Y,project:a}))),o.default.createElement(N,null,(Y.includes("ideation")&&W&&q||Y.includes("poll"))&&o.default.createElement(C.SectionTitle,null,o.default.createElement(f.FormattedMessage,m.default.sectionWhatInput)),Y.includes("ideation")&&W&&q&&o.default.createElement(v.GraphsContainer,null,o.default.createElement(w.default,{graphTitle:p(m.default.inputs),graphUnit:"ideas",graphUnitMessageKey:"ideas",startAt:W,endAt:q,resolution:F,currentProjectFilter:a.id,currentProjectFilterLabel:Z,xlsxEndpoint:b.ideasByTimeCumulativeXlsxEndpoint,className:"e2e-ideas-chart",lineStream:b.ideasByTimeCumulativeStream,barStream:b.ideasByTimeStream}),o.default.createElement(w.default,{graphTitle:p(m.default.commentsByTimeTitle),graphUnit:"comments",graphUnitMessageKey:"comments",startAt:W,endAt:q,resolution:F,currentProjectFilter:a.id,currentProjectFilterLabel:Z,xlsxEndpoint:b.commentsByTimeCumulativeXlsxEndpoint,className:"e2e-comments-chart",lineStream:b.commentsByTimeCumulativeStream,barStream:b.commentsByTimeStream}),o.default.createElement(A.default,{className:"e2e-votes-chart",startAt:W,endAt:q,resolution:F,currentProjectFilter:a.id,currentProjectFilterLabel:Z}),o.default.createElement(P.default,{className:"dynamicHeight",startAt:W,endAt:q,currentProjectFilter:a.id}),o.default.createElement(T.default,{serie:X,graphTitleString:p(m.default.fiveInputsWithMostVotes),graphUnit:"votes",className:"dynamicHeight"}),o.default.createElement(k.default,{startAt:W,endAt:q,projectId:a.id,className:"dynamicHeight"})),Y.includes("poll")?E?!(0,c.isNilOrError)(r)&&r.map((function(e){return"poll"===e.attributes.participation_method&&o.default.createElement(j.default,{participationContextType:"phase",participationContextId:e.id,participationContextTitle:y(e.attributes.title_multiloc)})})):o.default.createElement(j.default,{participationContextType:"project",participationContextId:a.id,participationContextTitle:y(a.attributes.title_multiloc)}):null))})),L=(0,f.injectIntl)(_),G=(0,u.adopt)({phases:function(e){var t=e.params,a=e.render;return o.default.createElement(y.default,{projectId:t.projectId},a)},mostVotedIdeas:function(e){var t=e.params,a=e.render;return o.default.createElement(g.default,{pageNumber:1,pageSize:5,sort:"popular",type:"paginated",projectIds:[t.projectId]},a)},project:function(e){var t=e.params,a=e.render;return o.default.createElement(M.default,{projectId:t.projectId},a)}}),W=(0,R.withRouter)((function(e){return o.default.createElement(G,e,(function(t){return o.default.createElement(L,(0,i.default)({},e,t))}))}));t.default=W},xkfV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a("JRPe").defineMessages)({selectAProject:{id:"app.containers.Admin.Reports.selectAProject",defaultMessage:"What project are you interested in ?"},sectionWho:{id:"app.containers.Admin.Reports.sectionWho",defaultMessage:"Who participated ?"},sectionWhatInput:{id:"app.containers.Admin.Reports.sectionWhatInput",defaultMessage:"What input did you collect?"},participantsOverTimeTitle:{id:"app.containers.Admin.Reports.participantsOverTimeTitle",defaultMessage:"Participants"},timelineType:{id:"app.containers.Admin.Reports.timelineType",defaultMessage:"Timeline"},continuousType:{id:"app.containers.Admin.Reports.continuousType",defaultMessage:"Continuous"},projectType:{id:"app.containers.Admin.Reports.projectType",defaultMessage:"Project type : {projectType}"},fromTo:{id:"app.containers.Admin.Reports.fromTo",defaultMessage:"from {from} to {to}"},noPhase:{id:"app.containers.Admin.Reports.noPhase",defaultMessage:"No phase created for this project"},ideationAndFeedback:{id:"app.containers.Admin.Reports.ideationAndFeedback",defaultMessage:"ideation and feedback"},information:{id:"app.containers.Admin.Reports.information",defaultMessage:"information"},survey:{id:"app.containers.Admin.Reports.survey",defaultMessage:"survey"},budgeting:{id:"app.containers.Admin.Reports.budgeting",defaultMessage:"budgeting"},poll:{id:"app.containers.Admin.Reports.poll",defaultMessage:"poll"},volunteering:{id:"app.containers.Admin.Reports.volunteering",defaultMessage:"volunteering"},customFieldTitleExport:{id:"app.containers.Admin.Reports.customFieldTitleExport",defaultMessage:"{fieldName}_repartition"},participationPerTopic:{id:"app.containers.Admin.Reports.participationPerTopic",defaultMessage:"Participation per topic"},noData:{id:"app.containers.Admin.Reports.noData",defaultMessage:"No data available with the current filters."},inputs:{id:"app.containers.Admin.Reports.inputs",defaultMessage:"Inputs"},votes:{id:"app.containers.Admin.Reports.votes",defaultMessage:"Votes"},comments:{id:"app.containers.Admin.Reports.comments",defaultMessage:"Comments"},commentsByTimeTitle:{id:"app.containers.Admin.Reports.commentsByTimeTitle",defaultMessage:"Comments"},fiveInputsWithMostVotes:{id:"app.containers.Admin.Reports.fiveInputsWithMostVotes",defaultMessage:"Top 5 inputs by votes"},total:{id:"app.containers.Admin.Reports.total",defaultMessage:"Total"},totalForPeriod:{id:"app.containers.Admin.Reports.totalForPeriod",defaultMessage:"This {period}"},perPeriod:{id:"app.containers.Admin.Reports.perPeriod",defaultMessage:"Per {period}"},numberOfVotesUp:{id:"app.containers.Admin.Reports.numberOfVotesUp",defaultMessage:"Upvotes"},numberOfVotesDown:{id:"app.containers.Admin.Reports.numberOfVotesDown",defaultMessage:"Downvotes"},day:{id:"app.containers.Admin.Reports.day",defaultMessage:"day"},week:{id:"app.containers.Admin.Reports.week",defaultMessage:"week"},month:{id:"app.containers.Admin.Reports.month",defaultMessage:"month"},inputsByStatusTitle:{id:"app.containers.Admin.Reports.inputsByStatusTitle",defaultMessage:"Inputs by status"},seeReportButton:{id:"app.containers.AdminPage.DashboardPage.seeReportButton",defaultMessage:"Summary"}});t.default=r}}]);
//# sourceMappingURL=91.16d8e0cf20a45d97ca1d.chunk.js.map