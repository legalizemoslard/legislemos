{"version":3,"sources":["webpack:///./app/modules/commercial/custom_idea_statuses/admin/containers/new.tsx"],"names":["StyledSectionTitle","SectionTitle","tenantLocales","goBack","clHistory","push","isNilOrError","Section","onClick","FormattedMessage","messages","addIdeaStatus","Formik","initialValues","color","title_multiloc","description_multiloc","code","onSubmit","values","setErrors","setSubmitting","setStatus","params","then","_response","catch","errorResponse","isCLErrorJSON","apiErrors","json","errors","render","props","validate"],"mappings":"iQAAA,mBACA,eACA,YAEA,eACA,eACA,YAGA,eACA,E,ybAAA,YAIA,YACA,YAEA,YACA,eACA,Y,+HAEA,IAAMA,GAAqB,aAAOC,gBAAV,8EAAG,CAAH,yB,EAIF,WACpB,IAAMC,GAAgB,eAyBhBC,EAAS,WACbC,UAAUC,KAAK,0BAGjB,OAAK,IAAAC,cAAaJ,GAsBX,KApBH,wBAAC,EAAAK,QAAD,KACE,wBAAC,UAAD,CAAcC,QAASL,IACvB,wBAACH,EAAD,KACE,wBAAC,EAAAS,iBAAqBC,UAASC,gBAEjC,wBAAC,EAAAC,OAAD,CACEC,cAAe,CACbC,MAAO,UACPC,eAAgB,GAChBC,qBAAsB,GACtBC,KAAM,YAERC,SA1Ca,SACnBC,EADmB,GAGhB,IADDC,EACC,EADDA,UAAWC,EACV,EADUA,cAAeC,EACzB,EADyBA,UAEjBC,EAAX,iBAAsBJ,IACtB,IAAAR,eAAcY,GACXC,MAAK,SAACC,GACLtB,OAEDuB,OAAM,SAACC,GACN,IAAI,IAAAC,eAAcD,GAAgB,CAChC,IAAME,EAAaF,EAA+BG,KAAKC,OACvDX,EAAUS,QAEVP,EAAU,SAEZD,GAAc,OA2BZW,OAvBS,SAACC,GAChB,OAAO,wBAAC,UAAmBA,IAuBrBC,UAAU,IAAAA,UAAShC,O","file":"185.736bbe94082c26edf155.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { addIdeaStatus } from 'services/ideaStatuses';\nimport { CLErrorsJSON } from 'typings';\nimport clHistory from 'utils/cl-router/history';\nimport useAppConfigurationLocales from 'hooks/useAppConfigurationLocales';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport GoBackButton from 'components/UI/GoBackButton';\nimport IdeaStatusForm, {\n  FormValues,\n  validate,\n} from '../components/IdeaStatusForm';\nimport { Formik } from 'formik';\nimport { Section, SectionTitle } from 'components/admin/Section';\n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport { isCLErrorJSON } from 'utils/errorUtils';\n\nconst StyledSectionTitle = styled(SectionTitle)`\n  margin-bottom: 20px;\n`;\n\nconst NewIdeaStatus = () => {\n  const tenantLocales = useAppConfigurationLocales();\n  const handleSubmit = (\n    values: FormValues,\n    { setErrors, setSubmitting, setStatus }\n  ) => {\n    const { ...params } = values;\n    addIdeaStatus(params)\n      .then((_response) => {\n        goBack();\n      })\n      .catch((errorResponse) => {\n        if (isCLErrorJSON(errorResponse)) {\n          const apiErrors = (errorResponse as CLErrorsJSON).json.errors;\n          setErrors(apiErrors);\n        } else {\n          setStatus('error');\n        }\n        setSubmitting(false);\n      });\n  };\n\n  const renderFn = (props) => {\n    return <IdeaStatusForm {...props} />;\n  };\n\n  const goBack = () => {\n    clHistory.push('/admin/ideas/statuses');\n  };\n\n  if (!isNilOrError(tenantLocales)) {\n    return (\n      <Section>\n        <GoBackButton onClick={goBack} />\n        <StyledSectionTitle>\n          <FormattedMessage {...messages.addIdeaStatus} />\n        </StyledSectionTitle>\n        <Formik\n          initialValues={{\n            color: '#b5b5b5',\n            title_multiloc: {},\n            description_multiloc: {},\n            code: 'proposed',\n          }}\n          onSubmit={handleSubmit}\n          render={renderFn}\n          validate={validate(tenantLocales)}\n        />\n      </Section>\n    );\n  }\n\n  return null;\n};\n\nexport default NewIdeaStatus;\n"],"sourceRoot":""}