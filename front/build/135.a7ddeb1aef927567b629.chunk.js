(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{"6SqH":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("vOnD")),i=n("96Cm"),l=a.default.h1.withConfig({displayName:"PageTitle",componentId:"sc-14bkf2f-0"})(["font-size:","px;line-height:40px;font-weight:600;padding:0;margin:0;margin-bottom:15px;"],i.fontSizes.xxxl);t.default=l},VcYg:function(e,t,n){"use strict";n("+2oP"),n("07d7"),n("pjDv"),n("PKPk"),n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("3bBZ"),n("ENF9"),n("5DmW");var r=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("yq1k"),n("JTJg"),n("TeQF"),n("ma9I"),n("2B1R"),n("sMBO");var i=r(n("o0o1")),l=r(n("RIqP")),u=r(n("yXPU")),o=r(n("J4zp")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(r,l,u):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),f=n("dtw8"),d=r(n("daXl")),s=r(n("rqWd")),p=r(n("+ZiE")),g=r(n("6SqH")),m=r(n("jrlq")),b=r(n("2fl8")),v=n("iP56"),y=n("KLnl"),h=r(n("JUYq")),w=n("Rw3A"),O=r(n("D7uz")),x=r(n("vOnD")),P=n("96Cm"),j=n("LVxk");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=x.default.h2.withConfig({displayName:"Detect__StyledH2",componentId:"sc-1ga3wne-0"})(["font-size:","px;"],P.fontSizes.xl),S=(0,x.default)(v.Box).withConfig({displayName:"Detect__ButtonsContainer",componentId:"sc-1ga3wne-1"})(["> *{margin-right:8px;}"]),I=(0,f.withRouter)((0,w.injectIntl)((function(e){var t=e.params.viewId,n=e.intl.formatMessage,r=(0,c.useState)(!1),a=(0,o.default)(r,2),f=a[0],w=a[1],x=(0,c.useState)([]),P=(0,o.default)(x,2),E=P[0],C=P[1],I=(0,d.default)(t),_="/admin/insights/".concat(t,"/edit");if((0,y.isNilOrError)(I))return null;var T=function(){var e=(0,u.default)(i.default.mark((function e(){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),n=k(E),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=15;break}return a=r.value,e.prev=6,e.next=9,(0,j.addInsightsCategory)(t,a);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n.e(e.t1);case 20:return e.prev=20,n.f(),e.finish(20);case 23:w(!1),h.default.push(_);case 25:case"end":return e.stop()}}),e,null,[[2,17,20,23],[6,11]])})));return function(){return e.apply(this,arguments)}}();return c.default.createElement(c.default.Fragment,null,c.default.createElement(m.default,null),c.default.createElement(v.Box,{p:"60px","data-testid":"insightsDetect"},c.default.createElement(g.default,null,n(O.default.detectCategoriesTitle)),c.default.createElement(v.Box,{display:"flex",mb:"32px"},c.default.createElement(b.default,{buttonStyle:"text",icon:"arrow-back",padding:"0px",linkTo:_},n(O.default.detectCategoriesGoBack))),c.default.createElement(s.default,null,c.default.createElement(v.Box,{w:"60%",mb:"40px"},c.default.createElement(D,null,n(O.default.detectCategoriesSectionTitle)),I.length>0?c.default.createElement("p",null,n(O.default.detectCategoriesDescription)):c.default.createElement("p",{"data-testid":"insightsDetectEmptyDescription"},n(O.default.detectCategoriesEmpty))),I.length>0&&c.default.createElement(c.default.Fragment,null,c.default.createElement(v.Box,{display:"flex",flexWrap:"wrap",mb:"60px"},I.map((function(e){return c.default.createElement(p.default,{mr:"8px",mb:"8px",label:e.attributes.name,variant:E.includes(e.attributes.name)?"primary":"default",key:e.id,size:"large",onIconClick:(t=e.attributes.name,function(){E.includes(t)?C(E.filter((function(e){return e!==t}))):C([].concat((0,l.default)(E),[t]))})});var t}))),c.default.createElement(S,{display:"flex","data-testid":"insightsDetectButtonContainer"},c.default.createElement(b.default,{buttonStyle:"admin-dark",disabled:0===E.length,processing:f,onClick:T},1===E.length?n(O.default.detectCategoriesAddCategory):n(O.default.detectCategoriesAddCategories),E.length?" (".concat(E.length,")"):""),c.default.createElement(b.default,{buttonStyle:"secondary",linkTo:_},n(O.default.detectCategoriesCancel)))))))})));t.default=I},daXl:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("J4zp")),i=n("q1tI"),l=n("r+Pz"),u=function(e){var t=(0,i.useState)(void 0),n=(0,a.default)(t,2),r=n[0],u=n[1];return(0,i.useEffect)((function(){var t=(0,l.insightsDetectedCategoriesStream)(e).observable.subscribe((function(e){u(e.data)}));return function(){return t.unsubscribe()}}),[e]),r};t.default=u},"r+Pz":function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.insightsDetectedCategoriesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.default.get(o({apiEndpoint:"".concat(i.API_PATH,"/").concat(c(e)),cacheStream:!1},t))},n("ma9I");var a=r(n("lSNA")),i=n("p0gT"),l=r(n("1Kqg"));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){return"insights/views/".concat(e,"/detected_categories")}}}]);
//# sourceMappingURL=135.a7ddeb1aef927567b629.chunk.js.map