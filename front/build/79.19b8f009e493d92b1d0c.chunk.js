(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"2PIV":function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var o=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormQuestionRow=void 0;var l=o(n("pVnL")),i=o(n("lwsE")),r=o(n("W8MJ")),u=o(n("PJYZ")),c=o(n("7W2i")),s=o(n("a1gu")),d=o(n("Nsbk")),f=o(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=l?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),m=n("ifvJ"),v=n("KLnl"),g=n("iP56"),y=n("gzy/"),h=o(n("2fl8")),P=o(n("yiTP")),O=o(n("phbu")),b=n("Rw3A"),E=o(n("Fe+T"));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,s.default)(this,n)}}var M=function(e){(0,c.default)(n,e);var t=_(n);function n(e){var o;return(0,i.default)(this,n),o=t.call(this,e),(0,f.default)((0,u.default)(o),"onChangeLocale",(function(e){o.setState({selectedLocale:e})})),(0,f.default)((0,u.default)(o),"onChangeTitle",(function(e,t){if(t){var n=x(x({},o.props.titleMultiloc),{},(0,f.default)({},t,e));o.props.onChange(n)}})),o.state={selectedLocale:null},o}return(0,r.default)(n,[{key:"render",value:function(){var e=this.state.selectedLocale,t=this.props,n=t.titleMultiloc,o=t.onSave,a=t.onCancel,l=t.tenantLocales;return p.default.createElement(y.Row,{className:"e2e-form-question-row"},p.default.createElement(y.TextCell,null,e&&p.default.createElement(g.LocaleSwitcher,{onSelectedLocaleChange:this.onChangeLocale,locales:(0,v.isNilOrError)(l)?[]:l,selectedLocale:e,values:{titleMultiloc:n}})),p.default.createElement(y.TextCell,{className:"expand"},e&&p.default.createElement(g.Input,{autoFocus:!0,value:n[e],locale:e,type:"text",onChange:this.onChangeTitle})),p.default.createElement(h.default,{className:"e2e-form-question-save",buttonStyle:"secondary",onClick:o},p.default.createElement(b.FormattedMessage,E.default.saveQuestion)),p.default.createElement(h.default,{className:"e2e-form-question-cancel",buttonStyle:"secondary",onClick:a},p.default.createElement(b.FormattedMessage,E.default.cancelFormQuestion)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,v.isNilOrError)(e.locale)||t.selectedLocale?null:{selectedLocale:e.locale}}}]),n}(p.PureComponent);t.FormQuestionRow=M;var I=(0,m.adopt)({locale:p.default.createElement(P.default,null),tenantLocales:p.default.createElement(O.default,null)}),j=function(e){return p.default.createElement(I,e,(function(t){return p.default.createElement(M,(0,l.default)({},t,e))}))};t.default=j},"3Bzs":function(e,t,n){"use strict";n("TeQF"),n("SuFq");var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("yq1k"),n("FZtP");var a=o(n("lwsE")),l=o(n("W8MJ")),i=o(n("PJYZ")),r=o(n("7W2i")),u=o(n("a1gu")),c=o(n("Nsbk")),s=o(n("lSNA")),d=o(n("q1tI")),f=n("T89o"),p=n("DtyJ"),m=n("ahDk"),v=o(n("aTp4")),g=n("YT04"),y=n("KLnl");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,u.default)(this,n)}}var P=function(e){(0,r.default)(n,e);var t=h(n);function n(e){var o;return(0,a.default)(this,n),o=t.call(this,e),(0,s.default)((0,i.default)(o),"inputProps$",void 0),(0,s.default)((0,i.default)(o),"subscriptions",void 0),o.state={pollQuestions:void 0},o}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.participationContextType,o=t.participationContextId;this.inputProps$=new p.BehaviorSubject({participationContextType:n,participationContextId:o}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(e,t){return(0,v.default)(e,t)})),(0,m.tap)((function(){return e.setState({pollQuestions:void 0})})),(0,m.filter)((function(e){var t=e.participationContextType,n=e.participationContextId;return(0,f.isString)(n)&&["project","phase"].includes(t)})),(0,m.switchMap)((function(e){var t=e.participationContextType,n=e.participationContextId;return(0,g.pollQuestionsStream)(n,t).observable}))).subscribe((function(t){return e.setState({pollQuestions:(0,y.isNilOrError)(t)?t:t.data})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.participationContextId,n=e.participationContextType;this.inputProps$.next({participationContextId:t,participationContextType:n})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.pollQuestions)}}]),n}(d.default.Component);t.default=P},"3zZJ":function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var o=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OptionForm=void 0,n("2B1R");var l=o(n("pVnL")),i=o(n("lwsE")),r=o(n("W8MJ")),u=o(n("PJYZ")),c=o(n("7W2i")),s=o(n("a1gu")),d=o(n("Nsbk")),f=o(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=l?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),m=n("ifvJ"),v=n("KLnl"),g=o(n("DQwL")),y=n("Flqw"),h=o(n("3A/8")),P=o(n("2fl8")),O=n("FvIY"),b=n("gzy/"),E=o(n("9OUh")),w=o(n("Ya8P")),T=o(n("P6f+")),x=n("Rw3A"),_=o(n("Fe+T")),M=o(n("vOnD")),I=n("96Cm");function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,s.default)(this,n)}}var R=M.default.div.withConfig({displayName:"OptionForm__Container",componentId:"kzitrt-0"})([""]),C=M.default.div.withConfig({displayName:"OptionForm__OptionsContainer",componentId:"kzitrt-1"})(["margin-left:67px;"]),k=(0,M.default)(P.default).withConfig({displayName:"OptionForm__StyledButton",componentId:"kzitrt-2"})(["margin-bottom:20px;"]),A=M.default.div.withConfig({displayName:"OptionForm__DisabledDragHandle",componentId:"kzitrt-3"})(["color:",";padding:1rem;"],I.colors.clGreyOnGreyBackground),q=function(e){(0,c.default)(n,e);var t=S(n);function n(e){var o;return(0,i.default)(this,n),o=t.call(this,e),(0,f.default)((0,u.default)(o),"closeRow",(function(){o.setState({editingId:null})})),(0,f.default)((0,u.default)(o),"editOption",(function(e){return function(){o.setState({editingId:e})}})),(0,f.default)((0,u.default)(o),"addOption",(function(){o.setState({editingId:"new"})})),(0,f.default)((0,u.default)(o),"deleteOption",(function(e){return function(){(0,y.deletePollOption)(e)}})),o.state={editingId:null},o}return(0,r.default)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.question,o=t.collapse,a=t.pollOptions,i=this.state.editingId;return p.default.createElement(R,{key:n.id,id:n.id,className:"e2e-options-form"},p.default.createElement(b.Row,null,p.default.createElement(A,null,p.default.createElement(O.Icon,{name:"sort"})),p.default.createElement(b.TextCell,{className:"expand"},p.default.createElement(x.FormattedMessage,(0,l.default)({},_.default.optionsFormHeader,{values:{questionTitle:p.default.createElement(h.default,{value:n.attributes.title_multiloc})}}))),p.default.createElement(P.default,{className:"e2e-collapse-option-form",onClick:o,buttonStyle:"secondary"},p.default.createElement(x.FormattedMessage,_.default.editOptionSave))),p.default.createElement(C,null,p.default.createElement(b.List,{key:(0,v.isNilOrError)(a)?0:a.length+("new"===i?1:0)},!(0,v.isNilOrError)(a)&&p.default.createElement(p.default.Fragment,null,p.default.createElement(T.default,{question:n}),a.map((function(t){return i===t.id?p.default.createElement(E.default,{key:t.id,mode:"edit",closeRow:e.closeRow,optionId:t.id,titleMultiloc:t.attributes.title_multiloc}):p.default.createElement(w.default,{key:t.id,pollOptionId:t.id,pollOptionTitle:t.attributes.title_multiloc,deleteOption:e.deleteOption(t.id),editOption:e.editOption(t.id)})}))),"new"===i?p.default.createElement(E.default,{key:"new",mode:"new",questionId:n.id,closeRow:this.closeRow}):p.default.createElement(k,{className:"e2e-add-option",buttonStyle:"secondary",icon:"create",onClick:this.addOption,autoFocus:!0},p.default.createElement(x.FormattedMessage,_.default.addAnswerChoice)))))}}]),n}(p.PureComponent);t.OptionForm=q;var F=(0,m.adopt)({pollOptions:function(e){var t=e.question,n=e.render;return p.default.createElement(g.default,{questionId:t.id},n)}}),Q=function(e){return p.default.createElement(F,e,(function(t){return p.default.createElement(q,(0,l.default)({},e,t))}))};t.default=Q},"6s0b":function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.addPollResponse=function(e,t,n,o){return s.apply(this,arguments)},t.exportPollResponses=function(e,t,n){return d.apply(this,arguments)},t.getPollResponses=function(e,t){return r.default.get({apiEndpoint:"".concat(i.API_PATH,"/").concat(t,"s/").concat(e,"/poll_responses/responses_count")})};var a=o(n("o0o1"));n("ma9I"),n("2B1R");var l=o(n("yXPU")),i=n("p0gT"),r=o(n("1Kqg")),u=n("QyKF"),c=n("Iab2");function s(){return(s=(0,l.default)(a.default.mark((function e(t,n,o,l){var u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.add("".concat(i.API_PATH,"/").concat(n,"s/").concat(t,"/poll_responses"),{response:{response_options_attributes:o.map((function(e){return{option_id:e}}))}});case 2:return u=e.sent,l&&r.default.fetchAllWith({dataId:[l]}),e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,l.default)(a.default.mark((function e(t,n,o){var l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.requestBlob)("".concat(i.API_PATH,"/").concat(n,"s/").concat(t,"/poll_responses/as_xlsx"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");case 2:l=e.sent,(0,c.saveAs)(l,o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"9OUh":function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var o=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormOptionRow=void 0;var l=o(n("pVnL")),i=o(n("lwsE")),r=o(n("W8MJ")),u=o(n("PJYZ")),c=o(n("7W2i")),s=o(n("a1gu")),d=o(n("Nsbk")),f=o(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=l?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),m=n("ifvJ"),v=n("KLnl"),g=n("iP56"),y=n("gzy/"),h=o(n("2fl8")),P=o(n("yiTP")),O=o(n("phbu")),b=n("Flqw"),E=n("Rw3A"),w=o(n("Fe+T"));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,s.default)(this,n)}}var I=function(e){(0,c.default)(n,e);var t=M(n);function n(e){var o;return(0,i.default)(this,n),o=t.call(this,e),(0,f.default)((0,u.default)(o),"onSelectedLocaleChange",(function(e){o.setState({selectedLocale:e})})),(0,f.default)((0,u.default)(o),"onChangeTitle",(function(e,t){t&&o.setState((function(n){return{titleMultiloc:_(_({},n.titleMultiloc),{},(0,f.default)({},t,e))}}))})),(0,f.default)((0,u.default)(o),"onSave",(function(){var e=o.props,t=e.mode,n=e.questionId,a=e.closeRow,l=e.optionId,i=o.state.titleMultiloc;"new"===t&&n&&(0,b.addPollOption)(n,i).then((function(){a()})),"edit"===t&&l&&(0,b.updatePollOption)(l,i).then((function(){a()}))})),o.state={selectedLocale:e.locale||null,titleMultiloc:e.titleMultiloc||{}},o}return(0,r.default)(n,[{key:"componentDidUpdate",value:function(e){e.optionId!==this.props.optionId&&this.setState({titleMultiloc:this.props.titleMultiloc||{}})}},{key:"render",value:function(){var e=this.state,t=e.selectedLocale,n=e.titleMultiloc,o=this.props,a=o.closeRow,l=o.tenantLocales;return p.default.createElement(y.Row,{className:"e2e-form-option-row"},p.default.createElement(y.TextCell,null,t&&p.default.createElement(g.LocaleSwitcher,{onSelectedLocaleChange:this.onSelectedLocaleChange,locales:(0,v.isNilOrError)(l)?[]:l,selectedLocale:t,values:{titleMultiloc:n}})),p.default.createElement(y.TextCell,{className:"expand"},t&&p.default.createElement(g.Input,{autoFocus:!0,value:null==n?void 0:n[t],locale:t,type:"text",onChange:this.onChangeTitle})),p.default.createElement(h.default,{className:"e2e-form-option-save",buttonStyle:"secondary",onClick:this.onSave},p.default.createElement(E.FormattedMessage,w.default.saveOption)),p.default.createElement(h.default,{className:"e2e-form-option-cancel",buttonStyle:"secondary",onClick:a},p.default.createElement(E.FormattedMessage,w.default.cancelOption)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,v.isNilOrError)(e.locale)||t.selectedLocale?null:{selectedLocale:e.locale}}}]),n}(p.PureComponent);t.FormOptionRow=I;var j=(0,m.adopt)({locale:p.default.createElement(P.default,null),tenantLocales:p.default.createElement(O.default,null)}),S=function(e){return p.default.createElement(j,e,(function(t){return p.default.createElement(I,(0,l.default)({},t,e))}))};t.default=S},DQwL:function(e,t,n){"use strict";n("TeQF"),n("SuFq");var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("FZtP");var a=o(n("lwsE")),l=o(n("W8MJ")),i=o(n("PJYZ")),r=o(n("7W2i")),u=o(n("a1gu")),c=o(n("Nsbk")),s=o(n("lSNA")),d=o(n("q1tI")),f=n("T89o"),p=n("DtyJ"),m=n("ahDk"),v=o(n("aTp4")),g=n("Flqw"),y=n("KLnl");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,u.default)(this,n)}}var P=function(e){(0,r.default)(n,e);var t=h(n);function n(e){var o;return(0,a.default)(this,n),o=t.call(this,e),(0,s.default)((0,i.default)(o),"inputProps$",void 0),(0,s.default)((0,i.default)(o),"subscriptions",void 0),o.state={pollOptions:void 0},o}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.questionId;this.inputProps$=new p.BehaviorSubject({questionId:t}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(e,t){return(0,v.default)(e,t)})),(0,m.tap)((function(){return e.setState({pollOptions:void 0})})),(0,m.filter)((function(e){var t=e.questionId;return(0,f.isString)(t)})),(0,m.switchMap)((function(e){var t=e.questionId;return(0,g.pollOptionsStream)(t).observable}))).subscribe((function(t){return e.setState({pollOptions:(0,y.isNilOrError)(t)?t:t.data})}))]}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.pollOptions)}}]),n}(d.default.Component);t.default=P},"Fe+T":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,n("JRPe").defineMessages)({titlePollTab:{id:"app.containers.AdminPage.ProjectEdit.PollTab.titlePollTab",defaultMessage:"Polls settings and results"},pollTabSubtitle:{id:"app.containers.AdminPage.ProjectEdit.PollTab.pollTabSubtitle",defaultMessage:"Here you can create poll questions, set the answer choices for participants to choose from for each question, decide whether you want participants to only be able to select one answer choice (single choice) or multiple answer choices (multiple choice), and export the poll results. You can create multiple poll questions within one poll."},deleteQuestion:{id:"app.containers.AdminPage.ProjectEdit.PollTab.deleteQuestion",defaultMessage:"Delete"},editPollAnswersButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.PollTab.editPollAnswersButtonLabel",defaultMessage:"Answer choices"},noOptions:{id:"app.containers.AdminPage.ProjectEdit.PollTab.noOptions",defaultMessage:"No options"},noOptionsTooltip:{id:"app.containers.AdminPage.ProjectEdit.PollTab.noOptionsTooltip",defaultMessage:"The poll will not be answerable as it is, all questions must have options"},wrongMax:{id:"app.containers.AdminPage.ProjectEdit.PollTab.wrongMax",defaultMessage:"Wrong maximum"},maxOverTheMaxTooltip:{id:"app.containers.AdminPage.ProjectEdit.PollTab.maxOverTheMaxTooltip",defaultMessage:"The maximum number of choices is greater than the number of options"},maxUnderTheMinTooltip:{id:"app.containers.AdminPage.ProjectEdit.PollTab.maxUnderTheMinTooltip",defaultMessage:"A multiple answer question should allow at least two answers."},oneOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.oneOption",defaultMessage:"Only one option"},oneOptionsTooltip:{id:"app.containers.AdminPage.ProjectEdit.PollTab.oneOptionsTooltip",defaultMessage:"Poll respondents have only one choice"},addPollQuestion:{id:"app.containers.AdminPage.ProjectEdit.PollTab.addPollQuestion",defaultMessage:"Add a poll question"},cancelFormQuestion:{id:"app.containers.AdminPage.ProjectEdit.PollTab.cancelFormQuestion",defaultMessage:"Cancel"},saveQuestion:{id:"app.containers.AdminPage.ProjectEdit.PollTab.saveQuestion",defaultMessage:"Save"},optionsFormHeader:{id:"app.containers.AdminPage.ProjectEdit.PollTab.optionsFormHeader",defaultMessage:"Manage options for: {questionTitle}"},editOptionSave:{id:"app.containers.AdminPage.ProjectEdit.PollTab.editOptionSave",defaultMessage:"Save"},deleteOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.deleteOption",defaultMessage:"Delete"},editOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.editOption",defaultMessage:"Edit"},addAnswerChoice:{id:"app.containers.AdminPage.ProjectEdit.PollTab.addAnswerChoice",defaultMessage:"Add an answer choice"},saveOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.saveOption",defaultMessage:"Save"},cancelOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.cancelOption",defaultMessage:"Cancel"},exportPollResults:{id:"app.containers.AdminPage.ProjectEdit.PollTab.exportPollResults",defaultMessage:"Export poll results"},pollExportFileName:{id:"app.containers.AdminPage.ProjectEdit.PollTab.pollExportFileName",defaultMessage:"poll_export"},singleOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.singleOption",defaultMessage:"Single choice"},multipleOption:{id:"app.containers.AdminPage.ProjectEdit.PollTab.multipleOption",defaultMessage:"Multiple choice"},applyQuestionSettings:{id:"app.containers.AdminPage.ProjectEdit.PollTab.applyQuestionSettings",defaultMessage:"Apply"}});t.default=o},Flqw:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.pollOptionsStream=function(e){return l.default.get({apiEndpoint:"".concat(a.API_PATH,"/poll_questions/").concat(e,"/poll_options")})},t.addPollOption=function(e,t){return l.default.add("".concat(a.API_PATH,"/poll_questions/").concat(e,"/poll_options"),{title_multiloc:t})},t.pollOptionStream=function(e){return l.default.get({apiEndpoint:"".concat(a.API_PATH,"/poll_options/").concat(e)})},t.deletePollOption=function(e){return l.default.delete("".concat(a.API_PATH,"/poll_options/").concat(e),e)},t.updatePollOption=function(e,t){return l.default.update("".concat(a.API_PATH,"/poll_options/").concat(e),e,{title_multiloc:t})},n("ma9I");var a=n("p0gT"),l=o(n("1Kqg"))},Lcxk:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WrongMaxChoiceIndicator=void 0;var a=o(n("pVnL")),l=o(n("q1tI")),i=o(n("DQwL")),r=n("ifvJ"),u=n("KLnl"),c=o(n("Fe+T")),s=n("Rw3A"),d=n("k+0W"),f=(0,o(n("vOnD")).default)(d.Indicator).withConfig({displayName:"WrongMaxChoiceIndicator__StyledIndicator",componentId:"gl9n8v-0"})(["margin-right:15px;"]),p=function(e){var t=e.options,n=e.maxAnswers;return"number"==typeof n&&n<2?l.default.createElement(f,null,l.default.createElement(d.StyledIconTooltip,{content:l.default.createElement(s.FormattedMessage,c.default.maxUnderTheMinTooltip)}),l.default.createElement(s.FormattedMessage,c.default.wrongMax)):!(0,u.isNilOrError)(t)&&n&&t.length<n?l.default.createElement(f,{isWarning:!0},l.default.createElement(d.StyledIconTooltip,{content:l.default.createElement(s.FormattedMessage,c.default.maxOverTheMaxTooltip)}),l.default.createElement(s.FormattedMessage,c.default.wrongMax)):null};t.WrongMaxChoiceIndicator=p;var m=(0,r.adopt)({options:function(e){var t=e.questionId,n=e.render;return l.default.createElement(i.default,{questionId:t},n)}});t.default=function(e){return l.default.createElement(m,e,(function(t){return l.default.createElement(p,(0,a.default)({},e,t))}))}},"P6f+":function(e,t,n){"use strict";n("SuFq"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var o=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.QuestionDetailsForm=void 0,n("qePV"),n("tkto");var l=o(n("lwsE")),i=o(n("W8MJ")),r=o(n("PJYZ")),u=o(n("7W2i")),c=o(n("a1gu")),s=o(n("Nsbk")),d=o(n("lSNA")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=l?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),p=n("YT04"),m=o(n("2fl8")),v=n("gzy/"),g=n("iP56"),y=o(n("Lcxk")),h=n("Rw3A"),P=o(n("Fe+T")),O=o(n("vOnD"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,c.default)(this,n)}}var x=O.default.div.withConfig({displayName:"QuestionDetailsForm__FormContainer",componentId:"sc-45ohnc-0"})(["display:flex;justify-content:flex-start;flex-direction:row;align-items:center;"]),_=(0,O.default)(g.Input).withConfig({displayName:"QuestionDetailsForm__StyledInput",componentId:"sc-45ohnc-1"})(["max-width:100px;input{padding:10px;}margin-left:5px;"]),M=function(e){(0,u.default)(n,e);var t=T(n);function n(e){var o;return(0,l.default)(this,n),o=t.call(this,e),(0,d.default)((0,r.default)(o),"typeOptions",void 0),(0,d.default)((0,r.default)(o),"changeMaxAnswers",(function(e){o.setState({maxAnswers:Number(e)})})),(0,d.default)((0,r.default)(o),"changeQuestionType",(function(e){var t=e.value;o.setState({questionType:t,maxAnswers:"single_option"===t?null:2})})),(0,d.default)((0,r.default)(o),"validate",(function(){var e=o.props.question,t=o.state,n=t.questionType,a=t.maxAnswers,l=w(w({},n!==e.attributes.question_type?{question_type:n}:{}),a!==e.attributes.max_options?{max_options:a}:{});return{diff:l,isValid:Object.keys(l).length>0&&("multiple_options"===n&&"number"==typeof a&&a>=2||"single_option"===n&&null===a)}})),(0,d.default)((0,r.default)(o),"onSave",(function(){var e=o.props.question,t=o.validate(),n=t.diff;t.isValid&&(0,p.updatePollQuestion)(e.id,n)})),o.state={maxAnswers:e.question.attributes.max_options,questionType:e.question.attributes.question_type,typeOptions:[]},o}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.intl.formatMessage;this.setState({typeOptions:[{label:e(P.default.singleOption),value:"single_option"},{label:e(P.default.multipleOption),value:"multiple_options"}]})}},{key:"render",value:function(){var e=this.props.question,t=this.state,n=t.maxAnswers,o=t.questionType,a=t.typeOptions,l=this.validate().isValid;return f.default.createElement(v.Row,null,f.default.createElement(x,null,f.default.createElement(g.Select,{options:a,value:o,onChange:this.changeQuestionType}),"multiple_options"===o&&f.default.createElement(_,{type:"number",onChange:this.changeMaxAnswers,value:String(n),min:"2"})),f.default.createElement(x,null,f.default.createElement(y.default,{questionId:e.id,maxAnswers:n}),f.default.createElement(m.default,{className:"e2e-form-question-settings-save",buttonStyle:"secondary",onClick:this.onSave,disabled:!l},f.default.createElement(h.FormattedMessage,P.default.applyQuestionSettings))))}}]),n}(f.PureComponent);t.QuestionDetailsForm=M;var I=(0,h.injectIntl)(M);t.default=I},Q9Os:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("o0o1"));n("sMBO"),n("ma9I");var l=o(n("yXPU")),i=o(n("lwsE")),r=o(n("W8MJ")),u=o(n("PJYZ")),c=o(n("7W2i")),s=o(n("a1gu")),d=o(n("Nsbk")),f=o(n("lSNA")),p=o(n("q1tI")),m=n("KuRP"),v=o(n("QTSN")),g=o(n("2fl8")),y=n("6s0b"),h=n("Rw3A"),P=o(n("Fe+T")),O=n("T89o");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,s.default)(this,n)}}var T=function(e){(0,c.default)(n,e);var t=w(n);function n(e){var o;return(0,i.default)(this,n),o=t.call(this,e),(0,f.default)((0,u.default)(o),"trackExportPoll",(function(){(0,m.trackEventByName)(v.default.clickExportPoll.name,{extra:E({},o.props)})})),(0,f.default)((0,u.default)(o),"handleExportPollResults",(0,l.default)(a.default.mark((function e(){var t,n,l,i,r,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props,n=t.intl,l=n.formatMessage,i=n.formatDate,r=t.participationContextName,u=t.participationContextId,c=t.participationContextType,o.trackExportPoll(),o.setState({exporting:!0}),e.next=5,(0,y.exportPollResponses)(u,c,"".concat(l(P.default.pollExportFileName),"_").concat((0,O.snakeCase)(r),"_").concat(i(Date.now()),".xlsx"));case 5:o.setState({exporting:!1});case 6:case"end":return e.stop()}}),e)})))),o.state={exporting:!1},o}return(0,r.default)(n,[{key:"render",value:function(){var e=this.props.className,t=this.state.exporting;return p.default.createElement(g.default,{buttonStyle:"secondary",icon:"download",onClick:this.handleExportPollResults,processing:t,className:e},p.default.createElement(h.FormattedMessage,P.default.exportPollResults))}}]),n}(p.default.PureComponent),x=(0,h.injectIntl)(T);t.default=x},QTSN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={clickExportPoll:{name:"Export Poll results clicked"}}},QVQo:function(e,t,n){"use strict";n("SuFq");var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AdminProjectPoll=void 0,n("TeQF"),n("2B1R");var a=o(n("pVnL")),l=o(n("lwsE")),i=o(n("W8MJ")),r=o(n("7W2i")),u=o(n("a1gu")),c=o(n("Nsbk")),s=o(n("q1tI")),d=n("KLnl"),f=n("dtw8"),p=n("ifvJ"),m=o(n("vOnD")),v=n("T89o"),g=o(n("M7uY")),y=o(n("M8tl")),h=o(n("3Bzs")),P=o(n("yiTP")),O=o(n("UjkJ")),b=o(n("Q9Os")),E=o(n("UEAk")),w=o(n("3A/8")),T=n("Loij"),x=o(n("Fe+T")),_=n("Rw3A"),M=o(n("V3HD"));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,u.default)(this,n)}}var j=m.default.div.withConfig({displayName:"poll__Container",componentId:"xkuy20-0"})(["display:flex;flex-direction:column;"]),S=m.default.div.withConfig({displayName:"poll__PhaseContainer",componentId:"xkuy20-1"})(["&:not(:last-child){margin-bottom:50px;}"]),R=m.default.div.withConfig({displayName:"poll__HeaderContainer",componentId:"xkuy20-2"})(["display:flex;justify-content:space-between;align-items:flex-start;padding:0;margin:0;margin-bottom:30px;"]),C=m.default.div.withConfig({displayName:"poll__Left",componentId:"xkuy20-3"})(["margin-right:80px;"]),k=function(e){(0,r.default)(n,e);var t=I(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.phases,o=e.locale,a=e.localize;if((0,d.isNilOrError)(t)||(0,d.isNilOrError)(o))return null;if("continuous"===t.attributes.process_type&&"poll"===t.attributes.participation_method)return s.default.createElement(O.default,{name:"polls"},s.default.createElement(j,null,s.default.createElement(R,null,s.default.createElement(C,null,s.default.createElement(T.SectionTitle,null,s.default.createElement(_.FormattedMessage,x.default.titlePollTab)),s.default.createElement(T.SectionDescription,null,s.default.createElement(_.FormattedMessage,x.default.pollTabSubtitle))),s.default.createElement(b.default,{participationContextType:"project",participationContextId:t.id,participationContextName:a(t.attributes.title_multiloc)})),s.default.createElement(h.default,{participationContextId:t.id,participationContextType:"project"},(function(e){return s.default.createElement(E.default,{participationContextType:"project",participationContextId:t.id,pollQuestions:(0,v.isError)(e)?null:e})}))));if("timeline"===t.attributes.process_type&&!(0,d.isNilOrError)(n)){var l=n.filter((function(e){return"poll"===e.attributes.participation_method}));return 0===l.length?null:s.default.createElement(O.default,{name:"polls"},s.default.createElement(j,null,s.default.createElement(T.SectionTitle,null,s.default.createElement(_.FormattedMessage,x.default.titlePollTab)),s.default.createElement(T.SectionDescription,null,s.default.createElement(_.FormattedMessage,x.default.pollTabSubtitle)),l.map((function(e){return s.default.createElement(S,{key:e.id},s.default.createElement(R,null,s.default.createElement(C,null,s.default.createElement("h3",null,s.default.createElement(w.default,{value:e.attributes.title_multiloc}))),s.default.createElement(b.default,{participationContextId:e.id,participationContextType:"phase",participationContextName:a(e.attributes.title_multiloc)})),s.default.createElement(h.default,{participationContextId:e.id,participationContextType:"phase"},(function(t){return s.default.createElement(E.default,{participationContextType:"phase",participationContextId:e.id,pollQuestions:(0,v.isError)(t)?null:t})})))}))))}return null}}]),n}(s.default.PureComponent);t.AdminProjectPoll=k;var A=(0,M.default)(k),q=(0,p.adopt)({phases:function(e){var t=e.params,n=e.render;return s.default.createElement(y.default,{projectId:t.projectId},n)},project:function(e){var t=e.params,n=e.render;return s.default.createElement(g.default,{projectId:t.projectId},n)},locale:s.default.createElement(P.default,null)}),F=(0,f.withRouter)((function(e){return s.default.createElement(q,e,(function(t){return s.default.createElement(A,(0,a.default)({},e,t))}))}));t.default=F},UEAk:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var o=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PollAdminForm=void 0,n("pDQq"),n("fbCW"),n("2B1R");var l=o(n("lwsE")),i=o(n("W8MJ")),r=o(n("PJYZ")),u=o(n("7W2i")),c=o(n("a1gu")),s=o(n("Nsbk")),d=o(n("lSNA")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=l?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),p=n("l8Oe"),m=o(n("DDKl")),v=n("T89o"),g=o(n("vOnD")),y=n("YT04"),h=n("KLnl"),P=n("gzy/"),O=o(n("2fl8")),b=o(n("VT6N")),E=o(n("2PIV")),w=o(n("3zZJ")),T=n("Rw3A"),x=o(n("Fe+T"));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,c.default)(this,n)}}var I=(0,g.default)(P.List).withConfig({displayName:"PollAdminForm__StyledList",componentId:"sc-4zghe4-0"})(["margin:10px 0;"]),j=function(e){(0,u.default)(n,e);var t=M(n);function n(e){var o;return(0,l.default)(this,n),o=t.call(this,e),(0,d.default)((0,r.default)(o),"handleDragRow",(function(e,t){if(!o.state.isProcessing){var n=o.listItems();if(!n)return;var a=(0,v.clone)(n);a.splice(e,1),a.splice(t,0,n[e]),o.setState({itemsWhileDragging:a})}})),(0,d.default)((0,r.default)(o),"handleDropRow",(function(e,t){var n=o.listItems();if(n){var a=n.find((function(t){return t.id===e}));a&&a.attributes.ordering!==t?(o.setState({isProcessing:!0}),(0,y.reorderPollQuestion)(e,t).then((function(){return o.setState({isProcessing:!1})}))):o.setState({itemsWhileDragging:null})}})),(0,d.default)((0,r.default)(o),"listItems",(function(){var e=o.state.itemsWhileDragging,t=o.props.pollQuestions;return e||t})),(0,d.default)((0,r.default)(o),"startNewQuestion",(function(){o.setState({newQuestionTitle:{},editingOptionsId:null})})),(0,d.default)((0,r.default)(o),"changeNewQuestion",(function(e){o.setState({newQuestionTitle:e})})),(0,d.default)((0,r.default)(o),"saveNewQuestion",(function(){var e=o.props,t=e.participationContextId,n=e.participationContextType,a=o.state.newQuestionTitle;n&&t&&a&&(0,y.addPollQuestion)(t,n,a).then((function(e){o.setState({newQuestionTitle:null,editingOptionsId:e.data.id})}))})),(0,d.default)((0,r.default)(o),"cancelNewQuestion",(function(){o.setState({newQuestionTitle:null})})),(0,d.default)((0,r.default)(o),"editQuestion",(function(e,t){return function(){o.setState({editingQuestionId:e,editingQuestionTitle:t,editingOptionsId:null})}})),(0,d.default)((0,r.default)(o),"changeEditingQuestion",(function(e){o.setState({editingQuestionTitle:e})})),(0,d.default)((0,r.default)(o),"saveEditingQuestion",(function(){var e=o.state,t=e.editingQuestionTitle,n=e.editingQuestionId;n&&(0,y.updatePollQuestion)(n,{title_multiloc:t}).then((function(){o.setState({editingQuestionId:null,editingQuestionTitle:{}})}))})),(0,d.default)((0,r.default)(o),"cancelEditQuestion",(function(){o.setState({editingQuestionId:null,editingQuestionTitle:{}})})),(0,d.default)((0,r.default)(o),"deleteQuestion",(function(e){return function(){var t=o.props,n=t.participationContextId,a=t.participationContextType;(0,y.deletePollQuestion)(e,n,a)}})),(0,d.default)((0,r.default)(o),"editOptions",(function(e){return function(){o.setState({editingOptionsId:e})}})),(0,d.default)((0,r.default)(o),"closeEditingOptions",(function(){o.setState({editingOptionsId:null})})),o.state={newQuestionTitle:null,editingQuestionId:null,editingQuestionTitle:{},editingOptionsId:null,itemsWhileDragging:null,isProcessing:!1},o}return(0,i.default)(n,[{key:"componentDidUpdate",value:function(e){var t=this.state.itemsWhileDragging,n=e.pollQuestions&&e.pollQuestions.map((function(e){return e.id})),o=this.props.pollQuestions&&this.props.pollQuestions.map((function(e){return e.id}));t&&!(0,v.isEqual)(n,o)&&this.setState({itemsWhileDragging:null})}},{key:"render",value:function(){var e=this,t=this.listItems()||[],n=this.state,o=n.newQuestionTitle,a=n.editingQuestionId,l=n.editingQuestionTitle,i=n.editingOptionsId;return f.default.createElement(f.default.Fragment,null,f.default.createElement(I,{key:t.length+(o?1:0)},!(0,h.isNilOrError)(t)&&t.map((function(n,r){return f.default.createElement(f.Fragment,{key:n.id},a===n.id?f.default.createElement(E.default,{titleMultiloc:l,onChange:e.changeEditingQuestion,onSave:e.saveEditingQuestion,onCancel:e.cancelEditQuestion}):i===n.id?f.default.createElement(w.default,{question:n,collapse:e.closeEditingOptions}):f.default.createElement(b.default,{question:n,isLastItem:r===t.length-1&&!o,index:r,onDelete:e.deleteQuestion(n.id),onEdit:e.editQuestion(n.id,n.attributes.title_multiloc),onEditOptions:e.editOptions(n.id),handleDragRow:e.handleDragRow,handleDropRow:e.handleDropRow}))})),o&&f.default.createElement(E.default,{key:"new",titleMultiloc:o,onChange:this.changeNewQuestion,onSave:this.saveNewQuestion,onCancel:this.cancelNewQuestion})),!o&&!i&&f.default.createElement(O.default,{className:"e2e-add-question-btn",buttonStyle:"cl-blue",icon:"plus-circle",onClick:this.startNewQuestion},f.default.createElement(T.FormattedMessage,x.default.addPollQuestion)))}}]),n}(f.PureComponent);t.PollAdminForm=j;var S=(0,p.DragDropContext)(m.default)(j);t.default=S},VT6N:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("q1tI")),l=o(n("2fl8")),i=n("gzy/"),r=o(n("3A/8")),u=o(n("vOnD")),c=n("Rw3A"),s=o(n("Fe+T")),d=o(n("k+0W")),f=(0,u.default)(l.default).withConfig({displayName:"QuestionRow__EditTitleButton",componentId:"sc-1x9nts9-0"})(["display:inline-block;"]),p=function(e){var t=e.question,n=e.isLastItem,o=e.index,u=e.onDelete,p=e.onEdit,m=e.onEditOptions,v=e.handleDropRow,g=e.handleDragRow;return a.default.createElement(i.SortableRow,{key:t.id,id:t.id,className:"e2e-question-row",index:o,lastItem:n,moveRow:g,dropRow:v},a.default.createElement(i.TextCell,{className:"expand"},a.default.createElement(r.default,{value:t.attributes.title_multiloc}),a.default.createElement(f,{className:"e2e-edit-question",onClick:p,buttonStyle:"text",icon:"edit",ariaLabel:"edit"})),a.default.createElement(d.default,{questionId:t.id}),a.default.createElement(l.default,{className:"e2e-delete-question",onClick:u,buttonStyle:"text",icon:"delete"},a.default.createElement(c.FormattedMessage,s.default.deleteQuestion)),a.default.createElement(l.default,{className:"e2e-edit-options",onClick:m,buttonStyle:"secondary"},a.default.createElement(c.FormattedMessage,s.default.editPollAnswersButtonLabel)))};t.default=p},YT04:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.pollQuestionsStream=function(e,t){return r.default.get({apiEndpoint:"".concat(i.API_PATH,"/").concat(t,"s/").concat(e,"/poll_questions")})},t.addPollQuestion=function(e,t,n){return c.apply(this,arguments)},t.pollQuestionStream=function(e){return r.default.get({apiEndpoint:"".concat(i.API_PATH,"/poll_questions/").concat(e)})},t.deletePollQuestion=function(e,t,n){return s.apply(this,arguments)},t.reorderPollQuestion=function(e,t){return r.default.update("".concat(i.API_PATH,"/poll_questions/").concat(e,"/reorder"),e,{ordering:t})},t.updatePollQuestion=function(e,t){return r.default.update("".concat(i.API_PATH,"/poll_questions/").concat(e),e,t)};var a=o(n("o0o1")),l=o(n("yXPU"));n("ma9I");var i=n("p0gT"),r=o(n("1Kqg")),u=n("KLnl");function c(){return(c=(0,l.default)(a.default.mark((function e(t,n,o){var l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.add("".concat(i.API_PATH,"/poll_questions"),{participation_context_id:t,participation_context_type:(0,u.capitalizeParticipationContextType)(n),title_multiloc:o});case 2:return l=e.sent,r.default.fetchAllWith({apiEndpoint:["".concat(i.API_PATH,"/").concat(n,"s/").concat(t,"/poll_questions")]}),e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=(0,l.default)(a.default.mark((function e(t,n,o){var l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.delete("".concat(i.API_PATH,"/poll_questions/").concat(t),t);case 2:return l=e.sent,r.default.fetchAllWith({apiEndpoint:["".concat(i.API_PATH,"/").concat(o,"s/").concat(n,"/poll_questions")]}),e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},Ya8P:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("q1tI")),l=o(n("vOnD")),i=o(n("3A/8")),r=o(n("2fl8")),u=n("gzy/"),c=n("Rw3A"),s=o(n("Fe+T")),d=(0,l.default)(r.default).withConfig({displayName:"OptionRow__StyledButton",componentId:"sc-17jqq3p-0"})(["display:inline-block;"]),f=function(e){var t=e.pollOptionId,n=e.pollOptionTitle,o=e.deleteOption,l=e.editOption;return a.default.createElement(u.Row,{key:t},a.default.createElement(u.TextCell,{className:"expand"},a.default.createElement(i.default,{value:n}),a.default.createElement(d,{className:"e2e-edit-option",onClick:l,buttonStyle:"text",icon:"edit"})),a.default.createElement(r.default,{className:"e2e-delete-option",onClick:o,buttonStyle:"text",icon:"delete"},a.default.createElement(c.FormattedMessage,s.default.deleteOption)))};t.default=f},"k+0W":function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StyledIconTooltip=t.Indicator=void 0;var a=o(n("pVnL")),l=o(n("q1tI")),i=o(n("DQwL")),r=n("ifvJ"),u=n("KLnl"),c=o(n("Fe+T")),s=n("Rw3A"),d=o(n("vOnD")),f=n("gzy/"),p=n("iP56"),m=n("96Cm"),v=(0,d.default)(f.TextCell).withConfig({displayName:"WrongOptionsIndicator__Indicator",componentId:"okv6nq-0"})(["display:flex;color:",";"],(function(e){return e.isWarning?m.colors.adminOrangeIcons:m.colors.clRed}));t.Indicator=v;var g=(0,d.default)(p.IconTooltip).withConfig({displayName:"WrongOptionsIndicator__StyledIconTooltip",componentId:"okv6nq-1"})(["margin-right:5px;"]);t.StyledIconTooltip=g;var y=function(e){var t=e.options;return(0,u.isNilOrError)(t)?null:0===t.length?l.default.createElement(v,null,l.default.createElement(g,{content:l.default.createElement(s.FormattedMessage,c.default.noOptionsTooltip)}),l.default.createElement(s.FormattedMessage,c.default.noOptions)):1===t.length?l.default.createElement(v,null,l.default.createElement(g,{content:l.default.createElement(s.FormattedMessage,c.default.oneOptionsTooltip)}),l.default.createElement(s.FormattedMessage,c.default.oneOption)):null},h=(0,r.adopt)({options:function(e){var t=e.questionId,n=e.render;return l.default.createElement(i.default,{questionId:t},n)}});t.default=function(e){return l.default.createElement(h,e,(function(t){return l.default.createElement(y,(0,a.default)({},e,t))}))}}}]);
//# sourceMappingURL=79.19b8f009e493d92b1d0c.chunk.js.map