{"version":3,"sources":["webpack:///./app/modules/commercial/user_custom_fields/admin/containers/CustomFields/RegistrationCustomFieldEdit/index.tsx","webpack:///./app/components/admin/TabbedResource/index.tsx","webpack:///./app/components/admin/PageTitle/index.tsx","webpack:///./app/components/UI/GoBackButton/messages.ts","webpack:///./app/modules/commercial/user_custom_fields/hooks/useUserCustomField.ts","webpack:///./app/components/UI/GoBackButton/index.tsx"],"names":["StyledGoBackButton","GoBackButton","RegistrationCustomFieldEdit","memo","customField","inputType","baseTabsUrl","tabs","formatMessage","intl","userCustomFieldId","params","children","localize","userCustomField","childrenWithExtraProps","React","cloneElement","isNilOrError","onClick","clHistory","push","id","label","messages","fieldSettingsTab","url","className","name","attributes","input_type","isBuiltInField","answerOptionsTab","resource","title","title_multiloc","publicLink","withRouter","injectIntl","ResourceHeader","styled","div","TabbedNav","nav","props","theme","borderRadius","colors","separation","Tab","fontSizes","base","adminTextColor","ChildWrapper","adminContentBackground","getRegularExpression","tabUrl","RegExp","TabbedResource","tab","pathname","location","active","test","this","subtitle","SectionDescription","buttonStyle","icon","linkTo","FormattedMessage","viewPublicResource","length","map","feature","key","activeClassForTab","to","PureComponent","h1","xxxl","defineMessages","goBack","defaultMessage","useState","undefined","setUserCustomField","useEffect","subscription","userCustomFieldStream","observable","subscribe","data","unsubscribe","Container","size","padding","text"],"mappings":"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","file":"124.5e504685066011e1c95f.chunk.js","sourcesContent":["import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport clHistory from 'utils/cl-router/history';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport GoBackButton from 'components/UI/GoBackButton';\nimport TabbedResource from 'components/admin/TabbedResource';\n\n// services\nimport {\n  IUserCustomFieldData,\n  isBuiltInField,\n  IUserCustomFieldInputType,\n} from '../../../../services/userCustomFields';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\n// hooks\nimport useUserCustomField from '../../../../hooks/useUserCustomField';\nimport useLocalize from 'hooks/useLocalize';\n\nconst StyledGoBackButton = styled(GoBackButton)`\n  display: flex;\n  margin-bottom: 20px;\n`;\n\nexport interface Props {\n  children: JSX.Element | null;\n}\n\nconst RegistrationCustomFieldEdit = memo(\n  ({\n    intl: { formatMessage },\n    params: { userCustomFieldId },\n    children,\n  }: Props & WithRouterProps & InjectedIntlProps) => {\n    const localize = useLocalize();\n    const userCustomField = useUserCustomField(userCustomFieldId);\n    const hasOptions = (inputType: IUserCustomFieldInputType) => {\n      return inputType === 'select' || inputType === 'multiselect';\n    };\n\n    const goBack = () => {\n      clHistory.push('/admin/settings/registration');\n    };\n\n    const getTabs = (customField: IUserCustomFieldData) => {\n      const baseTabsUrl = `/admin/settings/registration/custom-fields/${customField.id}`;\n\n      const tabs = [\n        {\n          label: formatMessage(messages.fieldSettingsTab),\n          url: `${baseTabsUrl}/field-settings`,\n          className: 'field-settings',\n          name: 'fieldSettings',\n        },\n      ];\n\n      if (\n        hasOptions(customField.attributes.input_type) &&\n        !isBuiltInField(customField)\n      ) {\n        tabs.push({\n          label: formatMessage(messages.answerOptionsTab),\n          url: `${baseTabsUrl}/options`,\n          className: 'options',\n          name: 'options',\n        });\n      }\n\n      return tabs;\n    };\n\n    const childrenWithExtraProps = React.cloneElement(\n      children as React.ReactElement<any>,\n      { customField: userCustomField }\n    );\n\n    if (!isNilOrError(userCustomField)) {\n      return (\n        <>\n          <StyledGoBackButton onClick={goBack} />\n          <TabbedResource\n            tabs={getTabs(userCustomField)}\n            resource={{\n              title: localize(userCustomField.attributes.title_multiloc),\n              publicLink: '',\n            }}\n          >\n            {childrenWithExtraProps}\n          </TabbedResource>\n        </>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default withRouter(injectIntl(RegistrationCustomFieldEdit));\n","import React from 'react';\n\nimport { withRouter, WithRouterProps } from 'react-router';\nimport Link from 'utils/cl-router/Link';\n\n// style\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\n\n// localisation\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// typings\nimport { Message, ITab } from 'typings';\n\n// components\nimport FeatureFlag from 'components/FeatureFlag';\nimport Button from 'components/UI/Button';\nimport { SectionDescription } from 'components/admin/Section';\nimport Title from 'components/admin/PageTitle';\n\nconst ResourceHeader = styled.div`\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  margin-bottom: 30px;\n\n  @media print {\n    margin-bottom: 10px;\n  }\n\n  p {\n    margin-right: 40px;\n  }\n`;\n\nconst TabbedNav = styled.nav`\n  background: #fcfcfc;\n  border-radius: ${(props: any) => props.theme.borderRadius}\n    ${(props: any) => props.theme.borderRadius} 0 0;\n  padding-left: 44px;\n  display: flex;\n  border: 1px solid ${colors.separation};\n  border-bottom: 1px solid transparent;\n  @media print {\n    border: none;\n    padding: 0;\n    margin-bottom: 10px;\n  }\n`;\n\nconst Tab = styled.div`\n  list-style: none;\n  cursor: pointer;\n  display: flex;\n  margin-bottom: -1px;\n\n  &:first-letter {\n    text-transform: uppercase;\n  }\n\n  &:not(:last-child) {\n    margin-right: 40px;\n  }\n\n  a {\n    color: ${colors.label};\n    font-size: ${fontSizes.base}px;\n    font-weight: 400;\n    line-height: 1.5rem;\n    padding: 0;\n    padding-top: 1em;\n    padding-bottom: 1em;\n    border-bottom: 3px solid transparent;\n    transition: all 100ms ease-out;\n  }\n\n  &:not(.active):hover a {\n    color: ${colors.adminTextColor};\n    border-color: #ddd;\n  }\n\n  &.active a {\n    color: ${colors.adminTextColor};\n    border-color: ${colors.adminTextColor};\n  }\n`;\n\nconst ChildWrapper = styled.div`\n  margin-bottom: 60px;\n  padding: 42px;\n  border: 1px solid ${colors.separation};\n  background: ${colors.adminContentBackground};\n\n  @media print {\n    border: none;\n    padding: 0;\n    margin: 0;\n  }\n`;\n\ntype Props = {\n  resource: {\n    title: string;\n    publicLink?: string;\n    subtitle?: string;\n  };\n  messages?: {\n    viewPublicResource: Message;\n  };\n  tabs?: ITab[];\n};\n\ninterface State {}\n\nfunction getRegularExpression(tabUrl: string) {\n  return new RegExp(`^/([a-zA-Z]{2,3}(-[a-zA-Z]{2,3})?)(${tabUrl})(/)?$`);\n}\n\nclass TabbedResource extends React.PureComponent<\n  Props & WithRouterProps,\n  State\n> {\n  activeClassForTab = (tab: ITab) => {\n    const {\n      location: { pathname },\n    } = this.props;\n\n    return (\n      typeof tab.active === 'function'\n        ? tab.active(pathname)\n        : tab.active ||\n          (pathname && getRegularExpression(tab.url).test(location.pathname))\n    )\n      ? 'active'\n      : '';\n  };\n\n  render() {\n    const {\n      children,\n      resource: { title, subtitle, publicLink },\n      messages,\n      tabs,\n    } = this.props;\n\n    return (\n      <>\n        <ResourceHeader className=\"e2e-resource-header\">\n          <div>\n            <Title>{title}</Title>\n            {subtitle && <SectionDescription>{subtitle}</SectionDescription>}\n          </div>\n\n          {publicLink && messages && (\n            <Button buttonStyle=\"cl-blue\" icon=\"eye\" linkTo={publicLink}>\n              <FormattedMessage {...messages.viewPublicResource} />\n            </Button>\n          )}\n        </ResourceHeader>\n\n        {tabs && tabs.length > 0 && (\n          <TabbedNav className=\"e2e-resource-tabs\">\n            {tabs.map((tab) => {\n              if (tab.feature) {\n                return (\n                  <FeatureFlag key={tab.url} name={tab.feature}>\n                    <Tab\n                      key={tab.url}\n                      className={`${tab.name} ${this.activeClassForTab(tab)}`}\n                    >\n                      <Link to={tab.url}>{tab.label}</Link>\n                    </Tab>\n                  </FeatureFlag>\n                );\n              } else {\n                return (\n                  <Tab\n                    key={tab.url}\n                    className={`${tab.name} ${this.activeClassForTab(tab)}`}\n                  >\n                    <Link to={tab.url}>{tab.label}</Link>\n                  </Tab>\n                );\n              }\n            })}\n          </TabbedNav>\n        )}\n\n        <ChildWrapper>{children}</ChildWrapper>\n      </>\n    );\n  }\n}\n\nexport default withRouter(TabbedResource);\n","// style\nimport styled from 'styled-components';\nimport { fontSizes } from 'utils/styleUtils';\n\nexport default styled.h1`\n  font-size: ${fontSizes.xxxl}px;\n  line-height: 40px;\n  font-weight: 600;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 15px;\n`;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  goBack: {\n    id: 'app.components.GoBackButton.group.edit.goBack',\n    defaultMessage: 'Go back',\n  },\n});\n","import { useState, useEffect } from 'react';\nimport {\n  userCustomFieldStream,\n  IUserCustomFieldData,\n} from '../services/userCustomFields';\n\nexport default function useUserCustomField(userCustomFieldId: string) {\n  const [userCustomField, setUserCustomField] = useState<\n    IUserCustomFieldData | undefined | null | Error\n  >(undefined);\n\n  useEffect(() => {\n    const subscription = userCustomFieldStream(\n      userCustomFieldId\n    ).observable.subscribe((userCustomField) => {\n      setUserCustomField(userCustomField.data);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [userCustomFieldId]);\n\n  return userCustomField;\n}\n","import React, { PureComponent, FormEvent } from 'react';\nimport styled from 'styled-components';\nimport Button from 'components/UI/Button';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\nconst Container = styled.div`\n  display: inline-block;\n`;\n\ntype Props = {\n  onClick: (arg: FormEvent) => void;\n  className?: string;\n};\n\ninterface State {}\n\nexport default class GoBackButton extends PureComponent<Props, State> {\n  render() {\n    const { onClick, className } = this.props;\n\n    return (\n      <Container className={className || ''}>\n        <Button\n          onClick={onClick}\n          buttonStyle=\"text\"\n          icon=\"arrow-back\"\n          size=\"2\"\n          padding=\"0px\"\n          text={<FormattedMessage {...messages.goBack} />}\n        />\n      </Container>\n    );\n  }\n}\n"],"sourceRoot":""}