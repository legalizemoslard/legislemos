{"version":3,"sources":["webpack:///./app/components/InitiativesMap/InitiativePreview.tsx","webpack:///./app/components/PostCardsComponents/messages.ts","webpack:///./app/resources/GetInitiativesFilterCounts.tsx","webpack:///./app/containers/InitiativesIndexPage/messages.ts","webpack:///./app/containers/InitiativesIndexPage/SuccessCard.tsx","webpack:///./app/components/InitiativeCards/StatusFilterBox.tsx","webpack:///./app/components/AvatarBubbles/index.tsx","webpack:///./app/resources/GetInitiativeImage.tsx","webpack:///./app/components/CityLogoSection/index.tsx","webpack:///./app/components/PostCardsComponents/ViewButtons.tsx","webpack:///./app/components/UI/Card/index.tsx","webpack:///./app/components/InitiativeButton/index.tsx","webpack:///./app/components/Map/index.tsx","webpack:///./app/components/PostShowComponents/Body.tsx","webpack:///./app/resources/GetUser.tsx","webpack:///./app/resources/GetRandomAvatars.tsx","webpack:///./app/components/UI/LeafletMap/events.ts","webpack:///./app/components/InitiativeCards/messages.ts","webpack:///./app/components/Author/messages.ts","webpack:///./app/containers/InitiativesIndexPage/InitiativeInfoContent/index.tsx","webpack:///./app/components/InitiativesMap/tracks.ts","webpack:///./app/components/InitiativeCards/tracks.ts","webpack:///./app/components/CityLogoSection/messages.ts","webpack:///./app/components/InitiativeCard/index.tsx","webpack:///./app/components/InitiativesMap/messages.ts","webpack:///./app/containers/InitiativesIndexPage/index.tsx","webpack:///./app/components/PostCardsComponents/tracks.ts","webpack:///./app/components/AvatarBubbles/messages.ts","webpack:///./app/containers/InitiativesIndexPage/InitiativesIndexMeta.tsx","webpack:///./app/components/InitiativesMap/index.tsx","webpack:///./app/resources/GetAvatars.tsx","webpack:///./app/components/InitiativeCards/SortFilterDropdown.tsx","webpack:///./app/components/InitiativeButton/messages.ts","webpack:///./app/components/InitiativeCards/index.tsx","webpack:///./app/services/avatars.ts","webpack:///./app/containers/InitiativesIndexPage/InitiativesHeader.tsx","webpack:///./app/resources/GetInitiativeMarkers.tsx","webpack:///./app/containers/InitiativesIndexPage/SuccessStories.tsx","webpack:///./app/components/Author/index.tsx","webpack:///./app/components/InitiativeCards/TopicFilterBox.tsx"],"names":["Container","styled","div","Title","h3","theme","colorText","fontSizes","xxl","media","smallerThanMinTablet","xl","Address","colors","label","base","small","MapMarkerIcon","Icon","Description","Footer","ViewInitiativeButton","Button","CommentsCount","span","biggerThanLargePhone","CommentIcon","InitiativePreview","event","preventDefault","initiative","props","isNilOrError","eventEmitter","emit","id","slug","attributes","type","this","locale","className","localize","initiativeAddress","get","initiativeBody","body_multiloc","value","title_multiloc","name","postId","postType","body","comments_count","fullWidth","onClick","createInitiativeClickHandler","FormattedMessage","messages","seeInitiative","PureComponent","InitiativePreviewWithHOCs","Data","adopt","initiativeId","render","inputProps","dataProps","defineMessages","map","defaultMessage","list","GetInitiativesFilterCounts","state","initiativesFilterCounts","undefined","queryParameters$","BehaviorSubject","queryParameters","subscriptions","pipe","omitBy","isNil","distinctUntilChanged","prev","next","isEqual","switchMap","initiativesFilterCountsStream","observable","of","subscribe","setState","forEach","subscription","unsubscribe","children","React","Component","metaTitle","invisibleTitleInitiativeCards","invisibleInitiativesPageTitle","metaDescription","header","headerPostingProposalDisabled","learnMoreAboutProposals","explanationTitle","constraints","explanationContent","startInitiative","successStoryTitle","success","footer","footerPostingDisabled","postingDisabledExplanation","Link","defaultCardStyle","biggerThanMinTablet","defaultCardHoverStyle","LocationIndication","borderRadius","LocationIcon","SuccessIndication","clGreen","SuccessTitle","large","SuccessImageContainer","smallerThanMaxTablet","SuccessImagePlaceholder","placeholderBg","SuccessImagePlaceholderIcon","SuccessImage","Image","SuccessCard","memo","page","imageUrl","pageSlug","location","to","src","alt","cover","dataprops","StatusFilterBox","selectedStatusId","initiativeStatuses","onChange","handleOnChange","useCallback","nextSelectedStatusId","length","statuses","filterCounts","selectedInitiativeFilters","initiative_status","project_publication_status","publication_status","EmptyContainer","width","height","AvatarImageBubble","img","size","index","overlap","UserCountBubble","bgColor","UserCountBubbleInner","digits","getFontSize","AvatarBubblesWithHoCs","avatarIds","context","userCountBgColor","formatMessage","intl","avatars","userCount","isNumber","bubbleSize","bubbleOverlap","imageSize","avatarsWithImage","filter","avatar","isError","avatarImagesCount","remainingUsers","remainingUsersDigits","toString","containerHeight","containerWidth","key","ScreenReaderOnly","numberOfUsers","ids","limit","data","meta","total","GetInitiativeImage","initiativeImage","initiativeImageId","resetOnChange","inputProps$","tap","isString","initiativeImageStream","LogoLink","a","TenantLogo","CityLogoSection","appConfiguration","currentTenantLogo","logo","medium","tenantSite","settings","core","organization_site","footerLocale","title","iframeTitle","href","target","injectIntl","darken","lightGreyishBlue","ListButton","MapButton","selectedView","isListViewSelected","isMapViewSelected","handleOnClick","trackEventByName","tracks","toggleDisplay","locationButtonWasClicked","pathname","selectedDisplayMode","role","buttonStyle","icon","padding","textColor","text","bgHoverColor","boxShadowHover","CardImageWrapper","CardImage","HeaderContentWrapper","hasHeader","Body","Card","bowser","mobile","tablet","TooltipContent","inMap","TooltipContentIcon","TooltipContentText","clBlueDark","disabledMessages","notPermitted","postingNotPermitted","lat","lng","disabledReason","action","enabled","redirectToInitiativeForm","clHistory","push","search","stringify","addQueryPrefix","onNewInitiativeButtonClick","extra","openSignUpInModal","flow","verification","verificationContext","openVerificationModal","tippyContent","ariaHidden","disabled","interactive","placement","content","hideOnClick","tabIndex","fontWeight","iconPos","LeafletMap","lazy","MapWrapper","BoxContainer","CloseButton","button","defaultOutline","CloseIcon","projectId","centerLatLng","zoomLevel","mapHeight","points","noMarkerClustering","zoomControlPosition","layersControlPosition","boxContent","onInit","onBoxClose","hideLegend","appConfig","useState","additionalLeafletConfig","setAdditionalLeafletConfig","center","useMemo","getCenter","zoom","getZoomLevel","tileProvider","getTileProvider","tileOptions","getTileOptions","leafletConfig","handleLeafletConfigChange","Suspense","fallback","onLeafletConfigChange","translateButtonClicked","color","windowSize","useTheme","smallerThanSmallTablet","windowWidth","viewportWidths","smallTablet","fontSize","outletComponents","dangerouslySetInnerHTML","__html","GetUser","user","userByIdStream","userBySlugStream","GetRandomAvatars","randomAvatarsStream","context_type","context_id","events","leafletMapCenterChange","leafletMapZoomChange","markerId","leafletMapHoveredMarkerChange","leafletMapSelectedMarkerChange","latLng","leafletMapClicked","leafletMapCenter$","observeEvent","eventValue","x","y","publishReplay","refCount","leafletMapZoom$","leafletMapHoveredMarker$","leafletMapSelectedMarker$","leafletMapClicked$","debounceTime","trending","random","popular","newest","oldest","sortTitle","searchPlaceholder","showInitiatives","showXInitiatives","xInitiatives","showMore","resetFilters","noInitiativesForFilter","tryOtherFilter","a11y_totalInitiatives","a11y_postedBy","Content","Bold","InitiativeInfoContent","tenant","voteThreshold","initiatives","voting_threshold","daysLimit","days_limit","values","link","orgName","organization_name","clickOnInitiativeMapMarker","createInitiativeFromMap","loadMoreProposals","sortingFilter","topicsFilter","StyledAuthor","Author","FooterInner","Spacer","CommentCount","CommentInfo","InitiativeCard","initiativeAuthor","isUndefined","initiativeTitle","initiativeAuthorId","initiativeImageUrl","commentsCount","cardClassNames","item","join","onCardClick","authorId","createdAt","published_at","xComments","InitiativeCardWithHoC","noInitiativesWithLocation","postInitiativeHere","main","FooterBanner","colorMain","FooterMessage","h2","xxxl","StyledContentContainer","ContentContainer","background","Padding","maxWidth","invisibleTitleMessage","InitiativesIndexMeta","authUser","tenantLocales","window","initiativesIndexTitle","initiativesIndexDescription","Helmet","unread_notifications","property","InitiativesIndexMetaWithHoc","StyledWarning","Warning","InitiativesMap","element","addInitiativeButtonElement","Initiatives","InitiativePoints","Initiative","location_point_geojson","selectedInitiativeId","InitiativeId","position","popup","setLatLng","setContent","openOn","handleInitiativeMarkerSelected","handleMapClicked","getPoints","initiativeMarkers","prevProps","noInitiativesWithLocationMessage","handleMapOnInit","deselectInitiative","ref","bindInitiativeCreationButton","InitiativesMapWithRouter","withRouter","GetAvatars","combineLatest","avatarByIdStream","selectedValue","alignment","options","selected","multipleSelectionAllowed","left","mobileLeft","right","mobileRight","InitialLoading","MobileSearchInput","SearchInput","MobileFilterButton","MobileFiltersSidebarWrapper","AboveContent","filterColumnWidth","AboveContentLeft","AboveContentRight","InitiativesCount","ContentLeft","Loading","EmptyContainerInner","InitiativeIcon","EmptyMessage","EmptyMessageMainLine","EmptyMessageSubLine","InitiativesList","StyledInitiativeCard","ContentRight","FiltersSidebarContainer","ClearFiltersText","ClearFiltersButton","DesktopSearchInput","StyledInitiativesStatusFilter","StyledInitiativesTopicsFilter","TopicFilterBox","StyledViewButtons","ViewButtons","ShowMoreButton","InitiativeCards","filtersModalOpened","previouslySelectedInitiativeFilters","onLoadMore","sort","onChangeSorting","searchTerm","onChangeSearchTerm","handleInitiativeFiltersOnChange","topics","newSelectedInitiativeFilters","applyFilter","onInitiativeFiltering","areas","desktopSearchInputClearButton","click","mobileSearchInputClearButton","oldQueryParameters","hasMore","querying","loadingMore","hasInitiatives","biggerThanLargeTablet","largeTablet","biggerThanSmallTablet","filtersActive","filtersSidebar","handleInitiativeFiltersOnResetAndApply","initiativeCount","placeholder","ariaLabel","searchAriaLabel","setClearButtonRef","handleDesktopSearchInputClearButtonRef","handleSearchOnChange","handleStatusOnChangeAndApplyFilter","handleStatusOnChange","selectedTopicIds","handleTopicsOnChangeAndApplyFilter","handleTopicsOnChange","tagName","Spinner","opened","close","closeModalAndRevertFilters","animateInOut","topBar","onReset","handleInitiativeFiltersOnReset","onClose","bottomBar","newInitiativesFilterCounts","bottomBarButtonText","initiativesCount","buttonText","closeModalAndApplyFilters","handleMobileSearchInputClearButtonRef","openFiltersModal","filterMessage","selectView","handleSortOnChange","loadMore","processing","rgba","publicationStatus","WithFiltersSidebarWithHoCs","withTheme","avatarId","streams","apiEndpoint","API_PATH","cacheStream","streamParams","maxPageWidth","signedOutHeaderTitleFontSize","xxxxl","signedOutHeaderTitleFontWeight","StyledAvatarBubbles","AvatarBubbles","StyledInitiativeInfoContent","InitiativesHeader","postingPermission","styledOrgName","GetInitiativeMarkers","initiativesMarkersStream","SuccessIcon","StoriesContainer","SuccessStories","successStories","mode","story","page_slug","image_url","isRtl","smallPhone","AuthorContainer","StyledAvatar","Avatar","AuthorMeta","AuthorNameContainer","TimeAgo","isLinkToProfile","showAvatar","showModeration","avatarBadgeBgColor","horizontalLayout","underline","author","userId","authorCanModerate","canModerateProject","moderator","canModerate","FormattedRelative","newsSelectedTopicIds","topic"],"mappings":"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","file":"72.d2270b5af0992441b723.chunk.js","sourcesContent":["import React, { PureComponent, FormEvent } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\nimport { get } from 'lodash-es';\n\n// utils\nimport eventEmitter from 'utils/eventEmitter';\nimport { IOpenPostPageModalEvent } from 'containers/App';\n\n// components\nimport T from 'components/T';\nimport Button from 'components/UI/Button';\nimport { Icon } from 'cl2-component-library';\nimport Body from 'components/PostShowComponents/Body';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\n\n// i18n\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// style\nimport styled from 'styled-components';\nimport { colors, media, fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  flex: 1;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  padding: 30px;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst Title = styled.h3`\n  color: ${({ theme }) => theme.colorText};\n  width: calc(100% - 50px);\n  margin: 0;\n  padding: 0;\n  font-size: ${fontSizes.xxl}px;\n  font-weight: 500;\n  line-height: normal;\n\n  ${media.smallerThanMinTablet`\n    font-size: ${fontSizes.xl}px;\n  `}\n`;\n\nconst Address = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  line-height: normal;\n  display: flex;\n  align-items: center;\n  margin-top: 20px;\n\n  ${media.smallerThanMinTablet`\n    font-size: ${fontSizes.small}px;\n    margin-top: 18px;\n  `}\n`;\n\nconst MapMarkerIcon = styled(Icon)`\n  flex: 0 0 20px;\n  width: 20px;\n  height: 20px;\n  fill: ${colors.label};\n  margin-right: 5px;\n  margin-top: -2px;\n`;\n\nconst Description = styled.div`\n  flex: 0 1 100%;\n  margin-bottom: 1rem;\n  overflow: hidden;\n  position: relative;\n  margin-top: 20px;\n\n  &::after {\n    background: linear-gradient(0deg, white, rgba(255, 255, 255, 0));\n    bottom: 0;\n    content: '';\n    display: block;\n    height: 3rem;\n    left: 0;\n    right: 0;\n    position: absolute;\n  }\n\n  ${media.smallerThanMinTablet`\n    margin-top: 18px;\n  `}\n`;\n\nconst Footer = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1 0 auto;\n  justify-content: space-between;\n  margin-top: 10px;\n  margin-bottom: 25px;\n`;\n\nconst ViewInitiativeButton = styled(Button)`\n  justify-self: flex-end;\n`;\n\nconst CommentsCount = styled.span`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  display: none;\n\n  ${media.biggerThanLargePhone`\n    display: block;\n  `}\n`;\n\nconst CommentIcon = styled(Icon)`\n  width: 25px;\n  height: 25px;\n  fill: ${colors.label};\n  margin-right: 6px;\n  margin-top: 2px;\n`;\n\ninterface InputProps {\n  initiativeId?: string | null;\n  className?: string;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  initiative: GetInitiativeChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass InitiativePreview extends PureComponent<\n  Props & InjectedLocalized,\n  State\n> {\n  createInitiativeClickHandler = (event: FormEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n\n    const { initiative } = this.props;\n\n    if (!isNilOrError(initiative)) {\n      eventEmitter.emit<IOpenPostPageModalEvent>('cardClick', {\n        id: initiative.id,\n        slug: initiative.attributes.slug,\n        type: 'initiative',\n      });\n    }\n  };\n\n  render() {\n    const { initiative, locale, className, localize } = this.props;\n\n    if (!isNilOrError(initiative)) {\n      const initiativeAddress = get(\n        initiative,\n        'attributes.location_description'\n      );\n      const initiativeBody = localize(initiative.attributes.body_multiloc);\n\n      return (\n        <Container className={className}>\n          <Title>\n            <T value={initiative.attributes.title_multiloc} />\n          </Title>\n\n          {initiativeAddress && (\n            <Address>\n              <MapMarkerIcon name=\"mapmarker\" />\n              {initiativeAddress}\n            </Address>\n          )}\n\n          <Description>\n            <Body\n              postId={initiative.id}\n              postType=\"initiative\"\n              locale={locale}\n              body={initiativeBody}\n            />\n          </Description>\n\n          <Footer>\n            <CommentsCount>\n              <CommentIcon name=\"comments\" />\n              {initiative.attributes.comments_count}\n            </CommentsCount>\n          </Footer>\n\n          <ViewInitiativeButton\n            fullWidth={true}\n            onClick={this.createInitiativeClickHandler}\n          >\n            <FormattedMessage {...messages.seeInitiative} />\n          </ViewInitiativeButton>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst InitiativePreviewWithHOCs = injectLocalize<Props>(InitiativePreview);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => (\n      <InitiativePreviewWithHOCs {...inputProps} {...dataProps} />\n    )}\n  </Data>\n);\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  map: {\n    id: 'app.components.PostCardsComponents.map',\n    defaultMessage: 'Map',\n  },\n  list: {\n    id: 'app.components.PostCardsComponents.list',\n    defaultMessage: 'List',\n  },\n});\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, map } from 'rxjs/operators';\nimport { isEqual, omitBy, isNil } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport {\n  IInitiativesFilterCounts,\n  initiativesFilterCountsStream,\n} from 'services/initiatives';\nimport { IQueryParameters } from './GetInitiatives';\n\ntype children = (\n  renderProps: GetInitiativesFilterCountsChildProps\n) => JSX.Element | null;\n\ninterface Props {\n  queryParameters: Partial<IQueryParameters> | null;\n  children?: children;\n}\n\ninterface State {\n  initiativesFilterCounts: IInitiativesFilterCounts | undefined | null;\n}\n\nexport type GetInitiativesFilterCountsChildProps =\n  | IInitiativesFilterCounts\n  | undefined\n  | null;\n\nexport default class GetInitiativesFilterCounts extends React.Component<\n  Props,\n  State\n> {\n  private queryParameters$: BehaviorSubject<Partial<IQueryParameters> | null>;\n  private subscriptions: Subscription[];\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      initiativesFilterCounts: undefined,\n    };\n  }\n\n  componentDidMount() {\n    this.queryParameters$ = new BehaviorSubject(this.props.queryParameters);\n\n    this.subscriptions = [\n      this.queryParameters$\n        .pipe(\n          map((queryParameters) =>\n            queryParameters ? omitBy(queryParameters, isNil) : queryParameters\n          ),\n          distinctUntilChanged((prev, next) => isEqual(prev, next)),\n          switchMap((queryParameters) => {\n            if (queryParameters) {\n              return initiativesFilterCountsStream({ queryParameters })\n                .observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((initiativesFilterCounts) => {\n          this.setState({\n            initiativesFilterCounts: !isNilOrError(initiativesFilterCounts)\n              ? initiativesFilterCounts\n              : null,\n          });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    this.queryParameters$.next(this.props.queryParameters);\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiativesFilterCounts } = this.state;\n    return (children as children)(initiativesFilterCounts);\n  }\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  metaTitle: {\n    id: 'app.containers.InitiativesIndexPage.metaTitle',\n    defaultMessage: 'All Initiatives • {orgName}',\n  },\n  invisibleTitleInitiativeCards: {\n    id: 'app.containers.InitiativesIndexPage.invisibleTitleInitiativeCards',\n    defaultMessage: 'All the initiatives taking place in {orgName}',\n  },\n  invisibleInitiativesPageTitle: {\n    id: 'app.containers.InitiativesIndexPage.invisibleInitiativesPageTitle',\n    defaultMessage: 'Discover Initiatives',\n  },\n  metaDescription: {\n    id: 'app.containers.InitiativesIndexPage.metaDescription',\n    defaultMessage: 'Explore and support initiatives conducted in {orgName}',\n  },\n  header: {\n    id: 'app.containers.InitiativesIndexPage.header',\n    defaultMessage:\n      'Start your own initiative and make your voice heard by {styledOrgName}',\n  },\n  headerPostingProposalDisabled: {\n    id: 'app.containers.InitiativesIndexPage.headerPostingProposalDisabled',\n    defaultMessage: 'Explore citizen proposals for {styledOrgName}',\n  },\n  learnMoreAboutProposals: {\n    id: 'app.containers.InitiativesIndexPage.learnMoreAboutProposals',\n    defaultMessage: 'Learn more about how proposals work.',\n  },\n  explanationTitle: {\n    id: 'app.containers.InitiativesIndexPage.explanationTitle',\n    defaultMessage: 'How do initiatives work?',\n  },\n  constraints: {\n    id: 'app.containers.InitiativesIndexPage.constraints',\n    defaultMessage: '{voteThreshold} votes within {daysLimit} days',\n  },\n  explanationContent: {\n    id: 'app.containers.InitiativesIndexPage.explanationContent',\n    defaultMessage:\n      'You have an idea to improve or change Vancouver, but it doesn’t fit one of the existing consultations? Start your own initiative, get {constraints} and Vancouver will get back to you. {link}',\n  },\n  startInitiative: {\n    id: 'app.containers.InitiativesIndexPage.startInitiative',\n    defaultMessage: 'Start an initiative',\n  },\n  successStoryTitle: {\n    id: 'app.containers.InitiativesIndexPage.successStoryTitle',\n    defaultMessage: 'Learn from success stories',\n  },\n  success: {\n    id: 'app.containers.InitiativesIndexPage.success',\n    defaultMessage: 'success',\n  },\n  footer: {\n    id: 'app.containers.InitiativesIndexPage.footer',\n    defaultMessage: 'Start your own initiative and make your voice heard',\n  },\n  footerPostingDisabled: {\n    id: 'app.containers.InitiativesIndexPage.footerPostingDisabled',\n    defaultMessage: 'Support citizen proposals and make your voice heard!',\n  },\n  postingDisabledExplanation: {\n    id: 'app.containers.InitiativesIndexPage.postingDisabledExplanation',\n    defaultMessage:\n      'New proposals are currently on hold. Please browse and lend your feedback and support to existing proposals!',\n  },\n});\n","import React, { memo } from 'react';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Image from 'components/UI/Image';\n\n// style\nimport styled from 'styled-components';\nimport {\n  media,\n  colors,\n  fontSizes,\n  defaultCardStyle,\n  defaultCardHoverStyle,\n} from 'utils/styleUtils';\n\n// intl\nimport messages from './messages';\nimport T from 'components/T';\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// data\nimport { adopt } from 'react-adopt';\nimport GetPage, { GetPageChildProps } from 'resources/GetPage';\nimport { isNilOrError } from 'utils/helperUtils';\nimport Link from 'utils/cl-router/Link';\n\nconst Container: any = styled(Link)`\n  flex: 1;\n  padding: 18px 20px;\n  ${defaultCardStyle};\n\n  &:not(:last-child) {\n    margin-right: 20px;\n  }\n\n  ${media.biggerThanMinTablet`\n    ${defaultCardHoverStyle};\n  `}\n`;\n\nconst LocationIndication = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 2;\n  color: white;\n  background: rgba(0, 0, 0, 0.75);\n  border-radius: ${({ theme }) => theme.borderRadius};\n  padding: 7px 10px;\n`;\n\nconst LocationIcon = styled(Icon)`\n  height: 20px;\n  width: 20px;\n  margin-right: 7px;\n`;\n\nconst SuccessIndication = styled.span`\n  color: white;\n  background: ${colors.clGreen};\n  border-radius: ${({ theme }) => theme.borderRadius};\n  padding: 4px 7px;\n  text-transform: uppercase;\n  font-weight: 600;\n  width: auto;\n`;\n\nconst SuccessTitle = styled.h3`\n  color: ${({ theme }) => theme.colorText};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  font-size: ${fontSizes.large}px;\n  margin-bottom: 15px;\n  margin-top: 20px;\n`;\n\nconst SuccessImageContainer = styled.div`\n  width: 100%;\n  height: 150px;\n  flex-grow: 0;\n  flex-shrink: 0;\n  flex-basis: 150px;\n  display: flex;\n  margin-right: 10px;\n  margin-bottom: 25px;\n  overflow: hidden;\n  position: relative;\n  border-radius: ${({ theme }) => theme.borderRadius};\n  ${media.smallerThanMaxTablet`\n    height: 100px;\n  `}\n`;\n\nconst SuccessImagePlaceholder = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${colors.placeholderBg};\n`;\n\nconst SuccessImagePlaceholderIcon = styled(Icon)`\n  height: 45px;\n  fill: #fff;\n`;\n\nconst SuccessImage = styled(Image)`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\ninterface InputProps {\n  location: string;\n  pageSlug: string;\n  imageUrl: string;\n}\n\ninterface DataProps {\n  page: GetPageChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst SuccessCard = memo(({ page, imageUrl, pageSlug, location }: Props) => {\n  if (isNilOrError(page)) return null;\n\n  return (\n    <Container to={`/pages/${pageSlug}`}>\n      <SuccessImageContainer>\n        <SuccessImagePlaceholder>\n          <SuccessImagePlaceholderIcon name=\"successStory\" />\n        </SuccessImagePlaceholder>\n\n        <LocationIndication>\n          <LocationIcon name=\"position\" />\n          {location}\n        </LocationIndication>\n\n        {imageUrl && <SuccessImage src={imageUrl} alt=\"\" cover={true} />}\n      </SuccessImageContainer>\n      <SuccessIndication>\n        <FormattedMessage {...messages.success} />\n      </SuccessIndication>\n      <SuccessTitle>\n        <T value={page.attributes.title_multiloc} />\n      </SuccessTitle>\n    </Container>\n  );\n});\n\nconst Data = adopt<DataProps, InputProps>({\n  page: ({ pageSlug, render }) => <GetPage slug={pageSlug}>{render}</GetPage>,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataprops) => <SuccessCard {...inputProps} {...dataprops} />}\n  </Data>\n);\n","import React, { memo, useCallback } from 'react';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport StatusFilter from 'components/FilterBoxes/StatusFilter';\n\n// resources\nimport GetInitiativeStatuses, {\n  GetInitiativeStatusesChildProps,\n} from 'resources/GetInitiativeStatuses';\nimport GetInitiativesFilterCounts, {\n  GetInitiativesFilterCountsChildProps,\n} from 'resources/GetInitiativesFilterCounts';\n\n// styling\nimport styled from 'styled-components';\n\n// typings\nimport { IQueryParameters } from 'resources/GetInitiatives';\n\nconst Container = styled.div``;\n\ninterface InputProps {\n  selectedStatusId: string | null | undefined;\n  selectedInitiativeFilters: Partial<IQueryParameters>;\n  onChange: (arg: string | null) => void;\n  className?: string;\n}\n\ninterface DataProps {\n  initiativeStatuses: GetInitiativeStatusesChildProps;\n  initiativesFilterCounts: GetInitiativesFilterCountsChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst StatusFilterBox = memo<Props>(\n  ({\n    selectedStatusId,\n    initiativeStatuses,\n    initiativesFilterCounts,\n    onChange,\n    className,\n  }) => {\n    const handleOnChange = useCallback(\n      (nextSelectedStatusId: string | null) => {\n        onChange(nextSelectedStatusId);\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      []\n    );\n\n    if (!isNilOrError(initiativeStatuses) && initiativeStatuses.length > 0) {\n      return (\n        <Container className={className}>\n          <StatusFilter\n            type=\"initiative\"\n            statuses={initiativeStatuses}\n            filterCounts={initiativesFilterCounts}\n            selectedStatusId={selectedStatusId}\n            onChange={handleOnChange}\n          />\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  initiativeStatuses: <GetInitiativeStatuses />,\n  initiativesFilterCounts: ({ selectedInitiativeFilters, render }) => {\n    const queryParameters = {\n      ...selectedInitiativeFilters,\n      initiative_status: undefined,\n      project_publication_status: 'published',\n      publication_status: 'published',\n    } as Partial<IQueryParameters>;\n\n    return (\n      <GetInitiativesFilterCounts queryParameters={queryParameters}>\n        {render}\n      </GetInitiativesFilterCounts>\n    );\n  },\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <StatusFilterBox {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport { isNumber, isError } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// services\nimport { IAvatarData } from 'services/avatars';\n\n// resources\nimport GetRandomAvatars from 'resources/GetRandomAvatars';\nimport GetAvatars from 'resources/GetAvatars';\n\n// i18n\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\n// styling\nimport styled from 'styled-components';\nimport { colors } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\n\nconst getFontSize = (size: number, digits: number) => {\n  if (size >= 34) {\n    if (digits <= 2) {\n      return 14;\n    }\n\n    if (digits === 3) {\n      return 12;\n    }\n\n    if (digits >= 4) {\n      return 11;\n    }\n  } else {\n    if (digits <= 2) {\n      return 12;\n    }\n\n    if (digits === 3) {\n      return 11;\n    }\n\n    if (digits >= 4) {\n      return 10;\n    }\n  }\n\n  return 14;\n};\n\nconst EmptyContainer = styled.div``;\n\nconst Container = styled.div<{ width: number; height: number }>`\n  flex-shrink: 0;\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n  position: relative;\n`;\n\nconst AvatarImageBubble = styled.img<{\n  overlap: number;\n  index: number;\n  size: number;\n}>`\n  width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  border-radius: 50%;\n  border: solid 2px #fff;\n  text-indent: -9999px;\n  position: absolute;\n  z-index: ${(props) => props.index + 1};\n  left: ${(props) => props.index * (props.size - props.overlap)}px;\n  object-fit: cover;\n  object-position: center;\n`;\n\nconst UserCountBubble = styled.div<{\n  overlap: number;\n  index: number;\n  size: number;\n  bgColor: string;\n}>`\n  width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-bottom: 0;\n  border-radius: 50%;\n  border: solid 2px #fff;\n  background: ${(props: any) => props.bgColor};\n  position: absolute;\n  z-index: ${(props) => props.index + 1};\n  left: ${(props) => props.index * (props.size - props.overlap)}px;\n`;\n\nconst UserCountBubbleInner = styled.div<{ size: number; digits: number }>`\n  color: #fff;\n  font-size: ${({ size, digits }) => getFontSize(size, digits)}px;\n  font-weight: 500;\n  display: flex;\n`;\n\n/* InputProps\n * limit: the number of avatars you need, you'll get one extra bubble with the remaining count, defaults to 3\n * context: extra info if you use the component in a specific context, defaults to platform-wide\n * size: image size, each bubble will be 4px bigger because of margins, defaults to 30px\n * overlap: the number of pixel the bubbles overlap, defaults to 7\n */\ninterface InputProps {\n  limit?: number;\n  context?: {\n    type: 'project' | 'group';\n    id: string;\n  };\n  size?: number;\n  overlap?: number;\n  userCountBgColor?: string;\n  avatarIds?: string[];\n  className?: string;\n  userCount?: number;\n}\n\ninterface DataProps {\n  avatars: (IAvatarData | Error)[] | null;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst defaultLimit = 4;\n\nconst AvatarBubbles = ({\n  avatarIds,\n  context,\n  size = 34,\n  overlap,\n  className,\n  userCountBgColor = colors.label,\n  intl: { formatMessage },\n  avatars,\n  userCount,\n}: Props & InjectedIntlProps) => {\n  if (!isNilOrError(avatars) && isNumber(userCount) && userCount > 0) {\n    const bubbleSize = size + 4;\n    const bubbleOverlap = overlap || 10;\n    const imageSize = bubbleSize > 160 ? 'large' : 'medium';\n    const avatarsWithImage = avatars.filter(\n      (avatar) =>\n        !isError(avatar) &&\n        avatar.attributes.avatar &&\n        avatar.attributes.avatar[imageSize]\n    ) as IAvatarData[];\n    const avatarImagesCount = avatarsWithImage.length;\n    const remainingUsers = userCount - avatarImagesCount;\n    const remainingUsersDigits = remainingUsers.toString().length;\n    const bubblesCount = avatarImagesCount + (remainingUsers > 0 ? 1 : 0);\n    const containerHeight = bubbleSize + 2;\n    const containerWidth =\n      bubblesCount * (bubbleSize - bubbleOverlap) + bubbleOverlap + 2;\n\n    if (avatarIds || context || avatarImagesCount > 0) {\n      return (\n        <Container\n          className={className}\n          width={containerWidth}\n          height={containerHeight}\n        >\n          {avatarsWithImage.map((avatar, index) => (\n            <AvatarImageBubble\n              key={index}\n              index={index}\n              overlap={bubbleOverlap}\n              size={bubbleSize}\n              src={avatar.attributes.avatar[imageSize]}\n              alt=\"\"\n            />\n          ))}\n          {remainingUsers > 0 && (\n            <UserCountBubble\n              index={avatarsWithImage.length}\n              overlap={bubbleOverlap}\n              size={bubbleSize}\n              bgColor={userCountBgColor}\n            >\n              <UserCountBubbleInner\n                size={bubbleSize}\n                digits={remainingUsersDigits}\n                aria-hidden\n              >\n                +{remainingUsers}\n              </UserCountBubbleInner>\n              <ScreenReaderOnly>\n                {formatMessage(messages.numberOfUsers, {\n                  numberOfUsers: userCount,\n                })}\n              </ScreenReaderOnly>\n            </UserCountBubble>\n          )}\n        </Container>\n      );\n    }\n  } else if (avatars !== undefined) {\n    return <EmptyContainer className={className} />;\n  }\n\n  return null;\n};\n\nconst AvatarBubblesWithHoCs = injectIntl(AvatarBubbles);\n\nexport default (inputProps: InputProps) => {\n  if (inputProps.avatarIds) {\n    return (\n      <GetAvatars ids={inputProps.avatarIds}>\n        {(avatars) => (\n          <AvatarBubblesWithHoCs\n            {...inputProps}\n            avatars={!isNilOrError(avatars) ? avatars : null}\n          />\n        )}\n      </GetAvatars>\n    );\n  }\n\n  return (\n    <GetRandomAvatars\n      limit={inputProps.limit || defaultLimit}\n      context={inputProps.context}\n    >\n      {(avatars) => (\n        <AvatarBubblesWithHoCs\n          {...inputProps}\n          avatars={!isNilOrError(avatars) ? avatars.data : null}\n          userCount={!isNilOrError(avatars) ? avatars.meta.total : undefined}\n        />\n      )}\n    </GetRandomAvatars>\n  );\n};\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  IInitiativeImageData,\n  initiativeImageStream,\n} from 'services/initiativeImages';\nimport { isString } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  initiativeId: string | null | undefined;\n  initiativeImageId: string | null | undefined;\n  resetOnChange?: boolean;\n}\n\ntype children = (\n  renderProps: GetInitiativeImageChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  initiativeImage: IInitiativeImageData | undefined | null;\n}\n\nexport type GetInitiativeImageChildProps =\n  | IInitiativeImageData\n  | undefined\n  | null;\n\nexport default class GetInitiativeImage extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      initiativeImage: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { initiativeId, initiativeImageId, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ initiativeId, initiativeImageId });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(\n            () => resetOnChange && this.setState({ initiativeImage: undefined })\n          ),\n          switchMap(({ initiativeId, initiativeImageId }) => {\n            if (isString(initiativeId) && isString(initiativeImageId)) {\n              return initiativeImageStream(initiativeId, initiativeImageId)\n                .observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((initiativeImage) =>\n          this.setState({\n            initiativeImage: !isNilOrError(initiativeImage)\n              ? initiativeImage.data\n              : initiativeImage,\n          })\n        ),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { initiativeId, initiativeImageId } = this.props;\n    this.inputProps$.next({ initiativeId, initiativeImageId });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiativeImage } = this.state;\n    return (children as children)(initiativeImage);\n  }\n}\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Fragment from 'components/Fragment';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { injectIntl } from 'utils/cl-intl';\nimport messages from './messages';\n\n// hooks\nimport useLocale from 'hooks/useLocale';\nimport useAppConfiguration from 'hooks/useAppConfiguration';\n\n// style\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding-right: 20px;\n  padding-left: 20px;\n  padding-top: 110px;\n  padding-bottom: 130px;\n  background: #fff;\n  width: 100%;\n`;\n\nconst LogoLink = styled.a`\n  cursor: pointer;\n`;\n\nconst TenantLogo = styled.img`\n  height: 50px;\n  margin-bottom: 20px;\n`;\n\ninterface Props {}\n\nconst CityLogoSection = memo(\n  ({ intl: { formatMessage } }: Props & InjectedIntlProps) => {\n    const locale = useLocale();\n    const appConfiguration = useAppConfiguration();\n\n    if (!isNilOrError(appConfiguration)) {\n      const currentTenantLogo =\n        appConfiguration.data.attributes.logo?.medium || null;\n      const tenantSite =\n        appConfiguration.data.attributes.settings.core.organization_site;\n      const footerLocale = `footer-city-logo-${locale}`;\n\n      if (currentTenantLogo) {\n        return (\n          <Fragment\n            title={formatMessage(messages.iframeTitle)}\n            name={footerLocale}\n          >\n            <Container id=\"hook-footer-logo\">\n              {tenantSite ? (\n                <LogoLink href={tenantSite} target=\"_blank\">\n                  <TenantLogo src={currentTenantLogo} alt=\"Organization logo\" />\n                </LogoLink>\n              ) : (\n                <TenantLogo src={currentTenantLogo} alt=\"Organization logo\" />\n              )}\n            </Container>\n          </Fragment>\n        );\n      }\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(CityLogoSection);\n","import React, { memo, FormEvent } from 'react';\nimport { trackEventByName } from 'utils/analytics';\n\n// components\nimport Button from 'components/UI/Button';\n\n// styling\nimport styled from 'styled-components';\nimport { colors } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// tracks\nimport tracks from './tracks';\n\nconst Container = styled.div`\n  display: flex;\n  padding: 4px;\n  background: ${darken(0.06, colors.lightGreyishBlue)};\n  border-radius: ${(props: any) => props.theme.borderRadius};\n`;\n\nconst ListButton = styled(Button)``;\n\nconst MapButton = styled(Button)`\n  margin-left: 4px;\n`;\n\ninterface Props {\n  className?: string;\n  selectedView: 'card' | 'map';\n  onClick: (selectedView: 'card' | 'map') => void;\n}\n\nconst ViewButtons = memo<Props>(({ className, selectedView, onClick }) => {\n  const isListViewSelected = selectedView === 'card';\n  const isMapViewSelected = selectedView === 'map';\n\n  const handleOnClick = (selectedView: 'card' | 'map') => (\n    event: FormEvent\n  ) => {\n    event.preventDefault();\n    onClick(selectedView);\n    trackEventByName(tracks.toggleDisplay, {\n      locationButtonWasClicked: location.pathname,\n      selectedDisplayMode: selectedView,\n    });\n  };\n\n  return (\n    <Container\n      className={`e2e-list-map-viewbuttons ${className || ''}`}\n      role=\"tablist\"\n    >\n      <ListButton\n        buttonStyle=\"white\"\n        icon=\"list2\"\n        role=\"tab\"\n        aria-selected={isListViewSelected}\n        onClick={handleOnClick('card')}\n        padding=\"7px 12px\"\n        textColor={colors.text}\n        bgColor={!isListViewSelected ? 'transparent' : undefined}\n        bgHoverColor={!isListViewSelected ? 'rgba(0,0,0,0.12)' : undefined}\n        boxShadowHover={!isListViewSelected ? 'none' : undefined}\n        fullWidth={true}\n      >\n        <FormattedMessage {...messages.list} />\n      </ListButton>\n      <MapButton\n        buttonStyle=\"white\"\n        icon=\"map\"\n        role=\"tab\"\n        aria-selected={isMapViewSelected}\n        onClick={handleOnClick('map')}\n        padding=\"7px 12px\"\n        textColor={colors.text}\n        bgColor={!isMapViewSelected ? 'transparent' : undefined}\n        bgHoverColor={!isMapViewSelected ? 'rgba(0,0,0,0.12)' : undefined}\n        boxShadowHover={!isMapViewSelected ? 'none' : undefined}\n        fullWidth={true}\n      >\n        <FormattedMessage {...messages.map} />\n      </MapButton>\n    </Container>\n  );\n});\n\nexport default ViewButtons;\n","import React, { memo, MouseEvent } from 'react';\nimport bowser from 'bowser';\n\n// components\nimport Link from 'utils/cl-router/Link';\nimport Image from 'components/UI/Image';\n\n// styling\nimport styled from 'styled-components';\nimport {\n  fontSizes,\n  defaultCardStyle,\n  defaultCardHoverStyle,\n} from 'utils/styleUtils';\n\nconst Container = styled(Link)`\n  width: 100%;\n  height: 375px;\n  margin-bottom: 24px;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  ${defaultCardStyle};\n\n  &.desktop {\n    ${defaultCardHoverStyle};\n  }\n`;\n\nconst CardImageWrapper = styled.div`\n  height: 115px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-top-left-radius: ${(props: any) => props.theme.borderRadius};\n  border-top-right-radius: ${(props: any) => props.theme.borderRadius};\n`;\n\nconst CardImage = styled(Image)`\n  width: 100%;\n`;\n\nconst HeaderContentWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n`;\n\nconst Title = styled.h3<{ hasHeader: boolean }>`\n  color: ${(props) => props.theme.colorText};\n  max-width: 400px;\n  font-size: ${fontSizes.xl}px;\n  font-weight: 500;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 3;\n  line-height: normal;\n  margin: 0;\n  margin-top: 20px;\n  margin-bottom: 13px;\n  padding: 0;\n  padding-left: 20px;\n  padding-right: 20px;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n  &:first-child {\n    margin-top: 20px;\n  }\n  ${({ hasHeader }) => hasHeader && '&:first-child { margin-top: 73px; }'}\n`;\n// why the :first-child ? -> to conteract the css reset that overrides top margin for h3:first-child.\n\nconst Body = styled.div`\n  flex-grow: 1;\n  padding-left: 20px;\n  padding-right: 20px;\n`;\n\nconst Footer = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\ninterface Props {\n  to: string;\n  imageUrl?: string | null;\n  header?: JSX.Element;\n  title: JSX.Element | string;\n  body?: JSX.Element | string;\n  footer?: JSX.Element | string;\n  onClick: (event: MouseEvent<HTMLDivElement>) => void;\n  className?: string;\n}\n\nexport const Card = ({\n  to,\n  onClick,\n  imageUrl,\n  header,\n  title,\n  body,\n  footer,\n  className,\n}: Props) => (\n  <Container\n    onClick={onClick}\n    to={to}\n    className={`e2e-card ${className} ${\n      !(bowser.mobile || bowser.tablet) ? 'desktop' : 'mobile'\n    }`}\n  >\n    {imageUrl && (\n      <CardImageWrapper>\n        <CardImage src={imageUrl} alt=\"\" />\n      </CardImageWrapper>\n    )}\n\n    <Title className=\"e2e-card-title\" hasHeader={!!header}>\n      {title}\n    </Title>\n    <HeaderContentWrapper>{header}</HeaderContentWrapper>\n\n    <Body>{body}</Body>\n    <Footer aria-live=\"polite\">{footer}</Footer>\n  </Container>\n);\n\nexport default memo<Props>(Card);\n","import React, { memo, useCallback } from 'react';\nimport useInitiativesPermissions, {\n  IInitiativeDisabledReason,\n} from 'hooks/useInitiativesPermissions';\nimport { trackEventByName } from 'utils/analytics';\nimport clHistory from 'utils/cl-router/history';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport Button from 'components/UI/Button';\nimport messages from './messages';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\nimport Tippy from '@tippyjs/react';\nimport { colors, fontSizes, Icon, ButtonStyles } from 'cl2-component-library';\nimport { darken } from 'polished';\nimport styled from 'styled-components';\nimport { stringify } from 'qs';\n\nconst TooltipContent = styled.div<{ inMap?: boolean }>`\n  display: flex;\n  align-items: center;\n  padding: ${(props) => (props.inMap ? '0px' : '15px')};\n`;\n\nconst TooltipContentIcon = styled(Icon)`\n  flex: 0 0 25px;\n  width: 20px;\n  height: 25px;\n  margin-right: 1rem;\n`;\n\nconst TooltipContentText = styled.div`\n  flex: 1 1 auto;\n  color: ${colors.text};\n  font-size: ${fontSizes.base}px;\n  line-height: normal;\n  font-weight: 400;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n\n  a,\n  button {\n    color: ${colors.clBlueDark};\n    font-size: ${fontSizes.base}px;\n    line-height: normal;\n    font-weight: 400;\n    text-align: left;\n    text-decoration: underline;\n    white-space: normal;\n    overflow-wrap: break-word;\n    word-wrap: break-word;\n    word-break: break-all;\n    word-break: break-word;\n    hyphens: auto;\n    display: inline;\n    padding: 0px;\n    margin: 0px;\n    cursor: pointer;\n    transition: all 100ms ease-out;\n\n    &:hover {\n      color: ${darken(0.15, colors.clBlueDark)};\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst disabledMessages: {\n  [key in IInitiativeDisabledReason]: ReactIntl.FormattedMessage.MessageDescriptor;\n} = {\n  notPermitted: messages.postingNotPermitted,\n};\n\ninterface Props {\n  lat?: number | null;\n  lng?: number | null;\n  inMap?: boolean;\n  location: 'initiatives_footer' | 'initiatives_header' | 'in_map';\n  buttonStyle?: ButtonStyles;\n  className?: string;\n}\n\nexport default memo<Props>(\n  ({ lat, lng, inMap, location, buttonStyle, className }) => {\n    const { disabledReason, action, enabled } = useInitiativesPermissions(\n      'posting_initiative'\n    ) || { disabledReason: null, action: null, enabled: null };\n\n    const redirectToInitiativeForm = () => {\n      trackEventByName('redirected to initiatives form');\n      clHistory.push({\n        pathname: `/initiatives/new`,\n        search:\n          lat && lng\n            ? stringify({ lat, lng }, { addQueryPrefix: true })\n            : undefined,\n      });\n    };\n\n    const onNewInitiativeButtonClick = useCallback(\n      (event?: React.FormEvent) => {\n        event?.preventDefault();\n\n        trackEventByName('New initiative button clicked', {\n          extra: {\n            disabledReason,\n            location,\n          },\n        });\n\n        if (enabled) {\n          switch (action) {\n            case 'sign_in_up':\n              trackEventByName(\n                'Sign up/in modal opened in response to clicking new initiative'\n              );\n              openSignUpInModal({\n                flow: 'signup',\n                verification: false,\n                verificationContext: undefined,\n                action: redirectToInitiativeForm,\n              });\n              break;\n            case 'sign_in_up_and_verify':\n              trackEventByName(\n                'Sign up/in modal opened in response to clicking new initiative'\n              );\n              openSignUpInModal({\n                flow: 'signup',\n                verification: true,\n                verificationContext: {\n                  type: 'initiative',\n                  action: 'posting_initiative',\n                },\n                action: redirectToInitiativeForm,\n              });\n              break;\n            case 'verify':\n              trackEventByName(\n                'Verification modal opened in response to clicking new initiative'\n              );\n              openVerificationModal({\n                context: {\n                  action: 'posting_initiative',\n                  type: 'initiative',\n                },\n              });\n              break;\n            default:\n              redirectToInitiativeForm();\n          }\n        }\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [enabled, action, disabledReason, location]\n    );\n\n    const tippyContent = disabledReason ? (\n      <TooltipContent id=\"tooltip-content\" className=\"e2e-disabled-tooltip\">\n        <TooltipContentIcon name=\"lock-outlined\" ariaHidden />\n        <TooltipContentText>\n          <FormattedMessage {...disabledMessages[disabledReason]} />\n        </TooltipContentText>\n      </TooltipContent>\n    ) : null;\n\n    if (inMap && tippyContent) {\n      return tippyContent;\n    }\n\n    return (\n      <div className={className || ''}>\n        <Tippy\n          disabled={!tippyContent}\n          interactive={true}\n          placement=\"bottom\"\n          content={tippyContent || <></>}\n          theme=\"light\"\n          hideOnClick={false}\n        >\n          <div\n            tabIndex={!enabled ? 0 : -1}\n            className={`e2e-idea-button ${!enabled ? 'disabled' : ''} ${\n              disabledReason ? disabledReason : ''\n            }`}\n          >\n            <Button\n              fontWeight=\"500\"\n              padding=\"13px 22px\"\n              buttonStyle={buttonStyle || 'primary'}\n              onClick={onNewInitiativeButtonClick}\n              icon=\"arrowLeft\"\n              iconPos=\"right\"\n              disabled={!!disabledReason}\n              text={<FormattedMessage {...messages.startInitiative} />}\n            />\n          </div>\n        </Tippy>\n      </div>\n    );\n  }\n);\n","import React, {\n  memo,\n  useMemo,\n  useState,\n  lazy,\n  Suspense,\n  useCallback,\n} from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Outlet from 'components/Outlet';\nconst LeafletMap = lazy(() => import('components/UI/LeafletMap'));\n\n// hooks\nimport useAppConfiguration from 'hooks/useAppConfiguration';\n\n// utils\nimport {\n  getCenter,\n  getZoomLevel,\n  getTileProvider,\n  getTileOptions,\n} from 'utils/map';\nimport { ILeafletMapConfig } from 'components/UI/LeafletMap/useLeaflet';\n\n// styling\nimport styled from 'styled-components';\nimport { media, defaultOutline, defaultCardStyle } from 'utils/styleUtils';\n\n// typings\nimport { LatLngTuple, Map as ILeafletMap } from 'leaflet';\n\nexport interface Point extends GeoJSON.Point {\n  data?: any;\n  id: string;\n  title?: string;\n}\n\nconst Container = styled.div`\n  ${defaultCardStyle};\n  background: transparent;\n  border: solid 1px #ccc;\n`;\n\nconst MapWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  position: relative;\n`;\n\nconst BoxContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  position: absolute;\n  top: 0;\n  z-index: 1001;\n  background: #fff;\n  width: 100%;\n  height: 80%;\n  max-height: 550px;\n`;\n\nconst CloseButton = styled.button`\n  width: 28px;\n  height: 28px;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 2;\n  border-radius: 50%;\n  border: solid 1px transparent;\n  background: #fff;\n  transition: all 100ms ease-out;\n  outline: none !important;\n\n  &:hover {\n    background: #ececec;\n  }\n\n  &.focus-visible {\n    ${defaultOutline};\n  }\n\n  ${media.smallerThanMinTablet`\n    top: 4px;\n    right: 4px;\n  `}\n`;\n\nconst CloseIcon = styled(Icon)`\n  width: 12px;\n  height: 12px;\n  fill: #000;\n`;\n\nexport interface IMapConfigProps {\n  centerLatLng?: LatLngTuple;\n  points?: Point[];\n  zoomLevel?: number;\n  areas?: GeoJSON.Polygon[];\n  mapHeight?: string;\n  noMarkerClustering?: boolean;\n  zoomControlPosition?: 'topleft' | 'topright' | 'bottomleft' | 'bottomright';\n  layersControlPosition?: 'topleft' | 'topright' | 'bottomleft' | 'bottomright';\n}\n\nexport interface IMapProps {\n  onInit?: (map: ILeafletMap) => void;\n  onBoxClose?: (event: React.FormEvent) => void;\n  className?: string;\n  projectId?: string | null;\n  hideLegend?: boolean;\n  boxContent?: JSX.Element | null;\n}\n\nconst Map = memo<IMapProps & IMapConfigProps>(\n  ({\n    projectId,\n    centerLatLng,\n    zoomLevel,\n    mapHeight,\n    points,\n    noMarkerClustering,\n    zoomControlPosition,\n    layersControlPosition,\n    boxContent,\n    onInit,\n    onBoxClose,\n    className,\n    hideLegend,\n  }) => {\n    const appConfig = useAppConfiguration();\n\n    const [\n      additionalLeafletConfig,\n      setAdditionalLeafletConfig,\n    ] = useState<ILeafletMapConfig | null>(null);\n\n    const center = useMemo(() => {\n      return getCenter(centerLatLng, appConfig);\n    }, [centerLatLng, appConfig]);\n\n    const zoom = useMemo(() => {\n      return getZoomLevel(zoomLevel, appConfig);\n    }, [zoomLevel, appConfig]);\n\n    const tileProvider = useMemo(() => {\n      return getTileProvider(appConfig);\n    }, [appConfig]);\n\n    const tileOptions = useMemo(() => {\n      return getTileOptions();\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tileProvider]);\n\n    const leafletConfig = useMemo(() => {\n      return {\n        points,\n        noMarkerClustering,\n        zoom,\n        center,\n        tileProvider,\n        tileOptions,\n        zoomControlPosition,\n        layersControlPosition,\n        ...additionalLeafletConfig,\n      };\n    }, [\n      points,\n      noMarkerClustering,\n      zoom,\n      center,\n      tileProvider,\n      tileOptions,\n      zoomControlPosition,\n      layersControlPosition,\n      additionalLeafletConfig,\n    ]);\n\n    const handleLeafletConfigChange = useCallback(\n      (leafletConfig: ILeafletMapConfig) => {\n        setAdditionalLeafletConfig(leafletConfig);\n      },\n      []\n    );\n\n    const handleBoxOnClose = (event: React.FormEvent) => {\n      event.preventDefault();\n      onBoxClose?.(event);\n    };\n\n    const handleOnInit = (map: L.Map) => {\n      onInit?.(map);\n    };\n\n    return (\n      <Container className={className || ''}>\n        <MapWrapper>\n          {!isNilOrError(boxContent) && (\n            <BoxContainer>\n              <CloseButton onClick={handleBoxOnClose}>\n                <CloseIcon name=\"close\" />\n              </CloseButton>\n\n              {boxContent}\n            </BoxContainer>\n          )}\n\n          <Suspense fallback={false}>\n            <LeafletMap\n              id=\"mapid\"\n              className=\"e2e-leafletmap\"\n              mapHeight={mapHeight}\n              onInit={handleOnInit}\n              {...leafletConfig}\n            />\n          </Suspense>\n          <Outlet\n            id=\"app.components.Map.leafletConfig\"\n            projectId={projectId}\n            onLeafletConfigChange={handleLeafletConfigChange}\n            centerLatLng={centerLatLng}\n            zoomLevel={zoomLevel}\n            points={points}\n          />\n        </MapWrapper>\n\n        {!hideLegend && (\n          <Outlet id=\"app.components.Map.Legend\" projectId={projectId} />\n        )}\n      </Container>\n    );\n  }\n);\n\nexport default Map;\n","import React, { memo } from 'react';\nimport useWindowSize from 'hooks/useWindowSize';\n\n// components\nimport QuillEditedContent from 'components/UI/QuillEditedContent';\n\n// typings\nimport { Locale } from 'typings';\n\n// styling\nimport styled, { useTheme } from 'styled-components';\nimport { viewportWidths } from 'utils/styleUtils';\nimport Outlet from 'components/Outlet';\n\nconst Container = styled.div``;\n\ninterface Props {\n  postId: string;\n  body: string;\n  locale: Locale;\n  translateButtonClicked?: boolean;\n  className?: string;\n  postType: 'idea' | 'initiative';\n  color?: string;\n}\n\nconst Body = memo<Props>(\n  ({\n    postId,\n    body,\n    locale,\n    translateButtonClicked,\n    className,\n    postType,\n    color,\n  }) => {\n    const windowSize = useWindowSize();\n    const theme: any = useTheme();\n    const smallerThanSmallTablet = windowSize\n      ? windowSize.windowWidth <= viewportWidths.smallTablet\n      : false;\n\n    return (\n      <Container id={`e2e-${postType}-description`} className={className}>\n        <QuillEditedContent\n          textColor={color || theme.colorText}\n          fontSize={smallerThanSmallTablet ? 'base' : 'large'}\n          fontWeight={400}\n        >\n          <div aria-live=\"polite\">\n            <Outlet\n              id=\"app.components.PostShowComponents.Body.translation\"\n              postId={postId}\n              locale={locale}\n              postType={postType}\n              body={body}\n              translateButtonClicked={translateButtonClicked}\n            >\n              {(outletComponents) =>\n                outletComponents.length > 0 ? (\n                  <>{outletComponents}</>\n                ) : (\n                  <span dangerouslySetInnerHTML={{ __html: body }} />\n                )\n              }\n            </Outlet>\n          </div>\n        </QuillEditedContent>\n      </Container>\n    );\n  }\n);\n\nexport default Body;\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { Subscription, BehaviorSubject, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { IUserData, userBySlugStream, userByIdStream } from 'services/users';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  id?: string | null;\n  slug?: string | null;\n  resetOnChange?: boolean;\n}\n\ntype children = (renderProps: GetUserChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  user: IUserData | undefined | null | Error;\n}\n\nexport type GetUserChildProps = IUserData | undefined | null | Error;\n\nexport default class GetUser extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      user: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id, slug, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id, slug });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(() => resetOnChange && this.setState({ user: undefined })),\n          switchMap(({ id, slug }) => {\n            if (isString(id)) {\n              return userByIdStream(id).observable;\n            } else if (isString(slug)) {\n              return userBySlugStream(slug).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((user) => {\n          this.setState({ user: !isNilOrError(user) ? user.data : user });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id, slug } = this.props;\n    this.inputProps$.next({ id, slug });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { user } = this.state;\n    return (children as children)(user);\n  }\n}\n","import React from 'react';\nimport { isEqual } from 'lodash-es';\nimport { Subscription, BehaviorSubject } from 'rxjs';\nimport { IAvatars, randomAvatarsStream } from 'services/avatars';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\n\ninterface InputProps {\n  limit?: number;\n  context?: {\n    type: 'project' | 'group' | 'idea' | 'initiative';\n    id: string;\n  };\n}\n\ntype children = (renderProps: GetRandomAvatarsChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  avatars: IAvatars | undefined | null;\n}\n\nexport type GetRandomAvatarsChildProps = IAvatars | undefined | null;\n\nexport default class GetRandomAvatars extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      avatars: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { limit, context } = this.props;\n    this.inputProps$ = new BehaviorSubject({ limit, context });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => isEqual(prev, next)),\n          switchMap(({ limit, context }) => {\n            if (context) {\n              return randomAvatarsStream({\n                queryParameters: {\n                  limit,\n                  context_type: context.type,\n                  context_id: context.id,\n                },\n              }).observable;\n            }\n\n            return randomAvatarsStream({\n              queryParameters: {\n                limit,\n              },\n            }).observable;\n          })\n        )\n        .subscribe((avatars) =>\n          this.setState({ avatars: !isNilOrError(avatars) ? avatars : null })\n        ),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { limit, context } = this.props;\n    this.inputProps$.next({ limit, context });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { avatars } = this.state;\n    return (children as children)(avatars);\n  }\n}\n","import {\n  distinctUntilChanged,\n  map,\n  publishReplay,\n  refCount,\n  debounceTime,\n} from 'rxjs/operators';\nimport { isEqual } from 'lodash-es';\nimport eventEmitter from 'utils/eventEmitter';\nimport { LatLngTuple } from 'leaflet';\n\nenum events {\n  leafletMapCenterChange = 'leafletMapCenterChange',\n  leafletMapZoomChange = 'leafletMapZoomChange',\n  leafletMapLatLngZoomChange = 'leafletMapLatLngZoomChange',\n  leafletMapHoveredMarkerChange = 'leafletMapHoveredMarkerChange',\n  leafletMapSelectedMarkerChange = 'leafletMapSelectedMarkerChange',\n  leafletMapClicked = 'leafletMapClicked',\n}\n\n// ----------------------------------------------------------------------------------------------\n\nexport function setLeafletMapCenter(center: LatLngTuple | null) {\n  eventEmitter.emit<LatLngTuple | null>(events.leafletMapCenterChange, center);\n}\n\nexport const leafletMapCenter$ = eventEmitter\n  .observeEvent<LatLngTuple | null>(events.leafletMapCenterChange)\n  .pipe(\n    map(({ eventValue }) => eventValue),\n    distinctUntilChanged((x, y) => isEqual(x, y)),\n    publishReplay(1),\n    refCount()\n  );\n\n// ----------------------------------------------------------------------------------------------\n\nexport function setLeafletMapZoom(zoom: number | null) {\n  eventEmitter.emit<number | null>(events.leafletMapZoomChange, zoom);\n}\n\nexport const leafletMapZoom$ = eventEmitter\n  .observeEvent<number | null>(events.leafletMapZoomChange)\n  .pipe(\n    map(({ eventValue }) => eventValue),\n    distinctUntilChanged((x, y) => isEqual(x, y)),\n    publishReplay(1),\n    refCount()\n  );\n\n// ----------------------------------------------------------------------------------------------\n\nexport function setLeafletMapHoveredMarker(markerId: string | null) {\n  eventEmitter.emit<string | null>(\n    events.leafletMapHoveredMarkerChange,\n    markerId\n  );\n}\n\nexport const leafletMapHoveredMarker$ = eventEmitter\n  .observeEvent<string | null>(events.leafletMapHoveredMarkerChange)\n  .pipe(\n    map(({ eventValue }) => eventValue),\n    distinctUntilChanged((x, y) => isEqual(x, y))\n  );\n\n// ----------------------------------------------------------------------------------------------\n\nexport function setLeafletMapSelectedMarker(markerId: string | null) {\n  eventEmitter.emit<string | null>(\n    events.leafletMapSelectedMarkerChange,\n    markerId\n  );\n}\n\nexport const leafletMapSelectedMarker$ = eventEmitter\n  .observeEvent<string | null>(events.leafletMapSelectedMarkerChange)\n  .pipe(\n    map(({ eventValue }) => eventValue),\n    distinctUntilChanged((x, y) => isEqual(x, y))\n  );\n\n// ----------------------------------------------------------------------------------------------\n\nexport function setLeafletMapClicked(latLng: L.LatLng) {\n  eventEmitter.emit<L.LatLng>(events.leafletMapClicked, latLng);\n}\n\nexport const leafletMapClicked$ = eventEmitter\n  .observeEvent<L.LatLng>(events.leafletMapClicked)\n  .pipe(\n    map(({ eventValue }) => eventValue),\n    distinctUntilChanged((x, y) => isEqual(x, y)),\n    debounceTime(50)\n  );\n\n// ----------------------------------------------------------------------------------------------\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  trending: {\n    id: 'app.components.InitiativeCards.trending',\n    defaultMessage: 'Trending',\n  },\n  random: {\n    id: 'app.components.InitiativeCards.random',\n    defaultMessage: 'Random',\n  },\n  popular: {\n    id: 'app.components.InitiativeCards.popular',\n    defaultMessage: 'Popular',\n  },\n  newest: {\n    id: 'app.components.InitiativeCards.newest',\n    defaultMessage: 'Newest',\n  },\n  oldest: {\n    id: 'app.components.InitiativeCards.oldest',\n    defaultMessage: 'Oldest',\n  },\n  sortTitle: {\n    id: 'app.components.InitiativeCards.sortTitle',\n    defaultMessage: 'Sorting',\n  },\n  filter: {\n    id: 'app.components.InitiativeCards.filter',\n    defaultMessage: 'Filter',\n  },\n  searchPlaceholder: {\n    id: 'app.components.InitiativeCards.searchPlaceholder',\n    defaultMessage: 'Search for an initiative',\n  },\n  showInitiatives: {\n    id: 'app.components.InitiativeCards.showInitiatives',\n    defaultMessage: 'Show initiatives',\n  },\n  showXInitiatives: {\n    id: 'app.components.InitiativeCards.showXInitiatives',\n    defaultMessage:\n      'Show {initiativesCount, plural, no {# initiatives} one {# initiative} other {# initiatives}}',\n  },\n  map: {\n    id: 'app.components.InitiativeCards.map',\n    defaultMessage: 'Map',\n  },\n  list: {\n    id: 'app.components.InitiativeCards.list',\n    defaultMessage: 'List',\n  },\n  xInitiatives: {\n    id: 'app.components.InitiativeCards.xInitiatives',\n    defaultMessage:\n      '{initiativesCount, plural, no {# initiatives} one {# initiative} other {# initiatives}}',\n  },\n  showMore: {\n    id: 'app.components.InitiativeCards.showMore',\n    defaultMessage: 'Show more',\n  },\n  resetFilters: {\n    id: 'app.components.InitiativeCards.resetFilters',\n    defaultMessage: 'Reset filters',\n  },\n  noInitiativesForFilter: {\n    id: 'app.ccomponents.InitiativeCards.noInitiativesForFilter',\n    defaultMessage: 'No initiatives found',\n  },\n  tryOtherFilter: {\n    id: 'app.components.InitiativeCards.tryOtherFilter',\n    defaultMessage:\n      \"Try adjusting your search or filter to find what you're looking for\",\n  },\n  a11y_totalInitiatives: {\n    id: 'app.containers.IdeaCards.a11y_totalInitiatives',\n    defaultMessage: 'Total initiatives: {initiativeCount}',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  a11y_postedBy: {\n    id: 'app.components.Author.a11y_postedBy',\n    defaultMessage: 'Posted by: ',\n  },\n});\n","import React, { memo } from 'react';\nimport useAppConfiguration from 'hooks/useAppConfiguration';\nimport Link from 'utils/cl-router/Link';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// style\nimport styled from 'styled-components';\nimport { fontSizes, colors } from 'utils/styleUtils';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport messages from '../messages';\n\nconst Content = styled.div`\n  color: ${colors.label};\n  text-align: center;\n  font-size: ${fontSizes.base}px;\n  line-height: ${fontSizes.xl}px;\n\n  a {\n    text-decoration: underline;\n    color: inherit;\n\n    &:hover {\n      color: #000;\n    }\n  }\n`;\n\nconst Bold = styled.span`\n  font-weight: 600;\n`;\n\ninterface Props {\n  className?: string;\n}\n\nconst InitiativeInfoContent = memo<InjectedLocalized & Props>(\n  ({ className, localize }) => {\n    const tenant = useAppConfiguration();\n\n    if (!isNilOrError(tenant)) {\n      const voteThreshold =\n        tenant.data.attributes.settings.initiatives?.voting_threshold;\n      const daysLimit = tenant.data.attributes.settings.initiatives?.days_limit;\n\n      return (\n        <Content className={className}>\n          <FormattedMessage\n            {...messages.explanationContent}\n            values={{\n              constraints: (\n                <Bold>\n                  <FormattedMessage\n                    {...messages.constraints}\n                    values={{\n                      voteThreshold,\n                      daysLimit,\n                    }}\n                  />\n                </Bold>\n              ),\n              link: (\n                <Link to=\"/pages/initiatives\">\n                  <FormattedMessage {...messages.learnMoreAboutProposals} />\n                </Link>\n              ),\n              orgName: localize(\n                tenant.data.attributes.settings.core.organization_name\n              ),\n            }}\n          />\n        </Content>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectLocalize(InitiativeInfoContent);\n","export default {\n  clickOnInitiativeMapMarker: 'Click on an initiative marker in a project map',\n  createInitiativeFromMap: 'Cliked on mak to place a new inititive',\n};\n","export default {\n  loadMoreProposals: 'Load more proposals button clicked',\n  sortingFilter: 'Clicked proposal cards sort filter',\n  topicsFilter: 'Clicked proposal cards topics filter',\n};\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  iframeTitle: {\n    id: 'app.components.CityLogoSection.iframeTitle',\n    defaultMessage: 'More information about {orgName}',\n  },\n});\n","import React, { PureComponent, FormEvent } from 'react';\nimport { get, isUndefined, isString } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\n\n// components\nimport Card from 'components/UI/Card';\nimport { Icon } from 'cl2-component-library';\nimport Author from 'components/Author';\nimport VoteIndicator from './VoteIndicator';\n\n// resources\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetInitiativeImage, {\n  GetInitiativeImageChildProps,\n} from 'resources/GetInitiativeImage';\nimport GetUser, { GetUserChildProps } from 'resources/GetUser';\n\n// utils\nimport eventEmitter from 'utils/eventEmitter';\n\n// i18n\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// styles\nimport styled from 'styled-components';\nimport { fontSizes, colors } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\n\n// typings\nimport { IOpenPostPageModalEvent } from 'containers/App';\n\nconst StyledAuthor = styled(Author)`\n  margin-left: -4px;\n`;\n\nconst FooterInner = styled.div`\n  width: 100%;\n  min-height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: 20px;\n  padding-right: 20px;\n  margin-bottom: 20px;\n`;\n\nconst Spacer = styled.div`\n  flex: 1;\n`;\n\nconst CommentIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n  fill: ${colors.label};\n  margin-right: 6px;\n  margin-top: 2px;\n`;\n\nconst CommentCount = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n`;\n\nconst CommentInfo = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nexport interface InputProps {\n  initiativeId: string;\n  className?: string;\n}\n\ninterface DataProps {\n  initiative: GetInitiativeChildProps;\n  initiativeImage: GetInitiativeImageChildProps;\n  initiativeAuthor: GetUserChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass InitiativeCard extends PureComponent<Props & InjectedLocalized, State> {\n  onCardClick = (event: FormEvent) => {\n    event.preventDefault();\n\n    const { initiative } = this.props;\n\n    if (!isNilOrError(initiative)) {\n      eventEmitter.emit<IOpenPostPageModalEvent>('cardClick', {\n        id: initiative.id,\n        slug: initiative.attributes.slug,\n        type: 'initiative',\n      });\n    }\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeImage,\n      initiativeAuthor,\n      localize,\n      className,\n    } = this.props;\n\n    if (\n      !isNilOrError(initiative) &&\n      !isUndefined(initiativeImage) &&\n      !isUndefined(initiativeAuthor)\n    ) {\n      const initiativeTitle = localize(initiative.attributes.title_multiloc);\n      const initiativeAuthorId = !isNilOrError(initiativeAuthor)\n        ? initiativeAuthor.id\n        : null;\n      const initiativeImageUrl: string | null = get(\n        initiativeImage,\n        'attributes.versions.medium',\n        null\n      );\n      const commentsCount = initiative.attributes.comments_count;\n      const cardClassNames = [\n        className,\n        'e2e-initiative-card',\n        get(initiative, 'relationships.user_vote.data') ? 'voted' : 'not-voted',\n        commentsCount > 0 ? 'e2e-has-comments' : null,\n      ]\n        .filter((item) => isString(item) && item !== '')\n        .join(' ');\n\n      return (\n        <Card\n          className={cardClassNames}\n          onClick={this.onCardClick}\n          to={`/initiatives/${initiative.attributes.slug}`}\n          imageUrl={initiativeImageUrl}\n          title={initiativeTitle}\n          body={\n            <StyledAuthor\n              authorId={initiativeAuthorId}\n              createdAt={initiative.attributes.published_at}\n              size={34}\n            />\n          }\n          footer={\n            <FooterInner>\n              <VoteIndicator initiativeId={initiative.id} />\n              <Spacer />\n              <CommentInfo>\n                <CommentIcon name=\"comments\" ariaHidden />\n                <CommentCount\n                  aria-hidden\n                  className=\"e2e-initiativecard-comment-count\"\n                >\n                  {commentsCount}\n                </CommentCount>\n                <ScreenReaderOnly>\n                  <FormattedMessage\n                    {...messages.xComments}\n                    values={{ commentsCount }}\n                  />\n                </ScreenReaderOnly>\n              </CommentInfo>\n            </FooterInner>\n          }\n        />\n      );\n    }\n\n    return null;\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n  initiativeImage: ({ initiativeId, initiative, render }) => (\n    <GetInitiativeImage\n      initiativeId={initiativeId}\n      initiativeImageId={get(\n        initiative,\n        'relationships.initiative_images.data[0].id'\n      )}\n    >\n      {render}\n    </GetInitiativeImage>\n  ),\n  initiativeAuthor: ({ initiative, render }) => (\n    <GetUser id={get(initiative, 'relationships.author.data.id')}>\n      {render}\n    </GetUser>\n  ),\n});\n\nconst InitiativeCardWithHoC = injectLocalize(InitiativeCard);\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <InitiativeCardWithHoC {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  noInitiativesWithLocation: {\n    id: 'app.components.InitiativesMap.noInitiativesWithLocation',\n    defaultMessage:\n      \"The initiatives in this project don't have any location information.\",\n  },\n  seeInitiative: {\n    id: 'app.components.InitiativesMap.seeInitiative',\n    defaultMessage: 'See initiative',\n  },\n  postInitiativeHere: {\n    id: 'app.components.InitiativesMap.postInitiativeHere',\n    defaultMessage: 'Post an initiative here',\n  },\n});\n","import React, { memo } from 'react';\n\n// components\nimport InitiativesIndexMeta from './InitiativesIndexMeta';\nimport InitiativesHeader from './InitiativesHeader';\nimport SuccessStories from './SuccessStories';\nimport InitiativeCards from 'components/InitiativeCards';\nimport ContentContainer from 'components/ContentContainer';\nimport CityLogoSection from 'components/CityLogoSection';\nimport InitiativeButton from 'components/InitiativeButton';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// style\nimport styled from 'styled-components';\nimport { media, fontSizes, colors } from 'utils/styleUtils';\n\nconst Container = styled.main``;\n\nconst FooterBanner = styled.div`\n  background: ${({ theme }) => theme.colorMain};\n  width: 100%;\n  min-height: 300px;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding-left: 30px;\n  padding-right: 30px;\n  padding-top: 50px;\n  padding-bottom: 60px;\n`;\n\nconst FooterMessage = styled.h2`\n  color: #fff;\n  font-size: ${fontSizes.xxxl}px;\n  line-height: normal;\n  font-weight: 600;\n  margin-bottom: 30px;\n  max-width: 500px;\n  text-align: center;\n\n  ${media.smallerThanMaxTablet`\n      font-size: ${fontSizes.xxxl}px;\n    `}\n`;\n\nconst StyledContentContainer = styled(ContentContainer)`\n  width: 100%;\n  background-color: ${colors.background};\n  padding-bottom: 150px;\n\n  ${media.smallerThanMaxTablet`\n    padding-bottom: 80px;\n  `}\n`;\n\nconst Padding = styled.div`\n  width: 100%;\n  height: 100px;\n  ${media.smallerThanMinTablet`\n    height: 40px;\n  `}\n`;\n\ninterface Props {}\n\nconst InitiativeIndexPage = memo<Props>(() => (\n  <>\n    <InitiativesIndexMeta />\n    <Container>\n      <InitiativesHeader />\n      <StyledContentContainer maxWidth=\"100%\">\n        <SuccessStories />\n        <Padding />\n        <InitiativeCards\n          invisibleTitleMessage={messages.invisibleTitleInitiativeCards}\n        />\n      </StyledContentContainer>\n      <FooterBanner>\n        <FooterMessage>\n          <FormattedMessage {...messages.footer} />\n        </FooterMessage>\n\n        <InitiativeButton buttonStyle=\"white\" location=\"initiatives_footer\" />\n      </FooterBanner>\n      <CityLogoSection />\n    </Container>\n  </>\n));\n\nexport default InitiativeIndexPage;\n","export default {\n  toggleDisplay: 'Changed idea/initiative cards display mode',\n};\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  numberOfUsers: {\n    id: 'app.components.AvatarBubbles.numberOfUsers',\n    defaultMessage: '{numberOfUsers} users',\n  },\n});\n","// libraries\nimport React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { adopt } from 'react-adopt';\n\n// i18n\nimport messages from './messages';\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\n\n// resources\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetAppConfigurationLocales, {\n  GetAppConfigurationLocalesChildProps,\n} from 'resources/GetAppConfigurationLocales';\n\n// utils\nimport getAlternateLinks from 'utils/cl-router/getAlternateLinks';\nimport getCanonicalLink from 'utils/cl-router/getCanonicalLink';\n\ninterface InputProps {}\n\ninterface DataProps {\n  authUser: GetAuthUserChildProps;\n  tenantLocales: GetAppConfigurationLocalesChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst InitiativesIndexMeta = React.memo<Props & InjectedIntlProps>(\n  ({ intl, authUser, tenantLocales }) => {\n    const { formatMessage } = intl;\n    const { location } = window;\n    const initiativesIndexTitle = formatMessage(messages.metaTitle);\n    const initiativesIndexDescription = formatMessage(messages.metaDescription);\n\n    return (\n      <Helmet>\n        <title>\n          {`\n          ${\n            authUser && authUser.attributes.unread_notifications\n              ? `(${authUser.attributes.unread_notifications}) `\n              : ''\n          }\n          ${initiativesIndexTitle}`}\n        </title>\n        {getAlternateLinks(tenantLocales)}\n        {getCanonicalLink()}\n        <meta name=\"title\" content={initiativesIndexTitle} />\n        <meta name=\"description\" content={initiativesIndexDescription} />\n        <meta property=\"og:title\" content={initiativesIndexTitle} />\n        <meta property=\"og:description\" content={initiativesIndexDescription} />\n        <meta property=\"og:url\" content={location.href} />\n      </Helmet>\n    );\n  }\n);\n\nconst InitiativesIndexMetaWithHoc = injectIntl<Props>(InitiativesIndexMeta);\n\nconst Data = adopt<DataProps, InputProps>({\n  tenantLocales: <GetAppConfigurationLocales />,\n  authUser: <GetAuthUser />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataprops) => (\n      <InitiativesIndexMetaWithHoc {...inputProps} {...dataprops} />\n    )}\n  </Data>\n);\n","import React, { PureComponent } from 'react';\nimport { adopt } from 'react-adopt';\nimport { popup, LatLng, Map as LeafletMap } from 'leaflet';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { Subscription } from 'rxjs';\n\n// Utils\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from './tracks';\n\n// Components\nimport Map, { Point } from 'components/Map';\nimport Warning from 'components/UI/Warning';\nimport InitiativePreview from './InitiativePreview';\n\n// Events\nimport {\n  leafletMapSelectedMarker$,\n  leafletMapClicked$,\n} from 'components/UI/LeafletMap/events';\n\n// Resources\nimport GetInitiativeMarkers, {\n  GetInitiativeMarkersChildProps,\n} from 'resources/GetInitiativeMarkers';\nimport GetWindowSize, {\n  GetWindowSizeChildProps,\n} from 'resources/GetWindowSize';\n\n// i18n\nimport FormattedMessage from 'utils/cl-intl/FormattedMessage';\nimport messages from './messages';\n\n// Styling\nimport styled from 'styled-components';\n\n// Typing\nimport { IGeotaggedInitiativeData } from 'services/initiatives';\nimport InitiativeButton from 'components/InitiativeButton';\n\nconst Container = styled.div`\n  > .create-initiative-wrapper {\n    display: none;\n  }\n`;\n\nconst StyledWarning = styled(Warning)`\n  margin-bottom: 10px;\n`;\n\ninterface InputProps {\n  className?: string;\n}\n\ninterface DataProps {\n  initiativeMarkers: GetInitiativeMarkersChildProps;\n  windowSize: GetWindowSizeChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {\n  selectedInitiativeId: string | null;\n  points: Point[];\n  lat?: number | null;\n  lng?: number | null;\n  map?: LeafletMap | null;\n}\n\nexport class InitiativesMap extends PureComponent<\n  Props & WithRouterProps,\n  State\n> {\n  private addInitiativeButtonElement: HTMLElement;\n  private subscriptions: Subscription[];\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedInitiativeId: null,\n      points: [],\n    };\n    this.subscriptions = [];\n  }\n\n  componentDidMount() {\n    this.subscriptions = [\n      leafletMapSelectedMarker$.subscribe((InitiativeId) => {\n        if (InitiativeId) {\n          this.handleInitiativeMarkerSelected(InitiativeId);\n        }\n      }),\n      leafletMapClicked$.subscribe((latLng) => {\n        this.handleMapClicked(latLng);\n      }),\n    ];\n\n    const points = this.getPoints(this.props.initiativeMarkers);\n    this.setState({ points });\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.initiativeMarkers !== this.props.initiativeMarkers) {\n      const points = this.getPoints(this.props.initiativeMarkers);\n      this.setState({ points });\n    }\n  }\n\n  componentWillUnmount() {\n    this.subscriptions?.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  bindInitiativeCreationButton = (element: HTMLDivElement) => {\n    if (element) {\n      this.addInitiativeButtonElement = element;\n    }\n  };\n\n  getPoints = (\n    Initiatives: IGeotaggedInitiativeData[] | null | undefined | Error\n  ) => {\n    const InitiativePoints: Point[] = [];\n\n    if (!isNilOrError(Initiatives) && Initiatives.length > 0) {\n      Initiatives.forEach((Initiative) => {\n        if (\n          Initiative.attributes &&\n          Initiative.attributes.location_point_geojson\n        ) {\n          InitiativePoints.push({\n            ...Initiative.attributes.location_point_geojson,\n            id: Initiative.id,\n          });\n        }\n      });\n    }\n\n    return InitiativePoints;\n  };\n\n  deselectInitiative = () => {\n    this.setState({ selectedInitiativeId: null });\n  };\n\n  handleMapOnInit = (map: LeafletMap) => {\n    this.setState({ map });\n  };\n\n  handleInitiativeMarkerSelected = (InitiativeId: string) => {\n    trackEventByName(tracks.clickOnInitiativeMapMarker, {\n      extra: { InitiativeId },\n    });\n\n    this.setState(({ selectedInitiativeId }) => {\n      return {\n        selectedInitiativeId:\n          InitiativeId !== selectedInitiativeId ? InitiativeId : null,\n      };\n    });\n  };\n\n  handleMapClicked = (position: LatLng) => {\n    const { lat, lng } = position;\n    const { map } = this.state;\n\n    this.setState({ lat, lng });\n\n    if (this.addInitiativeButtonElement && position && map) {\n      popup()\n        .setLatLng(position)\n        .setContent(this.addInitiativeButtonElement)\n        .openOn(map);\n    }\n\n    return;\n  };\n\n  noInitiativesWithLocationMessage = (\n    <FormattedMessage {...messages.noInitiativesWithLocation} />\n  );\n\n  render() {\n    const { initiativeMarkers, className } = this.props;\n    const { selectedInitiativeId, points, lat, lng } = this.state;\n\n    return (\n      <Container className={className}>\n        {initiativeMarkers &&\n          initiativeMarkers.length > 0 &&\n          points.length === 0 && (\n            <StyledWarning text={this.noInitiativesWithLocationMessage} />\n          )}\n\n        <Map\n          onInit={this.handleMapOnInit}\n          points={points}\n          boxContent={\n            selectedInitiativeId ? (\n              <InitiativePreview initiativeId={selectedInitiativeId} />\n            ) : null\n          }\n          onBoxClose={this.deselectInitiative}\n        />\n\n        <div\n          className=\"create-initiative-wrapper\"\n          ref={this.bindInitiativeCreationButton}\n        >\n          <InitiativeButton location=\"in_map\" inMap lat={lat} lng={lng} />\n        </div>\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  initiativeMarkers: <GetInitiativeMarkers />,\n  windowSize: <GetWindowSize />,\n});\n\nconst InitiativesMapWithRouter = withRouter(InitiativesMap);\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <InitiativesMapWithRouter {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport { isEqual } from 'lodash-es';\nimport { Subscription, BehaviorSubject, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, switchMap, map, filter } from 'rxjs/operators';\nimport { IAvatarData, avatarByIdStream } from 'services/avatars';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  ids?: string[];\n}\n\ntype children = (renderProps: GetAvatarsChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  avatars: (IAvatarData | Error)[] | undefined | null | Error;\n}\n\nexport type GetAvatarsChildProps =\n  | (IAvatarData | Error)[]\n  | undefined\n  | null\n  | Error;\n\nexport default class GetAvatars extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      avatars: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { ids } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ ids });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => isEqual(prev, next)),\n          filter(({ ids }) => !!(ids && ids.length > 0)),\n          switchMap(({ ids }: { ids: string[] }) => {\n            return combineLatest(\n              ids.map((id) =>\n                avatarByIdStream(id).observable.pipe(\n                  map((avatar) =>\n                    !isNilOrError(avatar) ? avatar.data : avatar\n                  )\n                )\n              )\n            );\n          })\n        )\n        .subscribe((avatars) => {\n          this.setState({ avatars });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    this.inputProps$.next({ ids: this.props.ids });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { avatars } = this.state;\n    return (children as children)(avatars);\n  }\n}\n","import React, { PureComponent } from 'react';\n\n// components\nimport FilterSelector from 'components/FilterSelector';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\ntype Props = {\n  id?: string | undefined;\n  alignment: 'left' | 'right';\n  onChange: (value: string) => void;\n};\n\ntype State = {\n  selectedValue: string[];\n};\n\nclass SortFilterDropdown extends PureComponent<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedValue: ['new'],\n    };\n  }\n\n  handleOnChange = (selectedValue: string[]) => {\n    this.setState({ selectedValue });\n    this.props.onChange(selectedValue[0]);\n  };\n\n  render() {\n    const { alignment } = this.props;\n    const { selectedValue } = this.state;\n    const options = [\n      { text: <FormattedMessage {...messages.random} />, value: 'random' },\n      { text: <FormattedMessage {...messages.newest} />, value: 'new' },\n      { text: <FormattedMessage {...messages.oldest} />, value: '-new' },\n    ];\n\n    return (\n      <FilterSelector\n        id=\"e2e-initiatives-sort-dropdown\"\n        title={<FormattedMessage {...messages.sortTitle} />}\n        name=\"sort\"\n        selected={selectedValue}\n        values={options}\n        onChange={this.handleOnChange}\n        multipleSelectionAllowed={false}\n        width=\"180px\"\n        left={alignment === 'left' ? '-5px' : undefined}\n        mobileLeft={alignment === 'left' ? '-5px' : undefined}\n        right={alignment === 'right' ? '-5px' : undefined}\n        mobileRight={alignment === 'right' ? '-5px' : undefined}\n      />\n    );\n  }\n}\n\nexport default SortFilterDropdown;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  startInitiative: {\n    id: 'app.containers.InitiativesButton.startInitiative',\n    defaultMessage: 'Start an initiative',\n  },\n  postingNotPermitted: {\n    id: 'app.containers.InitiativesButton.postingNotPermitted',\n    defaultMessage: \"You don't have the rights to post an initiative\",\n  },\n});\n","import React, { PureComponent } from 'react';\nimport { adopt } from 'react-adopt';\nimport { get, isNumber } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// tracks\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from './tracks';\n\n// components\nimport InitiativeCard from 'components/InitiativeCard';\nimport InitiativesMap from 'components/InitiativesMap';\nimport { Icon, Spinner } from 'cl2-component-library';\nimport SortFilterDropdown from './SortFilterDropdown';\nimport StatusFilterBox from './StatusFilterBox';\nimport TopicFilterBox from './TopicFilterBox';\nimport SearchInput from 'components/UI/SearchInput';\nimport TopBar from 'components/FiltersModal/TopBar';\nimport BottomBar from 'components/FiltersModal/BottomBar';\nimport FullscreenModal from 'components/UI/FullscreenModal';\nimport Button from 'components/UI/Button';\nimport ViewButtons from 'components/PostCardsComponents/ViewButtons';\n\n//  Typings\nimport { MessageDescriptor } from 'typings';\n\n// resources\nimport GetInitiatives, {\n  Sort,\n  GetInitiativesChildProps,\n  IQueryParameters,\n} from 'resources/GetInitiatives';\nimport GetInitiativesFilterCounts, {\n  GetInitiativesFilterCountsChildProps,\n} from 'resources/GetInitiativesFilterCounts';\nimport GetWindowSize, {\n  GetWindowSizeChildProps,\n} from 'resources/GetWindowSize';\n\n// i18n\nimport messages from './messages';\nimport { InjectedIntlProps } from 'react-intl';\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\n\n// style\nimport styled, { withTheme } from 'styled-components';\nimport {\n  media,\n  colors,\n  fontSizes,\n  viewportWidths,\n  defaultCardStyle,\n} from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { rgba } from 'polished';\n\nconst gapWidth = 35;\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 1345px;\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n\n  @media (max-width: 1279px) {\n    max-width: 1000px;\n  }\n`;\n\nconst InitialLoading = styled.div`\n  width: 100%;\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  ${defaultCardStyle};\n\n  ${media.smallerThanMinTablet`\n    height: 150px;\n  `}\n`;\n\nconst MobileSearchInput = styled(SearchInput)`\n  margin-bottom: 20px;\n`;\n\nconst MobileFilterButton = styled(Button)``;\n\nconst MobileFiltersSidebarWrapper = styled.div`\n  background: ${colors.background};\n  padding: 15px;\n`;\n\nconst AboveContent = styled.div<{ filterColumnWidth: number }>`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-right: ${({ filterColumnWidth }) => filterColumnWidth + gapWidth}px;\n  margin-bottom: 22px;\n\n  ${media.smallerThanMaxTablet`\n    margin-right: 0;\n    margin-top: 20px;\n  `}\n`;\n\nconst AboveContentLeft = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst AboveContentRight = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst InitiativesCount = styled.div`\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.base}px;\n  line-height: 21px;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n\n  span > span {\n    font-weight: 600;\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n`;\n\nconst ContentLeft = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  position: relative;\n`;\n\nconst Loading = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  ${media.biggerThanMinTablet`\n    height: calc(100vh - 280px);\n    position: sticky;\n    top: 200px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    height: 150px;\n  `}\n`;\n\nconst EmptyContainer = styled.div`\n  flex: 1;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  ${defaultCardStyle};\n`;\n\nconst EmptyContainerInner = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-left: 30px;\n  padding-right: 30px;\n  padding-top: 100px;\n  padding-bottom: 100px;\n`;\n\nconst InitiativeIcon = styled(Icon)`\n  flex: 0 0 48px;\n  width: 48px;\n  height: 48px;\n  fill: ${colors.label};\n`;\n\nconst EmptyMessage = styled.div`\n  max-width: 400px;\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  line-height: normal;\n  text-align: center;\n  margin-top: 10px;\n`;\n\nconst EmptyMessageMainLine = styled.div`\n  color: ${colors.text};\n  font-size: ${fontSizes.xl}px;\n  font-weight: 500;\n  line-height: normal;\n  text-align: center;\n  margin-top: 15px;\n`;\n\nconst EmptyMessageSubLine = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 300;\n  line-height: normal;\n  text-align: center;\n  margin-top: 10px;\n`;\n\nconst InitiativesList = styled.div`\n  margin-left: -13px;\n  margin-right: -13px;\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst StyledInitiativeCard = styled(InitiativeCard)`\n  flex-grow: 0;\n  width: calc(100% * (1 / 3) - 26px);\n  margin-left: 13px;\n  margin-right: 13px;\n\n  @media (max-width: 1440px) and (min-width: 1279px) {\n    width: calc(100% * (1 / 3) - 16px);\n    margin-left: 8px;\n    margin-right: 8px;\n  }\n\n  @media (max-width: 1279px) and (min-width: 768px) {\n    width: calc(100% * (1 / 2) - 26px);\n  }\n\n  ${media.smallerThanMinTablet`\n    width: 100%;\n  `};\n`;\n\nconst ContentRight = styled.div<{ filterColumnWidth: number }>`\n  flex: 0 0 ${({ filterColumnWidth }) => filterColumnWidth}px;\n  width: ${({ filterColumnWidth }) => filterColumnWidth}px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  margin-left: ${gapWidth}px;\n  position: relative;\n`;\n\nconst FiltersSidebarContainer = styled.div`\n  position: relative;\n`;\n\nconst ClearFiltersText = styled.span`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  line-height: auto;\n`;\n\nconst ClearFiltersButton = styled.button`\n  height: 32px;\n  position: absolute;\n  top: -48px;\n  right: 0px;\n  display: flex;\n  align-items: center;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n\n  &:hover {\n    ${ClearFiltersText} {\n      color: #000;\n    }\n  }\n`;\n\nconst DesktopSearchInput = styled(SearchInput)`\n  margin-bottom: 20px;\n\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst StyledInitiativesStatusFilter = styled(StatusFilterBox)`\n  margin-bottom: 20px;\n`;\n\nconst StyledInitiativesTopicsFilter = styled(TopicFilterBox)`\n  margin-bottom: 0px;\n`;\n\nconst Spacer = styled.div`\n  flex: 1;\n`;\n\nconst StyledViewButtons = styled(ViewButtons)`\n  margin-right: 20px;\n`;\n\nconst Footer = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n\n  ${media.smallerThanMinTablet`\n    flex-direction: column;\n    align-items: stretch;\n    margin-top: 0px;\n  `}\n`;\n\nconst ShowMoreButton = styled(Button)``;\n\ninterface InputProps {\n  className?: string;\n  invisibleTitleMessage: MessageDescriptor;\n}\n\ninterface DataProps {\n  windowSize: GetWindowSizeChildProps;\n  initiatives: GetInitiativesChildProps;\n  initiativesFilterCounts: GetInitiativesFilterCountsChildProps;\n}\n\ninterface Props extends InputProps, DataProps {\n  theme: any;\n}\n\ninterface State {\n  selectedView: 'card' | 'map';\n  filtersModalOpened: boolean;\n  selectedInitiativeFilters: Partial<IQueryParameters>;\n  previouslySelectedInitiativeFilters: Partial<IQueryParameters> | null;\n}\n\nclass InitiativeCards extends PureComponent<Props & InjectedIntlProps, State> {\n  desktopSearchInputClearButton: HTMLButtonElement | null = null;\n  mobileSearchInputClearButton: HTMLButtonElement | null = null;\n\n  constructor(props: Props & InjectedIntlProps) {\n    super(props);\n    this.state = {\n      selectedView: 'card',\n      filtersModalOpened: false,\n      selectedInitiativeFilters: get(props.initiatives, 'queryParameters', {}),\n      previouslySelectedInitiativeFilters: null,\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const oldQueryParameters = get(\n      prevProps.initiatives,\n      'queryParameters',\n      null\n    );\n    const newQueryParameters = get(\n      this.props.initiatives,\n      'queryParameters',\n      null\n    );\n\n    if (newQueryParameters !== oldQueryParameters) {\n      this.setState({\n        selectedInitiativeFilters: get(\n          this.props.initiatives,\n          'queryParameters',\n          {}\n        ),\n      });\n    }\n  }\n\n  openFiltersModal = () => {\n    this.setState((state) => ({\n      filtersModalOpened: true,\n      previouslySelectedInitiativeFilters: state.selectedInitiativeFilters,\n    }));\n  };\n\n  loadMore = () => {\n    trackEventByName(tracks.loadMoreProposals);\n    this.props.initiatives.onLoadMore();\n  };\n\n  handleSortOnChange = (sort: Sort) => {\n    trackEventByName(tracks.sortingFilter, {\n      sort,\n    });\n    this.props.initiatives.onChangeSorting(sort);\n  };\n\n  handleSearchOnChange = (searchTerm: string) => {\n    this.props.initiatives.onChangeSearchTerm(searchTerm);\n  };\n\n  handleStatusOnChange = (initiative_status: string | null) => {\n    this.handleInitiativeFiltersOnChange({ initiative_status });\n  };\n\n  handleTopicsOnChange = (topics: string[] | null) => {\n    trackEventByName(tracks.topicsFilter, {\n      topics,\n    });\n    this.handleInitiativeFiltersOnChange({ topics });\n  };\n\n  handleStatusOnChangeAndApplyFilter = (initiative_status: string | null) => {\n    this.handleInitiativeFiltersOnChange({ initiative_status }, true);\n  };\n\n  handleTopicsOnChangeAndApplyFilter = (topics: string[] | null) => {\n    this.handleInitiativeFiltersOnChange({ topics }, true);\n  };\n\n  handleInitiativeFiltersOnChange = (\n    newSelectedInitiativeFilters: Partial<IQueryParameters>,\n    applyFilter = false\n  ) => {\n    this.setState((state) => {\n      const selectedInitiativeFilters = {\n        ...state.selectedInitiativeFilters,\n        ...newSelectedInitiativeFilters,\n      };\n\n      if (applyFilter) {\n        this.props.initiatives.onInitiativeFiltering(selectedInitiativeFilters);\n      }\n\n      return { selectedInitiativeFilters };\n    });\n  };\n\n  handleInitiativeFiltersOnReset = () => {\n    this.setState((state) => {\n      const selectedInitiativeFilters = {\n        ...state.selectedInitiativeFilters,\n        initiative_status: null,\n        areas: null,\n        topics: null,\n      };\n\n      return { selectedInitiativeFilters };\n    });\n  };\n\n  handleInitiativeFiltersOnResetAndApply = () => {\n    this.setState((state) => {\n      const selectedInitiativeFilters = {\n        ...state.selectedInitiativeFilters,\n        search: null,\n        initiative_status: null,\n        areas: null,\n        topics: null,\n      };\n\n      this.desktopSearchInputClearButton?.click();\n      this.mobileSearchInputClearButton?.click();\n\n      this.props.initiatives.onInitiativeFiltering(selectedInitiativeFilters);\n\n      return { selectedInitiativeFilters };\n    });\n  };\n\n  closeModalAndApplyFilters = () => {\n    this.setState((state) => {\n      this.props.initiatives.onInitiativeFiltering(\n        state.selectedInitiativeFilters\n      );\n\n      return {\n        filtersModalOpened: false,\n        previouslySelectedInitiativeFilters: null,\n      };\n    });\n  };\n\n  closeModalAndRevertFilters = () => {\n    this.setState((state) => {\n      this.props.initiatives.onInitiativeFiltering(\n        state.previouslySelectedInitiativeFilters || {}\n      );\n\n      return {\n        filtersModalOpened: false,\n        selectedInitiativeFilters:\n          state.previouslySelectedInitiativeFilters || {},\n        previouslySelectedInitiativeFilters: null,\n      };\n    });\n  };\n\n  selectView = (selectedView: 'card' | 'map') => {\n    this.setState({ selectedView });\n  };\n\n  handleDesktopSearchInputClearButtonRef = (element: HTMLButtonElement) => {\n    this.desktopSearchInputClearButton = element;\n  };\n\n  handleMobileSearchInputClearButtonRef = (element: HTMLButtonElement) => {\n    this.mobileSearchInputClearButton = element;\n  };\n\n  filterMessage = (<FormattedMessage {...messages.filter} />);\n  searchPlaceholder = this.props.intl.formatMessage(messages.searchPlaceholder);\n  searchAriaLabel = this.props.intl.formatMessage(messages.searchPlaceholder);\n\n  render() {\n    const {\n      selectedView,\n      selectedInitiativeFilters,\n      filtersModalOpened,\n    } = this.state;\n    const {\n      initiatives,\n      initiativesFilterCounts,\n      windowSize,\n      className,\n      theme,\n      invisibleTitleMessage,\n    } = this.props;\n    const { list, hasMore, querying, loadingMore } = initiatives;\n    const hasInitiatives = !isNilOrError(list) && list.length > 0;\n    const biggerThanLargeTablet =\n      windowSize && windowSize >= viewportWidths.largeTablet;\n    const biggerThanSmallTablet =\n      windowSize && windowSize >= viewportWidths.smallTablet;\n    const filterColumnWidth = windowSize && windowSize < 1400 ? 340 : 352;\n    const filtersActive =\n      selectedInitiativeFilters.search ||\n      selectedInitiativeFilters.initiative_status ||\n      selectedInitiativeFilters.areas ||\n      selectedInitiativeFilters.topics;\n\n    const filtersSidebar = (\n      <FiltersSidebarContainer className={className}>\n        {filtersActive && (\n          <ClearFiltersButton\n            onClick={this.handleInitiativeFiltersOnResetAndApply}\n          >\n            <ClearFiltersText>\n              <FormattedMessage {...messages.resetFilters} />\n            </ClearFiltersText>\n          </ClearFiltersButton>\n        )}\n\n        <ScreenReaderOnly aria-live=\"polite\">\n          {initiativesFilterCounts && (\n            <FormattedMessage\n              {...messages.a11y_totalInitiatives}\n              values={{ initiativeCount: initiativesFilterCounts.total }}\n            />\n          )}\n        </ScreenReaderOnly>\n\n        <DesktopSearchInput\n          placeholder={this.searchPlaceholder}\n          ariaLabel={this.searchAriaLabel}\n          setClearButtonRef={this.handleDesktopSearchInputClearButtonRef}\n          onChange={this.handleSearchOnChange}\n        />\n        <StyledInitiativesStatusFilter\n          selectedStatusId={selectedInitiativeFilters.initiative_status}\n          selectedInitiativeFilters={selectedInitiativeFilters}\n          onChange={\n            !biggerThanLargeTablet\n              ? this.handleStatusOnChange\n              : this.handleStatusOnChangeAndApplyFilter\n          }\n        />\n        <StyledInitiativesTopicsFilter\n          selectedTopicIds={selectedInitiativeFilters.topics}\n          onChange={\n            !biggerThanLargeTablet\n              ? this.handleTopicsOnChange\n              : this.handleTopicsOnChangeAndApplyFilter\n          }\n        />\n      </FiltersSidebarContainer>\n    );\n\n    return (\n      <Container id=\"e2e-initiatives-container\" className={className}>\n        <ScreenReaderOnly>\n          <FormattedMessage tagName=\"h2\" {...invisibleTitleMessage} />\n        </ScreenReaderOnly>\n\n        {list === undefined && (\n          <InitialLoading id=\"initiatives-loading\">\n            <Spinner />\n          </InitialLoading>\n        )}\n\n        {list !== undefined && (\n          <>\n            {!biggerThanLargeTablet && (\n              <>\n                <FullscreenModal\n                  opened={filtersModalOpened}\n                  close={this.closeModalAndRevertFilters}\n                  animateInOut={true}\n                  topBar={\n                    <TopBar\n                      onReset={\n                        !biggerThanLargeTablet\n                          ? this.handleInitiativeFiltersOnReset\n                          : this.handleInitiativeFiltersOnResetAndApply\n                      }\n                      onClose={this.closeModalAndRevertFilters}\n                    />\n                  }\n                  bottomBar={\n                    <GetInitiativesFilterCounts\n                      queryParameters={selectedInitiativeFilters}\n                    >\n                      {(newInitiativesFilterCounts) => {\n                        const bottomBarButtonText =\n                          newInitiativesFilterCounts &&\n                          isNumber(newInitiativesFilterCounts.total) ? (\n                            <FormattedMessage\n                              {...messages.showXInitiatives}\n                              values={{\n                                initiativesCount:\n                                  newInitiativesFilterCounts.total,\n                              }}\n                            />\n                          ) : (\n                            <FormattedMessage {...messages.showInitiatives} />\n                          );\n\n                        return (\n                          <BottomBar\n                            buttonText={bottomBarButtonText}\n                            onClick={this.closeModalAndApplyFilters}\n                          />\n                        );\n                      }}\n                    </GetInitiativesFilterCounts>\n                  }\n                >\n                  <MobileFiltersSidebarWrapper>\n                    {filtersSidebar}\n                  </MobileFiltersSidebarWrapper>\n                </FullscreenModal>\n\n                <MobileSearchInput\n                  placeholder={this.searchPlaceholder}\n                  ariaLabel={this.searchAriaLabel}\n                  setClearButtonRef={this.handleMobileSearchInputClearButtonRef}\n                  onChange={this.handleSearchOnChange}\n                />\n\n                <MobileFilterButton\n                  buttonStyle=\"secondary-outlined\"\n                  onClick={this.openFiltersModal}\n                  icon=\"filter\"\n                  text={this.filterMessage}\n                />\n              </>\n            )}\n\n            <AboveContent filterColumnWidth={filterColumnWidth}>\n              <AboveContentLeft>\n                <StyledViewButtons\n                  onClick={this.selectView}\n                  selectedView={selectedView}\n                />\n\n                {!isNilOrError(initiativesFilterCounts) &&\n                  biggerThanSmallTablet && (\n                    <InitiativesCount>\n                      <FormattedMessage\n                        {...messages.xInitiatives}\n                        values={{\n                          initiativesCount: initiativesFilterCounts.total,\n                        }}\n                      />\n                    </InitiativesCount>\n                  )}\n              </AboveContentLeft>\n\n              <Spacer />\n\n              {selectedView === 'card' && (\n                <AboveContentRight>\n                  <SortFilterDropdown\n                    onChange={this.handleSortOnChange}\n                    alignment=\"right\"\n                  />\n                </AboveContentRight>\n              )}\n            </AboveContent>\n\n            <Content>\n              <ContentLeft>\n                {selectedView === 'card' &&\n                  !querying &&\n                  hasInitiatives &&\n                  list && (\n                    <InitiativesList id=\"e2e-initiatives-list\">\n                      {list.map((initiative) => (\n                        <StyledInitiativeCard\n                          key={initiative.id}\n                          initiativeId={initiative.id}\n                        />\n                      ))}\n                    </InitiativesList>\n                  )}\n\n                {selectedView === 'card' && !querying && hasMore && (\n                  <Footer>\n                    <ShowMoreButton\n                      id=\"e2e-initiative-cards-show-more-button\"\n                      onClick={this.loadMore}\n                      buttonStyle=\"secondary\"\n                      text={<FormattedMessage {...messages.showMore} />}\n                      processing={loadingMore}\n                      height=\"50px\"\n                      icon=\"showMore\"\n                      iconPos=\"left\"\n                      textColor={theme.colorText}\n                      bgColor={rgba(theme.colorText, 0.08)}\n                      bgHoverColor={rgba(theme.colorText, 0.12)}\n                      fontWeight=\"500\"\n                    />\n                  </Footer>\n                )}\n\n                {selectedView === 'map' && <InitiativesMap />}\n\n                {selectedView === 'card' && querying && (\n                  <Loading id=\"initiatives-loading\">\n                    <Spinner />\n                  </Loading>\n                )}\n\n                {!querying && !hasInitiatives && (\n                  <EmptyContainer\n                    id=\"initiatives-empty\"\n                    className=\"e2e-initiative-cards-empty\"\n                  >\n                    <EmptyContainerInner>\n                      <InitiativeIcon ariaHidden name=\"initiatives\" />\n                      <EmptyMessage>\n                        <EmptyMessageMainLine>\n                          <FormattedMessage\n                            {...messages.noInitiativesForFilter}\n                          />\n                        </EmptyMessageMainLine>\n                        <EmptyMessageSubLine>\n                          <FormattedMessage {...messages.tryOtherFilter} />\n                        </EmptyMessageSubLine>\n                      </EmptyMessage>\n                    </EmptyContainerInner>\n                  </EmptyContainer>\n                )}\n              </ContentLeft>\n\n              {biggerThanLargeTablet && (\n                <ContentRight\n                  id=\"e2e-initiatives-filters\"\n                  filterColumnWidth={filterColumnWidth}\n                >\n                  {filtersSidebar}\n                </ContentRight>\n              )}\n            </Content>\n          </>\n        )}\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  windowSize: <GetWindowSize />,\n  initiatives: (\n    <GetInitiatives type=\"load-more\" publicationStatus=\"published\" />\n  ),\n  initiativesFilterCounts: ({ initiatives, render }) => (\n    <GetInitiativesFilterCounts\n      queryParameters={get(initiatives, 'queryParameters', null)}\n    >\n      {render}\n    </GetInitiativesFilterCounts>\n  ),\n});\n\nconst WithFiltersSidebarWithHoCs = withTheme(injectIntl(InitiativeCards));\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => (\n      <WithFiltersSidebarWithHoCs {...inputProps} {...dataProps} />\n    )}\n  </Data>\n);\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\n\nconst apiEndpoint = `${API_PATH}/avatars`;\n\nexport interface IAvatarData {\n  id: string;\n  type: string;\n  attributes: {\n    avatar: {\n      small: string;\n      medium: string;\n      large: string;\n    };\n  };\n}\n\nexport interface IAvatar {\n  data: IAvatarData;\n}\n\nexport interface IAvatars {\n  data: IAvatarData[];\n  meta: {\n    total: number;\n  };\n}\n\n/*\n * cf http://developers.citizenlab.co/api-docs/frontweb_api/epic/CL2-2838-landing-page-i1/avatars/list_random_user_avatars.html\n * limit: number of avaters returned, defaults to 5, max 10.\n * context_type: when null, context is the whole platform.\n */\ninterface IAvatarsQueryParams {\n  limit?: number | null;\n  context_type?: 'group' | 'project' | 'idea' | 'initiative' | null;\n  context_id?: string | null;\n}\n\ninterface IStreamAvatarsParams extends IStreamParams {\n  queryParameters?: IAvatarsQueryParams;\n}\n\nexport function avatarByIdStream(avatarId: string) {\n  return streams.get<IAvatar>({\n    apiEndpoint: `${API_PATH}/avatars/${avatarId}`,\n    cacheStream: false,\n  });\n}\n\nexport function randomAvatarsStream(\n  streamParams: IStreamAvatarsParams | null = null\n) {\n  return streams.get<IAvatars>({\n    apiEndpoint,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n","import React, { PureComponent } from 'react';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport AvatarBubbles from 'components/AvatarBubbles';\nimport InitiativeInfoContent from './InitiativeInfoContent';\n\n// resources\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// style\nimport styled from 'styled-components';\nimport { media, fontSizes } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport T from 'components/T';\n\n// images\nimport InitiativeButton from 'components/InitiativeButton';\nimport GetInitiativesPermissions, {\n  GetInitiativesPermissionsChildProps,\n} from 'resources/GetInitiativesPermissions';\n\nconst Container = styled.div`\n  width: 100%;\n  min-height: 350px;\n  padding: 20px 15px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  ${media.smallerThanMinTablet`\n    min-height: 300px;\n  `}\n`;\n\nconst Content = styled.div`\n  width: 100%;\n  height: 100%;\n  max-width: ${(props) => props.theme.maxPageWidth + 60}px;\n  padding-top: 50px;\n  padding-left: 30px;\n  padding-right: 30px;\n  padding-bottom: 50px;\n  ${media.smallerThanMinTablet`\n    padding-bottom: 20px;\n  `}\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 1;\n`;\n\nconst Title = styled.h2`\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${({ theme }) =>\n    theme.signedOutHeaderTitleFontSize || fontSizes.xxxxl}px;\n  font-weight: ${({ theme }) => theme.signedOutHeaderTitleFontWeight || 600};\n  line-height: normal;\n  text-align: center;\n  width: 100%;\n  max-width: 600px;\n  margin: 0;\n  padding: 0;\n  margin-bottom: 18px;\n\n  ${media.smallerThanMaxTablet`\n    font-size: ${fontSizes.xxxl}px;\n  `}\n`;\n\nconst StyledAvatarBubbles = styled(AvatarBubbles)`\n  min-height: 40px;\n  margin-bottom: 18px;\n`;\n\nconst StyledInitiativeInfoContent = styled(InitiativeInfoContent)`\n  max-width: 550px;\n  margin-bottom: 30px;\n`;\n\nexport interface InputProps {\n  className?: string;\n}\n\ninterface DataProps {\n  authUser: GetAuthUserChildProps;\n  tenant: GetAppConfigurationChildProps;\n  postingPermission: GetInitiativesPermissionsChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass InitiativesHeader extends PureComponent<Props, State> {\n  render() {\n    const { className, tenant, postingPermission } = this.props;\n\n    if (isNilOrError(tenant)) return null;\n\n    return (\n      <Container className={`e2e-initiatives-header ${className || ''}`}>\n        <ScreenReaderOnly>\n          <FormattedMessage\n            tagName=\"h1\"\n            {...messages.invisibleInitiativesPageTitle}\n          />\n        </ScreenReaderOnly>\n        <Content>\n          <Title>\n            {postingPermission?.enabled ? (\n              <FormattedMessage\n                {...messages.header}\n                values={{\n                  styledOrgName: (\n                    <T\n                      value={tenant.attributes.settings.core.organization_name}\n                    />\n                  ),\n                }}\n              />\n            ) : (\n              <FormattedMessage\n                {...messages.headerPostingProposalDisabled}\n                values={{\n                  styledOrgName: (\n                    <T\n                      value={tenant.attributes.settings.core.organization_name}\n                    />\n                  ),\n                }}\n              />\n            )}\n          </Title>\n          <StyledAvatarBubbles />\n          <StyledInitiativeInfoContent />\n          <InitiativeButton location=\"initiatives_header\" />\n        </Content>\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  authUser: <GetAuthUser />,\n  tenant: <GetAppConfiguration />,\n  postingPermission: <GetInitiativesPermissions action=\"posting_initiative\" />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <InitiativesHeader {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport { Subscription } from 'rxjs';\nimport {\n  IGeotaggedInitiativeData,\n  initiativesMarkersStream,\n} from 'services/initiatives';\n\ninterface InputProps {}\n\ntype children = (\n  renderProps: GetInitiativeMarkersChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  initiativeMarkers: IGeotaggedInitiativeData[] | undefined | null;\n}\n\nexport type GetInitiativeMarkersChildProps =\n  | IGeotaggedInitiativeData[]\n  | undefined\n  | null;\n\nexport default class GetInitiativeMarkers extends React.Component<\n  Props,\n  State\n> {\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      initiativeMarkers: undefined,\n    };\n  }\n\n  componentDidMount() {\n    this.subscriptions = [\n      initiativesMarkersStream().observable.subscribe((initiativeMarkers) => {\n        this.setState({\n          initiativeMarkers: initiativeMarkers ? initiativeMarkers.data : null,\n        });\n      }),\n    ];\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiativeMarkers } = this.state;\n    return (children as children)(initiativeMarkers);\n  }\n}\n","import React, { memo } from 'react';\nimport { get } from 'lodash-es';\n\n// components\nimport SuccessCard from './SuccessCard';\nimport { Icon } from 'cl2-component-library';\n\n// style\nimport styled from 'styled-components';\nimport { media, colors, fontSizes } from 'utils/styleUtils';\n\n// data\nimport { adopt } from 'react-adopt';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// intl\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\ninterface InputProps {}\ninterface DataProps {\n  tenant: GetAppConfigurationChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst StyledContentContainer: any = styled.div`\n  width: 100%;\n  max-width: 1345px;\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  padding-top: 80px;\n\n  ${media.smallerThanMinTablet`\n    display: none !important;\n  `}\n\n  @media (max-width: 1279px) {\n    max-width: 1000px;\n  }\n`;\n\nconst SuccessIcon = styled(Icon)`\n  color: ${colors.clGreen};\n  height: 20px;\n  margin-right: 15px;\n`;\n\nconst SuccessTitle = styled.div`\n  & h2 {\n    font-size: ${fontSizes.xl}px;\n    margin-top: 3px;\n    font-weight: 400;\n  }\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst StoriesContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst SuccessStories = memo(({ tenant }: Props) => {\n  if (isNilOrError(tenant)) return null;\n  const successStories = get(\n    tenant,\n    'attributes.settings.initiatives.success_stories'\n  );\n\n  if (successStories && successStories.length === 3) {\n    return (\n      <StyledContentContainer mode=\"page\">\n        <SuccessTitle>\n          <SuccessIcon name=\"successStory\" />\n          <FormattedMessage tagName=\"h2\" {...messages.successStoryTitle} />\n        </SuccessTitle>\n        <StoriesContainer>\n          {successStories.map((story) => (\n            <SuccessCard\n              key={story.page_slug}\n              location={story.location}\n              imageUrl={story.image_url}\n              pageSlug={story.page_slug}\n            />\n          ))}\n        </StoriesContainer>\n      </StyledContentContainer>\n    );\n  }\n  return null;\n});\n\nconst Data = adopt<DataProps, InputProps>({\n  tenant: <GetAppConfiguration />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataprops) => <SuccessStories {...inputProps} {...dataprops} />}\n  </Data>\n);\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Avatar from 'components/Avatar';\nimport UserName from 'components/UI/UserName';\n\n// services\nimport { canModerateProject } from 'services/permissions/rules/projectPermissions';\n\n// hooks\nimport useUser from 'hooks/useUser';\n\n// i18n\nimport { FormattedRelative } from 'react-intl';\n\n// style\nimport styled from 'styled-components';\nimport { media, colors, fontSizes, isRtl } from 'utils/styleUtils';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport { ScreenReaderOnly } from 'utils/a11y';\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  ${isRtl`\n    justify-content: flex-end;\n  `}\n\n  ${media.smallPhone`\n    flex-direction: column;\n  `}\n`;\n\nconst AuthorContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledAvatar = styled(Avatar)`\n  margin-right: 6px;\n  margin-bottom: 1px;\n\n  ${isRtl`\n    margin-right: 0;\n    margin-left: 6px;\n  `}\n`;\n\nconst AuthorMeta = styled.div`\n  &.horizontalLayout {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n\n    ${isRtl`\n        flex-direction: row-reverse;\n    `}\n  }\n`;\n\nconst AuthorNameContainer = styled.div`\n  display: flex;\n  align-items: center;\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  line-height: 16px;\n  text-decoration: none;\n\n  &.horizontalLayout {\n    margin-right: 10px;\n\n    ${isRtl`\n        margin-right: 0;\n        margin-left: 10px;\n    `}\n  }\n`;\n\nconst TimeAgo = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  line-height: 16px;\n  margin-top: 3px;\n\n  &.horizontalLayout {\n    margin-top: 2px;\n  }\n`;\n\nexport interface Props {\n  authorId: string | null;\n  createdAt?: string;\n  size: number;\n  isLinkToProfile?: boolean;\n  projectId?: string | null;\n  showAvatar?: boolean;\n  avatarBadgeBgColor?: string;\n  showModeration?: boolean; // will show red styling on admins and moderators of projectId\n  fontWeight?: number;\n  fontSize?: number;\n  className?: string;\n  horizontalLayout?: boolean;\n  underline?: boolean;\n  color?: string;\n}\n\nconst Author = memo(\n  ({\n    authorId,\n    createdAt,\n    size,\n    isLinkToProfile,\n    projectId,\n    showAvatar = true,\n    showModeration,\n    className,\n    avatarBadgeBgColor,\n    fontWeight,\n    fontSize,\n    horizontalLayout,\n    color,\n    underline,\n  }: Props) => {\n    const author = useUser({ userId: authorId });\n    const authorCanModerate =\n      !isNilOrError(author) &&\n      showModeration &&\n      canModerateProject(projectId, { data: author });\n\n    return (\n      <Container className={className}>\n        <AuthorContainer>\n          {showAvatar && (\n            <StyledAvatar\n              userId={authorId}\n              size={size}\n              isLinkToProfile={isLinkToProfile}\n              moderator={authorCanModerate}\n              bgColor={avatarBadgeBgColor}\n            />\n          )}\n\n          <AuthorMeta className={horizontalLayout ? 'horizontalLayout' : ''}>\n            <AuthorNameContainer\n              className={horizontalLayout ? 'horizontalLayout' : ''}\n            >\n              <ScreenReaderOnly>\n                <FormattedMessage {...messages.a11y_postedBy} />:\n              </ScreenReaderOnly>\n              <UserName\n                userId={authorId}\n                isLinkToProfile={isLinkToProfile}\n                canModerate={authorCanModerate}\n                fontWeight={fontWeight}\n                fontSize={fontSize}\n                color={color}\n                underline={underline}\n              />\n            </AuthorNameContainer>\n\n            {createdAt && (\n              <TimeAgo className={horizontalLayout ? 'horizontalLayout' : ''}>\n                <FormattedRelative value={createdAt} />\n              </TimeAgo>\n            )}\n          </AuthorMeta>\n        </AuthorContainer>\n      </Container>\n    );\n  }\n);\n\nexport default Author;\n","import React, { memo, useCallback } from 'react';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport TopicsFilter from 'components/FilterBoxes/TopicsFilter';\n\n// resources\nimport GetTopics, { GetTopicsChildProps } from 'resources/GetTopics';\n\n// styling\nimport styled from 'styled-components';\n\n// typings\nimport { ITopicData } from 'services/topics';\n\nconst Container = styled.div``;\n\ninterface InputProps {\n  selectedTopicIds: string[] | null | undefined;\n  onChange: (arg: string[] | null) => void;\n  className?: string;\n}\n\ninterface DataProps {\n  topics: GetTopicsChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst TopicFilterBox = memo<Props>(\n  ({ selectedTopicIds, topics, onChange, className }) => {\n    const handleOnChange = useCallback(\n      (newsSelectedTopicIds: string[] | null) => {\n        onChange(newsSelectedTopicIds);\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      []\n    );\n\n    if (\n      !isNilOrError(topics) &&\n      topics.filter((topic) => !isNilOrError(topic)).length > 0\n    ) {\n      return (\n        <Container className={className}>\n          <TopicsFilter\n            topics={\n              topics.filter((topic) => !isNilOrError(topic)) as ITopicData[]\n            }\n            selectedTopicIds={selectedTopicIds}\n            onChange={handleOnChange}\n          />\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  topics: <GetTopics />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <TopicFilterBox {...inputProps} {...dataProps} />}\n  </Data>\n);\n"],"sourceRoot":""}