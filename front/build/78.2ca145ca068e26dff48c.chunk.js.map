{"version":3,"sources":["webpack:///./app/containers/Admin/emails/custom/Show/PreviewFrame.tsx","webpack:///./app/resources/GetCampaign.tsx","webpack:///./app/containers/Admin/emails/custom/Show/CampaignStats.tsx","webpack:///./node_modules/react-frame-component/lib/Content.js","webpack:///./app/resources/GetCampaignStats.tsx","webpack:///./app/containers/Admin/emails/custom/Show/index.tsx","webpack:///./node_modules/react-frame-component/lib/index.js","webpack:///./app/containers/Admin/emails/custom/Show/RecipientsTable.tsx","webpack:///./app/resources/GetUser.tsx","webpack:///./app/containers/Admin/emails/custom/Show/Stamp.tsx","webpack:///./app/resources/GetCampaignDeliveries.tsx","webpack:///./app/resources/GetGroup.tsx","webpack:///./node_modules/react-frame-component/lib/Context.js","webpack:///./app/containers/Admin/emails/custom/Show/DraftCampaignDetails.tsx","webpack:///./app/containers/Admin/emails/messages.ts","webpack:///./node_modules/react-frame-component/lib/Frame.js","webpack:///./app/services/campaigns.ts","webpack:///./app/containers/Admin/emails/custom/Show/SentCampaignDetails.tsx"],"names":["StyledFrame","Frame","props","theme","borderRadius","colors","separation","state","previewHtml","undefined","API_PATH","this","campaignId","then","json","setState","html","className","id","initialContent","React","Component","GetCampaign","campaign","inputProps$","BehaviorSubject","subscriptions","pipe","distinctUntilChanged","prev","next","filter","isString","switchMap","campaignByIdStream","observable","subscribe","isNilOrError","data","forEach","subscription","unsubscribe","children","Container","styled","div","GraphCard","adminBorder","adminContentBackground","GraphCardPercentage","fontSizes","small","adminSecondaryTextColor","GraphCardTitle","h3","large","GraphCardCount","xl","CampaignStats","stats","key","FormattedNumber","style","value","failed","bounced","FormattedMessage","messages","deliveryStatus_failed","relevantsStats","map","status","IconTooltip","content","deliveryStatus_clickedTooltip","inputProps","Object","defineProperty","exports","_createClass","defineProperties","target","i","length","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","prototype","_react","_propTypes2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","Content","_Component","__proto__","getPrototypeOf","apply","arguments","subClass","superClass","create","constructor","setPrototypeOf","_inherits","contentDidMount","contentDidUpdate","Children","only","propTypes","element","isRequired","func","GetCampaignStats","getCampaignStats","PageHeader","CampaignHeader","StampIcon","Stamp","FromTo","base","FromToHeader","span","SendTestEmailButton","button","StyledButtonContainer","PageTitleWrapper","PageTitle","h1","Buttons","GroupLink","a","ButtonsWrapper","ModalContainer","SendNowWarning","Show","noGroupsSelected","openSendConfirmationModal","sendCampaign","sendCampaignPreview","previewSentConfirmation","intl","formatMessage","window","alert","groupId","event","preventDefault","clHistory","push","senderType","user","tenant","localize","senderName","attributes","settings","core","organization_name","first_name","last_name","showSendConfirmationModal","closeSendConfirmationModal","groupIds","relationships","groups","group","sender","getSenderName","subject_multiloc","isDraft","StatusLabel","backgroundColor","text","draft","sent","linkTo","buttonStyle","editButtonLabel","icon","iconPos","onClick","handleSend","send","campaignFrom","campaignTo","handleGroupLinkClick","allUsers","index","title_multiloc","handleSendTestEmail","sendTestEmailButton","sendTestEmailTooltip","opened","close","header","confirmSendHeader","toAllUsers","changeRecipientsButton","confirmSendCampaign","sendNowButton","Data","adopt","params","render","ShowWithHOCs","injectIntl","withRouter","dataProps","useFrame","FrameContextConsumer","FrameContext","_Context","get","_Frame","_Frame2","statusColorMapping","accepted","delivered","clicked","RecipientsTable","deliveries","currentPage","lastPage","List","d","join","recipient","Row","TextCell","userId","size","email","delivery_status","totalPages","loadPage","onChangePage","PureComponent","pageSize","GetUser","slug","resetOnChange","tap","userByIdStream","userBySlugStream","of","title","width","height","viewBox","fill","GetCampaignDeliveries","pageNumber","pageChanges$","combineLatest","listCampaignDeliveries","queryParameters","getPageNumberFromUrl","links","last","handleOnPageChange","GetGroup","getGroup","FrameContextProvider","_react2","doc","win","document","createContext","useContext","Provider","Consumer","ButtonWrapper","DraftCampaignDetails","deleteMessage","campaignDeletionConfirmation","confirm","deleteCampaign","handleDelete","deleteCampaignButton","DraftCampaignDetailsWithHOCs","defineMessages","titleEmails","defaultMessage","subtitleEmails","helmetTitle","helmetDescription","addCampaignButton","deleteButtonLabel","statsButton","manageButtonLabel","fieldSender","fieldSenderTooltip","fieldReplyTo","fieldReplyToTooltip","fieldTo","fieldToTooltip","fieldSubject","fieldSubjectTooltip","fieldBody","addCampaignTitle","editCampaignTitle","formSaveButton","formErrorButton","formSuccessButton","formSuccessMessage","formErrorMessage","formUnexpectedErrorMessage","previewTitle","recipientsTitle","deliveryStatus_sent","deliveryStatus_accepted","deliveryStatus_delivered","deliveryStatus_opened","deliveryStatus_clicked","tabCustom","tabAutomated","noAccess","noCampaignsHeader","noCampaignsDescription","automatedEmailCampaignsInfo","nameVariablesInfo","senderRecipients","_extends","assign","source","hasOwnProperty","_reactDom2","_Content2","context","_this","setRef","node","handleLoad","iframeLoaded","_isMounted","getDoc","readyState","forceUpdate","addEventListener","removeEventListener","contentDocument","mountTarget","querySelector","body","defaultView","parentView","contents","createElement","getMountTarget","createPortal","head","srcDoc","ref","onLoad","renderFrameContents","object","string","oneOfType","arrayOf","defaultProps","streamParams","streams","apiEndpoint","campaignData","add","update","delete","deliveries_count","stream","fetchAllWith","PaddedCampaignStats","PaddedPreviewFrame","PreviewFrame","PaddedRecipientsTable","SentCampaignDetails"],"mappings":"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","file":"78.2ca145ca068e26dff48c.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { API_PATH } from 'containers/App/constants';\nimport Frame from 'react-frame-component';\nimport request from 'utils/request';\n\nconst StyledFrame = styled(Frame)`\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  border: 1px solid ${(props) => props.theme.colors.separation};\n  width: 100%;\n  height: 450px;\n`;\n\ntype Props = {\n  campaignId: string;\n  className?: string;\n};\n\ntype State = {\n  previewHtml?: string;\n};\n\nclass PreviewFrame extends React.Component<Props, State> {\n  iframeNode: HTMLIFrameElement;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      previewHtml: undefined,\n    };\n  }\n\n  componentDidMount() {\n    request<{ html: string }>(\n      `${API_PATH}/campaigns/${this.props.campaignId}/preview`,\n      null,\n      null,\n      null\n    ).then((json) => {\n      this.setState({ previewHtml: json.html });\n    });\n  }\n\n  render() {\n    const { previewHtml } = this.state;\n    const { className } = this.props;\n\n    if (!previewHtml) return null;\n\n    return (\n      <StyledFrame\n        id=\"e2e-email-preview-iframe\"\n        className={className}\n        initialContent={previewHtml}\n      />\n    );\n  }\n}\n\nexport default PreviewFrame;\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, switchMap, filter } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { ICampaignData, campaignByIdStream } from 'services/campaigns';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  id: string;\n}\n\ntype children = (renderProps: GetCampaignChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  campaign: ICampaignData | undefined | null | Error;\n}\n\nexport type GetCampaignChildProps = ICampaignData | undefined | null | Error;\n\nexport default class GetCampaign extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      campaign: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          filter(({ id }) => isString(id)),\n          switchMap(({ id }) => campaignByIdStream(id).observable)\n        )\n        .subscribe((campaign) =>\n          this.setState({\n            campaign: !isNilOrError(campaign) ? campaign.data : campaign,\n          })\n        ),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id } = this.props;\n    this.inputProps$.next({ id });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { campaign } = this.state;\n    return (children as children)(campaign);\n  }\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\nimport GetCampaignStats from 'resources/GetCampaignStats';\nimport { isNilOrError } from 'utils/helperUtils';\n\nimport messages from '../../messages';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport { FormattedNumber } from 'react-intl';\nimport { IconTooltip } from 'cl2-component-library';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: stretch;\n  margin: 0px -5px;\n  height: 130px;\n`;\n\nconst GraphCard = styled.div`\n  display: flex;\n  flex-direction: column;\n  border: solid 1px ${colors.adminBorder};\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  background: ${colors.adminContentBackground};\n  margin: 5px;\n  justify-content: space-around;\n  flex-grow: 1;\n  align-items: center;\n`;\n\nconst GraphCardPercentage = styled.div`\n  font-size: ${fontSizes.small};\n  color: ${colors.adminSecondaryTextColor};\n`;\n\nconst GraphCardTitle = styled.h3`\n  display: flex;\n  font-size: ${fontSizes.large}px;\n  color: ${colors.adminSecondaryTextColor};\n  font-weight: 400;\n  margin: 0;\n\n  & > :not(last-child) {\n    margin-right: 7px;\n  }\n`;\n\nconst GraphCardCount = styled.div`\n  font-size: ${fontSizes.xl}px;\n`;\n\ntype InputProps = {\n  campaignId: string;\n  className?: string;\n};\n\ntype DataProps = {\n  stats: any;\n};\n\ntype IRelevantStats = 'sent' | 'delivered' | 'opened' | 'clicked';\n\ntype Props = InputProps & DataProps;\n\ninterface State {}\n\nclass CampaignStats extends React.Component<Props, State> {\n  relevantsStats = [\n    'sent',\n    'delivered',\n    'opened',\n    'clicked',\n  ] as IRelevantStats[];\n\n  render() {\n    const { stats, className } = this.props;\n    if (isNilOrError(stats)) return null;\n\n    return (\n      <Container className={className}>\n        <GraphCard key=\"failed\">\n          <GraphCardPercentage>\n            <FormattedNumber\n              style=\"percent\"\n              value={(stats.failed + stats.bounced) / stats['total']}\n            />\n          </GraphCardPercentage>\n          <GraphCardCount>{stats.failed + stats.bounced}</GraphCardCount>\n          <GraphCardTitle>\n            <FormattedMessage {...messages.deliveryStatus_failed} />\n          </GraphCardTitle>\n        </GraphCard>\n        {this.relevantsStats.map((status) => (\n          <GraphCard key={status}>\n            <GraphCardPercentage>{stats[status]}</GraphCardPercentage>\n            <GraphCardCount>\n              <FormattedNumber\n                style=\"percent\"\n                value={stats[status] / stats['total']}\n              />\n            </GraphCardCount>\n            <GraphCardTitle>\n              <FormattedMessage {...messages[`deliveryStatus_${status}`]} />\n              {status === 'clicked' && (\n                <IconTooltip\n                  content={\n                    <FormattedMessage\n                      {...messages.deliveryStatus_clickedTooltip}\n                    />\n                  }\n                />\n              )}\n            </GraphCardTitle>\n          </GraphCard>\n        ))}\n      </Container>\n    );\n  }\n}\n\nexport default (inputProps: InputProps) => (\n  <GetCampaignStats campaignId={inputProps.campaignId}>\n    {(stats) => <CampaignStats {...inputProps} stats={stats} />}\n  </GetCampaignStats>\n);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // eslint-disable-line no-unused-vars\n\n\nvar Content = function (_Component) {\n  _inherits(Content, _Component);\n\n  function Content() {\n    _classCallCheck(this, Content);\n\n    return _possibleConstructorReturn(this, (Content.__proto__ || Object.getPrototypeOf(Content)).apply(this, arguments));\n  }\n\n  _createClass(Content, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.props.contentDidMount();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.props.contentDidUpdate();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react.Children.only(this.props.children);\n    }\n  }]);\n\n  return Content;\n}(_react.Component);\n\nContent.propTypes = {\n  children: _propTypes2.default.element.isRequired,\n  contentDidMount: _propTypes2.default.func.isRequired,\n  contentDidUpdate: _propTypes2.default.func.isRequired\n};\nexports.default = Content;","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, switchMap, filter } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { ICampaignStats, getCampaignStats } from 'services/campaigns';\n\ninterface InputProps {\n  campaignId: string;\n}\n\ntype children = (renderProps: GetCampaignStatsChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  stats: ICampaignStats | undefined | null | Error;\n}\n\nexport type GetCampaignStatsChildProps =\n  | ICampaignStats\n  | undefined\n  | null\n  | Error;\n\nexport default class GetCampaignStats extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      stats: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { campaignId } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ campaignId });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          filter(({ campaignId }) => isString(campaignId)),\n          switchMap(({ campaignId }) => getCampaignStats(campaignId).observable)\n        )\n        .subscribe((stats) => this.setState({ stats })),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { campaignId } = this.props;\n    this.inputProps$.next({ campaignId });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { stats } = this.state;\n    return (children as children)(stats);\n  }\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport clHistory from 'utils/cl-router/history';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { adopt } from 'react-adopt';\n\n// services & resources\nimport {\n  sendCampaign,\n  sendCampaignPreview,\n  ICampaignData,\n  isDraft,\n} from 'services/campaigns';\nimport GetCampaign from 'resources/GetCampaign';\nimport GetGroup from 'resources/GetGroup';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport messages from '../../messages';\nimport localize, { InjectedLocalized } from 'utils/localize';\n\n// components\nimport Button from 'components/UI/Button';\nimport { StatusLabel, IconTooltip } from 'cl2-component-library';\nimport DraftCampaignDetails from './DraftCampaignDetails';\nimport SentCampaignDetails from './SentCampaignDetails';\nimport T from 'components/T';\nimport Modal from 'components/UI/Modal';\nimport Stamp from './Stamp';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\n// styling\nimport { fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div``;\n\nconst PageHeader = styled.div`\n  display: flex;\n  margin-bottom: 20px;\n`;\n\nconst CampaignHeader = styled.div`\n  display: flex;\n  padding: 20px 0;\n  border-top: 1px solid #d8d8d8;\n  border-bottom: 1px solid #d8d8d8;\n  margin-bottom: 20px;\n`;\n\nconst StampIcon = styled(Stamp)`\n  margin-right: 20px;\n`;\n\nconst FromTo = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  font-size: ${fontSizes.base}px;\n  margin-right: auto;\n`;\n\nconst FromToHeader = styled.span`\n  font-weight: bold;\n`;\n\nconst SendTestEmailButton = styled.button`\n  text-decoration: underline;\n  font-size: ${fontSizes.base}px;\n  cursor: pointer;\n`;\nconst StyledButtonContainer = styled.div`\n  margin-bottom: 30px;\n  display: flex;\n  align-items: center;\n`;\n\nconst PageTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: auto;\n`;\n\nconst PageTitle = styled.h1`\n  margin-bottom: 0;\n  margin-right: 1rem;\n  font-weight: 600;\n`;\n\nconst Buttons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  & > * {\n    padding: 0 10px;\n  }\n`;\n\nconst GroupLink = styled.a`\n  color: inherit;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  width: 100%;\n\n  .Button {\n    margin-right: 1rem;\n    margin-bottom: 0.5rem;\n  }\n`;\n\nconst ModalContainer = styled.div`\n  padding: 30px;\n`;\n\nconst SendNowWarning = styled.div`\n  font-size: ${fontSizes.base}px;\n  margin-bottom: 30px;\n`;\n\ninterface InputProps {}\n\ninterface DataProps {\n  campaign: ICampaignData;\n  user: GetAuthUserChildProps;\n  tenant: GetAppConfigurationChildProps;\n}\n\ninterface Props\n  extends InputProps,\n    DataProps,\n    WithRouterProps,\n    InjectedIntlProps,\n    InjectedLocalized {}\n\ninterface State {\n  showSendConfirmationModal: boolean;\n}\n\nclass Show extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSendConfirmationModal: false,\n    };\n  }\n\n  handleSend = (noGroupsSelected: boolean) => () => {\n    if (noGroupsSelected) {\n      this.openSendConfirmationModal();\n    } else {\n      sendCampaign(this.props.campaign.id);\n    }\n  };\n\n  handleSendTestEmail = () => {\n    sendCampaignPreview(this.props.campaign.id).then(() => {\n      const previewSentConfirmation = this.props.intl.formatMessage(\n        messages.previewSentConfirmation\n      );\n      window.alert(previewSentConfirmation);\n    });\n  };\n\n  handleGroupLinkClick = (groupId?: string) => (\n    event: React.FormEvent<any>\n  ) => {\n    event.preventDefault();\n    if (groupId) {\n      clHistory.push(`/admin/users/${groupId}`);\n    } else {\n      clHistory.push('/admin/users');\n    }\n  };\n\n  getSenderName = (senderType: string) => {\n    const { user, tenant, localize } = this.props;\n    let senderName: string | null = null;\n\n    if (senderType === 'author' && !isNilOrError(user)) {\n      senderName = `${user.attributes.first_name} ${user.attributes.last_name}`;\n    } else if (senderType === 'organization' && !isNilOrError(tenant)) {\n      senderName = localize(tenant.attributes.settings.core.organization_name);\n    }\n\n    return senderName;\n  };\n\n  openSendConfirmationModal = () => {\n    this.setState({ showSendConfirmationModal: true });\n  };\n\n  closeSendConfirmationModal = () => {\n    this.setState({ showSendConfirmationModal: false });\n  };\n\n  confirmSendCampaign = (campaignId: string) => () => {\n    sendCampaign(campaignId).then(() => {\n      this.closeSendConfirmationModal();\n    });\n  };\n\n  render() {\n    const { campaign } = this.props;\n    const { showSendConfirmationModal } = this.state;\n\n    if (campaign) {\n      const groupIds: string[] = campaign.relationships.groups.data.map(\n        (group) => group.id\n      );\n      const senderType = campaign.attributes.sender;\n      const senderName = this.getSenderName(senderType);\n      const noGroupsSelected = groupIds.length === 0;\n\n      return (\n        <Container id=\"e2e-custom-email-container\">\n          <PageHeader>\n            <PageTitleWrapper>\n              <PageTitle>\n                <T value={campaign.attributes.subject_multiloc} />\n              </PageTitle>\n              {isDraft(campaign) ? (\n                <StatusLabel\n                  backgroundColor=\"draftYellow\"\n                  text={<FormattedMessage {...messages.draft} />}\n                />\n              ) : (\n                <StatusLabel\n                  backgroundColor=\"clGreenSuccess\"\n                  text={<FormattedMessage {...messages.sent} />}\n                />\n              )}\n            </PageTitleWrapper>\n            {isDraft(campaign) && (\n              <Buttons>\n                <Button\n                  linkTo={`/admin/emails/custom/${campaign.id}/edit`}\n                  buttonStyle=\"secondary\"\n                >\n                  <FormattedMessage {...messages.editButtonLabel} />\n                </Button>\n                <Button\n                  buttonStyle=\"admin-dark\"\n                  icon=\"send\"\n                  iconPos=\"right\"\n                  onClick={this.handleSend(noGroupsSelected)}\n                >\n                  <FormattedMessage {...messages.send} />\n                </Button>\n              </Buttons>\n            )}\n          </PageHeader>\n          <CampaignHeader>\n            <StampIcon />\n            <FromTo>\n              <div>\n                <FromToHeader>\n                  <FormattedMessage {...messages.campaignFrom} />\n                  &nbsp;\n                </FromToHeader>\n                <span>{senderName}</span>\n              </div>\n              <div>\n                <FromToHeader>\n                  <FormattedMessage {...messages.campaignTo} />\n                  &nbsp;\n                </FromToHeader>\n                {noGroupsSelected && (\n                  <GroupLink onClick={this.handleGroupLinkClick()}>\n                    {this.props.intl.formatMessage(messages.allUsers)}\n                  </GroupLink>\n                )}\n                {groupIds.map((groupId, index) => (\n                  <GetGroup key={groupId} id={groupId}>\n                    {(group) => {\n                      if (index < groupIds.length - 1) {\n                        return (\n                          <GroupLink\n                            onClick={this.handleGroupLinkClick(groupId)}\n                          >\n                            {!isNilOrError(group) &&\n                              this.props.localize(\n                                group.attributes.title_multiloc\n                              )}\n                            ,{' '}\n                          </GroupLink>\n                        );\n                      }\n                      return (\n                        <GroupLink onClick={this.handleGroupLinkClick(groupId)}>\n                          {!isNilOrError(group) &&\n                            this.props.localize(\n                              group.attributes.title_multiloc\n                            )}\n                        </GroupLink>\n                      );\n                    }}\n                  </GetGroup>\n                ))}\n              </div>\n            </FromTo>\n            {isDraft(campaign) && (\n              <StyledButtonContainer>\n                <SendTestEmailButton onClick={this.handleSendTestEmail}>\n                  <FormattedMessage {...messages.sendTestEmailButton} />\n                </SendTestEmailButton>\n                &nbsp;\n                <IconTooltip\n                  content={\n                    <FormattedMessage {...messages.sendTestEmailTooltip} />\n                  }\n                />\n              </StyledButtonContainer>\n            )}\n          </CampaignHeader>\n\n          {isDraft(campaign) ? (\n            <DraftCampaignDetails campaignId={campaign.id} />\n          ) : (\n            <SentCampaignDetails campaignId={campaign.id} />\n          )}\n\n          <Modal\n            opened={showSendConfirmationModal}\n            close={this.closeSendConfirmationModal}\n            header={<FormattedMessage {...messages.confirmSendHeader} />}\n          >\n            <ModalContainer>\n              <SendNowWarning>\n                <FormattedMessage {...messages.toAllUsers} />\n              </SendNowWarning>\n              <ButtonsWrapper>\n                <Button\n                  buttonStyle=\"secondary\"\n                  linkTo={`/admin/emails/custom/${campaign.id}/edit`}\n                >\n                  <FormattedMessage {...messages.changeRecipientsButton} />\n                </Button>\n                <Button\n                  buttonStyle=\"primary\"\n                  onClick={this.confirmSendCampaign(this.props.campaign.id)}\n                  icon=\"send\"\n                  iconPos=\"right\"\n                >\n                  <FormattedMessage {...messages.sendNowButton} />\n                </Button>\n              </ButtonsWrapper>\n            </ModalContainer>\n          </Modal>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst Data = adopt<DataProps, InputProps & WithRouterProps>({\n  campaign: ({ params, render }) => (\n    <GetCampaign id={params.campaignId}>{render}</GetCampaign>\n  ),\n  user: ({ render }) => <GetAuthUser>{render}</GetAuthUser>,\n  tenant: ({ render }) => <GetAppConfiguration>{render}</GetAppConfiguration>,\n});\n\nconst ShowWithHOCs = injectIntl(localize(Show));\n\nexport default withRouter((inputProps: InputProps & WithRouterProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <ShowWithHOCs {...inputProps} {...dataProps} />}\n  </Data>\n));\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useFrame = exports.FrameContextConsumer = exports.FrameContext = undefined;\n\nvar _Context = require('./Context');\n\nObject.defineProperty(exports, 'FrameContext', {\n  enumerable: true,\n  get: function get() {\n    return _Context.FrameContext;\n  }\n});\nObject.defineProperty(exports, 'FrameContextConsumer', {\n  enumerable: true,\n  get: function get() {\n    return _Context.FrameContextConsumer;\n  }\n});\nObject.defineProperty(exports, 'useFrame', {\n  enumerable: true,\n  get: function get() {\n    return _Context.useFrame;\n  }\n});\n\nvar _Frame = require('./Frame');\n\nvar _Frame2 = _interopRequireDefault(_Frame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Frame2.default;","import React from 'react';\nimport GetCampaignRecipients, {\n  GetCampaignDeliveriesChildProps,\n} from 'resources/GetCampaignDeliveries';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { List, Row, TextCell } from 'components/admin/ResourceList';\nimport GetUser from 'resources/GetUser';\nimport { StatusLabel } from 'cl2-component-library';\nimport { IDeliveryData } from 'services/campaigns';\nimport { colors } from 'utils/styleUtils';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from '../../messages';\nimport Pagination from 'components/admin/Pagination';\nimport Avatar from 'components/Avatar';\n\nconst statusColorMapping: {\n  [k in IDeliveryData['attributes']['delivery_status']]: keyof typeof colors;\n} = {\n  sent: 'lightGreyishBlue',\n  bounced: 'clRedError',\n  failed: 'clRedError',\n  accepted: 'lightGreyishBlue',\n  delivered: 'clBlueLight',\n  opened: 'clGreenSuccess',\n  clicked: 'clGreenSuccess',\n};\n\ninterface InputProps {\n  campaignId: string;\n  className?: string;\n}\n\ninterface DataProps extends GetCampaignDeliveriesChildProps {}\n\ninterface Props extends InputProps, DataProps {}\n\nclass RecipientsTable extends React.PureComponent<Props> {\n  render() {\n    const { deliveries, className, currentPage, lastPage } = this.props;\n    if (isNilOrError(deliveries)) {\n      return null;\n    }\n\n    return (\n      <List className={className} key={deliveries.map((d) => d.id).join()}>\n        {deliveries.map((recipient) => (\n          <Row key={recipient.id}>\n            <GetUser id={recipient.relationships.user.data.id}>\n              {(user) =>\n                isNilOrError(user) ? null : (\n                  <>\n                    <TextCell>\n                      <Avatar userId={user.id} size={30} />\n                    </TextCell>\n                    <TextCell>\n                      {user.attributes.first_name} {user.attributes.last_name}\n                    </TextCell>\n                    <TextCell className=\"expand\">\n                      {user.attributes.email}\n                    </TextCell>\n                    <StatusLabel\n                      backgroundColor={\n                        statusColorMapping[recipient.attributes.delivery_status]\n                      }\n                      text={\n                        <FormattedMessage\n                          {...messages[\n                            `deliveryStatus_${recipient.attributes.delivery_status}`\n                          ]}\n                        />\n                      }\n                    />\n                  </>\n                )\n              }\n            </GetUser>\n          </Row>\n        ))}\n        <Pagination\n          currentPage={currentPage}\n          totalPages={lastPage}\n          loadPage={this.props.onChangePage}\n        />\n      </List>\n    );\n  }\n}\n\nexport default (inputProps: InputProps) => (\n  <GetCampaignRecipients campaignId={inputProps.campaignId} pageSize={15}>\n    {(deliveries) => <RecipientsTable {...inputProps} {...deliveries} />}\n  </GetCampaignRecipients>\n);\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { Subscription, BehaviorSubject, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { IUserData, userBySlugStream, userByIdStream } from 'services/users';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  id?: string | null;\n  slug?: string | null;\n  resetOnChange?: boolean;\n}\n\ntype children = (renderProps: GetUserChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  user: IUserData | undefined | null | Error;\n}\n\nexport type GetUserChildProps = IUserData | undefined | null | Error;\n\nexport default class GetUser extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      user: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id, slug, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id, slug });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(() => resetOnChange && this.setState({ user: undefined })),\n          switchMap(({ id, slug }) => {\n            if (isString(id)) {\n              return userByIdStream(id).observable;\n            } else if (isString(slug)) {\n              return userBySlugStream(slug).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((user) => {\n          this.setState({ user: !isNilOrError(user) ? user.data : user });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id, slug } = this.props;\n    this.inputProps$.next({ id, slug });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { user } = this.state;\n    return (children as children)(user);\n  }\n}\n","import React from 'react';\n\nexport default ({\n  className,\n  title,\n}: {\n  className?: string;\n  title?: string;\n}) => (\n  <svg\n    className={`cl-icon ${className ? className : ''}`}\n    width=\"47\"\n    height=\"48\"\n    viewBox=\"0 0 47 48\"\n    fill=\"none\"\n  >\n    {title ? <title>{title}</title> : null}\n    <path\n      d=\"M28.7133 19.2C26.1468 19.2 24.7031 18.08 23.5802 16.96C22.4573 16 21.4949 15.2 19.4096 15.2C17.3242 15.2 16.3618 16 15.2389 16.96C13.9556 17.92 12.5119 19.2 9.94539 19.2C7.37884 19.2 6.09556 18.08 4.9727 16.96C3.84983 16 2.88737 15.2 0.802048 15.2C0.16041 15.2 0 14.88 0 14.4C0 13.92 0.320819 13.6 0.802048 13.6C3.3686 13.6 4.81229 14.72 5.93515 15.84C7.05802 16.8 8.02048 17.6 10.1058 17.6C12.1911 17.6 13.1536 16.8 14.2764 15.84C15.3993 14.88 16.843 13.6 19.4096 13.6C21.9761 13.6 23.4198 14.72 24.5427 15.84C25.6655 16.8 26.628 17.6 28.7133 17.6C29.1945 17.6 29.5154 17.92 29.5154 18.4C29.5154 18.88 29.1945 19.2 28.7133 19.2Z\"\n      fill=\"#D8D8D8\"\n    />\n    <path\n      d=\"M28.7133 27.2C26.1468 27.2 24.7031 26.08 23.5802 24.96C22.4573 24 21.4949 23.2 19.4096 23.2C17.3242 23.2 16.3618 24 15.2389 24.96C14.116 25.92 12.6724 27.2 10.1058 27.2C7.53925 27.2 6.09556 26.08 4.9727 24.96C3.84983 24 2.88737 23.2 0.802048 23.2C0.320819 23.2 0 22.88 0 22.4C0 21.92 0.320819 21.6 0.802048 21.6C3.3686 21.6 4.81229 22.72 5.93515 23.84C7.05802 24.8 8.02048 25.6 10.1058 25.6C12.1911 25.6 13.1536 24.8 14.2764 23.84C15.3993 22.88 16.843 21.6 19.4096 21.6C21.9761 21.6 23.4198 22.72 24.5427 23.84C25.6655 24.8 26.628 25.6 28.7133 25.6C29.1945 25.6 29.5154 25.92 29.5154 26.4C29.5154 26.88 29.1945 27.2 28.7133 27.2Z\"\n      fill=\"#D8D8D8\"\n    />\n    <path\n      d=\"M28.7133 35.2C26.1468 35.2 24.7031 34.08 23.5802 32.96C22.4573 32 21.4949 31.2 19.4096 31.2C17.3242 31.2 16.3618 32 15.2389 32.96C14.116 33.92 12.6724 35.2 10.1058 35.2C7.53925 35.2 6.09556 34.08 4.9727 32.96C3.84983 32 2.88737 31.2 0.802048 31.2C0.320819 31.2 0 30.88 0 30.4C0 29.92 0.320819 29.6 0.802048 29.6C3.3686 29.6 4.81229 30.72 5.93515 31.84C7.05802 32.8 8.02048 33.6 10.1058 33.6C12.1911 33.6 13.1536 32.8 14.2764 31.84C15.3993 30.88 16.843 29.6 19.4096 29.6C21.9761 29.6 23.4198 30.72 24.5427 31.84C25.6655 32.8 26.628 33.6 28.7133 33.6C29.1945 33.6 29.5154 33.92 29.5154 34.4C29.5154 34.88 29.1945 35.2 28.7133 35.2Z\"\n      fill=\"#D8D8D8\"\n    />\n    <path\n      d=\"M17.6451 20.16V17.28C17.3243 17.44 16.8431 17.76 16.3619 18.24C15.5598 19.04 14.437 19.84 12.6724 20.48C12.512 21.44 12.1912 22.4 11.3892 23.04C11.3892 23.04 11.2288 23.36 11.2288 23.52V23.84C12.0308 23.68 12.512 23.2 13.3141 22.56C14.2765 21.76 15.5598 20.64 17.6451 20.16Z\"\n      fill=\"#D8D8D8\"\n    />\n    <path\n      d=\"M28.8736 20.8C25.6654 20.8 23.9009 19.36 22.6176 18.24C21.4948 17.28 21.0135 16.8 19.5698 16.8C19.4094 16.8 19.4094 16.8 19.249 16.8V20C19.4094 20 19.4094 20 19.5698 20C22.778 20 24.5425 21.44 25.8258 22.56C26.9487 23.52 27.4299 24 28.8736 24C30.1569 24 31.2797 25.12 31.2797 26.4C31.2797 27.68 30.1569 28.8 28.8736 28.8C25.6654 28.8 23.9009 27.36 22.6176 26.24C21.4948 25.28 21.0135 24.8 19.5698 24.8C19.4094 24.8 19.4094 24.8 19.249 24.8V28C19.4094 28 19.4094 28 19.5698 28C22.778 28 24.5425 29.44 25.8258 30.56C26.9487 31.52 27.4299 32 28.8736 32C30.1569 32 31.2797 33.12 31.2797 34.4C31.2797 35.68 29.9965 36.8 28.8736 36.8C25.6654 36.8 23.9009 35.36 22.6176 34.24C21.4948 33.28 21.0135 32.8 19.5698 32.8C19.4094 32.8 19.4094 32.8 19.249 32.8V40H38.4982V8H19.249V12C19.4094 12 19.4094 12 19.5698 12C22.778 12 24.5425 13.44 25.8258 14.56C26.9487 15.52 27.4299 16 28.8736 16C30.1569 16 31.2797 17.12 31.2797 18.4C31.2797 19.68 29.9965 20.8 28.8736 20.8Z\"\n      fill=\"#D8D8D8\"\n    />\n    <path\n      d=\"M17.6451 28.16V25.28C17.3243 25.44 16.8431 25.76 16.3619 26.24C15.5598 27.04 14.437 27.84 12.6724 28.48C12.512 29.44 12.1912 30.4 11.3892 31.04C11.3892 31.04 11.2288 31.36 11.2288 31.52V31.84C12.0308 31.68 12.512 31.2 13.3141 30.56C14.2765 29.76 15.5598 28.64 17.6451 28.16Z\"\n      fill=\"#D8D8D8\"\n    />\n    <path\n      d=\"M46.3582 8.48V7.52C46.3582 7.36 46.1978 7.04 46.0374 6.88C45.2353 6.24 44.7541 5.12 44.7541 4C44.7541 3.04 45.0749 2.08 45.877 1.28C46.0374 1.12 46.1978 0.64 46.0374 0.48C45.877 0.16 45.7166 0 45.2353 0H44.2729C44.1125 0 43.7917 0.16 43.6313 0.32C42.0272 2.08 39.3002 2.08 37.6961 0.32C37.8565 0.16 37.5357 0 37.2149 0H36.2524C36.092 0 35.7712 0.16 35.6108 0.32C34.0067 2.08 31.2797 2.08 29.6756 0.32C29.836 0.16 29.5152 0 29.1944 0H28.2319C28.0715 0 27.7507 0.16 27.5903 0.32C25.9862 2.08 23.2592 2.08 21.6551 0.32C21.8156 0.16 21.4947 0 21.1739 0H20.2115C20.051 0 19.7302 0.16 19.5698 0.32C17.9657 2.08 15.2388 2.08 13.6347 0.32C13.6347 0.16 13.3138 0 13.1534 0H12.191C11.8702 0 11.5493 0.16 11.5493 0.48C11.3889 0.8 11.5493 1.12 11.7098 1.28C12.3514 2.08 12.6722 3.04 12.6722 4C12.6722 5.12 12.191 6.24 11.3889 6.88C11.2285 7.04 11.0681 7.36 11.0681 7.52V8.48C11.0681 8.64 11.2285 8.96 11.3889 9.12C12.191 9.76 12.6722 10.88 12.6722 12C12.6722 13.12 12.191 14.24 11.3889 14.88C11.2285 15.04 11.0681 15.36 11.0681 15.52V15.84C11.8702 15.68 12.3514 15.2 13.1534 14.56C14.1159 13.76 15.3992 12.64 17.4845 12.16V7.2C17.4845 6.72 17.8053 6.4 18.2865 6.4H39.1398C39.621 6.4 39.9418 6.72 39.9418 7.2V40.8C39.9418 41.28 39.621 41.6 39.1398 41.6H18.2865C17.8053 41.6 17.4845 41.28 17.4845 40.8V33.28C17.1637 33.44 16.6824 33.76 16.2012 34.24C15.3992 35.04 14.2763 35.84 12.5118 36.48C12.3514 37.44 12.0306 38.4 11.2285 39.04C11.2285 39.04 11.0681 39.36 11.0681 39.52V40.48C11.0681 40.64 11.2285 40.96 11.3889 41.12C12.191 41.76 12.6722 42.88 12.6722 44C12.6722 44.96 12.3514 45.92 11.5493 46.72C11.3889 46.88 11.2285 47.36 11.3889 47.52C11.5493 47.84 11.8702 48 12.191 48H13.1534C13.3138 48 13.6347 47.84 13.7951 47.68C15.3992 45.92 18.1261 45.92 19.7302 47.68C19.7302 47.84 20.051 48 20.2115 48H21.1739C21.3343 48 21.6551 47.84 21.8156 47.68C23.4197 45.92 26.1466 45.92 27.7507 47.68C27.9111 47.84 28.0715 48 28.3923 48H29.3548C29.5152 48 29.836 47.84 29.9964 47.68C31.6005 45.92 34.3275 45.92 35.9316 47.68C36.092 47.84 36.2524 48 36.5732 48H37.5357C37.6961 48 38.0169 47.84 38.1773 47.68C39.7814 45.92 42.5084 45.92 44.1125 47.68C44.2729 47.84 44.4333 48 44.7541 48H45.877C46.1978 48 46.5186 47.84 46.679 47.52C46.8394 47.2 46.679 46.88 46.5186 46.72C45.877 45.92 45.3958 44.96 45.3958 44C45.3958 42.88 45.877 41.76 46.679 41.12C46.8394 40.96 46.9999 40.8 46.9999 40.48V39.52C46.9999 39.36 46.8394 39.04 46.679 38.88C45.877 38.08 45.3958 37.12 45.3958 36C45.3958 34.88 45.877 33.76 46.679 33.12C46.8394 32.96 46.9999 32.8 46.9999 32.48V31.52C46.9999 31.36 46.8394 31.04 46.679 30.88C45.877 30.08 45.3958 29.12 45.3958 28C45.3958 26.88 45.877 25.76 46.679 25.12C46.8394 24.96 46.9999 24.8 46.9999 24.48V23.52C46.9999 23.36 46.8394 23.04 46.679 22.88C45.877 22.08 45.3958 21.12 45.3958 20C45.3958 18.88 45.877 17.76 46.679 17.12C46.8394 16.96 46.9999 16.8 46.9999 16.48V15.52C46.9999 15.36 46.8394 15.04 46.679 14.88C45.3958 14.24 44.9145 13.12 44.9145 12C44.9145 10.88 45.3958 9.76 46.1978 9.12C46.3582 8.96 46.3582 8.64 46.3582 8.48Z\"\n      fill=\"#D8D8D8\"\n    />\n  </svg>\n);\n","import React from 'react';\nimport { Subscription, BehaviorSubject, of, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, switchMap, map } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { IDeliveryData, listCampaignDeliveries } from 'services/campaigns';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { getPageNumberFromUrl } from 'utils/paginationUtils';\n\ninterface InputProps {\n  campaignId: string;\n  pageSize: number;\n  pageNumber?: number;\n}\n\ntype children = (\n  renderProps: GetCampaignDeliveriesChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  deliveries: IDeliveryData[] | undefined | null;\n  currentPage: number;\n  lastPage: number;\n}\n\nexport type GetCampaignDeliveriesChildProps = State & {\n  onChangePage: (pageNumber: number) => void;\n};\n\nexport default class GetCampaignDeliveries extends React.Component<\n  Props,\n  State\n> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private pageChanges$: BehaviorSubject<number>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      deliveries: undefined,\n      currentPage: 1,\n      lastPage: 1,\n    };\n  }\n\n  componentDidMount() {\n    const { campaignId, pageNumber, pageSize } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ campaignId, pageSize });\n    this.pageChanges$ = new BehaviorSubject(pageNumber || 1);\n\n    this.subscriptions = [\n      combineLatest(this.inputProps$, this.pageChanges$)\n        .pipe(\n          map(([inputProps, pageNumber]) => ({ ...inputProps, pageNumber })),\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ campaignId, pageSize, pageNumber }) => {\n            if (campaignId) {\n              return listCampaignDeliveries(campaignId, {\n                queryParameters: {\n                  'page[size]': pageSize,\n                  'page[number]': pageNumber,\n                },\n              }).observable;\n            } else {\n              return of(null);\n            }\n          })\n        )\n        .subscribe((deliveries) => {\n          this.setState({\n            deliveries: !isNilOrError(deliveries)\n              ? deliveries.data\n              : deliveries,\n            currentPage:\n              getPageNumberFromUrl(deliveries && deliveries.links.self) || 1,\n            lastPage:\n              getPageNumberFromUrl(deliveries && deliveries.links.last) || 1,\n          });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { campaignId, pageSize } = this.props;\n    this.inputProps$.next({ campaignId, pageSize });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  handleOnPageChange = (pageNumber: number) => {\n    this.pageChanges$.next(pageNumber);\n  };\n\n  render() {\n    const { children } = this.props;\n    return (children as children)({\n      ...this.state,\n      onChangePage: this.handleOnPageChange,\n    });\n  }\n}\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, switchMap, filter } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { getGroup, IGroupData } from 'services/groups';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  id: string;\n}\n\ntype children = (renderProps: GetGroupChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  group: IGroupData | undefined | null | Error;\n}\n\nexport type GetGroupChildProps = IGroupData | undefined | null | Error;\n\nexport default class GetGroup extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      group: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          filter(({ id }) => isString(id)),\n          switchMap(({ id }) => getGroup(id).observable)\n        )\n        .subscribe((group) =>\n          this.setState({ group: !isNilOrError(group) ? group.data : group })\n        ),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id } = this.props;\n    this.inputProps$.next({ id });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { group } = this.state;\n    return (children as children)(group);\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FrameContextConsumer = exports.FrameContextProvider = exports.useFrame = exports.FrameContext = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar doc = void 0;\nvar win = void 0;\nif (typeof document !== 'undefined') {\n  doc = document;\n}\nif (typeof window !== 'undefined') {\n  win = window;\n}\n\nvar FrameContext = exports.FrameContext = _react2.default.createContext({ document: doc, window: win });\n\nvar useFrame = exports.useFrame = function useFrame() {\n  return _react2.default.useContext(FrameContext);\n};\n\nvar FrameContextProvider = FrameContext.Provider,\n    FrameContextConsumer = FrameContext.Consumer;\nexports.FrameContextProvider = FrameContextProvider;\nexports.FrameContextConsumer = FrameContextConsumer;","import * as React from 'react';\nimport { ICampaignData, deleteCampaign } from 'services/campaigns';\nimport clHistory from 'utils/cl-router/history';\n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport messages from '../../messages';\nimport GetCampaign from 'resources/GetCampaign';\nimport { isNilOrError } from 'utils/helperUtils';\nimport Button from 'components/UI/Button';\nimport { InjectedIntlProps } from 'react-intl';\nimport PreviewFrame from './PreviewFrame';\nimport styled from 'styled-components';\n\nconst ButtonWrapper = styled.div`\n  margin: 40px 0;\n  display: flex;\n  justify-content: flex-end;\n`;\n\ninterface InputProps {\n  campaignId: string;\n}\n\ninterface DataProps {\n  campaign: ICampaignData;\n}\n\ninterface Props extends InputProps, DataProps, InjectedIntlProps {}\n\nclass DraftCampaignDetails extends React.Component<Props> {\n  handleDelete = () => {\n    const deleteMessage = this.props.intl.formatMessage(\n      messages.campaignDeletionConfirmation\n    );\n    if (window.confirm(deleteMessage)) {\n      deleteCampaign(this.props.campaign.id).then(() => {\n        clHistory.push('/admin/emails/custom');\n      });\n    }\n  };\n\n  render() {\n    const { campaign } = this.props;\n    return (\n      <>\n        <PreviewFrame campaignId={campaign.id} />\n        <ButtonWrapper>\n          <Button buttonStyle=\"delete\" icon=\"trash\" onClick={this.handleDelete}>\n            <FormattedMessage {...messages.deleteCampaignButton} />\n          </Button>\n        </ButtonWrapper>\n      </>\n    );\n  }\n}\n\nconst DraftCampaignDetailsWithHOCs = injectIntl<InputProps & DataProps>(\n  DraftCampaignDetails\n);\n\nexport default (inputProps: InputProps) => (\n  <GetCampaign id={inputProps.campaignId}>\n    {(campaign) =>\n      isNilOrError(campaign) ? null : (\n        <DraftCampaignDetailsWithHOCs {...inputProps} campaign={campaign} />\n      )\n    }\n  </GetCampaign>\n);\n","/*\n * Admin.emails Messages\n *\n * This contains all the text for the admins email.\n */\n\nimport { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  titleEmails: {\n    id: 'app.containers.Admin.emails.titleEmails',\n    defaultMessage: 'Email Campaigns',\n  },\n  subtitleEmails: {\n    id: 'app.containers.Admin.emails.subtitleEmails',\n    defaultMessage:\n      'Compose your own emails to be sent out to all users or to particular groups. And control what automated emails your users receive.',\n  },\n  helmetTitle: {\n    id: 'app.containers.Admin.emails.helmetTitle',\n    defaultMessage: 'Email Campaigns',\n  },\n  helmetDescription: {\n    id: 'app.containers.Admin.emails.helmetDescription',\n    defaultMessage:\n      'Send out manual emails to certain citizen group and active automated campaigns',\n  },\n  campaignDeletionConfirmation: {\n    id: 'app.containers.Admin.emails.campaignDeletionConfirmation',\n    defaultMessage: 'Are you sure?',\n  },\n  addCampaignButton: {\n    id: 'app.containers.Admin.emails.addCampaignButton',\n    defaultMessage: 'Create campaign',\n  },\n  deleteButtonLabel: {\n    id: 'app.containers.Admin.emails.deleteButtonLabel',\n    defaultMessage: 'Delete',\n  },\n  statsButton: {\n    id: 'app.containers.Admin.emails.statsButton',\n    defaultMessage: 'Statistics',\n  },\n  editButtonLabel: {\n    id: 'app.containers.Admin.emails.editButtonLabel',\n    defaultMessage: 'Edit',\n  },\n  manageButtonLabel: {\n    id: 'app.containers.Admin.emails.manageButtonLabel',\n    defaultMessage: 'Manage & Edit & Preview & Delete',\n  },\n  fieldSender: {\n    id: 'app.containers.Admin.emails.fieldSender',\n    defaultMessage: 'From',\n  },\n  fieldSenderTooltip: {\n    id: 'app.containers.Admin.emails.fieldSenderTooltip',\n    defaultMessage: 'Choose whom users will see as the sender of the email.',\n  },\n  fieldReplyTo: {\n    id: 'app.containers.Admin.emails.fieldReplyTo',\n    defaultMessage: 'Replies should go to',\n  },\n  fieldReplyToTooltip: {\n    id: 'app.containers.Admin.emails.fieldReplyToTooltip',\n    defaultMessage:\n      'Choose what email address should receive direct replies from users on your email.',\n  },\n  fieldTo: {\n    id: 'app.containers.Admin.emails.fieldTo',\n    defaultMessage: 'To',\n  },\n  fieldToTooltip: {\n    id: 'app.containers.Admin.emails.fieldToTooltip',\n    defaultMessage: 'Choose the group(s) of users who will receive your email.',\n  },\n  fieldSubject: {\n    id: 'app.containers.Admin.emails.fieldSubject',\n    defaultMessage: 'Email Subject',\n  },\n  fieldSubjectTooltip: {\n    id: 'app.containers.Admin.emails.fieldSubjectTooltip',\n    defaultMessage:\n      'This will be shown in the subject line of the email and in the users inbox overview. Make it clear and engaging.',\n  },\n  fieldBody: {\n    id: 'app.containers.Admin.emails.fieldBody',\n    defaultMessage: 'Email Message',\n  },\n  addCampaignTitle: {\n    id: 'app.containers.Admin.emails.addCampaignTitle',\n    defaultMessage: 'New campaign',\n  },\n  editCampaignTitle: {\n    id: 'app.containers.Admin.emails.editCampaignTitle',\n    defaultMessage: 'Edit campaign',\n  },\n  draft: {\n    id: 'app.containers.Admin.emails.draft',\n    defaultMessage: 'Draft',\n  },\n  sent: {\n    id: 'app.containers.Admin.emails.sent',\n    defaultMessage: 'Sent',\n  },\n  sendNowButton: {\n    id: 'app.containers.Admin.emails.sendNowButton',\n    defaultMessage: 'Send now',\n  },\n  sendTestEmailButton: {\n    id: 'app.containers.Admin.emails.sendTestEmailButton',\n    defaultMessage: 'Send a preview',\n  },\n  sendTestEmailTooltip: {\n    id: 'app.containers.Admin.emails.sendTestEmailTooltip',\n    defaultMessage:\n      'Send this draft email to the email address with which you are logged in, to check how it looks like in real life.',\n  },\n  previewSentConfirmation: {\n    id: 'app.containers.Admin.emails.previewSentConfirmation',\n    defaultMessage: 'A preview email has been sent to your email address',\n  },\n  formSaveButton: {\n    id: 'app.containers.Admin.emails.formSaveButton',\n    defaultMessage: 'Continue',\n  },\n  formErrorButton: {\n    id: 'app.containers.Admin.emails.formErrorButton',\n    defaultMessage: 'Continue',\n  },\n  formSuccessButton: {\n    id: 'app.containers.Admin.emails.formSuccessButton',\n    defaultMessage: 'Continue',\n  },\n  formSuccessMessage: {\n    id: 'app.containers.Admin.emails.formSuccessMessage',\n    defaultMessage: 'formSuccessMessage',\n  },\n  formErrorMessage: {\n    id: 'app.containers.Admin.emails.formErrorMessage',\n    defaultMessage: 'Please correct the errors above to continue',\n  },\n  formUnexpectedErrorMessage: {\n    id: 'app.containers.Admin.emails.formUnexpectedErrorMessage',\n    defaultMessage: 'Something went wrong, please try again later',\n  },\n  previewTitle: {\n    id: 'app.containers.Admin.emails.previewTitle',\n    defaultMessage: 'Preview',\n  },\n  recipientsTitle: {\n    id: 'app.containers.Admin.emails.recipientsTitle',\n    defaultMessage: 'Recipients',\n  },\n  deliveryStatus_sent: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_sent',\n    defaultMessage: 'Sent',\n  },\n  deliveryStatus_failed: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_failed',\n    defaultMessage: 'Failed',\n  },\n  deliveryStatus_accepted: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_accepted',\n    defaultMessage: 'Accepted',\n  },\n  deliveryStatus_delivered: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_delivered',\n    defaultMessage: 'Delivered',\n  },\n  deliveryStatus_opened: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_opened',\n    defaultMessage: 'Opened',\n  },\n  deliveryStatus_clicked: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_clicked',\n    defaultMessage: 'Clicked',\n  },\n  deliveryStatus_clickedTooltip: {\n    id: 'app.containers.Admin.Campaigns.deliveryStatus_clickedTooltip',\n    defaultMessage:\n      'When you added one or more links to your email, the number of users who clicked a link will be shown here.',\n  },\n  tabCustom: {\n    id: 'app.containers.Admin.Campaigns.tabCustom',\n    defaultMessage: 'Custom',\n  },\n  tabAutomated: {\n    id: 'app.containers.Admin.Campaigns.tabAutomated',\n    defaultMessage: 'Automated',\n  },\n  campaignFrom: {\n    id: 'app.containers.Admin.Campaigns.campaignFrom',\n    defaultMessage: 'From:',\n  },\n  campaignTo: {\n    id: 'app.containers.Admin.Campaigns.campaignTo',\n    defaultMessage: 'To:',\n  },\n  noAccess: {\n    id: 'app.containers.Admin.Campaigns.noAccess',\n    defaultMessage:\n      \"We're sorry, but it seems like you don't have access to the emails section\",\n  },\n  deleteCampaignButton: {\n    id: 'app.containers.Admin.emails.deleteCampaignButton',\n    defaultMessage: 'Delete Campaign',\n  },\n  noCampaignsHeader: {\n    id: 'app.containers.Admin.emails.noCampaignsHeader',\n    defaultMessage: 'No custom email campaigns yet',\n  },\n  noCampaignsDescription: {\n    id: 'app.containers.Admin.emails.noCampaignsDescription',\n    defaultMessage:\n      'Custom email campaigns are emails created from scratch. Their content and recipients can be chosen and you can follow up on their results through statistics.',\n  },\n  automatedEmailCampaignsInfo: {\n    id: 'app.containers.Admin.emails.automatedEmailCampaignsInfo',\n    defaultMessage:\n      'Automated email campaigns are sent out by default and are triggered by a users actions. Some of them can be turned off. Others are an inherent part of user interactions with the platform and therefore cant be turned off.',\n  },\n  allUsers: {\n    id: 'app.containers.Admin.emails.allUsers',\n    defaultMessage: 'All users',\n  },\n  groups: {\n    id: 'app.containers.Admin.emails.groups',\n    defaultMessage: 'Groups',\n  },\n  nameVariablesInfo: {\n    id: 'app.containers.Admin.emails.nameVariablesInfo',\n    defaultMessage:\n      'You can speak directly to citizens using the variables \\\\{\\\\{first_name\\\\}\\\\} \\\\{\\\\{last_name\\\\}\\\\}. E.g. \"Dear \\\\{\\\\{first_name\\\\}\\\\} \\\\{\\\\{last_name\\\\}\\\\}, ...\"',\n  },\n  changeRecipientsButton: {\n    id: 'app.containers.Admin.emails.changeRecipientsButton',\n    defaultMessage: 'Change recipients',\n  },\n  send: {\n    id: 'app.containers.Admin.emails.send',\n    defaultMessage: 'Send',\n  },\n  confirmSendHeader: {\n    id: 'app.containers.Admin.emails.confirmSendHeader',\n    defaultMessage: 'Email to all users?',\n  },\n  toAllUsers: {\n    id: 'app.containers.Admin.emails.toAllUsers',\n    defaultMessage: 'Do you want to send this email to all users?',\n  },\n  senderRecipients: {\n    id: 'app.containers.Admin.emails.senderRecipients',\n    defaultMessage: 'Sender and recipients',\n  },\n});\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Context = require('./Context');\n\nvar _Content = require('./Content');\n\nvar _Content2 = _interopRequireDefault(_Content);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Frame = function (_Component) {\n  _inherits(Frame, _Component);\n\n  // React warns when you render directly into the body since browser extensions\n  // also inject into the body and can mess up React. For this reason\n  // initialContent is expected to have a div inside of the body\n  // element that we render react into.\n  function Frame(props, context) {\n    _classCallCheck(this, Frame);\n\n    var _this = _possibleConstructorReturn(this, (Frame.__proto__ || Object.getPrototypeOf(Frame)).call(this, props, context));\n\n    _this.setRef = function (node) {\n      _this.node = node;\n    };\n\n    _this.handleLoad = function () {\n      _this.setState({ iframeLoaded: true });\n    };\n\n    _this._isMounted = false;\n    _this.state = { iframeLoaded: false };\n    return _this;\n  }\n\n  _createClass(Frame, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this._isMounted = true;\n\n      var doc = this.getDoc();\n      if (doc && doc.readyState === 'complete') {\n        this.forceUpdate();\n      } else {\n        this.node.addEventListener('load', this.handleLoad);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n\n      this.node.removeEventListener('load', this.handleLoad);\n    }\n  }, {\n    key: 'getDoc',\n    value: function getDoc() {\n      return this.node ? this.node.contentDocument : null; // eslint-disable-line\n    }\n  }, {\n    key: 'getMountTarget',\n    value: function getMountTarget() {\n      var doc = this.getDoc();\n      if (this.props.mountTarget) {\n        return doc.querySelector(this.props.mountTarget);\n      }\n      return doc.body.children[0];\n    }\n  }, {\n    key: 'renderFrameContents',\n    value: function renderFrameContents() {\n      if (!this._isMounted) {\n        return null;\n      }\n\n      var doc = this.getDoc();\n\n      if (!doc) {\n        return null;\n      }\n\n      var contentDidMount = this.props.contentDidMount;\n      var contentDidUpdate = this.props.contentDidUpdate;\n\n      var win = doc.defaultView || doc.parentView;\n      var contents = _react2.default.createElement(\n        _Content2.default,\n        {\n          contentDidMount: contentDidMount,\n          contentDidUpdate: contentDidUpdate\n        },\n        _react2.default.createElement(\n          _Context.FrameContextProvider,\n          { value: { document: doc, window: win } },\n          _react2.default.createElement(\n            'div',\n            { className: 'frame-content' },\n            this.props.children\n          )\n        )\n      );\n\n      var mountTarget = this.getMountTarget();\n\n      return [_reactDom2.default.createPortal(this.props.head, this.getDoc().head), _reactDom2.default.createPortal(contents, mountTarget)];\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var props = _extends({}, this.props, {\n        srcDoc: this.props.initialContent,\n        children: undefined // The iframe isn't ready so we drop children from props here. #12, #17\n      });\n      delete props.head;\n      delete props.initialContent;\n      delete props.mountTarget;\n      delete props.contentDidMount;\n      delete props.contentDidUpdate;\n      return _react2.default.createElement(\n        'iframe',\n        _extends({}, props, { ref: this.setRef, onLoad: this.handleLoad }),\n        this.state.iframeLoaded && this.renderFrameContents()\n      );\n    }\n  }]);\n\n  return Frame;\n}(_react.Component);\n\nFrame.propTypes = {\n  style: _propTypes2.default.object, // eslint-disable-line\n  head: _propTypes2.default.node,\n  initialContent: _propTypes2.default.string,\n  mountTarget: _propTypes2.default.string,\n  contentDidMount: _propTypes2.default.func,\n  contentDidUpdate: _propTypes2.default.func,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.element, _propTypes2.default.arrayOf(_propTypes2.default.element)])\n};\nFrame.defaultProps = {\n  style: {},\n  head: null,\n  children: undefined,\n  mountTarget: undefined,\n  contentDidMount: function contentDidMount() {},\n  contentDidUpdate: function contentDidUpdate() {},\n  initialContent: '<!DOCTYPE html><html><head></head><body><div class=\"frame-root\"></div></body></html>'\n};\nexports.default = Frame;","import { IRelationship, Multiloc, ILinks } from 'typings';\nimport { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\n\nconst apiEndpoint = `${API_PATH}/campaigns`;\n\nexport interface ICampaignsData {\n  data: ICampaignData[];\n  links: ILinks;\n}\n\nexport interface ICampaignData {\n  id: string;\n  type: string;\n  attributes: {\n    campaign_name: string;\n    admin_campaign_description_multiloc: Multiloc;\n    enabled?: boolean;\n    subject_multiloc: Multiloc;\n    body_multiloc: Multiloc;\n    sender: 'author' | 'organization';\n    reply_to: 'author' | 'organization';\n    created_at: string;\n    updated_at: string;\n    deliveries_count: number;\n    schedule: any;\n    schedule_multiloc: Multiloc;\n  };\n  relationships: {\n    author: {\n      data: IRelationship;\n    };\n    groups: {\n      data: IRelationship[];\n    };\n  };\n}\n\nexport interface CampaignUpdate {\n  campaign_name?: string;\n  subject_multiloc?: Multiloc;\n  body_multiloc?: Multiloc;\n  sender?: string;\n  reply_to?: string;\n  group_ids?: string[];\n  enabled?: boolean;\n}\n\nexport interface CampaignCreation {\n  campaign_name: string;\n  subject_multiloc: Multiloc;\n  body_multiloc: Multiloc;\n  sender: string;\n  reply_to?: string;\n  group_ids?: string[];\n}\n\nexport interface ICampaign {\n  data: ICampaignData;\n}\n\nexport interface IDeliveriesData {\n  data: IDeliveryData[];\n  links: ILinks;\n}\nexport interface IDeliveryData {\n  id: string;\n  type: string;\n  attributes: {\n    delivery_status:\n      | 'sent'\n      | 'bounced'\n      | 'failed'\n      | 'accepted'\n      | 'delivered'\n      | 'opened'\n      | 'clicked';\n    sent_at: string;\n    created_at: string;\n    updated_at: string;\n  };\n  relationships: {\n    user: {\n      data: IRelationship;\n    };\n  };\n}\n\nexport interface IRecipient {\n  data: IDeliveryData[];\n}\n\nexport interface ICampaignStats {\n  sent: number;\n  bounced: number;\n  failed: number;\n  accepted: number;\n  delivered: number;\n  opened: number;\n  clicked: number;\n  all: number;\n}\n\nexport function listCampaigns(streamParams: IStreamParams | null = null) {\n  return streams.get<ICampaignsData>({\n    apiEndpoint: `${apiEndpoint}`,\n    ...streamParams,\n  });\n}\n\nexport function createCampaign(campaignData: CampaignCreation) {\n  return streams.add<ICampaign>(`${apiEndpoint}`, { campaign: campaignData });\n}\n\nexport function updateCampaign(\n  campaignId: string,\n  campaignData: CampaignUpdate\n) {\n  return streams.update<ICampaign>(`${apiEndpoint}/${campaignId}`, campaignId, {\n    campaign: campaignData,\n  });\n}\n\nexport async function sendCampaign(campaignId: string) {\n  const stream = await streams.add<ICampaign>(\n    `${apiEndpoint}/${campaignId}/send`,\n    {}\n  );\n  await streams.fetchAllWith({\n    apiEndpoint: [`${apiEndpoint}/${campaignId}`, `${API_PATH}/campaigns`],\n  });\n  return stream;\n}\n\nexport function sendCampaignPreview(campaignId: string) {\n  return streams.add<ICampaign>(\n    `${apiEndpoint}/${campaignId}/send_preview`,\n    {}\n  );\n}\n\nexport function deleteCampaign(campaignId: string) {\n  return streams.delete(`${apiEndpoint}/${campaignId}`, campaignId);\n}\n\nexport function campaignByIdStream(\n  campaignId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<ICampaign>({\n    apiEndpoint: `${apiEndpoint}/${campaignId}`,\n    ...streamParams,\n  });\n}\n\nexport function listCampaignDeliveries(\n  campaignId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IDeliveriesData>({\n    apiEndpoint: `${apiEndpoint}/${campaignId}/deliveries`,\n    ...streamParams,\n  });\n}\n\nexport function getCampaignStats(\n  campaignId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<ICampaignStats>({\n    apiEndpoint: `${apiEndpoint}/${campaignId}/stats`,\n    ...streamParams,\n  });\n}\n\nexport function isDraft(campaign: ICampaignData) {\n  return campaign.attributes.deliveries_count === 0;\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\n\nimport { ICampaignData } from 'services/campaigns';\nimport GetCampaign from 'resources/GetCampaign';\nimport { isNilOrError } from 'utils/helperUtils';\n\nimport PageWrapper from 'components/admin/PageWrapper';\nimport CampaignStats from './CampaignStats';\nimport PreviewFrame from './PreviewFrame';\nimport RecipientsTable from './RecipientsTable';\n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from '../../messages';\n\nconst PaddedCampaignStats = styled(CampaignStats)`\n  padding-bottom: 20px;\n`;\n\nconst PaddedPreviewFrame = styled(PreviewFrame)`\n  padding-bottom: 20px;\n`;\n\nconst PaddedRecipientsTable = styled(RecipientsTable)`\n  padding-bottom: 20px;\n`;\n\ninterface InputProps {\n  campaignId: string;\n}\n\ninterface DataProps {\n  campaign: ICampaignData;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nclass SentCampaignDetails extends React.Component<Props> {\n  render() {\n    const { campaign } = this.props;\n    return (\n      <PageWrapper>\n        <PaddedCampaignStats campaignId={campaign.id} />\n        <PaddedPreviewFrame campaignId={campaign.id} />\n        <h2>\n          <FormattedMessage {...messages.recipientsTitle} />\n        </h2>\n        <PaddedRecipientsTable campaignId={campaign.id} />\n      </PageWrapper>\n    );\n  }\n}\n\nexport default (inputProps: InputProps) => (\n  <GetCampaign id={inputProps.campaignId}>\n    {(campaign) =>\n      isNilOrError(campaign) ? null : (\n        <SentCampaignDetails {...inputProps} campaign={campaign} />\n      )\n    }\n  </GetCampaign>\n);\n"],"sourceRoot":""}