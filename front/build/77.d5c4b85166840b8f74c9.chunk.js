(window.webpackJsonp=window.webpackJsonp||[]).push([[77,167,188],{"13cB":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n("JRPe").defineMessages)({edit:{id:"app.components.admin.PostManager.PostPreview.edit",defaultMessage:"Edit"},delete:{id:"app.components.admin.PostManager.PostPreview.delete",defaultMessage:"Delete"},deleteInputConfirmation:{id:"app.components.admin.PostManager.PostPreview.deleteInputConfirmation",defaultMessage:"Are you sure you want to delete this input? This action cannot be undone."},deleteInputInTimelineConfirmation:{id:"app.components.admin.PostManager.PostPreview.deleteInputInTimelineConfirmation",defaultMessage:"Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered."},deleteInitiativeConfirmation:{id:"app.components.admin.PostManager.PostPreview.deleteInitiativeConfirmation",defaultMessage:"Are you sure you want to delete this initiative?"},voteCounts:{id:"app.components.admin.PostManager.PostPreview.voteCounts",defaultMessage:"Vote counts:"},currentStatus:{id:"app.components.admin.PostManager.PostPreview.currentStatus",defaultMessage:"Current status"},assignee:{id:"app.components.admin.PostManager.PostPreview.assignee",defaultMessage:"Assignee"},picks:{id:"app.components.admin.PostManager.PostPreview.picks",defaultMessage:"Picks: {picksNumber}"},pbItemCountTooltip:{id:"app.components.admin.PostManager.PostPreview.pbItemCountTooltip",defaultMessage:"The number of times this has been included in other participants' participatory budgets"},cancelEdit:{id:"app.components.admin.PostManager.PostPreview.cancelEdit",defaultMessage:"Cancel edit"},noOne:{id:"app.components.admin.PostManager.PostPreview.noOne",defaultMessage:"Unassigned"},save:{id:"app.components.admin.PostManager.PostPreview.save",defaultMessage:"Save"},submitError:{id:"app.components.admin.PostManager.PostPreview.submitError",defaultMessage:"Error"},postedIn:{id:"app.containers.IdeasShow.postedIn",defaultMessage:"Posted in {projectLink}"},xDaysLeft:{id:"app.containers.IdeasShow.xDaysLeft",defaultMessage:"{x, plural, =0 {Less than a day} one {One day} other {# days}} left"},proposedBudgetTitle:{id:"app.containers.IdeasShow.proposedBudgetTitle",defaultMessage:"Proposed budget"},bodyTitle:{id:"app.containers.IdeasShow.bodyTitle",defaultMessage:"Description"}});t.default=a},"3SKu":function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("fHP9"));t.default=function(e){var t=e.children,n=e.action;return t((0,i.default)(n))}},"6L1S":function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("q1tI")),o=a(n("I9mC")),r=n("KLnl"),s=a(n("vOnD")),l=n("iP56"),u=n("Rw3A"),d=n("JRPe"),c=a(n("TgcB")),f=(0,s.default)(l.Icon).withConfig({displayName:"FormattedBudget__StyledIcon",componentId:"yvsgv-0"})(["width:19px;margin-top:3px;margin-right:7px;display:inline-block;overflow:hidden;"]),p=(0,u.injectIntl)((function(e){var t=e.value,n=e.intl,a=n.formatMessage,s=n.formatNumber,l=(0,o.default)();if(!(0,r.isNilOrError)(l)){var u=l.data.attributes.settings.core.currency;return"TOK"===u?i.default.createElement(i.default.Fragment,null,i.default.createElement(f,{name:"tokens"}),s(t)):"CRE"===u?i.default.createElement(i.default.Fragment,null,a(1===t?c.default.oneCredit:c.default.multipleCredits,{numberOfTokens:s(t)})):i.default.createElement(d.FormattedNumber,{value:t,style:"currency",currency:u,minimumFractionDigits:0,maximumFractionDigits:0})}return null}));t.default=p},A4tC:function(e,t,n){"use strict";n("TeQF"),n("SuFq");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("FZtP");var i=a(n("lwsE")),o=a(n("W8MJ")),r=a(n("PJYZ")),s=a(n("7W2i")),l=a(n("a1gu")),u=a(n("Nsbk")),d=a(n("lSNA")),c=a(n("q1tI")),f=n("T89o"),p=n("DtyJ"),m=n("ahDk"),h=a(n("aTp4")),g=n("Nv6i"),v=n("jtPO"),y=n("pQfs"),b=n("vDWu"),w=n("c95D"),I=n("OKda"),S=n("KLnl");function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var M=function(e){(0,s.default)(n,e);var t=P(n);function n(e){var a;return(0,i.default)(this,n),a=t.call(this,e),(0,d.default)((0,r.default)(a),"inputProps$",void 0),(0,d.default)((0,r.default)(a),"subscriptions",void 0),a.state={files:void 0},a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.resourceId,a=t.resourceType,i=t.resetOnChange;this.inputProps$=new p.BehaviorSubject({resourceId:n,resourceType:a}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(e,t){return(0,h.default)(e,t)})),(0,m.tap)((function(){return i&&e.setState({files:void 0})})),(0,m.filter)((function(e){var t=e.resourceId;return(0,f.isString)(t)})),(0,m.switchMap)((function(e){var t,n=e.resourceId,a=e.resourceType;return"project"===a&&(t=g.projectFilesStream),"phase"===a&&(t=v.phaseFilesStream),"event"===a&&(t=y.eventFilesStream),"page"===a&&(t=b.pageFilesStream),"idea"===a&&(t=w.ideaFilesStream),"initiative"===a&&(t=I.initiativeFilesStream),t(n).observable}))).subscribe((function(t){e.setState({files:(0,S.isNilOrError)(t)?t:t.data})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.resourceId,n=e.resourceType,a=e.resetOnChange;this.inputProps$.next({resourceId:t,resourceType:n,resetOnChange:a})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.files)}}]),n}(c.default.Component);t.default=M,(0,d.default)(M,"defaultProps",{resetOnChange:!0})},"CA+D":function(e,t,n){"use strict";n("SuFq");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("FZtP");var i=a(n("lwsE")),o=a(n("W8MJ")),r=a(n("PJYZ")),s=a(n("7W2i")),l=a(n("a1gu")),u=a(n("Nsbk")),d=a(n("lSNA")),c=a(n("q1tI")),f=n("DtyJ"),p=n("ahDk"),m=a(n("aTp4")),h=n("EP0W"),g=n("T89o");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=v(n);function n(e){var a;return(0,i.default)(this,n),a=t.call(this,e),(0,d.default)((0,r.default)(a),"inputProps$",void 0),(0,d.default)((0,r.default)(a),"subscriptions",void 0),a.state={ideaImages:void 0},a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.ideaId;this.inputProps$=new f.BehaviorSubject({ideaId:t}),this.subscriptions=[this.inputProps$.pipe((0,p.distinctUntilChanged)((function(e,t){return(0,m.default)(e,t)})),(0,p.switchMap)((function(e){var t=e.ideaId;return(0,g.isString)(t)?(0,h.ideaImagesStream)(t).observable:(0,f.of)(null)}))).subscribe((function(t){e.setState({ideaImages:t?t.data:null})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props.ideaId;this.inputProps$.next({ideaId:e})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.ideaImages)}}]),n}(c.default.Component);t.default=y},EP0W:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ideaImageStream=function(e,t){var n="".concat(s.API_PATH,"/ideas/").concat(e,"/images/").concat(t);return l.default.get({apiEndpoint:n})},t.ideaImagesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(s.API_PATH,"/ideas/").concat(e,"/images");return l.default.get(c({apiEndpoint:n},t))},t.deleteIdeaImage=function(e,t){return l.default.delete("".concat(s.API_PATH,"/ideas/").concat(e,"/images/").concat(t),t)},t.addIdeaImage=function(e,t){return f.apply(this,arguments)};var i=a(n("o0o1")),o=a(n("yXPU")),r=a(n("lSNA"));n("ma9I");var s=n("p0gT"),l=a(n("1Kqg")),u=n("ngE2");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){return(f=(0,o.default)(i.default.mark((function e(t,n){var a,o,r,d,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:null,o="".concat(s.API_PATH,"/ideas/").concat(t,"/images"),r={image:{ordering:a,image:n}},e.next=5,l.default.add(o,r);case 5:return d=e.sent,e.next=8,(0,u.ideaByIdStream)(t).fetch();case 8:return e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},K5Dz:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=a(n("VkAN")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),l=a(n("6L1S")),u=a(n("vOnD")),d=n("96Cm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var f=u.default.div.withConfig({displayName:"IdeaProposedBudget__Container",componentId:"yjz91s-0"})(["color:",";font-size:","px;line-height:29px;font-weight:300;",""],(function(e){return e.theme.colorText}),(function(e){return e.theme.fontSizes.large}),d.media.smallerThanMinTablet(o||(o=(0,r.default)(["\n    font-size: ","px;\n  "])),(function(e){return e.theme.fontSizes.base}))),p=(0,s.memo)((function(e){var t=e.className,n=e.proposedBudget;return s.default.createElement(f,{className:t},s.default.createElement(l.default,{value:n}))}));t.default=p},QLN2:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,s=a(n("J4zp")),l=a(n("VkAN")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),d=n("iP56"),c=a(n("pQ8y")),f=a(n("vOnD")),p=n("96Cm"),m=n("ufqH");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var g=f.default.div.withConfig({displayName:"CollapsibleBox__Container",componentId:"qoxmo-0"})(["background:#fff;border:1px solid ",";border-radius:",";"],p.colors.separation,(function(e){return e.theme.borderRadius})),v=f.default.div.withConfig({displayName:"CollapsibleBox__Title",componentId:"qoxmo-1"})(["display:flex;align-items:center;"]),y=(0,f.default)(d.Icon).withConfig({displayName:"CollapsibleBox__TitleIcon",componentId:"qoxmo-2"})(["flex:0 0 16px;width:16px;height:23px;fill:",";margin-right:13px;",""],p.colors.label,p.media.smallerThanMinTablet(o||(o=(0,l.default)(["\n    flex: 0 0 14px;\n    width: 14px;\n    height: 20px;\n  "])))),b=f.default.div.withConfig({displayName:"CollapsibleBox__ContentLabel",componentId:"qoxmo-3"})(["color:",";font-size:","px;font-weight:400;margin-right:6px;text-align:left;transition:all 100ms ease-out;"],p.colors.label,p.fontSizes.base),w=f.default.button.withConfig({displayName:"CollapsibleBox__ContentToggleButton",componentId:"qoxmo-4"})(["background-color:#fff;display:flex;align-items:center;justify-content:space-between;cursor:pointer;width:100%;height:100%;padding-left:18px;padding-right:20px;padding-top:10px;padding-bottom:10px;color:",";font-size:","px;line-height:24px;font-weight:600;border-radius:",";&:hover{","{color:",";}}"],(function(e){return e.theme.colorText}),p.fontSizes.base,(function(e){return e.theme.borderRadius}),b,(0,m.darken)(.2,p.colors.label)),I=(0,f.default)(d.Icon).withConfig({displayName:"CollapsibleBox__ArrowIcon",componentId:"qoxmo-5"})(["flex:0 0 13px;width:13px;height:13px;fill:",";transform:rotate(90deg);transition:all 0.2s linear;&.open{transform:rotate(0deg);}"],p.colors.label),S=f.default.div.withConfig({displayName:"CollapsibleBox__Wrapper",componentId:"qoxmo-6"})(["position:relative;overflow:hidden;z-index:2;padding:20px;background-color:",";margin-top:1px;"," &.content-enter{height:0;opacity:0;&.content-enter-active{height:100%;opacity:1;transition:all ","ms ease-out;}}&.content-exit{height:100%;opacity:1;&.content-exit-active{height:0;opacity:0;transition:all ","ms ease-out;}}"],(function(e){return e.contentBackgroundColor||"#fff"}),p.media.largePhone(r||(r=(0,l.default)(["\n    padding: 30px 20px;\n  "]))),300,300),P=(0,u.memo)((function(e){var t=(0,u.useState)(!1),n=(0,s.default)(t,2),a=n[0],i=n[1],o=(0,u.useCallback)((function(){i(!a)}),[a]),r=e.className,l=e.titleIconName,d=e.title,f=e.children,p=e.contentBackgroundColor,m=e.e2eId;return u.default.createElement(g,{className:r},u.default.createElement(w,{id:m||"","aria-expanded":a,onClick:o},u.default.createElement(v,null,l&&u.default.createElement(y,{name:l}),u.default.createElement(b,null,d)),u.default.createElement(I,{name:"dropdown",className:a?"open":""})),u.default.createElement(c.default,{classNames:"content",in:a,timeout:300,mountOnEnter:!0,unmountOnExit:!0,exit:!0},u.default.createElement(S,{contentBackgroundColor:p},u.default.createElement(u.Suspense,{fallback:null},f))))}));t.default=P},TjeH:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("pVnL")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),s=n("KLnl"),l=n("iP56"),u=a(n("jwji")),d=a(n("13cB")),c=n("Rw3A"),f=a(n("vOnD")),p=n("96Cm");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var h=f.default.div.withConfig({displayName:"VotePreview__Container",componentId:"tnnf1v-0"})(["display:flex;align-items:center;"]),g=f.default.div.withConfig({displayName:"VotePreview__Label",componentId:"tnnf1v-1"})(["color:",";font-size:","px;font-weight:400;margin-right:20px;"],p.colors.label,p.fontSizes.base),v=f.default.div.withConfig({displayName:"VotePreview__Block",componentId:"tnnf1v-2"})(["display:flex;align-items:center;"]),y=f.default.div.withConfig({displayName:"VotePreview__VotesContainer",componentId:"tnnf1v-3"})(["display:flex;align-items:center;"]),b=(0,f.default)(y).withConfig({displayName:"VotePreview__UpvotesContainer",componentId:"tnnf1v-4"})(["margin-right:30px;"]),w=(0,f.default)(y).withConfig({displayName:"VotePreview__DownvotesContainer",componentId:"tnnf1v-5"})([""]),I=(0,f.default)(l.Icon).withConfig({displayName:"VotePreview__VoteIcon",componentId:"tnnf1v-6"})(["width:20px;height:18px;margin-right:5px;"]),S=(0,f.default)(I).withConfig({displayName:"VotePreview__UpvoteIcon",componentId:"tnnf1v-7"})(["fill:",";margin-top:-2px;"],p.colors.clGreen),P=(0,f.default)(I).withConfig({displayName:"VotePreview__DownvoteIcon",componentId:"tnnf1v-8"})(["fill:",";margin-top:6px;"],p.colors.clRed),M=f.default.div.withConfig({displayName:"VotePreview__VotesCount",componentId:"tnnf1v-9"})(["font-size:",";font-weight:600;"],p.fontSizes.large),O=(0,f.default)(M).withConfig({displayName:"VotePreview__UpvotesCount",componentId:"tnnf1v-10"})(["color:",";"],p.colors.clGreen),E=(0,f.default)(M).withConfig({displayName:"VotePreview__DownvotesCount",componentId:"tnnf1v-11"})(["color:",";"],p.colors.clRed),_=(0,r.memo)((function(e){var t=e.votesCount,n=e.className;return(0,s.isNilOrError)(t)?null:r.default.createElement(h,{className:n},r.default.createElement(g,null,r.default.createElement(c.FormattedMessage,d.default.voteCounts)),r.default.createElement(v,null,r.default.createElement(b,null,r.default.createElement(S,{name:"upvote"}),r.default.createElement(O,null,t.up)),r.default.createElement(w,null,r.default.createElement(P,{name:"downvote"}),r.default.createElement(E,null,t.down))))}));t.default=function(e){return r.default.createElement(u.default,{ideaId:e.ideaId},(function(t){return r.default.createElement(_,(0,o.default)({},e,{votesCount:t}))}))}},UQTo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n("JRPe").defineMessages)({sharingModalTitle:{id:"app.containers.IdeasShow.sharingModalTitle",defaultMessage:"Thanks for submitting your idea!"},optionSharingModalTitle:{id:"app.containers.IdeasShow.optionSharingModalTitle",defaultMessage:"Your option has been successfully posted!"},projectSharingModalTitle:{id:"app.containers.IdeasShow.projectSharingModalTitle",defaultMessage:"Thanks for submitting your project!"},questionSharingModalTitle:{id:"app.containers.IdeasShow.questionSharingModalTitle",defaultMessage:"Your question has been successfully posted!"},issueSharingModalTitle:{id:"app.containers.IdeasShow.issueSharingModalTitle",defaultMessage:"Thanks for submitting your issue!"},contributionSharingModalTitle:{id:"app.containers.IdeasShow.contributionSharingModalTitle",defaultMessage:"Thanks for submitting your contribution!"},sharingModalSubtitle:{id:"app.containers.IdeasShow.sharingModalSubtitle",defaultMessage:"Reach more people and make your voice heard."},deletedUser:{id:"app.containers.IdeasShow.deletedUser",defaultMessage:"deleted user"},currentStatus:{id:"app.containers.IdeasShow.currentStatus",defaultMessage:"Current status"},moreOptions:{id:"app.components.IdeasShow.moreOptions",defaultMessage:"More options"},reportAsSpam:{id:"app.components.IdeasShow.reportAsSpam",defaultMessage:"Report as spam"},editPost:{id:"app.components.IdeasShow.editPost",defaultMessage:"Edit"},deletePost:{id:"app.components.IdeasShow.deletePost",defaultMessage:"Delete"},deleteInputConfirmation:{id:"app.components.IdeasShow.deleteInputConfirmation",defaultMessage:"Are you sure you want to delete this input? This action cannot be undone."},deleteInputInTimelineConfirmation:{id:"app.components.IdeasShow.deleteInputInTimelineConfirmation",defaultMessage:"Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered."},goBack:{id:"app.components.IdeasShow.goBack",defaultMessage:"Go back"},send:{id:"app.components.IdeasShow.send",defaultMessage:"Send"},skipSharing:{id:"app.components.IdeasShow.skipSharing",defaultMessage:"Skip it, I'll do it later"},reportAsSpamModalTitle:{id:"app.containers.IdeasShow.reportAsSpamModalTitle",defaultMessage:"Why do you want to report this as spam?"},byUserOnDate:{id:"app.components.IdeasShow.byUserOnDate",defaultMessage:"By {userName} on {date}"},createdTimeAgo:{id:"app.components.IdeasShow.createdTimeAgo",defaultMessage:"Created {timeAgo}"},or:{id:"app.components.IdeasShow.or",defaultMessage:"or"},proposedBudgetTitle:{id:"app.components.IdeasShow.proposedBudgetTitle",defaultMessage:"Proposed budget"},bodyTitle:{id:"app.components.IdeasShow.bodyTitle",defaultMessage:"Description"},ideaTwitterMessage:{id:"app.containers.IdeasShow.ideaTwitterMessage",defaultMessage:"Support this idea: {postTitle}"},optionTwitterMessage:{id:"app.containers.IdeasShow.optionTwitterMessage",defaultMessage:"Support this option: {postTitle}"},issueTwitterMessage:{id:"app.containers.IdeasShow.issueTwitterMessage",defaultMessage:"Support this issue: {postTitle}"},projectTwitterMessage:{id:"app.containers.IdeasShow.projectTwitterMessage",defaultMessage:"Support this project: {postTitle}"},questionTwitterMessage:{id:"app.containers.IdeasShow.questionTwitterMessage",defaultMessage:"Join the discussion: {postTitle}"},contributionTwitterMessage:{id:"app.containers.IdeasShow.contributionTwitterMessage",defaultMessage:"Support this contribution: {postTitle}"},ideaWhatsAppMessage:{id:"app.containers.IdeasShow.ideaWhatsAppMessage",defaultMessage:"Support this idea: {postTitle}"},optionWhatsAppMessage:{id:"app.containers.IdeasShow.optionWhatsAppMessage",defaultMessage:"Support this option: {postTitle}"},contributionWhatsAppMessage:{id:"app.containers.IdeasShow.contributionWhatsAppMessage",defaultMessage:"Support this contribution: {postTitle}"},projectWhatsAppMessage:{id:"app.containers.IdeasShow.projectWhatsAppMessage",defaultMessage:"Support this project: {postTitle}"},questionWhatsAppMessage:{id:"app.containers.IdeasShow.questionWhatsAppMessage",defaultMessage:"Join the discussion: {postTitle}"},issueWhatsAppMessage:{id:"app.containers.IdeasShow.ideasWhatsAppMessage",defaultMessage:"Support this issue: {postTitle}"},ideaEmailSharingSubject:{id:"app.containers.IdeasShow.ideaEmailSharingSubject",defaultMessage:"Support this idea: {ideaTitle}"},ideaEmailSharingBody:{id:"app.containers.IdeasShow.ideaEmailSharingBody",defaultMessage:"Support this idea '{ideaTitle}' at {ideaUrl}!"},optionEmailSharingSubject:{id:"app.containers.IdeasShow.optionEmailSharingSubject",defaultMessage:"Support this option: {ideaTitle}"},optionEmailSharingBody:{id:"app.containers.IdeasShow.optionEmailSharingBody",defaultMessage:"Support this option '{ideaTitle}' at {ideaUrl}!"},contributionEmailSharingSubject:{id:"app.containers.IdeasShow.contributionEmailSharingSubject",defaultMessage:"Support this contribution: {ideaTitle}"},contributionEmailSharingBody:{id:"app.containers.IdeasShow.contributionEmailSharingBody",defaultMessage:"Support this contribution '{ideaTitle}' at {ideaUrl}!"},questionEmailSharingSubject:{id:"app.containers.IdeasShow.questionEmailSharingSubject",defaultMessage:"Join the discussion: {ideaTitle}"},questionEmailSharingBody:{id:"app.containers.IdeasShow.questionEmailSharingBody",defaultMessage:"Join the discussion about this question '{ideaTitle}' at {ideaUrl}!"},issueEmailSharingSubject:{id:"app.containers.IdeasShow.issueEmailSharingSubject",defaultMessage:"Support this issue: {ideaTitle}"},issueEmailSharingBody:{id:"app.containers.IdeasShow.issueEmailSharingBody",defaultMessage:"Support this issue '{ideaTitle}' at {ideaUrl}!"},projectEmailSharingSubject:{id:"app.containers.IdeasShow.projectEmailSharingSubject",defaultMessage:"Support this project: {ideaTitle}"},projectEmailSharingBody:{id:"app.containers.IdeasShow.projectEmailSharingBody",defaultMessage:"Support this project '{ideaTitle}' at {ideaUrl}!"},share:{id:"app.containers.IdeasShow.share",defaultMessage:"Share"},commentCTA:{id:"app.containers.IdeasShow.commentCTA",defaultMessage:"Add a comment"}});t.default=a},VUEM:function(e,t,n){"use strict";n("ENF9"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(a,r,l):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),r=a(n("QLN2"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var l=o.default.lazy((function(){return n.e(151).then(n.t.bind(null,"jcw9",7))})),u=(0,o.memo)((function(e){var t=e.address,n=e.position,a=e.className,i=e.projectId;return o.default.createElement(r.default,{e2eId:"e2e-map-toggle",className:a,titleIconName:"position",title:t},o.default.createElement(l,{position:n,projectId:i}))}));t.default=u},eaxi:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("pVnL")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),s=n("KLnl"),l=a(n("FrK0")),u=a(n("Qs0S")),d=n("Rw3A"),c=a(n("UQTo")),f=n("JRPe"),p=a(n("vOnD")),m=n("96Cm"),h=a(n("38aM"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}var v=p.default.div.withConfig({displayName:"PostedBy__Container",componentId:"fd2zmn-0"})(["color:",";font-size:","px;font-weight:300;line-height:normal;display:flex;align-items:center;"],(function(e){return e.theme.colorText}),m.fontSizes.base),y=(0,p.default)(u.default).withConfig({displayName:"PostedBy__StyledAvatar",componentId:"fd2zmn-1"})(["margin-right:5px;"]),b=(0,r.memo)((function(e){var t=e.authorId,n=e.ideaId,a=e.className,i=r.default.createElement(l.default,{userId:t,isLinkToProfile:!0,fontWeight:500}),u=(0,h.default)({ideaId:n});if(!(0,s.isNilOrError)(u)){var p=u.attributes.published_at,m=r.default.createElement(f.FormattedDate,{value:p,year:"numeric",month:"long",day:"numeric"});return r.default.createElement(v,{className:"e2e-idea-author ".concat(a||"")},r.default.createElement(y,{userId:t,size:30,isLinkToProfile:!!t}),r.default.createElement(d.FormattedMessage,(0,o.default)({},c.default.byUserOnDate,{values:{userName:i,date:m}})))}return null}));t.default=b},fHP9:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.useState)(void 0),n=(0,i.default)(t,2),a=n[0],c=n[1];return(0,o.useEffect)((function(){var t=(0,d.combineLatest)((0,r.getInitiativeActionDescriptors)().observable,(0,l.currentAppConfigurationStream)().observable,(0,u.authUserStream)().observable).subscribe((function(t){var n=(0,i.default)(t,3),a=n[0],o=n[1],r=n[2];if(!(0,s.isNilOrError)(o)&&!(0,s.isNilOrError)(a)){var l=a[e];if(l.enabled)c({show:!0,enabled:!0,disabledReason:null,action:null});else switch(l.disabled_reason){case"not_verified":(0,s.isNilOrError)(r)?c({show:!0,enabled:"maybe",disabledReason:null,action:"sign_in_up_and_verify"}):c({show:!0,enabled:"maybe",disabledReason:null,action:"verify"});break;case"not_signed_in":c({show:!0,enabled:"maybe",disabledReason:null,action:"sign_in_up"});break;default:c({show:!0,enabled:!1,disabledReason:"notPermitted",action:null})}}}));return function(){return t.unsubscribe()}}),[]),a};var i=a(n("J4zp")),o=n("q1tI"),r=n("fM+I"),s=n("KLnl"),l=n("H9u3"),u=n("x303"),d=n("DtyJ")},gqN7:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("2B1R"),n("fbCW");var o=a(n("pVnL")),r=a(n("lwsE")),s=a(n("W8MJ")),l=a(n("PJYZ")),u=a(n("7W2i")),d=a(n("a1gu")),c=a(n("Nsbk")),f=a(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),m=n("ifvJ"),h=n("T89o"),g=n("KLnl"),v=n("Rw3A"),y=a(n("V3HD")),b=a(n("13cB")),w=a(n("vOnD")),I=n("iP56"),S=n("ngE2"),P=a(n("dGz1")),M=a(n("hEVc")),O=a(n("OL75")),E=a(n("yYlr")),_=a(n("YLV/")),j=n("KuRP"),T=a(n("f2mI"));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var x=(0,w.default)(I.Label).withConfig({displayName:"FeedbackSettings__StyledLabel",componentId:"l2kfv8-0"})(["margin-top:20px;"]),N=w.default.div.withConfig({displayName:"FeedbackSettings__Container",componentId:"l2kfv8-1"})([""]),D=function(e){(0,u.default)(n,e);var t=k(n);function n(){var e;(0,r.default)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,f.default)((0,l.default)(e),"getStatusOptions",(0,h.memoize)((function(t){var n=e.props.localize;return(0,g.isNilOrError)(t)?[]:t.map((function(e){return{value:e.id,label:n(e.attributes.title_multiloc)}}))}))),(0,f.default)((0,l.default)(e),"getIdeaStatusOption",(0,h.memoize)((function(t,n){var a=e.props.localize;if(!(0,g.isNilOrError)(t)&&t.relationships.idea_status&&t.relationships.idea_status.data&&!(0,g.isNilOrError)(n)){var i=n.find((function(e){return e.id===(0,h.get)(t,"relationships.idea_status.data.id")}));return i?{value:i.id,label:a(i.attributes.title_multiloc),color:i.attributes.color}:null}return null}),(function(e,t){return JSON.stringify({ideaId:(0,g.isNilOrError)(e)?void 0:(0,h.get)(e,"relationships.idea_status.data.id"),statusesId:(0,g.isNilOrError)(t)?void 0:t.map((function(e){return e.id}))})}))),(0,f.default)((0,l.default)(e),"getAssigneeOptions",(0,h.memoize)((function(t){var n=e.props.intl.formatMessage;if(!(0,g.isNilOrError)(t.usersList)){var a=t.usersList.map((function(e){return{value:e.id,label:"".concat(e.attributes.first_name," ").concat(e.attributes.last_name)}}));return a.push({value:"unassigned",label:n(b.default.noOne)}),a}return[]}))),(0,f.default)((0,l.default)(e),"onStatusChange",(function(t){var n=e.props,a=n.tenant,i=n.ideaId,o=n.authUser,r=o?o.id:null,s=!(0,g.isNilOrError)(a)&&a.id;(0,S.updateIdea)(e.props.ideaId,{idea_status_id:t.value}),(0,j.trackEventByName)(T.default.ideaStatusChange,{tenant:s,location:"Idea preview/popup",idea:i,adminAtWork:r})})),(0,f.default)((0,l.default)(e),"onAssigneeChange",(function(t){var n=e.props,a=n.tenant,i=n.ideaId,o=n.authUser,r=t?t.value:null,s=o?o.id:null,l=!(0,g.isNilOrError)(a)&&a.id;(0,S.updateIdea)(i,{assignee_id:r}),(0,j.trackEventByName)(T.default.changeIdeaAssignment,{tenant:l,location:"Idea preview",idea:i,assignee:r,adminAtWork:s})})),e}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.idea,n=e.className,a=e.statuses,i=e.prospectAssignees,o=this.getStatusOptions(a),r=this.getIdeaStatusOption(t,a),s=this.getAssigneeOptions(i),l=(0,h.get)(t,"relationships.assignee.data.id","unassigned");return(0,g.isNilOrError)(t)?null:p.default.createElement(N,{className:"".concat(n," e2e-idea-settings")},p.default.createElement(x,{value:p.default.createElement(v.FormattedMessage,b.default.currentStatus),htmlFor:"idea-preview-select-status"}),p.default.createElement(I.Select,{id:"idea-preview-select-status",options:o,onChange:this.onStatusChange,value:r}),p.default.createElement(x,{value:p.default.createElement(v.FormattedMessage,b.default.assignee),htmlFor:"idea-preview-select-assignee"}),p.default.createElement(I.Select,{id:"idea-preview-select-assignee",options:s,onChange:this.onAssigneeChange,value:l}))}}]),n}(p.PureComponent),q=(0,m.adopt)({tenant:p.default.createElement(E.default,null),authUser:p.default.createElement(_.default,null),idea:function(e){var t=e.ideaId,n=e.render;return p.default.createElement(O.default,{ideaId:t},n)},statuses:p.default.createElement(M.default,null),prospectAssignees:function(e){var t=e.idea,n=e.render;return p.default.createElement(P.default,{canModerateProject:(0,h.get)(t,"relationships.project.data.id")},n)}}),R=(0,v.injectIntl)((0,y.default)(D));t.default=function(e){return p.default.createElement(q,e,(function(t){return p.default.createElement(R,(0,o.default)({},e,t))}))}},"jO/m":function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),i=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IdeaContent=void 0,n("ma9I");var o=a(n("pVnL")),r=a(n("lwsE")),s=a(n("W8MJ")),l=a(n("PJYZ")),u=a(n("7W2i")),d=a(n("a1gu")),c=a(n("Nsbk")),f=a(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=K(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),m=n("KLnl"),h=n("ifvJ"),g=n("T89o"),v=a(n("zJWc")),y=a(n("eaxi")),b=a(n("Mh2d")),w=a(n("K5Dz")),I=a(n("VUEM")),S=a(n("/Eug")),P=a(n("LtqC")),M=a(n("vPs5")),O=a(n("gqN7")),E=a(n("TjeH")),_=n("iP56"),j=a(n("2fl8")),T=a(n("jWBj")),C=a(n("3A/8")),k=n("b0Ul"),x=n("ngE2"),N=a(n("A4tC")),D=a(n("OL75")),q=a(n("CA+D")),R=a(n("yiTP")),A=a(n("M7uY")),B=a(n("oRVF")),W=n("04NW"),F=a(n("V3HD")),z=n("Rw3A"),L=a(n("13cB")),U=a(n("6L1S")),J=a(n("vOnD")),V=n("96Cm"),$=n("ufqH");function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(K=function(e){return e?n:t})(e)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var H=(0,J.default)(v.default).withConfig({displayName:"IdeaContent__StyledTitle",componentId:"yqqknn-0"})(["margin-bottom:20px;"]),Q=(0,J.default)(y.default).withConfig({displayName:"IdeaContent__StyledPostedBy",componentId:"yqqknn-1"})(["margin-bottom:20px;"]),Y=J.default.div.withConfig({displayName:"IdeaContent__Row",componentId:"yqqknn-2"})(["display:flex;width:100%;"]),G=J.default.div.withConfig({displayName:"IdeaContent__Left",componentId:"yqqknn-3"})(["flex:5;margin-right:50px;height:100%;"]),X=J.default.p.withConfig({displayName:"IdeaContent__BelongsToProject",componentId:"yqqknn-4"})(["width:100%;color:",";font-weight:300;font-size:","px;line-height:normal;margin-bottom:10px;"],V.colors.label,V.fontSizes.base),ee=(0,J.default)(T.default).withConfig({displayName:"IdeaContent__ProjectLink",componentId:"yqqknn-5"})(["color:inherit;font-weight:400;font-size:inherit;line-height:inherit;text-decoration:underline;transition:all 100ms ease-out;margin-left:4px;&:hover{color:",";text-decoration:underline;}"],(0,$.darken)(.2,V.colors.label)),te=J.default.img.withConfig({displayName:"IdeaContent__IdeaImage",componentId:"yqqknn-6"})(["width:100%;margin:0 0 2rem;padding:0;border-radius:8px;border:1px solid ",";"],V.colors.separation),ne=(0,J.default)(b.default).withConfig({displayName:"IdeaContent__StyledBody",componentId:"yqqknn-7"})(["margin-bottom:20px;"]),ae=J.default.h2.withConfig({displayName:"IdeaContent__BodySectionTitle",componentId:"yqqknn-8"})(["font-size:","px;font-weight:400;line-height:28px;"],(function(e){return e.theme.fontSizes.medium})),ie=(0,J.default)(I.default).withConfig({displayName:"IdeaContent__StyledMap",componentId:"yqqknn-9"})(["margin-bottom:40px;"]),oe=(0,J.default)(S.default).withConfig({displayName:"IdeaContent__StyledOfficialFeedback",componentId:"yqqknn-10"})(["margin-top:70px;"]),re=(0,J.default)(P.default).withConfig({displayName:"IdeaContent__StyledComments",componentId:"yqqknn-11"})(["margin-top:30px;"]),se=J.default.div.withConfig({displayName:"IdeaContent__Right",componentId:"yqqknn-12"})(["flex:2;position:sticky;top:80px;align-self:flex-start;color:",";font-size:","px;line-height:19px;"],V.colors.adminTextColor,V.fontSizes.base),le=J.default.div.withConfig({displayName:"IdeaContent__BudgetBox",componentId:"yqqknn-13"})(["margin-top:25px;width:100%;height:95px;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:5px;position:relative;border-radius:5px;background:",";border:solid 1px ",";font-size:","px;font-weight:500;"],V.colors.background,V.colors.adminTextColor,V.fontSizes.large),ue=J.default.div.withConfig({displayName:"IdeaContent__Picks",componentId:"yqqknn-14"})(["margin-top:15px;display:flex;font-size:","px;align-items:center;"],V.fontSizes.base),de=function(e){(0,u.default)(n,e);var t=Z(n);function n(){var e;(0,r.default)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,f.default)((0,l.default)(e),"handleClickDelete",(function(t){return function(){var n=e.props,a=n.idea,i=n.closePreview,o=n.intl.formatMessage,r={continuous:L.default.deleteInputConfirmation,timeline:L.default.deleteInputInTimelineConfirmation}[t];(0,m.isNilOrError)(a)||window.confirm(o(r))&&((0,x.deleteIdea)(a.id),i())}})),e}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.idea,n=e.project,a=e.localize,i=e.ideaImages,r=e.ideaFiles,s=e.locale,l=e.handleClickEdit;if(!(0,m.isNilOrError)(t)&&!(0,m.isNilOrError)(s)&&!(0,m.isNilOrError)(n)){var u,d=t.id,c=a(t.attributes.title_multiloc),f=!(0,m.isNilOrError)(i)&&i.length>0?(0,g.get)(i[0],"attributes.versions.large",null):null,h=t.attributes.location_point_geojson||null,v=(0,W.getAddressOrFallbackDMS)(t.attributes.location_description,t.attributes.location_point_geojson),y=(null===(u=t.relationships.author.data)||void 0===u?void 0:u.id)||null,b=t.attributes.proposed_budget,I=n.attributes.process_type;return p.default.createElement(k.Container,null,p.default.createElement(k.Top,null,p.default.createElement(j.default,{icon:"edit",buttonStyle:"text",onClick:l},p.default.createElement(z.FormattedMessage,L.default.edit)),p.default.createElement(j.default,{icon:"delete",buttonStyle:"text",onClick:this.handleClickDelete(I)},p.default.createElement(z.FormattedMessage,L.default.delete))),p.default.createElement(k.Content,null,!(0,m.isNilOrError)(n)&&p.default.createElement(X,null,p.default.createElement(z.FormattedMessage,(0,o.default)({},L.default.postedIn,{values:{projectLink:p.default.createElement(ee,{className:"e2e-project-link",to:"/projects/".concat(n.attributes.slug)},p.default.createElement(C.default,{value:n.attributes.title_multiloc}))}}))),p.default.createElement(H,{postId:d,postType:"idea",title:c}),p.default.createElement(Q,{ideaId:d,authorId:y}),p.default.createElement(Y,null,p.default.createElement(G,null,f&&p.default.createElement(te,{src:f,alt:"",className:"e2e-ideaImage"}),b&&p.default.createElement(p.default.Fragment,null,p.default.createElement(ae,null,p.default.createElement(z.FormattedMessage,L.default.proposedBudgetTitle)),p.default.createElement(w.default,{proposedBudget:b}),p.default.createElement(ae,null,p.default.createElement(z.FormattedMessage,L.default.bodyTitle))),p.default.createElement(ne,{postId:d,postType:"idea",body:a(t.attributes.body_multiloc),locale:s}),!(0,m.isNilOrError)(n)&&h&&v&&p.default.createElement(ie,{address:v,position:h,projectId:n.id}),r&&!(0,m.isNilOrError)(r)&&p.default.createElement(M.default,{files:r}),p.default.createElement(oe,{postId:d,postType:"idea",permissionToPost:!0}),p.default.createElement(re,{postId:d,postType:"idea"})),p.default.createElement(se,null,p.default.createElement(E.default,{ideaId:d}),t.attributes.budget&&p.default.createElement(p.default.Fragment,null,p.default.createElement(le,null,p.default.createElement(U.default,{value:t.attributes.budget}),p.default.createElement(ue,null,p.default.createElement(z.FormattedMessage,(0,o.default)({},L.default.picks,{values:{picksNumber:t.attributes.baskets_count}})),"Â ",p.default.createElement(_.IconTooltip,{content:p.default.createElement(z.FormattedMessage,L.default.pbItemCountTooltip)})))),p.default.createElement(O.default,{ideaId:d})))))}return null}}]),n}(p.PureComponent);t.IdeaContent=de;var ce=(0,h.adopt)({locale:p.default.createElement(R.default,null),idea:function(e){var t=e.ideaId,n=e.render;return p.default.createElement(D.default,{ideaId:t},n)},project:function(e){var t=e.idea,n=e.render;return p.default.createElement(A.default,{projectId:(0,g.get)(t,"relationships.project.data.id")},n)},ideaFiles:function(e){var t=e.ideaId,n=e.render;return p.default.createElement(N.default,{resourceId:t,resourceType:"idea"},n)},ideaImages:function(e){var t=e.ideaId,n=e.render;return p.default.createElement(q.default,{ideaId:t},n)},postOfficialFeedbackPermission:function(e){var t=e.project,n=e.render;return p.default.createElement(B.default,{item:(0,m.isNilOrError)(t)?null:t,action:"moderate"},n)}}),fe=(0,z.injectIntl)((0,F.default)(de)),pe=function(e){return p.default.createElement(ce,e,(function(t){return p.default.createElement(fe,(0,o.default)({},e,t))}))};t.default=pe},jwji:function(e,t,n){"use strict";n("SuFq");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("TeQF"),n("FZtP");var i=a(n("lwsE")),o=a(n("W8MJ")),r=a(n("PJYZ")),s=a(n("7W2i")),l=a(n("a1gu")),u=a(n("Nsbk")),d=a(n("lSNA")),c=a(n("q1tI")),f=n("lq1v");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),a=t.call(this,e),(0,d.default)((0,r.default)(a),"subscriptions",void 0),a.state={ideaVotesCount:void 0},a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.subscriptions=[(0,f.votesStream)(this.props.ideaId).observable.subscribe((function(t){e.setState({ideaVotesCount:t?{up:t.data.filter((function(e){return"up"===e.attributes.mode})).length,down:t.data.filter((function(e){return"down"===e.attributes.mode})).length}:null})}))]}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.ideaVotesCount)}}]),n}(c.default.Component);t.default=m},lq1v:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.voteStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.default.get(c({apiEndpoint:"".concat(s.API_PATH,"/votes/").concat(e)},t))},t.votesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.default.get(c({apiEndpoint:"".concat(s.API_PATH,"/ideas/").concat(e,"/votes")},t))},t.addVote=function(e,t){return f.apply(this,arguments)},t.deleteVote=function(e,t){return p.apply(this,arguments)};var i=a(n("o0o1"));n("ma9I"),n("TWNs"),n("rB9j"),n("JfAA");var o=a(n("yXPU")),r=a(n("lSNA")),s=n("p0gT"),l=a(n("1Kqg")),u=n("KLnl");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){return(f=(0,o.default)(i.default.mark((function e(t,n){var a,o,r,d=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]&&d[2],e.next=3,l.default.add("".concat(s.API_PATH,"/ideas/").concat(t,"/votes"),{vote:n});case 3:return o=e.sent,a&&(r=new RegExp("/ideas/".concat(u.uuidRegExp,"$")),l.default.fetchAllWith({regexApiEndpoint:[r],onlyFetchActiveStreams:!0})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,o.default)(i.default.mark((function e(t,n){var a,o,r,d=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]&&d[2],e.next=3,l.default.delete("".concat(s.API_PATH,"/votes/").concat(n),n);case 3:return o=e.sent,a&&(r=new RegExp("/ideas/".concat(u.uuidRegExp,"$")),l.default.fetchAllWith({regexApiEndpoint:[r],onlyFetchActiveStreams:!0})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},oRVF:function(e,t,n){"use strict";n("SuFq");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("FZtP");var i=a(n("lwsE")),o=a(n("W8MJ")),r=a(n("PJYZ")),s=a(n("7W2i")),l=a(n("a1gu")),u=a(n("Nsbk")),d=a(n("lSNA")),c=a(n("q1tI")),f=n("DtyJ"),p=n("ahDk"),m=a(n("aTp4")),h=n("iamO"),g=n("KLnl");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=v(n);function n(e){var a;return(0,i.default)(this,n),a=t.call(this,e),(0,d.default)((0,r.default)(a),"inputProps$",void 0),(0,d.default)((0,r.default)(a),"subscriptions",void 0),a.state={permission:void 0},a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.item,a=t.action,i=t.context;this.inputProps$=new f.BehaviorSubject({item:n,action:a,context:i}),this.subscriptions=[this.inputProps$.pipe((0,p.distinctUntilChanged)((function(e,t){return(0,m.default)(e,t)})),(0,p.switchMap)((function(e){var t=e.item,n=e.action,a=e.context;return(0,g.isNilOrError)(t)?(0,f.of)(!1):(0,h.hasPermission)({item:t,action:n,context:a})}))).subscribe((function(t){return e.setState({permission:t})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.item,n=e.action,a=e.context;this.inputProps$.next({item:t,action:n,context:a})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.permission)}}]),n}(c.default.Component);t.default=y},zIn5:function(e,t,n){"use strict";n("2B1R"),n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ToJy");var i=a(n("J4zp")),o=a(n("lwsE")),r=a(n("W8MJ")),s=a(n("PJYZ")),l=a(n("7W2i")),u=a(n("a1gu")),d=a(n("Nsbk")),c=a(n("lSNA")),f=a(n("q1tI")),p=n("DtyJ"),m=n("ahDk"),h=n("RLXT"),g=n("T89o"),v=n("KLnl");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var I=function(e){(0,l.default)(n,e);var t=w(n);function n(e){var a;return(0,o.default)(this,n),a=t.call(this,e),(0,c.default)((0,s.default)(a),"postId$",void 0),(0,c.default)((0,s.default)(a),"postType$",void 0),(0,c.default)((0,s.default)(a),"sort$",void 0),(0,c.default)((0,s.default)(a),"loadMore$",void 0),(0,c.default)((0,s.default)(a),"subscription",void 0),(0,c.default)((0,s.default)(a),"initialQueryParameters",{pageNumber:0,pageSize:15,sort:"-new"}),(0,c.default)((0,s.default)(a),"loadMore",(function(){a.state.hasMore&&a.loadMore$.next(null)})),(0,c.default)((0,s.default)(a),"changeSort",(function(e){a.sort$.next(e)})),a.state={commentsList:void 0,loadingInital:!1,loadingMore:!1,hasMore:!0},a}return(0,r.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.postId$=new p.BehaviorSubject(this.props.postId),this.postType$=new p.BehaviorSubject(this.props.postType),this.sort$=new p.BehaviorSubject(this.initialQueryParameters.sort),this.loadMore$=new p.BehaviorSubject(null),this.subscription=(0,p.combineLatest)(this.postId$.pipe((0,m.distinctUntilChanged)()),this.postType$.pipe((0,m.distinctUntilChanged)()),this.sort$.pipe((0,m.distinctUntilChanged)())).pipe((0,m.switchMap)((function(t){var n=(0,i.default)(t,3),a=n[0],o=n[1],r=n[2],s=void 0,l=e.initialQueryParameters.pageNumber,u=e.initialQueryParameters.pageSize,d=!0;return e.loadMore$.pipe((0,m.tap)((function(){return e.setState({loadingInital:0===l,loadingMore:l>0})})),(0,m.mergeScan)((function(){return l+=1,("idea"===o?h.commentsForIdeaStream:h.commentsForInitiativeStream)(a,{queryParameters:{sort:r,"page[number]":l,"page[size]":u}}).observable.pipe((0,m.map)((function(e){var t=(0,g.get)(e,"links.self"),n=(0,g.get)(e,"links.last");return d=(0,g.isString)(t)&&(0,g.isString)(n)&&t!==n,s=(0,v.isNilOrError)(s)?e.data:(0,g.unionBy)(s,e.data,"id"),null})))}),null),(0,m.map)((function(){return{pageNumber:l,commentsList:s,hasMore:d}})))}))).subscribe((function(t){var n=t.commentsList,a=t.hasMore;e.setState({commentsList:n,hasMore:a,loadingInital:!1,loadingMore:!1})}))}},{key:"componentDidUpdate",value:function(){this.postId$.next(this.props.postId)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){return(0,this.props.children)(b(b({},this.state),{},{onLoadMore:this.loadMore,onChangeSort:this.changeSort}))}}]),n}(f.default.Component);t.default=I}}]);
//# sourceMappingURL=77.d5c4b85166840b8f74c9.chunk.js.map