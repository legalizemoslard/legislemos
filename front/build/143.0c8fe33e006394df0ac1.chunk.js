(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{"5Vht":function(t,e,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var n=r("TqRt"),a=r("cDf5");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("ma9I"),r("+2oP"),r("2B1R");var u,i,l=n(r("lwsE")),o=n(r("W8MJ")),s=n(r("PJYZ")),c=n(r("7W2i")),f=n(r("a1gu")),d=n(r("Nsbk")),p=n(r("lSNA")),m=n(r("VkAN")),h=S(r("q1tI")),v=r("T89o"),g=r("KLnl"),b=n(r("jWBj")),y=r("ONLP"),P=r("FvIY"),w=r("iP56"),O=n(r("Qs0S")),E=r("Rw3A"),F=n(r("Zi2k")),M=S(r("vOnD")),A=r("ufqH"),j=r("96Cm"),k=r("kyyJ"),_=n(r("PC5P"));function N(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(N=function(t){return t?r:e})(t)}function S(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var r=N(e);if(r&&r.has(t))return r.get(t);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var l=u?Object.getOwnPropertyDescriptor(t,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,d.default)(t);if(e){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var G=(0,M.default)(w.Icon).withConfig({displayName:"MostActiveUsersList__InfoIcon",componentId:"sc-2jmprp-0"})(["display:flex;align-items:center;cursor:pointer;width:20px;height:22px;margin-left:10px;"]),R=M.default.ul.withConfig({displayName:"MostActiveUsersList__UserList",componentId:"sc-2jmprp-1"})(["list-style:none;margin:0;padding:0 20px;"]),I=M.default.li.withConfig({displayName:"MostActiveUsersList__UserListItem",componentId:"sc-2jmprp-2"})(["display:flex;align-items:center;margin-bottom:10px;"]),x=M.default.div.withConfig({displayName:"MostActiveUsersList__User",componentId:"sc-2jmprp-3"})(["display:flex;flex-basis:100%;max-width:50%;min-width:50%;align-items:center;",""],j.media.smallerThan1280px(u||(u=(0,m.default)(["\n    max-width: 70%;\n    min-width: 70%;\n  "])))),D=(0,M.default)(O.default).withConfig({displayName:"MostActiveUsersList__UserImage",componentId:"sc-2jmprp-4"})(["margin-right:10px;svg{fill:",";}"],j.colors.label),U=(0,M.default)(b.default).withConfig({displayName:"MostActiveUsersList__UserName",componentId:"sc-2jmprp-5"})(["color:",";margin-right:10px;"],j.colors.label),L=M.default.span.withConfig({displayName:"MostActiveUsersList__DeletedUserName",componentId:"sc-2jmprp-6"})(["font-style:italic;"]),B=M.default.div.withConfig({displayName:"MostActiveUsersList__UserScore",componentId:"sc-2jmprp-7"})(["background-color:",";width:","%;color:#fff;padding:10px;display:flex;justify-content:center;align-items:center;&:hover{background-color:",";color:",";}",""],(function(t){return t.theme.newBarFill}),(function(t){return 50*t.value}),(function(t){return t.hoverColor}),(function(t){return t.theme.newBarFill}),j.media.smallerThan1280px(i||(i=(0,m.default)(["\n    width: ","px;\n  "])),(function(t){return 4*t.value}))),W=function(t){(0,c.default)(r,t);var e=C(r);function r(t){var n;return(0,l.default)(this,r),n=e.call(this,t),(0,p.default)((0,s.default)(n),"subscription",void 0),(0,p.default)((0,s.default)(n),"formatName",(function(t,e){var r="".concat(t," ").concat(e);return r.length>20&&(r="".concat(r.slice(0,22),"...")),r})),(0,p.default)((0,s.default)(n),"maxScore",(function(){var t=n.state.engagementScoreList;return t?(0,v.max)(t.map((function(t){return t.attributes.sum_score}))):void 0})),n.state={engagementScoreList:null},n}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.resubscribe()}},{key:"componentDidUpdate",value:function(t){this.props.startAt===t.startAt&&this.props.endAt===t.endAt&&this.props.currentGroupFilter===t.currentGroupFilter||this.resubscribe(this.props.startAt,this.props.endAt,this.props.currentGroupFilter)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"resubscribe",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.startAt,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.endAt,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.currentGroupFilter;this.subscription&&this.subscription.unsubscribe(),this.subscription=(0,k.userEngagementScoresStream)({queryParameters:{start_at:e,end_at:r,group:n}}).observable.subscribe((function(e){var r=e.data;t.setState({engagementScoreList:r})}))}},{key:"render",value:function(){var t=this,e=this.props,r=e.className,n=e.infoMessage,a=this.state.engagementScoreList,u=this.props.theme.newBarFill,i=(0,A.rgba)(u,.25),l=this.maxScore()||0;return h.default.createElement(y.GraphCard,{className:r},h.default.createElement(y.GraphCardInner,null,h.default.createElement(y.GraphCardHeader,null,h.default.createElement(y.GraphCardTitle,null,h.default.createElement(E.FormattedMessage,F.default.mostActiveUsers),n&&h.default.createElement(P.Popup,{basic:!0,trigger:h.default.createElement("div",null,h.default.createElement(G,{name:"info"})),content:n,position:"top left"}))),a&&0!==a.length?h.default.createElement(R,null,a.map((function(e){var r=e.id,n=e.relationships.user.data.id,a=e.attributes.sum_score;return h.default.createElement(I,{key:r},h.default.createElement(x,null,h.default.createElement(D,{size:28,userId:n}),h.default.createElement(_.default,{id:n},(function(e){var r=(0,v.get)(e,"attributes.first_name",""),n=(0,v.get)(e,"attributes.last_name",""),a=t.formatName(r,n);return(0,g.isNilOrError)(e)?h.default.createElement(L,null,h.default.createElement(E.FormattedMessage,F.default.deletedUser)):h.default.createElement(U,{to:"/profile/".concat(e.attributes.slug)},a)}))),h.default.createElement(B,{hoverColor:i,value:a/l},a))}))):h.default.createElement(y.NoDataContainer,null,h.default.createElement(E.FormattedMessage,F.default.noData))))}}]),r}(h.PureComponent),T=(0,E.injectIntl)((0,M.withTheme)(W));e.default=T},L8PK:function(t,e,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var n=r("TqRt"),a=r("cDf5");Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.UsersDashboard=void 0,r("2B1R"),r("ma9I");var u=n(r("RIqP")),i=n(r("lwsE")),l=n(r("W8MJ")),o=n(r("PJYZ")),s=n(r("7W2i")),c=n(r("a1gu")),f=n(r("Nsbk")),d=n(r("lSNA")),p=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var r=k(e);if(r&&r.has(t))return r.get(t);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var l=u?Object.getOwnPropertyDescriptor(t,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=t[i]}n.default=t,r&&r.set(t,n);return n}(r("q1tI")),m=n(r("wd/R")),h=r("ifvJ"),v=n(r("V3HD")),g=n(r("J+il")),b=n(r("wAts")),y=r("ONLP"),P=n(r("zjEE")),w=n(r("5Vht")),O=n(r("Yjdl")),E=r("Rw3A"),F=n(r("Zi2k")),M=r("KuRP"),A=n(r("DTaU")),j=r("KLnl");function k(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(k=function(t){return t?r:e})(t)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var N=function(t){(0,s.default)(r,t);var e=_(r);function r(t){var n;return(0,i.default)(this,r),n=e.call(this,t),(0,d.default)((0,o.default)(n),"handleChangeTimeRange",(function(t,e){n.setState({startAtMoment:t,endAtMoment:e})})),(0,d.default)((0,o.default)(n),"handleOnGroupFilter",(function(t){n.props.trackFilterOnGroup({extra:{group:t}}),n.setState({currentGroupFilter:t.value,currentGroupFilterLabel:t.label})})),(0,d.default)((0,o.default)(n),"generateGroupFilterOptions",(function(){var t=n.props,e=t.groups,r=t.groups.groupsList,a=t.localize,i=t.intl.formatMessage,l=[];return(0,j.isNilOrError)(e)||(0,j.isNilOrError)(r)||(l=r.map((function(t){return{value:t.id,label:a(t.attributes.title_multiloc)}}))),[{value:"",label:i(F.default.allGroups)}].concat((0,u.default)(l))})),n.state={startAtMoment:void 0,endAtMoment:(0,m.default)(),currentGroupFilter:void 0,currentGroupFilterLabel:void 0},n}return(0,l.default)(r,[{key:"render",value:function(){var t=this.state,e=t.currentGroupFilter,r=t.endAtMoment,n=t.startAtMoment,a=t.currentGroupFilterLabel,u=n&&n.toISOString(),i=r&&r.toISOString(),l=this.props.intl.formatMessage(F.default.mostActiveUsersRankingDescription);return p.default.createElement(p.default.Fragment,null,p.default.createElement(y.ControlBar,null,p.default.createElement(P.default,{startAtMoment:n,endAtMoment:r,onChange:this.handleChangeTimeRange})),p.default.createElement(b.default,{currentProjectFilter:void 0,currentGroupFilter:e,currentTopicFilter:void 0,projectFilterOptions:null,groupFilterOptions:this.generateGroupFilterOptions(),topicFilterOptions:null,onProjectFilter:null,onGroupFilter:this.handleOnGroupFilter,onTopicFilter:null}),p.default.createElement(y.GraphsContainer,null,p.default.createElement(O.default,{id:"app.containers.Admin.dashboard.users.graphs",startAt:u,endAt:i,currentGroupFilter:e,currentGroupFilterLabel:a}),p.default.createElement(w.default,{currentGroupFilter:e,startAt:u,endAt:i,infoMessage:l,className:"dynamicHeight"})))}}]),r}(p.PureComponent);e.UsersDashboard=N;var S=(0,h.adopt)({groups:p.default.createElement(g.default,null)}),C=(0,E.injectIntl)((0,M.injectTracks)({trackFilterOnGroup:A.default.filteredOnGroup})((0,v.default)(N)));e.default=function(){return p.default.createElement(S,null,(function(t){return p.default.createElement(C,t)}))}},PC5P:function(t,e,r){"use strict";r("SuFq");var n=r("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("FZtP");var a=n(r("lwsE")),u=n(r("W8MJ")),i=n(r("PJYZ")),l=n(r("7W2i")),o=n(r("a1gu")),s=n(r("Nsbk")),c=n(r("lSNA")),f=n(r("q1tI")),d=r("T89o"),p=r("DtyJ"),m=r("ahDk"),h=n(r("aTp4")),v=r("Dsgy"),g=r("KLnl");function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.default)(t);if(e){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}var y=function(t){(0,l.default)(r,t);var e=b(r);function r(t){var n;return(0,a.default)(this,r),n=e.call(this,t),(0,c.default)((0,i.default)(n),"inputProps$",void 0),(0,c.default)((0,i.default)(n),"subscriptions",void 0),n.state={user:void 0},n}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props,r=e.id,n=e.slug,a=e.resetOnChange;this.inputProps$=new p.BehaviorSubject({id:r,slug:n}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(t,e){return(0,h.default)(t,e)})),(0,m.tap)((function(){return a&&t.setState({user:void 0})})),(0,m.switchMap)((function(t){var e=t.id,r=t.slug;return(0,d.isString)(e)?(0,v.userByIdStream)(e).observable:(0,d.isString)(r)?(0,v.userBySlugStream)(r).observable:(0,p.of)(null)}))).subscribe((function(e){t.setState({user:(0,g.isNilOrError)(e)?e:e.data})}))]}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.id,r=t.slug;this.inputProps$.next({id:e,slug:r})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.user)}}]),r}(f.default.Component);e.default=y,(0,c.default)(y,"defaultProps",{resetOnChange:!0})}}]);
//# sourceMappingURL=143.0c8fe33e006394df0ac1.chunk.js.map