{"version":3,"sources":["webpack:///./app/components/Sharing/SharingDropdownButton/index.tsx","webpack:///./app/components/PostShowComponents/Comments/LoadingComments.tsx","webpack:///./app/components/VoteControl/VotingDisabled.tsx","webpack:///./app/hooks/useIdeaStatus.ts","webpack:///./app/components/PostShowComponents/SharingModalContent/index.tsx","webpack:///./app/components/UI/PopContainer/index.tsx","webpack:///./app/components/AssignBudgetControl/messages.ts","webpack:///./app/components/PostShowComponents/SharingModalContent/rocket.png","webpack:///./app/services/ideaCustomFieldsSchemas.ts","webpack:///./app/components/PostShowComponents/Image.tsx","webpack:///./app/components/StatusBadge/index.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/messages.ts","webpack:///./app/containers/IdeasShow/MetaInformation/IdeaTopics.tsx","webpack:///./app/resources/GetIdeaImages.tsx","webpack:///./app/components/VoteControl/index.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Status.tsx","webpack:///./app/services/ideaImages.ts","webpack:///./app/resources/GetInitiative.tsx","webpack:///./app/containers/IdeasShow/index.tsx","webpack:///./app/containers/IdeasShow/Buttons/IdeaSharingButton.tsx","webpack:///./app/containers/IdeasShow/RightColumnDesktop/index.tsx","webpack:///./app/containers/IdeasShow/IdeaProposedBudget.tsx","webpack:///./app/containers/IdeasShow/Buttons/GoToCommentsButton.tsx","webpack:///./app/containers/IdeasShow/Buttons/MobileSharingButtonComponent.tsx","webpack:///./app/components/Map/index.tsx","webpack:///./app/containers/IdeasShow/Buttons/SharingButtonComponent.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Location.tsx","webpack:///./app/components/Sharing/SharingDropdownButton/SharingDropdownContent.tsx","webpack:///./app/containers/IdeasShow/IdeaMoreActions.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Attachment.tsx","webpack:///./app/containers/IdeasShowPage/IdeaShowPageTopBar.tsx","webpack:///./app/hooks/useIdeaCustomFieldsSchemas.ts","webpack:///./app/containers/IdeasShow/MetaInformation/PostedBy.tsx","webpack:///./app/containers/IdeasShow/CTABox/VotingCTABox/Voting.tsx","webpack:///./app/containers/IdeasShow/messages.ts","webpack:///./app/components/PostShowComponents/Topics.tsx","webpack:///./app/containers/IdeasShow/Buttons/IdeaCTAButton.tsx","webpack:///./app/containers/IdeasShow/IdeaMeta.tsx","webpack:///./app/components/PostShowComponents/SharingModalContent/messages.ts","webpack:///./app/components/PostShowComponents/SharingModalContent/tracks.ts","webpack:///./app/components/VoteControl/messages.ts","webpack:///./app/services/initiatives.ts","webpack:///./app/containers/IdeasShow/CTABox/Buttons/index.tsx","webpack:///./app/components/AssignBudgetControl/index.tsx","webpack:///./app/services/ideaVotes.ts","webpack:///./app/containers/IdeasShowPage/messages.ts","webpack:///./app/containers/IdeasShow/tracks.ts","webpack:///./app/resources/GetPermission.tsx","webpack:///./app/containers/IdeasShowPage/index.tsx","webpack:///./app/containers/IdeasShow/styleConstants.ts","webpack:///./app/resources/GetIdeaCustomFieldsSchemas.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/index.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Attachments.tsx","webpack:///./app/containers/IdeasShow/GoBackButton.tsx","webpack:///./app/containers/IdeasShow/isFieldEnabled.ts","webpack:///./app/resources/GetComments.tsx"],"names":["className","url","twitterMessage","whatsAppMessage","emailSubject","emailBody","utmParams","buttonComponent","dropdownContent","Container","styled","div","LoadingMessage","colors","label","fontSizes","medium","props","FormattedMessage","messages","loadingComments","small","StyledLink","Link","clBlueDark","darken","StyledButton","button","memo","projectTitle","disabled_reason","future_enabled","projectId","votingDescriptor","project","authUser","stopPropagation","event","isNilOrError","message","votingPossibleLater","votingDisabledProjectInactive","votingDisabledMaxReached","votingDisabledFutureEnabled","votingDisabledPhaseOver","votingNotPermitted","votingNotVerified","votingNotEnabled","enabledFromDate","FormattedDate","value","year","month","day","projectName","attributes","title_multiloc","to","slug","onClick","pcType","process_type","pcId","id","relationships","current_phase","data","verificationLink","preventDefault","openVerificationModal","context","action","type","onVerify","onMouseDown","linkToVerificationText","values","statusId","useState","ideaStatus","setIdeaStatus","useEffect","subscription","ideaStatusStream","observable","subscribe","response","unsubscribe","Loading","Rocket","img","media","smallerThanMaxTablet","Title","h1","theme","colorText","xxxxl","xxxl","Description","p","large","base","SharingWrapper","SharingModalContent","postType","idea","initiative","localize","locale","postTitle","postUrl","location","origin","phases","emailSharingSubject","emailSharingBody","inputTerm","getInputTerm","getInputTermMessage","ideaEmailSharingSubjectText","option","optionEmailSharingSubject","projectEmailSharingSubject","question","questionEmailSharingSubject","issue","issueEmailSharingSubject","contribution","contributionEmailSharingSubject","ideaEmailSharingBody","optionEmailSharingBody","projectEmailSharingBody","questionEmailSharingModalContentBody","issueEmailSharingBody","contributionEmailSharingBody","ideaWhatsAppMessage","optionWhatsAppMessage","projectWhatsAppMessage","questionWhatsAppMessage","issueWhatsAppMessage","contributionWhatsAppMessage","initiativeEmailSharingSubject","initiativeEmailSharingBody","whatsAppMessageProposal","getIdeaMessages","getInitiativeMessages","this","postId","trackEventByName","tracks","sharingModalOpened","name","title","subtitle","formatMessage","intl","getPostValues","getMessages","src","rocket","alt","isInModal","source","campaign","content","Spinner","PureComponent","SharingModalContentWithHoCs","Data","adopt","tenant","render","ideaId","inputProps","dataProps","enterAnimation","keyframes","borderRadius","separation","css","IconWrapper","StyledIcon","Icon","icon","children","defineMessages","remove","defaultMessage","removeFromMyBasket","add","addToMyBasket","budgetingNotPossible","budgetingFutureEnabled","budgetingNotPermitted","budgetingNotVerified","verifyAccountLinkText","a11y_price","backToOverview","streamParams","apiEndpoint","API_PATH","streams","get","Image","color","xs","transparentize","postedBy","currentStatus","topics","attachments","byUserOnDate","injectIntl","compact","topicIds","map","item","length","Item","Header","GetIdeaImages","state","ideaImages","undefined","inputProps$","BehaviorSubject","subscriptions","pipe","distinctUntilChanged","prev","next","switchMap","isString","ideaImagesStream","of","setState","forEach","React","Component","voteKeyframeAnimation","isRtl","VoteIconContainer","styleType","lighten","votingEnabled","defaultStyles","boxShadow","boxShadowHoverSmall","size","VoteIcon","VoteCount","Vote","Upvote","active","clGreen","enabled","Downvote","clRed","VoteControl","votingAnimation","vote","voteMode","myVoteId","myVoteMode","voting","participationContext","participationContextId","participationContextType","disabledVoteClick","action_descriptor","voting_idea","cancellingEnabled","cancelling_enabled","votingDisabledReason","isSignedIn","isTryingToUndoVote","isVerified","verified","voting$","refetchIdeas","voting_method","upvotesCount","downvotesCount","deleteVote","addVote","user_id","mode","ideaByIdStream","fetch","openSignUpInModal","verification","verificationContext","element","setRef","upvoteElement","downvoteElement","showVoteControl","loaded","id$","authUser$","authUserStream","filter","addEventListener","votingAnimationDone","idea$","combineLatest","myVote$","user_vote","voteId","vote$","voteStream","project$","phases$","hasPhases","isEmpty","projectByIdStream","phase","phaseStream","upvotes_count","downvotes_count","votingFutureEnabled","isContinuousProject","ideaPhaseIds","ideaPhases","includes","latestRelevantIdeaPhase","getLatestRelevantPhase","shouldVerify","participation_method","myVote","removeEventListener","ariaHidden","upvotingEnabled","downvotingEnabled","showDownvote","downvoting_enabled","screenreaderContent","ScreenReaderOnly","a11y_upvotesDownvotes","LiveMessage","join","ref","setContainerRef","removeFocus","onClickUpvote","setUpvoteRef","tabIndex","upvote","onClickDownvote","setDownvoteRef","downvote","withRouter","imageId","delete","base64","ordering","bodyData","image","ideaImage","GetInitiative","resetOnChange","tap","initiativeByIdStream","initiativeBySlugStream","LazyComments","lazy","main","pageContentMaxWidth","Content","LeftColumn","StyledRightColumnDesktop","RightColumnDesktop","columnsGapDesktop","IdeaHeader","MobileIdeaMoreActions","IdeaMoreActions","TopBar","StyledGoBackButton","GoBackButton","BodySectionTitle","h2","StyledBody","Body","StyledIdeaProposedBudget","IdeaProposedBudget","MobileMetaInformation","MetaInformation","StyledAssignBudgetControl","AssignBudgetControl","MobileIdeaSharingButton","IdeaSharingButton","StyledOfficialFeedback","OfficialFeedback","Comments","IdeasShow","officialFeedbacks","isUndefined","officialFeedbacksList","ideaIdForSocialSharing","prevState","translateButtonClicked","trackEvent","clickGoBackToOriginalIdeaCopyButton","clickTranslateIdeaButton","spamModalVisible","newIdeaId","query","setLoaded","setTimeout","window","history","replaceState","pathname","windowSize","postOfficialFeedbackPermission","ideaCustomFieldsSchemas","insideModal","authorId","author","ideaTitle","idea_status","ideaImageLarge","versions","proposedBudget","proposed_budget","ideaBody","body_multiloc","isCompactView","viewportWidths","largeTablet","proposedBudgetEnabled","onTranslateIdea","proposedBudgetTitle","bodyTitle","body","view","permissionToPost","Suspense","fallback","classNames","in","timeout","enter","contentFadeInDuration","exit","handleContainerRef","opened","close","closeIdeaSocialSharingModal","hasSkipButton","skipText","skipSharing","sharingModalTitle","optionSharingModalTitle","projectSharingModalTitle","questionSharingModalTitle","issueSharingModalTitle","contributionSharingModalTitle","sharingModalSubtitle","IdeasShowWithHOCs","comments","href","ideaTwitterMessage","optionTwitterMessage","projectTwitterMessage","questionTwitterMessage","issueTwitterMessage","contributionTwitterMessage","ideaEmailSharingSubject","questionEmailSharingBody","ideaUrl","rightColumnWidthDesktop","InnerContainer","Box","backgroundLightGrey","StyledVoting","Voting","StyledMetaInformation","smallerThanMinTablet","GoToCommentsButton","useCallback","commentInputElementAnchor","document","getElementById","commentInputElement","focus","preventScroll","scrollIntoView","behavior","block","buttonText","commentCTA","iconName","ariaExpanded","buttonStyle","borderColor","iconAriaHidden","share","LeafletMap","defaultCardStyle","MapWrapper","BoxContainer","CloseButton","defaultOutline","CloseIcon","centerLatLng","zoomLevel","mapHeight","points","noMarkerClustering","zoomControlPosition","layersControlPosition","boxContent","onInit","onBoxClose","hideLegend","appConfig","additionalLeafletConfig","setAdditionalLeafletConfig","center","useMemo","getCenter","zoom","getZoomLevel","tileProvider","getTileProvider","tileOptions","getTileOptions","leafletConfig","handleLeafletConfigChange","onLeafletConfigChange","OpenMapModalButton","Address","MapContainer","Location","isOpened","setIsOpened","point","location_point_geojson","lat","coordinates","lng","address","getAddressOrFallbackDMS","location_description","isNil","header","width","biggerThanMaxTablet","FacebookIcon","MessengerIcon","WhatsAppIcon","TwitterIcon","EmailIcon","secondaryText","getUrl","getUrlWithUtm","handleClick","shareButtonClicked","network","facebook","messenger","whatsapp","twitter","email","MoreActionsMenuWrapper","isSpamModalVisible","setIsSpamModalVisible","openSpamModal","processType","ariaLabel","moreOptions","actions","reportAsSpam","handler","editPost","clHistory","push","deletePost","deleteConfirmationMessage","continuous","deleteInputConfirmation","timeline","deleteInputInTimelineConfirmation","confirm","deleteIdea","goBack","onDeleteIdea","No","reportAsSpamModalTitle","resourceId","resourceType","FileDownloadLink","a","PaperclipIcon","file","download","target","rel","mobileTopBarHeight","TopBarInner","biggerThanMinTablet","Left","Right","GoBackIcon","GoBackLabel","phone","goBackAction","onGoBack","eventEmitter","emit","onDisabledVoteClick","setIdeaCustomFieldsSchemas","ideaFormSchemaStream","UserWrapper","StyledAvatar","Avatar","PostedBy","ideaPublishedAtDate","published_at","userName","userId","isLinkToProfile","underline","fontSize","date","VoteControlWrapper","VoteWrapper","error","isContainerVisible","prevProps","voteControlComponent","setVoteControlRef","deletedUser","send","createdTimeAgo","or","Topic","colorSecondary","Topics","topic","key","fontWeight","IdeaMeta","tenantLocales","settings","core","locales","localizedTitle","ideaDescription","stripHtml","fb","projectSlug","articleJson","headline","first_name","last_name","mainEntityOfPage","datePublished","json","itemListElement","position","host","logo","Helmet","unread_notifications","property","imageSizes","ideaImg","JSON","stringify","IdeaMetaWithHoc","voteSuccessTitle","voteErrorTitle","voteErrorSubTitle","initiativeSlug","cacheStream","initiativeId","object","update","fetchAllWith","Promise","all","first","toPromise","StyledGoToCommentsButton","commentingEnabled","commenting_idea","IdeaCardContainer","IdeaPageContainer","BudgetWithButtonWrapper","Budget","StyledPBExpenses","PBExpenses","basket","user_basket","processing","setProcessing","assignBudget","ms","resolve","done","isBudgetingEnabled","budgeting","basketIdeaIds","ideas","isInBasket","budgetingDisabledReason","newIdeas","basketIdea","updateBasket","participation_context_id","participation_context_type","capitalizeParticipationContextType","idea_ids","submitted_at","ideaAddedToBasket","dataId","addBasket","basketCreated","budget","isPermitted","hasBudgetingDisabledReason","isPBContext","isCurrentPhase","getCurrentPhase","isCurrent","publication_status","addRemoveButton","disabled","bgColor","clRedError","iconSize","viewMode","AssignBudgetControlWrapper","isUndefinedOrError","refetchAllActiveIdeas","ideaEndpointRegexp","RegExp","uuidRegExp","regexApiEndpoint","onlyFetchActiveStreams","_ideaId","noResultsFound","goBackToList","clickUpvote","clickDownvote","GetPermission","permission","hasPermission","IdeaNotFoundWrapper","menuHeight","footerHeight","StyledIdeaShowPageTopBar","IdeaShowPageTopBar","StyledIdeasShow","mobileMenuHeight","goBackToListMessage","IdeasShowPage","windowWidth","isError","linkTo","text","params","ideaSlug","ideaCustomFieldsSchema","topicsEnabled","locationEnabled","attachmentsEnabled","StyledAttachment","Attachment","isLastItem","files","Array","isArray","index","Button","padding","textDecorationHover","fieldCode","ui_schema_multiloc","GetComments","pageNumber","pageSize","sort","hasMore","loadMore$","sort$","commentsList","loadingInital","loadingMore","postId$","postType$","initialQueryParameters","mergeScan","commentsForIdeaStream","commentsForInitiativeStream","queryParameters","selfLink","lastLink","unionBy","onLoadMore","loadMore","onChangeSort","changeSort"],"mappings":"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","file":"70.0d0c750c7f216a564285.chunk.js","sourcesContent":["import React from 'react';\nimport ButtonWithDropdown from 'components/UI/ButtonWithDropdown';\nimport SharingDropdownContent from './SharingDropdownContent';\nimport { UtmParams } from '../utils';\n\ninterface Props {\n  className?: string;\n  twitterMessage: string;\n  whatsAppMessage: string;\n  emailSubject: string;\n  emailBody: string;\n  utmParams: UtmParams;\n  url: string;\n  buttonComponent: JSX.Element;\n}\n\nconst SharingDropdownButton = ({\n  className,\n  url,\n  twitterMessage,\n  whatsAppMessage,\n  emailSubject,\n  emailBody,\n  utmParams,\n  buttonComponent,\n}: Props) => {\n  return (\n    <ButtonWithDropdown\n      className={className}\n      buttonComponent={buttonComponent}\n      dropdownContent={\n        <SharingDropdownContent\n          url={url}\n          twitterMessage={twitterMessage}\n          whatsAppMessage={whatsAppMessage}\n          emailSubject={emailSubject}\n          emailBody={emailBody}\n          utmParams={utmParams}\n        />\n      }\n    />\n  );\n};\n\nexport default SharingDropdownButton;\n","import React from 'react';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst LoadingMessage = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.medium}px;\n  font-weight: 400;\n`;\n\ninterface Props {\n  className?: string;\n}\n\nexport default (props: Props) => (\n  <Container className={props.className}>\n    <LoadingMessage>\n      <FormattedMessage {...messages.loadingComments} />\n    </LoadingMessage>\n  </Container>\n);\n","import React, { MouseEvent, memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Link from 'utils/cl-router/Link';\n\n// services\nimport { IIdeaData } from 'services/ideas';\nimport { IParticipationContextType } from 'typings';\n\n// hooks\nimport useProject from 'hooks/useProject';\nimport useAuthUser from 'hooks/useAuthUser';\n\n// i18n\nimport messages from './messages';\nimport T from 'components/T';\nimport { FormattedDate } from 'react-intl';\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// utils\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// styling\nimport styled from 'styled-components';\nimport { fontSizes, colors } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\nconst Container = styled.div`\n  width: 100%;\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  font-weight: 300;\n  line-height: 20px;\n\n  > span {\n    overflow-wrap: break-word;\n    word-wrap: break-word;\n    word-break: break-word;\n    hyphens: auto;\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${colors.clBlueDark};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${darken(0.15, colors.clBlueDark)};\n    text-decoration: underline;\n  }\n`;\n\nconst StyledButton = styled.button`\n  color: ${colors.clBlueDark};\n  text-decoration: underline;\n  transition: all 80ms ease-out;\n  display: inline-block;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n\n  &:hover {\n    color: ${darken(0.15, colors.clBlueDark)};\n    text-decoration: underline;\n  }\n`;\n\ninterface Props {\n  projectId: string;\n  votingDescriptor: IIdeaData['attributes']['action_descriptor']['voting_idea'];\n}\n\nconst VotingDisabled = memo(({ projectId, votingDescriptor }: Props) => {\n  const project = useProject({ projectId });\n  const authUser = useAuthUser();\n\n  const onVerify = (\n    pcType: IParticipationContextType,\n    // it's theoretically possible to have a timeline project\n    // with no phases, in which case we would have no phase id\n    pcId: string | undefined\n  ) => (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    if (pcId && pcType) {\n      openVerificationModal({\n        context: {\n          action: 'voting_idea',\n          id: pcId,\n          type: pcType,\n        },\n      });\n    }\n  };\n\n  const removeFocus = (event: React.MouseEvent) => {\n    event.preventDefault();\n  };\n\n  const reasonToMessage = () => {\n    const { disabled_reason, future_enabled } = votingDescriptor;\n\n    if (disabled_reason === 'project_inactive') {\n      return future_enabled\n        ? messages.votingPossibleLater\n        : messages.votingDisabledProjectInactive;\n    } else if (disabled_reason === 'voting_disabled' && future_enabled) {\n      return messages.votingPossibleLater;\n    } else if (disabled_reason === 'voting_limited_max_reached') {\n      return messages.votingDisabledMaxReached;\n    } else if (disabled_reason === 'idea_not_in_current_phase') {\n      return future_enabled\n        ? messages.votingDisabledFutureEnabled\n        : messages.votingDisabledPhaseOver;\n    } else if (disabled_reason === 'not_permitted') {\n      return messages.votingNotPermitted;\n    } else if (authUser && disabled_reason === 'not_verified') {\n      return messages.votingNotVerified;\n    } else {\n      return messages.votingNotEnabled;\n    }\n  };\n\n  const stopPropagation = (event: MouseEvent | KeyboardEvent) => {\n    event.stopPropagation();\n  };\n\n  if (!isNilOrError(project)) {\n    const getProjectLink = () => {\n      const projectTitle = project.attributes.title_multiloc;\n\n      return (\n        <StyledLink\n          to={`/projects/${project.attributes.slug}`}\n          onClick={stopPropagation}\n        >\n          <T value={projectTitle} />\n        </StyledLink>\n      );\n    };\n    const message = reasonToMessage();\n    const enabledFromDate = votingDescriptor.future_enabled ? (\n      <FormattedDate\n        value={votingDescriptor.future_enabled}\n        year=\"numeric\"\n        month=\"long\"\n        day=\"numeric\"\n      />\n    ) : null;\n    const projectName = getProjectLink();\n    const pcType =\n      project.attributes.process_type === 'continuous' ? 'project' : 'phase';\n    const pcId =\n      pcType === 'project'\n        ? project.id\n        : project.relationships?.current_phase?.data?.id;\n    const verificationLink = (\n      <StyledButton\n        className=\"e2e-verify-button\"\n        onClick={onVerify(pcType, pcId)}\n        onMouseDown={removeFocus}\n      >\n        <FormattedMessage {...messages.linkToVerificationText} />\n      </StyledButton>\n    );\n\n    return (\n      <Container data-testid=\"votingDisabled_Container\">\n        <FormattedMessage\n          {...message}\n          values={{\n            enabledFromDate,\n            projectName,\n            verificationLink,\n          }}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nexport default VotingDisabled;\n","import { useState, useEffect } from 'react';\nimport { IIdeaStatusData, ideaStatusStream } from 'services/ideaStatuses';\n\nexport default function useIdeaStatus({ statusId }) {\n  const [ideaStatus, setIdeaStatus] = useState<IIdeaStatusData | Error | null>(\n    null\n  );\n\n  useEffect(() => {\n    const observable = ideaStatusStream(statusId).observable;\n\n    const subscription = observable.subscribe((response) => {\n      setIdeaStatus(response.data);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [statusId]);\n\n  return ideaStatus;\n}\n","import React, { PureComponent } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\nimport { getInputTerm } from 'services/participationContexts';\n\n// components\nimport SharingButtons from 'components/Sharing/SharingButtons';\nimport { Spinner } from 'cl2-component-library';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetProject, { GetProjectChildProps } from 'resources/GetProject';\nimport GetPhases, { GetPhasesChildProps } from 'resources/GetPhases';\nimport { PostType } from 'resources/GetPost';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport localize, { InjectedLocalized } from 'utils/localize';\nimport messages from './messages';\nimport { getInputTermMessage } from 'utils/i18n';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from './tracks';\n\n// style\nimport styled from 'styled-components';\nimport { fontSizes, media } from 'utils/styleUtils';\nimport rocket from './rocket.png';\n\nconst Loading = styled.div`\n  width: 100%;\n  height: 460px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Rocket = styled.img`\n  width: 40px;\n  height: 40px;\n\n  ${media.smallerThanMaxTablet`\n    width: 35px;\n    height: 35px;\n  `}\n`;\n\nconst Title = styled.h1`\n  flex-shrink: 0;\n  width: 100%;\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.xxxxl}px;\n  line-height: 40px;\n  font-weight: 500;\n  text-align: center;\n  margin: 0;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  padding: 0;\n\n  ${media.smallerThanMaxTablet`\n    max-width: auto;\n    font-size: ${fontSizes.xxxl}px;\n    line-height: 36px;\n  `}\n`;\n\nconst Description = styled.p`\n  flex-shrink: 0;\n  width: 100%;\n  max-width: 500px;\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.large}px;\n  line-height: 25px;\n  font-weight: 300;\n  text-align: center;\n  margin: 0;\n  margin-top: 10px;\n  margin-bottom: 50px;\n  padding: 0;\n\n  ${media.smallerThanMaxTablet`\n    font-size: ${fontSizes.base}px;\n    line-height: 21px;\n  `}\n`;\n\nconst SharingWrapper = styled.div`\n  flex-shrink: 0;\n  width: 100%;\n  max-width: 300px;\n  display: flex;\n  flex-direction: column;\n`;\n\ninterface InputProps {\n  postType: PostType;\n  postId: string | null;\n  className?: string;\n  title: string;\n  subtitle: string;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n  authUser: GetAuthUserChildProps;\n  idea: GetIdeaChildProps;\n  initiative: GetInitiativeChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass SharingModalContent extends PureComponent<\n  Props & InjectedIntlProps & InjectedLocalized,\n  State\n> {\n  componentDidMount() {\n    const { postId, postType } = this.props;\n\n    trackEventByName(tracks.sharingModalOpened.name, {\n      postId,\n      postType,\n    });\n  }\n\n  getPostValues = () => {\n    const { postType, idea, initiative, localize, locale } = this.props;\n    let postTitle: string | null = null;\n    let postUrl: string | null = null;\n\n    if (postType === 'idea' && !isNilOrError(idea)) {\n      postTitle = localize(idea.attributes.title_multiloc);\n      postUrl = `${location.origin}/${locale}/${postType}s/${idea.attributes.slug}`;\n    }\n\n    if (postType === 'initiative' && !isNilOrError(initiative)) {\n      postTitle = localize(initiative.attributes.title_multiloc);\n      postUrl = `${location.origin}/${locale}/${postType}s/${initiative.attributes.slug}`;\n    }\n\n    return { postTitle, postUrl };\n  };\n\n  getIdeaMessages = () => {\n    const { project, phases } = this.props;\n    let emailSharingSubject: ReactIntl.FormattedMessage.MessageDescriptor | null = null;\n    let emailSharingBody: ReactIntl.FormattedMessage.MessageDescriptor | null = null;\n    let whatsAppMessage: ReactIntl.FormattedMessage.MessageDescriptor | null = null;\n\n    if (!isNilOrError(project)) {\n      const inputTerm = getInputTerm(\n        project.attributes.process_type,\n        project,\n        phases\n      );\n\n      emailSharingSubject = getInputTermMessage(inputTerm, {\n        idea: messages.ideaEmailSharingSubjectText,\n        option: messages.optionEmailSharingSubject,\n        project: messages.projectEmailSharingSubject,\n        question: messages.questionEmailSharingSubject,\n        issue: messages.issueEmailSharingSubject,\n        contribution: messages.contributionEmailSharingSubject,\n      });\n      emailSharingBody = getInputTermMessage(inputTerm, {\n        idea: messages.ideaEmailSharingBody,\n        option: messages.optionEmailSharingBody,\n        project: messages.projectEmailSharingBody,\n        question: messages.questionEmailSharingModalContentBody,\n        issue: messages.issueEmailSharingBody,\n        contribution: messages.contributionEmailSharingBody,\n      });\n      whatsAppMessage = getInputTermMessage(inputTerm, {\n        idea: messages.ideaWhatsAppMessage,\n        option: messages.optionWhatsAppMessage,\n        project: messages.projectWhatsAppMessage,\n        question: messages.questionWhatsAppMessage,\n        issue: messages.issueWhatsAppMessage,\n        contribution: messages.contributionWhatsAppMessage,\n      });\n    }\n\n    return { emailSharingSubject, emailSharingBody, whatsAppMessage };\n  };\n\n  getInitiativeMessages = () => {\n    const emailSharingSubject = messages.initiativeEmailSharingSubject;\n    const emailSharingBody = messages.initiativeEmailSharingBody;\n    const whatsAppMessage = messages.whatsAppMessageProposal;\n\n    return { emailSharingSubject, emailSharingBody, whatsAppMessage };\n  };\n\n  getMessages = () => {\n    const { postType } = this.props;\n\n    if (postType === 'idea') {\n      return this.getIdeaMessages();\n    } else {\n      return this.getInitiativeMessages();\n    }\n  };\n\n  render() {\n    const { postType, authUser, className, title, subtitle } = this.props;\n    const { formatMessage } = this.props.intl;\n\n    const { postTitle, postUrl } = this.getPostValues();\n    const {\n      emailSharingBody,\n      emailSharingSubject,\n      whatsAppMessage,\n    } = this.getMessages();\n\n    if (\n      !isNilOrError(authUser) &&\n      postUrl &&\n      emailSharingBody &&\n      emailSharingSubject &&\n      whatsAppMessage\n    ) {\n      return (\n        <Container className={className}>\n          <Rocket src={rocket} alt=\"rocket\" />\n          <Title className={`e2e-${postType}-social-sharing-modal-title`}>\n            {title}\n          </Title>\n          <Description>{subtitle}</Description>\n          <SharingWrapper>\n            <SharingButtons\n              context={postType}\n              isInModal\n              url={postUrl}\n              twitterMessage={formatMessage(messages.twitterMessage, {\n                postTitle,\n              })}\n              whatsAppMessage={formatMessage(whatsAppMessage, {\n                postTitle,\n              })}\n              emailSubject={formatMessage(emailSharingSubject, { postTitle })}\n              emailBody={formatMessage(emailSharingBody, {\n                postTitle,\n                postUrl,\n              })}\n              utmParams={{\n                source: `share_${postType}`,\n                campaign: `${postType}flow`,\n                content: authUser.id,\n              }}\n            />\n          </SharingWrapper>\n        </Container>\n      );\n    }\n\n    return (\n      <Loading>\n        <Spinner />\n      </Loading>\n    );\n  }\n}\n\nconst SharingModalContentWithHoCs = injectIntl<Props>(\n  localize(SharingModalContent)\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n  idea: ({ postId, postType, render }) => (\n    <GetIdea ideaId={postId && postType === 'idea' ? postId : null}>\n      {render}\n    </GetIdea>\n  ),\n  initiative: ({ postId, postType, render }) => (\n    <GetInitiative id={postId && postType === 'initiative' ? postId : null}>\n      {render}\n    </GetInitiative>\n  ),\n  project: ({ idea, render }) => (\n    <GetProject\n      projectId={\n        !isNilOrError(idea) ? idea.relationships.project.data.id : null\n      }\n    >\n      {render}\n    </GetProject>\n  ),\n  phases: ({ idea, render }) => (\n    <GetPhases\n      projectId={\n        !isNilOrError(idea) ? idea.relationships.project.data.id : null\n      }\n    >\n      {render}\n    </GetPhases>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => (\n      <SharingModalContentWithHoCs {...inputProps} {...dataProps} />\n    )}\n  </Data>\n);\n","import React, { FC } from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { Icon, IconNames } from 'cl2-component-library';\nimport { colors } from 'utils/styleUtils';\n\nconst enterAnimation = keyframes`\n  0% {\n    transform: scale(1, 0);\n    opacity: 0;\n  }\n  5% { transform: scale(1,0.17942745647835484); }\n  10% { transform: scale(1,0.5453767165955569); }\n  15% { transform: scale(1,0.894404964443162); }\n  20% { transform: scale(1,1.1203760160160154); }\n  25% { transform: scale(1,1.2051533263082377); }\n  30% { transform: scale(1,1.1848074616294655); }\n  35% { transform: scale(1,1.1134007773010595); }\n  40% { transform: scale(1,1.037247338664745); }\n  45% { transform: scale(1,0.9833121263387835); }\n  50% { transform: scale(1,0.9591514931191875); opacity: 1; }\n  55% { transform: scale(1,0.9592070055589312); }\n  60% { transform: scale(1,0.9725345308087797); }\n  65% { transform: scale(1,0.9888015967917715); }\n  70% { transform: scale(1,1.0013794350134355); }\n  75% { transform: scale(1,1.0078326552211365); }\n  80% { transform: scale(1,1.008821093113004); }\n  85% { transform: scale(1,1.0064881982177143); }\n  90% { transform: scale(1,1.0030929569279976); }\n  95% { transform: scale(1,1.00022141474777); }\n  100% {\n    transform: scale(1, 1);\n  }\n`;\n\nconst Container = styled.div`\n  background-color: #fff;\n  position: relative;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  border: solid 1px ${colors.separation};\n  margin-top: 0px;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  animation: ${css`\n    ${enterAnimation} 450ms linear\n  `};\n  transform-origin: center center;\n`;\n\nconst IconWrapper = styled.div`\n  width: 42px;\n  height: 42px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background: #f0f0f0;\n  margin-bottom: 15px;\n`;\n\nconst StyledIcon = styled(Icon)`\n  height: 20px;\n  fill: #333;\n`;\n\ninterface Props {\n  icon?: IconNames;\n  children: React.ReactNode;\n}\n\n/** A bordered container with an icon that animates in with a bouncy animation */\nconst PopContainer: FC<Props> = ({ icon, children }) => {\n  return (\n    <Container>\n      {icon && (\n        <IconWrapper>\n          <StyledIcon name={icon} />\n        </IconWrapper>\n      )}\n      {children}\n    </Container>\n  );\n};\n\nexport default PopContainer;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  remove: {\n    id: 'app.components.AssignBudgetControl.remove',\n    defaultMessage: 'Remove',\n  },\n  removeFromMyBasket: {\n    id: 'app.components.AssignBudgetControl.removeFromMyBasket',\n    defaultMessage: 'Remove from my basket',\n  },\n  add: {\n    id: 'app.components.AssignBudgetControl.add',\n    defaultMessage: 'Add',\n  },\n  addToMyBasket: {\n    id: 'app.components.AssignBudgetControl.addToMyBasket',\n    defaultMessage: 'Add to my basket',\n  },\n  budgetingNotPossible: {\n    id: 'app.components.VoteControl.budgetingNotPossible',\n    defaultMessage:\n      'Making changes to your budget is not possible at this time.',\n  },\n  budgetingFutureEnabled: {\n    id: 'app.components.VoteControl.budgetingFutureEnabled',\n    defaultMessage:\n      'You can allocate your budget starting from {enabledFromDate}.',\n  },\n  budgetingNotPermitted: {\n    id: 'app.components.VoteControl.budgetingNotPermitted',\n    defaultMessage:\n      'Participatory budgeting is only enabled for certain groups.',\n  },\n  budgetingNotVerified: {\n    id: 'app.components.VoteControl.budgetingNotVerified',\n    defaultMessage: 'Please {verifyAccountLink} to continue.',\n  },\n  verifyAccountLinkText: {\n    id: 'app.components.AssignBudgetControl.verifyAccountLinkText',\n    defaultMessage: 'verify your account',\n  },\n  a11y_price: {\n    id: 'app.components.AssignBudgetControl.a11y_price',\n    defaultMessage: 'Price: ',\n  },\n  backToOverview: {\n    id: 'app.components.AssignBudgetControl.backToOverview',\n    defaultMessage: 'Back to overview',\n  },\n});\n","export default __webpack_public_path__ + \"aaae759b408aa34fd8afbcefb716a1ab.png\";","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\n\nexport type CustomFieldCodes =\n  | 'title'\n  | 'body'\n  | 'topic_ids'\n  | 'location'\n  | 'images'\n  | 'attachments'\n  | 'proposed_budget';\n\nexport interface JSONSchemaObject {\n  title: string;\n  description: string;\n  type: 'string' | 'array';\n  uniqueItems?: boolean;\n  minItems?: number;\n  items?: {\n    type: 'string' | 'array';\n    format?: 'data-url' | 'string';\n  };\n}\n\nexport interface UISchemaObject {\n  'ui:widget'?: string;\n}\n\nexport interface IIdeaFormSchemas {\n  json_schema_multiloc: {\n    [locale: string]: {\n      type: 'object';\n      additionalProperties: boolean;\n      properties: {\n        title: JSONSchemaObject;\n        body: JSONSchemaObject;\n        topic_ids: JSONSchemaObject;\n        proposed_budget: JSONSchemaObject;\n        location: JSONSchemaObject;\n        images: JSONSchemaObject;\n        attachments: JSONSchemaObject;\n      };\n      required: string[];\n    };\n  };\n  ui_schema_multiloc: {\n    [locale: string]: {\n      title: UISchemaObject;\n      body: UISchemaObject;\n      topic_ids: UISchemaObject;\n      proposed_budget: UISchemaObject;\n      location: UISchemaObject;\n      images: UISchemaObject;\n      attachments: UISchemaObject;\n      'ui:order': string[];\n    };\n  };\n}\n\nexport function ideaFormSchemaStream(\n  projectId: string,\n  streamParams: IStreamParams | null = null\n) {\n  const apiEndpoint = `${API_PATH}/projects/${projectId}/custom_fields/schema`;\n  return streams.get<IIdeaFormSchemas>({\n    apiEndpoint,\n    ...streamParams,\n  });\n}\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { colors } from 'utils/styleUtils';\n\nconst Image = styled.img`\n  width: 100%;\n  margin-bottom: 25px;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  border: 1px solid ${colors.separation};\n`;\n\ninterface Props {\n  src: string;\n  alt: string;\n  id?: string;\n}\n\nexport default memo<Props>(({ src, alt, id }) => (\n  <Image src={src} alt={alt} id={id} />\n));\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport useIdeaStatus from 'hooks/useIdeaStatus';\nimport T from 'components/T';\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div<{ color: string }>`\n  color: ${({ color }) => color};\n  font-size: ${fontSizes.xs}px;\n  font-weight: 600;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: normal;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n  hyphens: auto;\n  padding: 5px 8px;\n  display: inline-block;\n  border-radius: ${({ theme }) => theme.borderRadius};\n  border: 1px solid ${({ color }) => transparentize(0.7, color)};\n`;\n\ninterface Props {\n  statusId: string;\n  className?: string;\n  id?: string;\n}\n\nconst StatusBadge = memo<Props>(({ statusId, id, className }) => {\n  const ideaStatus = useIdeaStatus({ statusId });\n\n  if (!isNilOrError(ideaStatus)) {\n    const color = ideaStatus?.attributes?.color || '#bbb';\n\n    return (\n      <Container id={id || ''} className={className || ''} color={color}>\n        <T value={ideaStatus.attributes.title_multiloc} />\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nexport default StatusBadge;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  postedBy: {\n    id: 'app.containers.IdeasShow.MetaInformation.postedBy',\n    defaultMessage: 'Posted by',\n  },\n  currentStatus: {\n    id: 'app.containers.IdeasShow.MetaInformation.currentStatus',\n    defaultMessage: 'Current status',\n  },\n  topics: {\n    id: 'app.containers.IdeasShow.MetaInformation.topics',\n    defaultMessage: 'Topics',\n  },\n  location: {\n    id: 'app.containers.IdeasShow.MetaInformation.location',\n    defaultMessage: 'Location',\n  },\n  attachments: {\n    id: 'app.containers.IdeasShow.MetaInformation.attachments',\n    defaultMessage: 'Attachments',\n  },\n  byUserOnDate: {\n    id: 'app.containers.IdeasShow.MetaInformation.byUserOnDate',\n    defaultMessage: '{userName} on {date}',\n  },\n});\n","import React from 'react';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\nimport Topics from 'components/PostShowComponents/Topics';\nimport useIdea from 'hooks/useIdea';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\ninterface Props {\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst IdeaTopics = ({\n  ideaId,\n  compact,\n  className,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  const idea = useIdea({ ideaId });\n\n  if (!isNilOrError(idea)) {\n    const topicIds =\n      idea.relationships.topics?.data.map((item) => item.id) || [];\n\n    if (topicIds.length > 0) {\n      return (\n        <Item className={className || ''} compact={compact}>\n          <Header>{formatMessage(messages.topics)}</Header>\n          <Topics postType=\"idea\" topicIds={topicIds} />\n        </Item>\n      );\n    }\n  }\n\n  return null;\n};\n\nexport default injectIntl(IdeaTopics);\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { IIdeaImageData, ideaImagesStream } from 'services/ideaImages';\nimport { isString } from 'lodash-es';\n\ninterface InputProps {\n  ideaId: string | null;\n}\n\ntype children = (renderProps: GetIdeaImagesChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  ideaImages: IIdeaImageData[] | undefined | null;\n}\n\nexport type GetIdeaImagesChildProps = IIdeaImageData[] | undefined | null;\n\nexport default class GetIdeaImages extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      ideaImages: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { ideaId } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ ideaId });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ ideaId }) => {\n            if (isString(ideaId)) {\n              return ideaImagesStream(ideaId).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((ideaImages) => {\n          this.setState({ ideaImages: ideaImages ? ideaImages.data : null });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { ideaId } = this.props;\n    this.inputProps$.next({ ideaId });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { ideaImages } = this.state;\n    return (children as children)(ideaImages);\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { isString, get, isEmpty, includes } from 'lodash-es';\nimport {\n  BehaviorSubject,\n  Subscription,\n  Observable,\n  combineLatest,\n  of,\n} from 'rxjs';\nimport { filter, map, switchMap, distinctUntilChanged } from 'rxjs/operators';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { withRouter, WithRouterProps } from 'react-router';\n\n// i18n\nimport { injectIntl, FormattedMessage } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\nimport { LiveMessage } from 'react-aria-live';\n\n// components\nimport { Icon } from 'cl2-component-library';\n\n// services\nimport { authUserStream } from 'services/auth';\nimport {\n  ideaByIdStream,\n  IIdea,\n  IdeaVotingDisabledReason,\n} from 'services/ideas';\nimport { IUser } from 'services/users';\nimport { voteStream, addVote, deleteVote } from 'services/ideaVotes';\nimport { projectByIdStream, IProject, IProjectData } from 'services/projects';\nimport {\n  phaseStream,\n  IPhase,\n  IPhaseData,\n  getLatestRelevantPhase,\n} from 'services/phases';\n\n// utils\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// style\nimport styled, { css, keyframes } from 'styled-components';\nimport { colors, fontSizes, defaultStyles, isRtl } from 'utils/styleUtils';\nimport { lighten } from 'polished';\n\n// typings\nimport { IParticipationContextType } from 'typings';\n\ninterface IVoteComponent {\n  active: boolean;\n  enabled: boolean | null;\n}\n\ntype TSize = '1' | '2' | '3' | '4';\ntype TStyleType = 'border' | 'shadow';\n\nconst voteKeyframeAnimation = keyframes`\n  from {\n    transform: scale3d(1, 1, 1);\n  }\n\n  40% {\n    transform: scale3d(1.25, 1.25, 1.25);\n  }\n\n  to {\n    transform: scale3d(1, 1, 1);\n  }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  * {\n    user-select: none;\n  }\n`;\n\nconst VoteIconContainer = styled.div<{\n  size: TSize;\n  votingEnabled: boolean | null;\n  styleType: TStyleType;\n}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1px;\n  border-radius: 50%;\n  transition: all 60ms ease-out;\n  background-color: white;\n\n  ${({ styleType }) => {\n    return (\n      styleType === 'border' &&\n      css`\n        border: solid 1px ${lighten(0.2, colors.label)};\n      `\n    );\n  }}\n\n\n  ${({ styleType, votingEnabled }) => {\n    return (\n      styleType === 'shadow' &&\n      votingEnabled &&\n      css`\n        box-shadow: ${defaultStyles.boxShadow};\n        &:hover {\n          box-shadow: ${defaultStyles.boxShadowHoverSmall};\n        }\n      `\n    );\n  }}\n\n  ${({ votingEnabled, size }) => {\n    if (votingEnabled) {\n      if (size === '1') {\n        return css`\n          width: 35px;\n          height: 35px;\n        `;\n      }\n\n      if (size === '2') {\n        return css`\n          width: 45px;\n          height: 45px;\n        `;\n      }\n\n      if (size === '3') {\n        return css`\n          width: 48px;\n          height: 48px;\n        `;\n      }\n\n      if (size === '4') {\n        return css`\n          width: 50px;\n          height: 50px;\n        `;\n      }\n    }\n\n    return css`\n      margin-left: 5px;\n    `;\n  }}\n`;\n\nconst VoteIcon = styled(Icon)<{\n  size: TSize;\n  enabled: boolean | null;\n}>`\n  width: 19px;\n  height: 19px;\n  fill: ${colors.label};\n  transition: all 100ms ease-out;\n\n  ${(props) =>\n    props.size === '1'\n      ? css`\n          width: 17px;\n          height: 17px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '2'\n      ? css`\n          width: 18px;\n          height: 18px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '3'\n      ? css`\n          width: 20px;\n          height: 20px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '4'\n      ? css`\n          width: 21px;\n          height: 21px;\n        `\n      : css``}\n`;\n\nconst VoteCount = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin-left: 5px;\n  transition: all 100ms ease-out;\n\n  &:not(.enabled) {\n    margin-left: 3px;\n  }\n`;\n\nconst Vote = styled.button<IVoteComponent>`\n  display: flex;\n  align-items: center;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  border: none;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  &.voteClick ${VoteIconContainer} {\n    animation: ${css`\n      ${voteKeyframeAnimation} 350ms\n    `};\n  }\n\n  &:not(.enabled) {\n    ${VoteIconContainer} {\n      width: auto;\n      border: none;\n      background: none;\n    }\n\n    ${VoteIcon} {\n      margin-right: 4px;\n    }\n  }\n`;\n\nconst Upvote = styled(Vote)`\n  margin-right: 8px;\n\n  &:not(.enabled) {\n    ${VoteCount} {\n      ${isRtl`\n        margin-right: 5px;\n      `}\n    }\n  }\n\n  ${VoteIconContainer} {\n    ${(props) =>\n      props.active &&\n      `border-color: ${colors.clGreen}; background: ${colors.clGreen};`}\n  }\n\n  ${VoteIcon} {\n    margin-bottom: 4px;\n\n    ${({ active, enabled }) => {\n      if (active && enabled) {\n        return css`\n          fill: #fff;\n        `;\n      }\n\n      if (active && !enabled) {\n        return css`\n          fill: ${colors.clGreen};\n        `;\n      }\n\n      return;\n    }};\n  }\n\n  ${VoteCount} {\n    min-width: 20px;\n    margin-right: 5px;\n    ${(props) => props.active && `color: ${colors.clGreen};`}\n  }\n\n  &:hover.enabled {\n    ${VoteIconContainer} {\n      ${(props) => !props.active && `border: 1px solid ${colors.clGreen};`}\n    }\n\n    ${VoteIcon} {\n      ${(props) => !props.active && `fill: ${colors.clGreen};`}\n    }\n\n    ${VoteCount} {\n      ${(props) => !props.active && `color: ${colors.clGreen};`}\n    }\n  }\n`;\n\nconst Downvote = styled(Vote)`\n  ${VoteIconContainer} {\n    ${(props) =>\n      props.active &&\n      `border-color: ${colors.clRed}; background: ${colors.clRed};`}\n  }\n\n  ${VoteIcon} {\n    margin-top: 4px;\n\n    ${({ active, enabled }) => {\n      if (active && enabled) {\n        return css`\n          fill: #fff;\n        `;\n      }\n\n      if (active && !enabled) {\n        return css`\n          fill: ${colors.clRed};\n        `;\n      }\n\n      return;\n    }};\n  }\n\n  ${VoteCount} {\n    ${(props) => props.active && `color: ${colors.clRed};`}\n  }\n\n  &:hover.enabled {\n    ${VoteIconContainer} {\n      ${(props) => !props.active && `border: 1px solid ${colors.clRed};`}\n    }\n\n    ${VoteIcon} {\n      ${(props) => !props.active && `fill: ${colors.clRed};`}\n    }\n\n    ${VoteCount} {\n      ${(props) => !props.active && `color: ${colors.clRed};`}\n    }\n  }\n`;\n\ninterface Props {\n  ideaId: string;\n  size: TSize;\n  unauthenticatedVoteClick?: (voteMode: 'up' | 'down') => void;\n  disabledVoteClick?: (disabled_reason?: IdeaVotingDisabledReason) => void;\n  setRef?: (element: HTMLDivElement) => void;\n  ariaHidden?: boolean;\n  className?: string;\n  styleType: TStyleType;\n}\n\ninterface State {\n  showVoteControl: boolean;\n  authUser: IUser | null;\n  upvotesCount: number;\n  downvotesCount: number;\n  voting: 'up' | 'down' | null;\n  votingAnimation: 'up' | 'down' | null;\n  myVoteId: string | null | undefined;\n  myVoteMode: 'up' | 'down' | null | undefined;\n  idea: IIdea | null;\n  participationContext: IProjectData | IPhaseData | null;\n  participationContextId: string | null;\n  participationContextType: IParticipationContextType | null;\n  loaded: boolean;\n}\n\nclass VoteControl extends PureComponent<\n  Props & InjectedIntlProps & WithRouterProps,\n  State\n> {\n  voting$: BehaviorSubject<'up' | 'down' | null>;\n  id$: BehaviorSubject<string | null>;\n  subscriptions: Subscription[];\n  upvoteElement: HTMLButtonElement | null;\n  downvoteElement: HTMLButtonElement | null;\n\n  static defaultProps = {\n    ariaHidden: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showVoteControl: false,\n      authUser: null,\n      upvotesCount: 0,\n      downvotesCount: 0,\n      voting: null,\n      votingAnimation: null,\n      myVoteId: undefined,\n      myVoteMode: undefined,\n      idea: null,\n      participationContext: null,\n      participationContextId: null,\n      participationContextType: null,\n      loaded: false,\n    };\n    this.voting$ = new BehaviorSubject(null);\n    this.id$ = new BehaviorSubject(null);\n    this.subscriptions = [];\n    this.upvoteElement = null;\n    this.downvoteElement = null;\n  }\n\n  componentDidMount() {\n    const authUser$ = authUserStream().observable;\n    const voting$ = this.voting$.pipe(distinctUntilChanged());\n    const id$ = this.id$.pipe(\n      filter((ideaId) => isString(ideaId)),\n      distinctUntilChanged()\n    ) as Observable<string>;\n\n    this.id$.next(this.props.ideaId);\n    this.upvoteElement?.addEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.downvoteElement?.addEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n\n    const idea$ = id$.pipe(\n      switchMap((ideaId: string) => {\n        const idea$ = ideaByIdStream(ideaId).observable;\n\n        return combineLatest(idea$, voting$);\n      }),\n      filter(([_idea, voting]) => {\n        return voting === null;\n      }),\n      map(([idea, _voting]) => {\n        return idea;\n      })\n    );\n\n    const myVote$ = combineLatest(authUser$, idea$).pipe(\n      switchMap(([authUser, idea]) => {\n        if (\n          authUser &&\n          idea &&\n          idea.data.relationships.user_vote &&\n          idea.data.relationships.user_vote.data !== null\n        ) {\n          const voteId = idea.data.relationships.user_vote.data.id;\n          const vote$ = voteStream(voteId).observable;\n\n          return combineLatest(vote$, voting$).pipe(\n            filter(([_vote, voting]) => {\n              return voting === null;\n            }),\n            map(([vote, _voting]) => {\n              return vote;\n            })\n          );\n        }\n\n        return of(null);\n      })\n    );\n\n    this.subscriptions = [\n      voting$.subscribe((voting) => {\n        this.setState((state) => ({\n          voting,\n          votingAnimation:\n            voting !== null && state.voting === null\n              ? voting\n              : state.votingAnimation,\n        }));\n      }),\n\n      idea$\n        .pipe(\n          switchMap((idea) => {\n            let project$: Observable<IProject | null> = of(null);\n            let phases$: Observable<IPhase[] | null> = of(null);\n            const hasPhases = !isEmpty(\n              get(idea.data.relationships.phases, 'data', null)\n            );\n\n            if (!hasPhases && idea.data.relationships.project.data) {\n              project$ = projectByIdStream(\n                idea.data.relationships.project.data.id\n              ).observable;\n            }\n\n            if (hasPhases && idea.data.relationships.phases.data.length > 0) {\n              phases$ = combineLatest(\n                idea.data.relationships.phases.data.map(\n                  (phase) => phaseStream(phase.id).observable\n                )\n              );\n            }\n\n            return combineLatest(project$, phases$, authUser$).pipe(\n              map(([project, phases, authUser]) => ({\n                idea,\n                project,\n                phases,\n                authUser,\n              }))\n            );\n          })\n        )\n        .subscribe(({ idea, project, phases, authUser }) => {\n          const isSignedIn = !isNilOrError(authUser);\n          const upvotesCount = idea.data.attributes.upvotes_count;\n          const downvotesCount = idea.data.attributes.downvotes_count;\n          const votingEnabled =\n            idea.data.attributes.action_descriptor.voting_idea.enabled;\n          const cancellingEnabled =\n            idea.data.attributes.action_descriptor.voting_idea\n              .cancelling_enabled;\n          const votingDisabledReason =\n            idea.data.attributes.action_descriptor.voting_idea.disabled_reason;\n          const votingFutureEnabled =\n            idea.data.attributes.action_descriptor.voting_idea.future_enabled;\n          const isContinuousProject =\n            project?.data.attributes.process_type === 'continuous';\n          const ideaPhaseIds = idea?.data?.relationships?.phases?.data?.map(\n            (item) => item.id\n          );\n          const ideaPhases = phases\n            ?.filter((phase) => includes(ideaPhaseIds, phase.data.id))\n            .map((phase) => phase.data);\n          const latestRelevantIdeaPhase = ideaPhases\n            ? getLatestRelevantPhase(ideaPhases)\n            : null;\n          const participationContextType = isContinuousProject\n            ? 'project'\n            : 'phase';\n          const participationContextId = isContinuousProject\n            ? project?.data.id || null\n            : latestRelevantIdeaPhase?.id || null;\n          const participationContext = isContinuousProject\n            ? project?.data || null\n            : latestRelevantIdeaPhase;\n          const isPBContext =\n            participationContext?.attributes.participation_method ===\n            'budgeting';\n          const shouldSignIn =\n            !votingEnabled &&\n            (votingDisabledReason === 'not_signed_in' ||\n              (votingDisabledReason === 'not_verified' && !isSignedIn));\n          const shouldVerify =\n            !votingEnabled &&\n            votingDisabledReason === 'not_verified' &&\n            isSignedIn;\n          const verifiedButNotPermitted =\n            !shouldVerify && votingDisabledReason === 'not_permitted';\n          const showVoteControl = !!(\n            !isPBContext &&\n            (votingEnabled ||\n              shouldSignIn ||\n              cancellingEnabled ||\n              votingFutureEnabled ||\n              upvotesCount > 0 ||\n              downvotesCount > 0 ||\n              shouldVerify ||\n              verifiedButNotPermitted)\n          );\n\n          this.setState({\n            idea,\n            participationContext,\n            participationContextId,\n            participationContextType,\n            showVoteControl,\n            upvotesCount,\n            downvotesCount,\n            authUser,\n            loaded: true,\n          });\n        }),\n\n      myVote$.subscribe((myVote) => {\n        this.setState({\n          myVoteId: myVote ? myVote.data.id : null,\n          myVoteMode: myVote ? myVote.data.attributes.mode : null,\n        });\n      }),\n    ];\n  }\n\n  async componentDidUpdate() {\n    this.id$.next(this.props.ideaId);\n  }\n\n  componentWillUnmount() {\n    this.upvoteElement?.removeEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.downvoteElement?.removeEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  votingAnimationDone = () => {\n    this.setState({ votingAnimation: null });\n  };\n\n  onClickUpvote = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.vote('up');\n  };\n\n  onClickDownvote = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.vote('down');\n  };\n\n  vote = async (voteMode: 'up' | 'down') => {\n    const {\n      authUser,\n      myVoteId,\n      myVoteMode,\n      voting,\n      idea,\n      participationContext,\n      participationContextId,\n      participationContextType,\n    } = this.state;\n    const { ideaId, disabledVoteClick } = this.props;\n    const votingEnabled =\n      idea?.data.attributes.action_descriptor.voting_idea.enabled;\n    const cancellingEnabled =\n      idea?.data.attributes.action_descriptor.voting_idea.cancelling_enabled;\n    const votingDisabledReason =\n      idea?.data.attributes.action_descriptor.voting_idea.disabled_reason;\n    const isSignedIn = !isNilOrError(authUser);\n    const isTryingToUndoVote = !!(myVoteMode && voteMode === myVoteMode);\n    const isVerified =\n      !isNilOrError(authUser) && authUser.data.attributes.verified;\n\n    if (!voting) {\n      if (\n        !isNilOrError(authUser) &&\n        (votingEnabled || (cancellingEnabled && isTryingToUndoVote))\n      ) {\n        try {\n          this.voting$.next(voteMode);\n\n          const refetchIdeas =\n            participationContext?.attributes?.voting_method === 'limited';\n\n          // Change vote (up -> down or down -> up)\n          if (myVoteId && myVoteMode && myVoteMode !== voteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up'\n                  ? state.upvotesCount + 1\n                  : state.upvotesCount - 1,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount + 1\n                  : state.downvotesCount - 1,\n              myVoteMode: voteMode,\n            }));\n            await deleteVote(ideaId, myVoteId, refetchIdeas);\n            await addVote(\n              ideaId,\n              { user_id: authUser.data.id, mode: voteMode },\n              refetchIdeas\n            );\n          }\n\n          // Cancel vote\n          if (myVoteId && myVoteMode && myVoteMode === voteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up' ? state.upvotesCount - 1 : state.upvotesCount,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount - 1\n                  : state.downvotesCount,\n              myVoteMode: null,\n            }));\n            await deleteVote(ideaId, myVoteId, refetchIdeas);\n          }\n\n          // Vote\n          if (!myVoteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up' ? state.upvotesCount + 1 : state.upvotesCount,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount + 1\n                  : state.downvotesCount,\n              myVoteMode: voteMode,\n            }));\n            await addVote(\n              ideaId,\n              { user_id: authUser.data.id, mode: voteMode },\n              refetchIdeas\n            );\n          }\n\n          await ideaByIdStream(ideaId).fetch();\n          this.voting$.next(null);\n\n          return 'success';\n        } catch (error) {\n          this.voting$.next(null);\n          await ideaByIdStream(ideaId).fetch();\n          throw 'error';\n        }\n      } else if (\n        isSignedIn &&\n        !isVerified &&\n        votingDisabledReason === 'not_verified'\n      ) {\n        openVerificationModal();\n      } else if (\n        !isSignedIn &&\n        (votingEnabled ||\n          votingDisabledReason === 'not_verified' ||\n          votingDisabledReason === 'not_signed_in' ||\n          votingDisabledReason === 'not_permitted')\n      ) {\n        openSignUpInModal({\n          verification: votingDisabledReason === 'not_verified',\n          verificationContext:\n            votingDisabledReason === 'not_verified' &&\n            participationContextId &&\n            participationContextType\n              ? {\n                  action: 'voting_idea',\n                  id: participationContextId,\n                  type: participationContextType,\n                }\n              : undefined,\n          action: () => this.vote(voteMode),\n        });\n      } else if (votingDisabledReason) {\n        disabledVoteClick?.(votingDisabledReason);\n      }\n    }\n\n    return;\n  };\n\n  setContainerRef = (element: HTMLDivElement) => {\n    this.props?.setRef?.(element);\n  };\n\n  setUpvoteRef = (element: HTMLButtonElement) => {\n    this.upvoteElement = element;\n  };\n\n  setDownvoteRef = (element: HTMLButtonElement) => {\n    this.downvoteElement = element;\n  };\n\n  removeFocus = (event: React.MouseEvent) => {\n    event.preventDefault();\n  };\n\n  render() {\n    const {\n      size,\n      className,\n      intl: { formatMessage },\n      ariaHidden,\n      styleType,\n    } = this.props;\n    const {\n      idea,\n      authUser,\n      showVoteControl,\n      myVoteMode,\n      votingAnimation,\n      upvotesCount,\n      downvotesCount,\n    } = this.state;\n    const votingDescriptor =\n      idea?.data.attributes.action_descriptor.voting_idea;\n    const votingEnabled = votingDescriptor?.enabled;\n    const cancellingEnabled = votingDescriptor?.cancelling_enabled;\n    const votingDisabledReason = votingDescriptor?.disabled_reason;\n    const isSignedIn = !isNilOrError(authUser);\n    const isVerified =\n      !isNilOrError(authUser) && authUser.data.attributes.verified;\n    const upvotingEnabled =\n      (myVoteMode !== 'up' && votingEnabled) ||\n      (myVoteMode === 'up' && cancellingEnabled) ||\n      (!isVerified && votingDisabledReason === 'not_verified') ||\n      (!isSignedIn && votingDisabledReason === 'not_signed_in');\n    const downvotingEnabled =\n      (myVoteMode !== 'down' && votingEnabled) ||\n      (myVoteMode === 'down' && cancellingEnabled) ||\n      (!isVerified && votingDisabledReason === 'not_verified') ||\n      (!isSignedIn && votingDisabledReason === 'not_signed_in');\n    // if a project is inactive (archived), downvoting_enabled is\n    // null, hence the boolean check\n    const showDownvote =\n      typeof votingDescriptor?.downvoting_enabled === 'boolean'\n        ? votingDescriptor?.downvoting_enabled\n        : true;\n\n    if (!showVoteControl) return null;\n\n    const screenreaderContent = (\n      <>\n        <ScreenReaderOnly>\n          <FormattedMessage\n            {...messages.a11y_upvotesDownvotes}\n            values={{ upvotesCount, downvotesCount }}\n          />\n        </ScreenReaderOnly>\n        <LiveMessage\n          message={formatMessage(messages.a11y_upvotesDownvotes, {\n            upvotesCount,\n            downvotesCount,\n          })}\n          aria-live=\"polite\"\n        />\n      </>\n    );\n\n    return (\n      <>\n        {screenreaderContent}\n        <Container\n          className={[\n            className,\n            'e2e-vote-controls',\n            myVoteMode === null ? 'neutral' : myVoteMode,\n          ]\n            .filter((item) => item)\n            .join(' ')}\n          aria-hidden={ariaHidden}\n          ref={this.setContainerRef}\n        >\n          <Upvote\n            active={myVoteMode === 'up'}\n            enabled={upvotingEnabled}\n            onMouseDown={this.removeFocus}\n            onClick={this.onClickUpvote}\n            ref={this.setUpvoteRef}\n            className={[\n              'e2e-ideacard-upvote-button',\n              votingAnimation === 'up' ? 'voteClick' : 'upvote',\n              upvotingEnabled ? 'enabled' : 'disabled',\n              myVoteMode === 'up' ? 'active' : '',\n            ].join(' ')}\n            tabIndex={ariaHidden ? -1 : 0}\n          >\n            <VoteIconContainer\n              styleType={styleType}\n              size={size}\n              votingEnabled={upvotingEnabled}\n            >\n              <VoteIcon name=\"upvote\" size={size} enabled={upvotingEnabled} />\n              <ScreenReaderOnly>\n                <FormattedMessage {...messages.upvote} />\n              </ScreenReaderOnly>\n            </VoteIconContainer>\n            <VoteCount\n              aria-hidden\n              className={[votingEnabled ? 'enabled' : ''].join(' ')}\n            >\n              {upvotesCount}\n            </VoteCount>\n          </Upvote>\n\n          {showDownvote && (\n            <Downvote\n              active={myVoteMode === 'down'}\n              enabled={downvotingEnabled}\n              onMouseDown={this.removeFocus}\n              onClick={this.onClickDownvote}\n              ref={this.setDownvoteRef}\n              className={[\n                'e2e-ideacard-downvote-button',\n                votingAnimation === 'down' ? 'voteClick' : 'downvote',\n                downvotingEnabled ? 'enabled' : 'disabled',\n              ].join(' ')}\n              tabIndex={ariaHidden ? -1 : 0}\n            >\n              <VoteIconContainer\n                styleType={styleType}\n                size={size}\n                votingEnabled={downvotingEnabled}\n              >\n                <VoteIcon\n                  name=\"downvote\"\n                  size={size}\n                  enabled={downvotingEnabled}\n                />\n                <ScreenReaderOnly>\n                  <FormattedMessage {...messages.downvote} />\n                </ScreenReaderOnly>\n              </VoteIconContainer>\n              <VoteCount aria-hidden className={votingEnabled ? 'enabled' : ''}>\n                {downvotesCount}\n              </VoteCount>\n            </Downvote>\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default withRouter<Props>(injectIntl(VoteControl));\n","import React from 'react';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\n\n// hooks\nimport useIdeaStatus from 'hooks/useIdeaStatus';\n\n// components\nimport StatusBadge from 'components/StatusBadge';\n\n// i18n\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface Props {\n  statusId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst Status = ({ statusId, compact, className }: Props) => {\n  const ideaStatus = useIdeaStatus({ statusId });\n\n  if (!isNilOrError(ideaStatus)) {\n    return (\n      <Item className={className || ''} compact={compact}>\n        <Header>\n          <FormattedMessage {...messages.currentStatus} />\n        </Header>\n        <StatusBadge id=\"e2e-idea-status-badge\" statusId={statusId} />\n      </Item>\n    );\n  }\n\n  return null;\n};\n\nexport default Status;\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { ideaByIdStream } from 'services/ideas';\nimport { ImageSizes } from 'typings';\n\nexport interface IIdeaImageData {\n  id: string;\n  type: string;\n  attributes: {\n    versions: ImageSizes;\n    ordering: number;\n    created_at: string;\n    updated_at: string;\n  };\n}\n\nexport interface IIdeaImage {\n  data: IIdeaImageData;\n}\n\nexport interface IIdeaImages {\n  data: IIdeaImageData[];\n}\n\nexport function ideaImageStream(ideaId: string, imageId: string) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images/${imageId}`;\n  return streams.get<IIdeaImage>({ apiEndpoint });\n}\n\nexport function ideaImagesStream(\n  ideaId: string,\n  streamParams: IStreamParams | null = null\n) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images`;\n  return streams.get<IIdeaImages>({ apiEndpoint, ...streamParams });\n}\n\nexport function deleteIdeaImage(ideaId: string, imageId: string) {\n  return streams.delete(\n    `${API_PATH}/ideas/${ideaId}/images/${imageId}`,\n    imageId\n  );\n}\n\nexport async function addIdeaImage(\n  ideaId: string,\n  base64: string,\n  ordering: number | null = null\n) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images`;\n  const bodyData = {\n    image: {\n      ordering,\n      image: base64,\n    },\n  };\n\n  const ideaImage = await streams.add<IIdeaImage>(apiEndpoint, bodyData);\n  await ideaByIdStream(ideaId).fetch();\n  return ideaImage;\n}\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { Subscription, BehaviorSubject, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  IInitiativeData,\n  initiativeByIdStream,\n  initiativeBySlugStream,\n} from 'services/initiatives';\n\ninterface InputProps {\n  id?: string | null;\n  slug?: string | null;\n  resetOnChange?: boolean;\n}\n\ntype children = (renderProps: GetInitiativeChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  initiative: IInitiativeData | undefined | null | Error;\n}\n\nexport type GetInitiativeChildProps =\n  | IInitiativeData\n  | undefined\n  | null\n  | Error;\n\nexport default class GetInitiative extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      initiative: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id, slug, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id, slug });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(() => resetOnChange && this.setState({ initiative: undefined })),\n          switchMap(({ id, slug }) => {\n            if (isString(id)) {\n              return initiativeByIdStream(id).observable;\n            } else if (isString(slug)) {\n              return initiativeBySlugStream(slug).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((initiative) => {\n          this.setState({\n            initiative: !isNilOrError(initiative)\n              ? initiative.data\n              : initiative,\n          });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id, slug } = this.props;\n    this.inputProps$.next({ id, slug });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiative } = this.state;\n    return (children as children)(initiative);\n  }\n}\n","import React, { PureComponent, lazy, Suspense } from 'react';\nimport { isUndefined, isString, includes } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\n\n// services\nimport { getInputTerm } from 'services/participationContexts';\nimport { getLatestRelevantPhase } from 'services/phases';\n\n// analytics\nimport { trackEvent } from 'utils/analytics';\nimport tracks from './tracks';\n\n// router\nimport { withRouter, WithRouterProps } from 'react-router';\n\n// components\nimport IdeaSharingButton from './Buttons/IdeaSharingButton';\nimport IdeaMeta from './IdeaMeta';\nimport Title from 'components/PostShowComponents/Title';\nimport IdeaProposedBudget from './IdeaProposedBudget';\nimport Body from 'components/PostShowComponents/Body';\nimport Image from 'components/PostShowComponents/Image';\nimport OfficialFeedback from 'components/PostShowComponents/OfficialFeedback';\nimport Modal from 'components/UI/Modal';\nimport AssignBudgetControl from 'components/AssignBudgetControl';\nimport SharingModalContent from 'components/PostShowComponents/SharingModalContent';\nimport FeatureFlag from 'components/FeatureFlag';\nimport IdeaMoreActions from './IdeaMoreActions';\nimport { Spinner } from 'cl2-component-library';\nimport GoBackButton from './GoBackButton';\nconst LazyComments = lazy(() =>\n  import('components/PostShowComponents/Comments')\n);\nimport LoadingComments from 'components/PostShowComponents/Comments/LoadingComments';\nimport MetaInformation from './MetaInformation';\nimport MobileSharingButtonComponent from './Buttons/MobileSharingButtonComponent';\nimport RightColumnDesktop from './RightColumnDesktop';\n\n// utils\nimport isFieldEnabled from './isFieldEnabled';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetIdeaImages, {\n  GetIdeaImagesChildProps,\n} from 'resources/GetIdeaImages';\nimport GetProject, { GetProjectChildProps } from 'resources/GetProject';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\nimport GetPhases, { GetPhasesChildProps } from 'resources/GetPhases';\nimport GetWindowSize, {\n  GetWindowSizeChildProps,\n} from 'resources/GetWindowSize';\nimport GetOfficialFeedbacks, {\n  GetOfficialFeedbacksChildProps,\n} from 'resources/GetOfficialFeedbacks';\nimport GetPermission, {\n  GetPermissionChildProps,\n} from 'resources/GetPermission';\nimport GetIdeaCustomFieldsSchemas, {\n  GetIdeaCustomFieldsSchemasChildProps,\n} from 'resources/GetIdeaCustomFieldsSchemas';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetComments, { GetCommentsChildProps } from 'resources/GetComments';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport messages from './messages';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport { getInputTermMessage } from 'utils/i18n';\n\n// animations\nimport CSSTransition from 'react-transition-group/CSSTransition';\n\n// style\nimport styled from 'styled-components';\nimport { media, viewportWidths, isRtl } from 'utils/styleUtils';\nimport { columnsGapDesktop, pageContentMaxWidth } from './styleConstants';\nimport Outlet from 'components/Outlet';\n\nconst contentFadeInDuration = 250;\nconst contentFadeInEasing = 'cubic-bezier(0.19, 1, 0.22, 1)';\nconst contentFadeInDelay = 150;\n\nconst Container = styled.main`\n  width: 100%;\n  max-width: ${pageContentMaxWidth}px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  margin-left: auto;\n  margin-right: auto;\n  background: #fff;\n\n  &.loading {\n    flex: 1;\n    justify-content: center;\n  }\n\n  &.loaded {\n    opacity: 0;\n\n    &.content-enter {\n      opacity: 0;\n\n      &.content-enter-active {\n        opacity: 1;\n        transition: opacity ${contentFadeInDuration}ms ${contentFadeInEasing}\n          ${contentFadeInDelay}ms;\n      }\n    }\n\n    &.content-enter-done {\n      opacity: 1;\n    }\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n`;\n\nconst LeftColumn = styled.div`\n  flex: 1 1 100%;\n`;\n\nconst StyledRightColumnDesktop = styled(RightColumnDesktop)`\n  margin-left: ${columnsGapDesktop}px;\n`;\n\nconst IdeaHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: -5px;\n  margin-bottom: 25px;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  ${media.smallerThanMaxTablet`\n    margin-top: 0px;\n  `}\n`;\n\nconst MobileIdeaMoreActions = styled(IdeaMoreActions)`\n  margin-left: 30px;\n`;\n\nconst TopBar = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledGoBackButton = styled(GoBackButton)`\n  margin-bottom: 40px;\n`;\n\nconst BodySectionTitle = styled.h2`\n  font-size: ${(props) => props.theme.fontSizes.large}px;\n  font-weight: 500;\n  line-height: 28px;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 15px;\n`;\n\nconst StyledBody = styled(Body)`\n  margin-bottom: 40px;\n`;\n\nconst StyledIdeaProposedBudget = styled(IdeaProposedBudget)`\n  margin-bottom: 20px;\n`;\n\nconst MobileMetaInformation = styled(MetaInformation)`\n  margin-bottom: 30px;\n`;\n\nconst StyledAssignBudgetControl = styled(AssignBudgetControl)`\n  margin-top: 30px;\n  margin-bottom: 30px;\n`;\n\nconst MobileIdeaSharingButton = styled(IdeaSharingButton)``;\n\nconst StyledOfficialFeedback = styled(OfficialFeedback)`\n  margin-top: 80px;\n  margin-bottom: 80px;\n`;\n\nconst Comments = styled.div`\n  margin-bottom: 100px;\n`;\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n  locale: GetLocaleChildProps;\n  authUser: GetAuthUserChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n  ideaImages: GetIdeaImagesChildProps;\n  windowSize: GetWindowSizeChildProps;\n  officialFeedbacks: GetOfficialFeedbacksChildProps;\n  postOfficialFeedbackPermission: GetPermissionChildProps;\n  ideaCustomFieldsSchemas: GetIdeaCustomFieldsSchemasChildProps;\n  comments: GetCommentsChildProps;\n}\n\ninterface InputProps {\n  ideaId: string;\n  projectId: string;\n  insideModal: boolean;\n  setRef?: (element: HTMLDivElement) => void;\n  compact?: boolean;\n  className?: string;\n}\n\ninterface Props extends DataProps, InputProps {}\n\ninterface State {\n  loaded: boolean;\n  spamModalVisible: boolean;\n  ideaIdForSocialSharing: string | null;\n  translateButtonClicked: boolean;\n}\n\nexport class IdeasShow extends PureComponent<\n  Props & InjectedIntlProps & InjectedLocalized & WithRouterProps,\n  State\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      spamModalVisible: false,\n      ideaIdForSocialSharing: null,\n      translateButtonClicked: false,\n    };\n  }\n\n  componentDidMount() {\n    const newIdeaId = this.props.location.query?.['new_idea_id'];\n\n    this.setLoaded();\n\n    if (isString(newIdeaId)) {\n      setTimeout(() => {\n        this.setState({ ideaIdForSocialSharing: newIdeaId });\n      }, 1500);\n\n      window.history.replaceState(null, '', window.location.pathname);\n    }\n  }\n\n  componentDidUpdate() {\n    this.setLoaded();\n  }\n\n  setLoaded = () => {\n    const { loaded } = this.state;\n    const { idea, ideaImages, project, officialFeedbacks } = this.props;\n\n    if (\n      !loaded &&\n      !isNilOrError(idea) &&\n      !isUndefined(ideaImages) &&\n      !isNilOrError(project) &&\n      !isUndefined(officialFeedbacks.officialFeedbacksList)\n    ) {\n      this.setState({ loaded: true });\n    }\n  };\n\n  closeIdeaSocialSharingModal = () => {\n    this.setState({ ideaIdForSocialSharing: null });\n  };\n\n  onTranslateIdea = () => {\n    this.setState((prevState) => {\n      // analytics\n      if (prevState.translateButtonClicked === true) {\n        trackEvent(tracks.clickGoBackToOriginalIdeaCopyButton);\n      } else if (prevState.translateButtonClicked === false) {\n        trackEvent(tracks.clickTranslateIdeaButton);\n      }\n\n      return {\n        translateButtonClicked: !prevState.translateButtonClicked,\n      };\n    });\n  };\n\n  handleContainerRef = (element: HTMLDivElement) => {\n    this.props.setRef?.(element);\n  };\n\n  getLatestRelevantPhaseId = () => {\n    const { idea, phases } = this.props;\n\n    if (!isNilOrError(idea) && !isNilOrError(phases)) {\n      const ideaPhaseIds = idea?.relationships?.phases?.data?.map(\n        (item) => item.id\n      );\n      const ideaPhases = phases.filter((phase) =>\n        includes(ideaPhaseIds, phase.id)\n      );\n      return getLatestRelevantPhase(ideaPhases)?.id;\n    }\n\n    return undefined;\n  };\n\n  render() {\n    const {\n      locale,\n      idea,\n      localize,\n      ideaImages,\n      windowSize,\n      className,\n      postOfficialFeedbackPermission,\n      projectId,\n      ideaCustomFieldsSchemas,\n      insideModal,\n      project,\n      phases,\n      compact,\n    } = this.props;\n    const {\n      loaded,\n      ideaIdForSocialSharing,\n      translateButtonClicked,\n    } = this.state;\n    const { formatMessage } = this.props.intl;\n    let content: JSX.Element | null = null;\n\n    if (\n      !isNilOrError(project) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(ideaCustomFieldsSchemas) &&\n      loaded\n    ) {\n      // If the user deletes their profile, authorId can be null\n      const authorId = idea.relationships?.author?.data?.id || null;\n      const titleMultiloc = idea.attributes.title_multiloc;\n      const ideaTitle = localize(titleMultiloc);\n      const statusId = idea?.relationships?.idea_status?.data?.id;\n      const ideaImageLarge =\n        ideaImages?.[0]?.attributes?.versions?.large || null;\n      const ideaId = idea.id;\n      const proposedBudget = idea.attributes?.proposed_budget;\n      const ideaBody = localize(idea?.attributes?.body_multiloc);\n      const isCompactView =\n        compact === true ||\n        (windowSize ? windowSize <= viewportWidths.largeTablet : false);\n      const proposedBudgetEnabled = isFieldEnabled(\n        'proposed_budget',\n        ideaCustomFieldsSchemas,\n        locale\n      );\n\n      content = (\n        <>\n          <IdeaMeta ideaId={ideaId} />\n\n          {!isCompactView && (\n            <TopBar>\n              <StyledGoBackButton\n                projectId={projectId}\n                insideModal={insideModal}\n              />\n              <IdeaMoreActions idea={idea} projectId={projectId} />\n            </TopBar>\n          )}\n\n          <Content id=\"e2e-idea-show-page-content\">\n            <LeftColumn>\n              <IdeaHeader>\n                <Title\n                  postType=\"idea\"\n                  postId={ideaId}\n                  title={ideaTitle}\n                  locale={locale}\n                  translateButtonClicked={translateButtonClicked}\n                />\n                {isCompactView && (\n                  <MobileIdeaMoreActions idea={idea} projectId={projectId} />\n                )}\n              </IdeaHeader>\n\n              {ideaImageLarge && (\n                <Image src={ideaImageLarge} alt=\"\" id=\"e2e-idea-image\" />\n              )}\n\n              <Outlet\n                id=\"app.containers.IdeasShow.left\"\n                idea={idea}\n                locale={locale}\n                onClick={this.onTranslateIdea}\n                translateButtonClicked={translateButtonClicked}\n              />\n\n              {proposedBudgetEnabled && proposedBudget && (\n                <>\n                  <BodySectionTitle>\n                    <FormattedMessage {...messages.proposedBudgetTitle} />\n                  </BodySectionTitle>\n                  <StyledIdeaProposedBudget proposedBudget={proposedBudget} />\n                  <BodySectionTitle>\n                    <FormattedMessage {...messages.bodyTitle} />\n                  </BodySectionTitle>\n                </>\n              )}\n\n              <StyledBody\n                postType=\"idea\"\n                postId={ideaId}\n                locale={locale}\n                body={ideaBody}\n                translateButtonClicked={translateButtonClicked}\n              />\n\n              {isCompactView && (\n                <StyledAssignBudgetControl\n                  view=\"ideaPage\"\n                  ideaId={ideaId}\n                  projectId={projectId}\n                />\n              )}\n\n              {isCompactView && (\n                <MobileMetaInformation\n                  ideaId={ideaId}\n                  projectId={projectId}\n                  statusId={statusId}\n                  authorId={authorId}\n                  compact={isCompactView}\n                />\n              )}\n\n              {isCompactView && (\n                <MobileIdeaSharingButton\n                  ideaId={ideaId}\n                  buttonComponent={<MobileSharingButtonComponent />}\n                />\n              )}\n\n              <StyledOfficialFeedback\n                postId={ideaId}\n                postType=\"idea\"\n                permissionToPost={postOfficialFeedbackPermission}\n              />\n\n              <Comments>\n                <Suspense fallback={<LoadingComments />}>\n                  <LazyComments postId={ideaId} postType=\"idea\" />\n                </Suspense>\n              </Comments>\n            </LeftColumn>\n\n            {!isCompactView && projectId && (\n              <StyledRightColumnDesktop\n                ideaId={ideaId}\n                projectId={projectId}\n                statusId={statusId}\n                authorId={authorId}\n                insideModal={insideModal}\n              />\n            )}\n          </Content>\n        </>\n      );\n    }\n\n    if (!isNilOrError(project)) {\n      const inputTerm = getInputTerm(\n        project.attributes.process_type,\n        project,\n        phases\n      );\n\n      return (\n        <>\n          {!loaded && (\n            <Container className={`loading ${className || ''}`}>\n              <Spinner />\n            </Container>\n          )}\n          <CSSTransition\n            classNames=\"content\"\n            in={loaded}\n            timeout={{\n              enter: contentFadeInDuration + contentFadeInDelay,\n              exit: 0,\n            }}\n            enter={true}\n            exit={false}\n          >\n            <Container\n              id=\"e2e-idea-show\"\n              className={`loaded ${className || ''}`}\n              ref={this.handleContainerRef}\n            >\n              {content}\n            </Container>\n          </CSSTransition>\n\n          <FeatureFlag name=\"ideaflow_social_sharing\">\n            <Modal\n              opened={!!ideaIdForSocialSharing}\n              close={this.closeIdeaSocialSharingModal}\n              hasSkipButton={true}\n              skipText={<FormattedMessage {...messages.skipSharing} />}\n            >\n              {ideaIdForSocialSharing && (\n                <SharingModalContent\n                  postType=\"idea\"\n                  postId={ideaIdForSocialSharing}\n                  title={formatMessage(\n                    getInputTermMessage(inputTerm, {\n                      idea: messages.sharingModalTitle,\n                      option: messages.optionSharingModalTitle,\n                      project: messages.projectSharingModalTitle,\n                      question: messages.questionSharingModalTitle,\n                      issue: messages.issueSharingModalTitle,\n                      contribution: messages.contributionSharingModalTitle,\n                    })\n                  )}\n                  subtitle={formatMessage(messages.sharingModalSubtitle)}\n                />\n              )}\n            </Modal>\n          </FeatureFlag>\n        </>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst IdeasShowWithHOCs = injectLocalize<Props>(\n  injectIntl(withRouter(IdeasShow))\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  authUser: <GetAuthUser />,\n  windowSize: <GetWindowSize />,\n  idea: ({ ideaId, render }) => <GetIdea ideaId={ideaId}>{render}</GetIdea>,\n  ideaImages: ({ ideaId, render }) => (\n    <GetIdeaImages ideaId={ideaId}>{render}</GetIdeaImages>\n  ),\n  project: ({ projectId, render }) => (\n    <GetProject projectId={projectId}>{render}</GetProject>\n  ),\n  phases: ({ projectId, render }) => (\n    <GetPhases projectId={projectId}>{render}</GetPhases>\n  ),\n  officialFeedbacks: ({ ideaId, render }) => (\n    <GetOfficialFeedbacks postId={ideaId} postType=\"idea\">\n      {render}\n    </GetOfficialFeedbacks>\n  ),\n  postOfficialFeedbackPermission: ({ project, render }) => (\n    <GetPermission\n      item={!isNilOrError(project) ? project : null}\n      action=\"moderate\"\n    >\n      {render}\n    </GetPermission>\n  ),\n  ideaCustomFieldsSchemas: ({ projectId, render }) => (\n    <GetIdeaCustomFieldsSchemas projectId={projectId}>\n      {render}\n    </GetIdeaCustomFieldsSchemas>\n  ),\n  comments: ({ ideaId, render }) => (\n    <GetComments postId={ideaId} postType=\"idea\">\n      {render}\n    </GetComments>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <IdeasShowWithHOCs {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport SharingDropdownButton from 'components/Sharing/SharingDropdownButton';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { getInputTerm } from 'services/participationContexts';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\nimport { getInputTermMessage } from 'utils/i18n';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\nimport useLocalize from 'hooks/useLocalize';\nimport useAuthUser from 'hooks/useAuthUser';\nimport useProject from 'hooks/useProject';\nimport usePhases from 'hooks/usePhases';\n\ninterface Props {\n  className?: string;\n  ideaId: string;\n  buttonComponent: JSX.Element;\n}\n\nconst Component = ({\n  className,\n  ideaId,\n  buttonComponent,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  const idea = useIdea({ ideaId });\n  const projectId = !isNilOrError(idea)\n    ? idea.relationships.project.data.id\n    : null;\n  const project = useProject({ projectId });\n  const phases = usePhases(projectId);\n  const authUser = useAuthUser();\n  const localize = useLocalize();\n\n  if (!isNilOrError(idea) && !isNilOrError(project)) {\n    const postUrl = location.href;\n    const titleMultiloc = idea.attributes.title_multiloc;\n    const postTitle = localize(titleMultiloc);\n    const inputTerm = getInputTerm(\n      project.attributes.process_type,\n      project,\n      phases\n    );\n\n    const utmParams = !isNilOrError(authUser)\n      ? {\n          source: 'share_idea',\n          campaign: 'share_content',\n          content: authUser.id,\n        }\n      : {\n          source: 'share_idea',\n          campaign: 'share_content',\n        };\n\n    return (\n      <SharingDropdownButton\n        className={className}\n        url={postUrl}\n        whatsAppMessage={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaWhatsAppMessage,\n            option: messages.optionWhatsAppMessage,\n            project: messages.projectWhatsAppMessage,\n            question: messages.questionWhatsAppMessage,\n            issue: messages.issueWhatsAppMessage,\n            contribution: messages.contributionWhatsAppMessage,\n          }),\n          {\n            postTitle,\n          }\n        )}\n        twitterMessage={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaTwitterMessage,\n            option: messages.optionTwitterMessage,\n            project: messages.projectTwitterMessage,\n            question: messages.questionTwitterMessage,\n            issue: messages.issueTwitterMessage,\n            contribution: messages.contributionTwitterMessage,\n          }),\n          {\n            postTitle,\n          }\n        )}\n        emailSubject={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaEmailSharingSubject,\n            option: messages.optionEmailSharingSubject,\n            project: messages.projectEmailSharingSubject,\n            question: messages.questionEmailSharingSubject,\n            issue: messages.issueEmailSharingSubject,\n            contribution: messages.contributionEmailSharingSubject,\n          }),\n          {\n            ideaTitle: postTitle,\n          }\n        )}\n        emailBody={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaEmailSharingBody,\n            option: messages.optionEmailSharingBody,\n            project: messages.projectEmailSharingBody,\n            question: messages.questionEmailSharingBody,\n            issue: messages.issueEmailSharingBody,\n            contribution: messages.contributionEmailSharingBody,\n          }),\n          {\n            ideaUrl: postUrl,\n            ideaTitle: postTitle,\n          }\n        )}\n        utmParams={utmParams}\n        buttonComponent={buttonComponent}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport default injectIntl(Component);\n","import React from 'react';\n\n// components\nimport MetaInformation from '../MetaInformation';\nimport Voting from 'containers/IdeasShow/CTABox/VotingCTABox/Voting';\nimport Buttons from 'containers/IdeasShow/CTABox/Buttons';\nimport AssignBudgetControl from 'components/AssignBudgetControl';\n\n// styling\nimport styled from 'styled-components';\nimport { rightColumnWidthDesktop } from '../styleConstants';\nimport { colors } from 'utils/styleUtils';\n\nconst Container = styled.div<{ insideModal: boolean }>`\n  flex: 0 0 ${rightColumnWidthDesktop}px;\n  width: ${rightColumnWidthDesktop}px;\n  position: sticky;\n  top: ${(props) => (props.insideModal ? '30px' : '110px')};\n  align-self: flex-start;\n`;\n\nconst InnerContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Box = styled.div`\n  padding: 20px;\n  border-radius: ${(props) => props.theme.borderRadius};\n  background: ${colors.backgroundLightGrey};\n  margin-bottom: 30px;\n`;\n\nconst StyledVoting = styled(Voting)`\n  padding-bottom: 23px;\n  margin-bottom: 23px;\n`;\n\nconst StyledAssignBudgetControl = styled(AssignBudgetControl)`\n  padding-bottom: 23px;\n  margin-bottom: 23px;\n  border-bottom: solid 1px #ccc;\n`;\n\nconst StyledMetaInformation = styled(MetaInformation)`\n  margin-bottom: 40px;\n`;\n\ninterface Props {\n  ideaId: string;\n  projectId: string;\n  statusId: string;\n  authorId: string | null;\n  insideModal: boolean;\n  className?: string;\n}\n\nconst RightColumnDesktop = ({\n  ideaId,\n  projectId,\n  statusId,\n  authorId,\n  insideModal,\n  className,\n}: Props) => {\n  return (\n    <Container insideModal={insideModal} className={className || ''}>\n      <InnerContainer>\n        <Box>\n          <StyledVoting ideaId={ideaId} projectId={projectId} />\n          <StyledAssignBudgetControl\n            view=\"ideaPage\"\n            ideaId={ideaId}\n            projectId={projectId}\n          />\n          <Buttons ideaId={ideaId} />\n        </Box>\n        <StyledMetaInformation\n          ideaId={ideaId}\n          projectId={projectId}\n          statusId={statusId}\n          authorId={authorId}\n        />\n      </InnerContainer>\n    </Container>\n  );\n};\n\nexport default RightColumnDesktop;\n","import React, { memo } from 'react';\nimport FormattedBudget from 'utils/currency/FormattedBudget';\n\n// styling\nimport styled from 'styled-components';\nimport { media } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  color: ${(props) => props.theme.colorText};\n  font-size: ${(props) => props.theme.fontSizes.large}px;\n  line-height: 29px; // same line-height as Body's content\n  font-weight: 300;\n\n  ${media.smallerThanMinTablet`\n    font-size: ${(props) => props.theme.fontSizes.base}px;\n  `}\n`;\n\ninterface Props {\n  className?: string;\n  proposedBudget: number;\n}\n\nconst IdeaProposedBudget = memo<Props>(({ className, proposedBudget }) => {\n  return (\n    <Container className={className}>\n      <FormattedBudget value={proposedBudget} />\n    </Container>\n  );\n});\n\nexport default IdeaProposedBudget;\n","import React, { memo, useCallback } from 'react';\nimport IdeaCTAButton from './IdeaCTAButton';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\ninterface Props {\n  className?: string;\n}\n\nconst GoToCommentsButton = memo<Props & InjectedIntlProps>(\n  ({ className, intl: { formatMessage } }) => {\n    const onClick = useCallback(() => {\n      const commentInputElementAnchor = document.getElementById(\n        'submit-comment-anchor'\n      );\n      const commentInputElement = document.getElementById('submit-comment');\n\n      if (commentInputElementAnchor && commentInputElement) {\n        commentInputElement.focus({ preventScroll: true });\n        setTimeout(() => {\n          commentInputElementAnchor.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start',\n          });\n        }, 200);\n      }\n    }, []);\n\n    return (\n      <IdeaCTAButton\n        onClick={onClick}\n        className={className}\n        buttonText={formatMessage(messages.commentCTA)}\n        iconName=\"comments\"\n      />\n    );\n  }\n);\n\nexport default injectIntl(GoToCommentsButton);\n","import React from 'react';\nimport Button from 'components/UI/Button';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\ninterface Props {\n  onClick?: () => void;\n  ariaExpanded?: boolean;\n}\n\nconst MobileSharingButtonComponent = ({\n  onClick,\n  ariaExpanded,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  return (\n    <Button\n      buttonStyle=\"white\"\n      borderColor=\"#ccc\"\n      icon=\"share-arrow\"\n      onClick={onClick}\n      iconAriaHidden={true}\n      ariaExpanded={ariaExpanded}\n    >\n      {formatMessage(messages.share)}\n    </Button>\n  );\n};\n\nexport default injectIntl(MobileSharingButtonComponent);\n","import React, {\n  memo,\n  useMemo,\n  useState,\n  lazy,\n  Suspense,\n  useCallback,\n} from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Outlet from 'components/Outlet';\nconst LeafletMap = lazy(() => import('components/UI/LeafletMap'));\n\n// hooks\nimport useAppConfiguration from 'hooks/useAppConfiguration';\n\n// utils\nimport {\n  getCenter,\n  getZoomLevel,\n  getTileProvider,\n  getTileOptions,\n} from 'utils/map';\nimport { ILeafletMapConfig } from 'components/UI/LeafletMap/useLeaflet';\n\n// styling\nimport styled from 'styled-components';\nimport { media, defaultOutline, defaultCardStyle } from 'utils/styleUtils';\n\n// typings\nimport { LatLngTuple, Map as ILeafletMap } from 'leaflet';\n\nexport interface Point extends GeoJSON.Point {\n  data?: any;\n  id: string;\n  title?: string;\n}\n\nconst Container = styled.div`\n  ${defaultCardStyle};\n  background: transparent;\n  border: solid 1px #ccc;\n`;\n\nconst MapWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  position: relative;\n`;\n\nconst BoxContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  position: absolute;\n  top: 0;\n  z-index: 1001;\n  background: #fff;\n  width: 100%;\n  height: 80%;\n  max-height: 550px;\n`;\n\nconst CloseButton = styled.button`\n  width: 28px;\n  height: 28px;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 2;\n  border-radius: 50%;\n  border: solid 1px transparent;\n  background: #fff;\n  transition: all 100ms ease-out;\n  outline: none !important;\n\n  &:hover {\n    background: #ececec;\n  }\n\n  &.focus-visible {\n    ${defaultOutline};\n  }\n\n  ${media.smallerThanMinTablet`\n    top: 4px;\n    right: 4px;\n  `}\n`;\n\nconst CloseIcon = styled(Icon)`\n  width: 12px;\n  height: 12px;\n  fill: #000;\n`;\n\nexport interface IMapConfigProps {\n  centerLatLng?: LatLngTuple;\n  points?: Point[];\n  zoomLevel?: number;\n  areas?: GeoJSON.Polygon[];\n  mapHeight?: string;\n  noMarkerClustering?: boolean;\n  zoomControlPosition?: 'topleft' | 'topright' | 'bottomleft' | 'bottomright';\n  layersControlPosition?: 'topleft' | 'topright' | 'bottomleft' | 'bottomright';\n}\n\nexport interface IMapProps {\n  onInit?: (map: ILeafletMap) => void;\n  onBoxClose?: (event: React.FormEvent) => void;\n  className?: string;\n  projectId?: string | null;\n  hideLegend?: boolean;\n  boxContent?: JSX.Element | null;\n}\n\nconst Map = memo<IMapProps & IMapConfigProps>(\n  ({\n    projectId,\n    centerLatLng,\n    zoomLevel,\n    mapHeight,\n    points,\n    noMarkerClustering,\n    zoomControlPosition,\n    layersControlPosition,\n    boxContent,\n    onInit,\n    onBoxClose,\n    className,\n    hideLegend,\n  }) => {\n    const appConfig = useAppConfiguration();\n\n    const [\n      additionalLeafletConfig,\n      setAdditionalLeafletConfig,\n    ] = useState<ILeafletMapConfig | null>(null);\n\n    const center = useMemo(() => {\n      return getCenter(centerLatLng, appConfig);\n    }, [centerLatLng, appConfig]);\n\n    const zoom = useMemo(() => {\n      return getZoomLevel(zoomLevel, appConfig);\n    }, [zoomLevel, appConfig]);\n\n    const tileProvider = useMemo(() => {\n      return getTileProvider(appConfig);\n    }, [appConfig]);\n\n    const tileOptions = useMemo(() => {\n      return getTileOptions();\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tileProvider]);\n\n    const leafletConfig = useMemo(() => {\n      return {\n        points,\n        noMarkerClustering,\n        zoom,\n        center,\n        tileProvider,\n        tileOptions,\n        zoomControlPosition,\n        layersControlPosition,\n        ...additionalLeafletConfig,\n      };\n    }, [\n      points,\n      noMarkerClustering,\n      zoom,\n      center,\n      tileProvider,\n      tileOptions,\n      zoomControlPosition,\n      layersControlPosition,\n      additionalLeafletConfig,\n    ]);\n\n    const handleLeafletConfigChange = useCallback(\n      (leafletConfig: ILeafletMapConfig) => {\n        setAdditionalLeafletConfig(leafletConfig);\n      },\n      []\n    );\n\n    const handleBoxOnClose = (event: React.FormEvent) => {\n      event.preventDefault();\n      onBoxClose?.(event);\n    };\n\n    const handleOnInit = (map: L.Map) => {\n      onInit?.(map);\n    };\n\n    return (\n      <Container className={className || ''}>\n        <MapWrapper>\n          {!isNilOrError(boxContent) && (\n            <BoxContainer>\n              <CloseButton onClick={handleBoxOnClose}>\n                <CloseIcon name=\"close\" />\n              </CloseButton>\n\n              {boxContent}\n            </BoxContainer>\n          )}\n\n          <Suspense fallback={false}>\n            <LeafletMap\n              id=\"mapid\"\n              className=\"e2e-leafletmap\"\n              mapHeight={mapHeight}\n              onInit={handleOnInit}\n              {...leafletConfig}\n            />\n          </Suspense>\n          <Outlet\n            id=\"app.components.Map.leafletConfig\"\n            projectId={projectId}\n            onLeafletConfigChange={handleLeafletConfigChange}\n            centerLatLng={centerLatLng}\n            zoomLevel={zoomLevel}\n            points={points}\n          />\n        </MapWrapper>\n\n        {!hideLegend && (\n          <Outlet id=\"app.components.Map.Legend\" projectId={projectId} />\n        )}\n      </Container>\n    );\n  }\n);\n\nexport default Map;\n","import React from 'react';\nimport IdeaCTAButton from './IdeaCTAButton';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\ninterface Props {\n  onClick?: () => void;\n  ariaExpanded?: boolean;\n}\n\nconst SharingButtonComponent = ({\n  intl: { formatMessage },\n  onClick,\n  ariaExpanded,\n}: Props & InjectedIntlProps) => {\n  return (\n    <IdeaCTAButton\n      iconName=\"share-arrow\"\n      buttonText={formatMessage(messages.share)}\n      onClick={onClick}\n      ariaExpanded={ariaExpanded}\n    />\n  );\n};\n\nexport default injectIntl(SharingButtonComponent);\n","import React, { memo, useState, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { darken } from 'polished';\nimport useIdea from 'hooks/useIdea';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { isNil } from 'lodash-es';\n\n// components\nimport { Icon, colors } from 'cl2-component-library';\nimport Modal from 'components/UI/Modal';\nimport Map, { Point } from 'components/Map';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\n\n// utils\nimport { getAddressOrFallbackDMS } from 'utils/map';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\n// styling\nimport { isRtl, fontSizes, media } from 'utils/styleUtils';\n\n// typings\nimport { LatLngTuple } from 'leaflet';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledIcon = styled(Icon)`\n  flex: 0 0 16px;\n  width: 16px;\n  fill: ${colors.label};\n  margin-right: 8px;\n\n  ${isRtl`\n    margin-right: 0;\n    margin-left: 8px;\n  `}\n`;\n\nconst OpenMapModalButton = styled.button`\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  line-height: 22px;\n  text-decoration: underline;\n  text-align: left;\n  margin: 0;\n  padding: 0;\n  border: none;\n  appearance: none;\n  cursor: pointer;\n\n  &:hover {\n    color: ${darken(0.2, colors.label)};\n  }\n`;\n\nconst Address = styled.div`\n  width: calc(100% - 35px);\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n`;\n\nconst MapContainer = styled.div`\n  padding: 30px;\n\n  ${media.smallerThanMinTablet`\n    padding: 20px;\n  `}\n`;\n\nexport interface Props {\n  projectId: string;\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst Location = memo<Props & InjectedIntlProps>(\n  ({ intl: { formatMessage }, projectId, ideaId, compact, className }) => {\n    const [isOpened, setIsOpened] = useState(false);\n    const idea = useIdea({ ideaId });\n\n    const point =\n      (!isNilOrError(idea) && idea.attributes?.location_point_geojson) || null;\n    const lat = point?.coordinates?.[1] || null;\n    const lng = point?.coordinates?.[0] || null;\n    const address = !isNilOrError(idea)\n      ? getAddressOrFallbackDMS(\n          idea.attributes.location_description,\n          idea.attributes.location_point_geojson\n        )\n      : null;\n\n    const points = useMemo(() => {\n      return point ? ([point] as Point[]) : undefined;\n    }, [point]);\n\n    const centerLatLng = useMemo(() => {\n      if (!isNil(lat) && !isNil(lng)) {\n        return [lat, lng] as LatLngTuple;\n      }\n      return;\n    }, [lat, lng]);\n\n    const closeModal = () => {\n      setIsOpened(false);\n    };\n\n    const openModal = () => {\n      setIsOpened(true);\n    };\n\n    if (address && points) {\n      return (\n        <Item className={className || ''} compact={compact}>\n          <Header>{formatMessage(messages.location)}</Header>\n          <Container>\n            <StyledIcon name=\"position\" ariaHidden />\n            <OpenMapModalButton id=\"e2e-map-popup\" onClick={openModal}>\n              {address}\n            </OpenMapModalButton>\n          </Container>\n          <Modal\n            opened={isOpened}\n            close={closeModal}\n            header={<Address>{address}</Address>}\n            width={1150}\n          >\n            <MapContainer>\n              <Map\n                projectId={projectId}\n                points={points}\n                centerLatLng={centerLatLng}\n                zoomLevel={15}\n              />\n            </MapContainer>\n          </Modal>\n        </Item>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(Location);\n","import React from 'react';\nimport tracks from '../tracks';\nimport { getUrlWithUtm, UtmParams, Medium } from '../utils';\n\n// style\nimport styled from 'styled-components';\nimport { fontSizes, colors, media } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Facebook from '../buttons/Facebook';\nimport Twitter from '../buttons/Twitter';\nimport Messenger from '../buttons/Messenger';\nimport WhatsApp from '../buttons/WhatsApp';\nimport Email from '../buttons/Email';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  .sharingButton {\n    display: flex;\n    align-items: center;\n    padding: 10px 12px;\n    border-radius: ${(props: any) => props.theme.borderRadius};\n    cursor: pointer;\n    transition: all 100ms ease-out;\n    text-align: left;\n    color: ${colors.label};\n    font-size: ${fontSizes.base}px;\n\n    &:hover {\n      background-color: ${darken(0.06, 'white')};\n    }\n\n    &.messenger {\n      ${media.biggerThanMaxTablet`\n        display: none;\n      `}\n    }\n  }\n`;\n\nconst FacebookIcon = styled(Icon)`\n  width: 22px;\n  height: 18px;\n  margin-right: 10px;\n  fill: #3c5a99;\n`;\n\nconst MessengerIcon = styled(Icon)`\n  width: 22px;\n  height: 18px;\n  margin-right: 10px;\n  fill: rgba(0, 120, 255, 1);\n`;\n\nconst WhatsAppIcon = styled(Icon)`\n  width: 22px;\n  height: 22px;\n  fill: #23b43a;\n  margin-right: 10px;\n`;\n\nconst TwitterIcon = styled(Icon)`\n  width: 22px;\n  height: 17px;\n  fill: #1da1f2;\n  margin-right: 10px;\n`;\n\nconst EmailIcon = styled(Icon)`\n  margin-right: 10px;\n  width: 22px;\n  height: 17px;\n  fill: ${colors.secondaryText};\n`;\n\ninterface Props {\n  className?: string;\n  url: string;\n  twitterMessage: string;\n  whatsAppMessage: string;\n  emailSubject: string;\n  emailBody: string;\n  utmParams: UtmParams;\n  id?: string;\n}\n\nconst SharingDropdownContent = ({\n  id,\n  url,\n  className,\n  utmParams,\n  emailBody,\n  emailSubject,\n  twitterMessage,\n  whatsAppMessage,\n}: Props) => {\n  const getUrl = (medium: Medium) => {\n    return getUrlWithUtm(medium, url, utmParams);\n  };\n\n  const handleClick = (medium: Medium) => () => {\n    trackEventByName(tracks.shareButtonClicked.name, { network: medium });\n  };\n\n  const facebook = (\n    <Facebook\n      url={getUrl('facebook')}\n      className=\"sharingButton facebook\"\n      onClick={handleClick('facebook')}\n    >\n      {/*\n        For all sharing components, both children are aria-hidden.\n        The reasons are that (1) there's an aria-label for the text in all the components themselves\n        so we don't need to rely on the person who uses the component to think of adding text.\n        and (2) the icon needs to be hidden by default.\n      */}\n      <FacebookIcon ariaHidden name=\"facebook\" />\n      <span aria-hidden>{'Facebook'}</span>\n    </Facebook>\n  );\n\n  const messenger = (\n    <Messenger\n      className=\"sharingButton messenger\"\n      onClick={handleClick('messenger')}\n      url={getUrl('messenger')}\n    >\n      <MessengerIcon ariaHidden name=\"messenger\" />\n      <span aria-hidden>{'Messenger'}</span>\n    </Messenger>\n  );\n\n  const whatsapp = (\n    <WhatsApp\n      className=\"sharingButton whatsapp\"\n      onClick={handleClick('whatsapp')}\n      url={getUrl('whatsapp')}\n      whatsAppMessage={whatsAppMessage}\n    >\n      <WhatsAppIcon ariaHidden name=\"whatsapp\" />\n      <span aria-hidden>{'WhatsApp'}</span>\n    </WhatsApp>\n  );\n\n  const twitter = (\n    <Twitter\n      twitterMessage={twitterMessage}\n      url={getUrl('twitter')}\n      className={'sharingButton twitter'}\n      onClick={handleClick('twitter')}\n    >\n      <TwitterIcon ariaHidden name=\"twitter\" />\n      <span aria-hidden>{'Twitter'}</span>\n    </Twitter>\n  );\n\n  const email = (\n    <Email\n      className=\"sharingButton email\"\n      onClick={handleClick('email')}\n      emailBody={emailBody}\n      emailSubject={emailSubject}\n    >\n      <EmailIcon ariaHidden name=\"email\" />\n      <span aria-hidden>{'Email'}</span>\n    </Email>\n  );\n\n  return (\n    <Container id={id || ''} className={className || ''}>\n      {facebook}\n      {messenger}\n      {whatsapp}\n      {twitter}\n      {email}\n    </Container>\n  );\n};\n\nexport default SharingDropdownContent;\n","import React, { memo, useState } from 'react';\nimport clHistory from 'utils/cl-router/history';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport HasPermission from 'components/HasPermission';\nimport MoreActionsMenu from 'components/UI/MoreActionsMenu';\nimport Modal from 'components/UI/Modal';\nimport SpamReportForm from 'containers/SpamReport';\n\n// hooks\nimport useAuthUser from 'hooks/useAuthUser';\nimport useProject from 'hooks/useProject';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport { InjectedIntlProps } from 'react-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\n\n// services\nimport { deleteIdea, IIdeaData } from 'services/ideas';\nimport { ProcessType } from 'services/projects';\n\n// styling\nimport styled from 'styled-components';\n\nconst Container = styled.div``;\n\nconst MoreActionsMenuWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\ninterface Props {\n  idea: IIdeaData;\n  className?: string;\n  projectId: string;\n}\n\nconst IdeaMoreActions = memo(\n  ({\n    idea,\n    className,\n    projectId,\n    intl: { formatMessage },\n  }: Props & InjectedIntlProps) => {\n    const [isSpamModalVisible, setIsSpamModalVisible] = useState<boolean>(\n      false\n    );\n    const authUser = useAuthUser();\n    const project = useProject({ projectId });\n\n    const openSpamModal = () => {\n      setIsSpamModalVisible(true);\n    };\n\n    const closeSpamModal = () => {\n      setIsSpamModalVisible(false);\n    };\n\n    const onEditIdea = () => {\n      clHistory.push(`/ideas/edit/${idea.id}`);\n    };\n\n    const onDeleteIdea = (ideaId: string, processType: ProcessType) => () => {\n      const deleteConfirmationMessage = {\n        continuous: messages.deleteInputConfirmation,\n        timeline: messages.deleteInputInTimelineConfirmation,\n      }[processType];\n\n      if (window.confirm(formatMessage(deleteConfirmationMessage))) {\n        deleteIdea(ideaId);\n        clHistory.goBack();\n      }\n    };\n\n    if (\n      !isNilOrError(authUser) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(project)\n    ) {\n      const ideaId = idea.id;\n      const processType = project.attributes.process_type;\n\n      return (\n        <Container className={className}>\n          <MoreActionsMenuWrapper>\n            <HasPermission item={idea} action=\"edit\" context={idea}>\n              <MoreActionsMenu\n                ariaLabel={<FormattedMessage {...messages.moreOptions} />}\n                id=\"e2e-idea-more-actions\"\n                actions={[\n                  {\n                    label: <FormattedMessage {...messages.reportAsSpam} />,\n                    handler: openSpamModal,\n                  },\n                  {\n                    label: <FormattedMessage {...messages.editPost} />,\n                    handler: onEditIdea,\n                  },\n                  {\n                    label: <FormattedMessage {...messages.deletePost} />,\n                    handler: onDeleteIdea(ideaId, processType),\n                  },\n                ]}\n              />\n              <HasPermission.No>\n                <MoreActionsMenu\n                  id=\"e2e-idea-more-actions\"\n                  actions={[\n                    {\n                      label: <FormattedMessage {...messages.reportAsSpam} />,\n                      handler: openSpamModal,\n                    },\n                  ]}\n                  ariaLabel={<FormattedMessage {...messages.moreOptions} />}\n                />\n              </HasPermission.No>\n            </HasPermission>\n          </MoreActionsMenuWrapper>\n          <Modal\n            opened={isSpamModalVisible}\n            close={closeSpamModal}\n            header={<FormattedMessage {...messages.reportAsSpamModalTitle} />}\n          >\n            <SpamReportForm resourceId={idea.id} resourceType=\"ideas\" />\n          </Modal>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(IdeaMoreActions);\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { IPhaseFileData } from 'services/phaseFiles';\nimport { IEventFileData } from 'services/eventFiles';\nimport { IIdeaFileData } from 'services/ideaFiles';\nimport { darken } from 'polished';\n\n// components\nimport { Icon, colors, media } from 'cl2-component-library';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst FileDownloadLink = styled.a`\n  color: ${colors.label};\n  display: inline-block;\n  margin-right: 10px;\n  hyphens: auto;\n  text-decoration: underline;\n\n  &:hover {\n    color: ${darken(0.2, colors.label)};\n    text-decoration: underline;\n  }\n\n  ${media.smallerThanMinTablet`\n    margin-right: 0;\n  `}\n`;\n\nconst PaperclipIcon = styled(Icon)`\n  width: 12px;\n  height: 20px;\n  fill: ${colors.label};\n  margin-right: 10px;\n`;\n\nexport interface Props {\n  className?: string;\n  file: IPhaseFileData | IIdeaFileData | IEventFileData;\n}\n\nconst Attachment = memo<Props>(({ className, file }) => {\n  return (\n    <Container className={className}>\n      <PaperclipIcon name=\"paperclip\" ariaHidden />\n      <FileDownloadLink\n        href={file.attributes.file.url}\n        download={file.attributes.name}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {file.attributes.name}\n      </FileDownloadLink>\n    </Container>\n  );\n});\n\nexport default Attachment;\n","import React, { memo, useCallback, MouseEvent } from 'react';\nimport clHistory from 'utils/cl-router/history';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\nimport useProject from 'hooks/useProject';\nimport useAuthUser from 'hooks/useAuthUser';\n\n// components\nimport VoteControl from 'components/VoteControl';\nimport { Icon } from 'cl2-component-library';\n\n// utils\nimport eventEmitter from 'utils/eventEmitter';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// styling\nimport styled from 'styled-components';\nimport { media, colors, fontSizes } from 'utils/styleUtils';\nimport { lighten } from 'polished';\n\n// typings\nimport { IdeaVotingDisabledReason } from 'services/ideas';\n\nconst Container = styled.div`\n  flex: 0 0 ${(props) => props.theme.mobileTopBarHeight}px;\n  height: ${(props) => props.theme.mobileTopBarHeight}px;\n  background-color: #fff;\n  border-bottom: solid 1px ${lighten(0.3, colors.label)};\n`;\n\nconst TopBarInner = styled.div`\n  height: 100%;\n  padding-left: 15px;\n  padding-right: 15px;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  ${media.biggerThanMinTablet`\n    padding-left: 30px;\n    padding-right: 30px;\n  `}\n`;\n\nconst Left = styled.div`\n  height: 48px;\n  align-items: center;\n  display: flex;\n`;\n\nconst Right = styled.div``;\n\nconst GoBackIcon = styled(Icon)`\n  height: 22px;\n  fill: ${colors.label};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: fill 100ms ease-out;\n`;\n\nconst GoBackButton = styled.button`\n  width: 45px;\n  height: 45px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  margin: 0;\n  margin-right: 6px;\n  margin-left: -2px;\n  cursor: pointer;\n  background: #fff;\n  border-radius: 50%;\n  transition: all 100ms ease-out;\n  border: solid 1px ${lighten(0.2, colors.label)};\n\n  &:hover {\n    border-color: #000;\n\n    ${GoBackIcon} {\n      fill: #000;\n    }\n  }\n`;\n\nconst GoBackLabel = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  transition: fill 100ms ease-out;\n\n  ${media.phone`\n    display: none;\n  `}\n`;\n\ninterface Props {\n  ideaId: string;\n  insideModal?: boolean;\n  goBackAction?: () => void;\n  className?: string;\n}\n\nconst IdeaShowPageTopBar = memo<Props>(\n  ({ ideaId, insideModal, goBackAction, className }) => {\n    const authUser = useAuthUser();\n    const idea = useIdea({ ideaId });\n    const project = useProject({\n      projectId: !isNilOrError(idea)\n        ? idea.relationships.project.data.id\n        : null,\n    });\n\n    const onGoBack = useCallback(\n      (event: MouseEvent<HTMLElement>) => {\n        event.preventDefault();\n\n        if (goBackAction) {\n          goBackAction?.();\n        } else if (insideModal) {\n          eventEmitter.emit('closeIdeaModal');\n        } else if (!isNilOrError(project)) {\n          clHistory.push(`/projects/${project.attributes.slug}`);\n        } else {\n          clHistory.push('/');\n        }\n      },\n      [insideModal, project, goBackAction]\n    );\n\n    const onDisabledVoteClick = useCallback(\n      (disabled_reason: IdeaVotingDisabledReason) => {\n        if (\n          !isNilOrError(authUser) &&\n          !isNilOrError(project) &&\n          disabled_reason === 'not_verified'\n        ) {\n          const pcType =\n            project.attributes.process_type === 'continuous'\n              ? 'project'\n              : 'phase';\n          const pcId =\n            project.relationships?.current_phase?.data?.id || project.id;\n\n          if (pcId && pcType) {\n            openVerificationModal({\n              context: {\n                action: 'voting_idea',\n                id: pcId,\n                type: pcType,\n              },\n            });\n          }\n        }\n      },\n      [authUser, project]\n    );\n\n    return (\n      <Container className={className || ''}>\n        <TopBarInner>\n          <Left>\n            <GoBackButton onClick={onGoBack}>\n              <GoBackIcon ariaHidden name=\"arrow-back\" />\n            </GoBackButton>\n            <GoBackLabel>\n              <FormattedMessage {...messages.goBack} />\n            </GoBackLabel>\n          </Left>\n          <Right>\n            <VoteControl\n              styleType=\"border\"\n              size=\"2\"\n              ideaId={ideaId}\n              disabledVoteClick={onDisabledVoteClick}\n            />\n          </Right>\n        </TopBarInner>\n      </Container>\n    );\n  }\n);\n\nexport default IdeaShowPageTopBar;\n","import { useState, useEffect } from 'react';\nimport {\n  ideaFormSchemaStream,\n  IIdeaFormSchemas,\n} from 'services/ideaCustomFieldsSchemas';\nimport { Observable, of } from 'rxjs';\n\ninterface Props {\n  projectId: string | null;\n}\n\nexport default function useIdeaCustomFieldsSchemas({ projectId }: Props) {\n  const [ideaCustomFieldsSchemas, setIdeaCustomFieldsSchemas] = useState<\n    IIdeaFormSchemas | undefined | null | Error\n  >(undefined);\n\n  useEffect(() => {\n    let observable: Observable<IIdeaFormSchemas | null> = of(null);\n\n    if (projectId) {\n      observable = ideaFormSchemaStream(projectId).observable;\n    }\n\n    const subscription = observable.subscribe((ideaCustomFieldsSchemas) => {\n      setIdeaCustomFieldsSchemas(ideaCustomFieldsSchemas);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [projectId]);\n\n  return ideaCustomFieldsSchemas;\n}\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Avatar from 'components/Avatar';\nimport UserName from 'components/UI/UserName';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\n\n// i18n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps, FormattedDate } from 'react-intl';\nimport messages from './messages';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\n\n// style\nimport styled from 'styled-components';\nimport { colors, fontSizes, isRtl } from 'utils/styleUtils';\n\nconst UserWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  margin-top: -4px;\n  margin-bottom: -6px;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledAvatar = styled(Avatar)`\n  margin-right: 5px;\n  margin-left: -4px;\n\n  ${isRtl`\n    margin-right: -4px;\n    margin-left: 5px;\n  `}\n`;\n\nexport interface Props {\n  authorId: string | null;\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst PostedBy = memo<Props & InjectedIntlProps>(\n  ({ authorId, ideaId, compact, className, intl: { formatMessage } }) => {\n    const idea = useIdea({ ideaId });\n\n    if (!isNilOrError(idea)) {\n      const ideaPublishedAtDate = idea.attributes.published_at;\n      const userName = (\n        <UserName\n          userId={authorId}\n          isLinkToProfile={true}\n          underline={true}\n          color={colors.label}\n          fontSize={fontSizes.small}\n        />\n      );\n      const date = (\n        <FormattedDate\n          value={ideaPublishedAtDate}\n          year=\"numeric\"\n          month=\"long\"\n          day=\"numeric\"\n        />\n      );\n\n      return (\n        <Item className={`first ${className || ''}`} compact={compact}>\n          <Header>{formatMessage(messages.postedBy)}</Header>\n          <UserWrapper className=\"e2e-idea-author\">\n            <StyledAvatar\n              userId={authorId}\n              size={30}\n              isLinkToProfile={!!authorId}\n            />\n            <FormattedMessage\n              {...messages.byUserOnDate}\n              values={{ userName, date }}\n            />\n          </UserWrapper>\n        </Item>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(PostedBy);\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\nimport PopContainer from 'components/UI/PopContainer';\nimport VoteControl from 'components/VoteControl';\nimport VotingDisabled from 'components/VoteControl/VotingDisabled';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\n\nconst Container = styled.div``;\n\nconst VoteControlWrapper = styled.div`\n  &.error {\n    display: none;\n  }\n`;\n\ninterface InputProps {\n  className?: string;\n  ideaId?: string;\n  projectId: string;\n}\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {\n  error: 'votingDisabled' | null;\n  isContainerVisible: boolean;\n}\n\nclass VoteWrapper extends PureComponent<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isContainerVisible: false,\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const { ideaId } = this.props;\n    const prevIdeaId = prevProps.ideaId;\n\n    if (ideaId !== prevIdeaId) {\n      this.setState({ isContainerVisible: false, error: null });\n    }\n  }\n\n  disabledVoteClick = () => {\n    this.setState({ error: 'votingDisabled' });\n  };\n\n  setVoteControlRef = () => {\n    // we check the ref returned by VoteControl to determine if the VoteControl component actually mounted\n    // If it didn't mount (because showVoteContrle === false), we also shouldn't mount the Container in this component\n    this.setState({ isContainerVisible: true });\n  };\n\n  render() {\n    const { className, ideaId, projectId, idea } = this.props;\n    const { isContainerVisible, error } = this.state;\n\n    const votingDescriptor = isNilOrError(idea)\n      ? null\n      : idea.attributes.action_descriptor.voting_idea;\n\n    if (!ideaId || !votingDescriptor) return null;\n\n    const voteControlComponent = (\n      <VoteControl\n        styleType=\"shadow\"\n        ideaId={ideaId}\n        disabledVoteClick={this.disabledVoteClick}\n        setRef={this.setVoteControlRef}\n        size=\"4\"\n      />\n    );\n\n    return !isContainerVisible ? (\n      voteControlComponent\n    ) : (\n      <Container className={className || ''}>\n        <VoteControlWrapper className={error ? 'error' : ''}>\n          {voteControlComponent}\n        </VoteControlWrapper>\n        {error === 'votingDisabled' && (\n          <PopContainer icon=\"lock-outlined\">\n            <VotingDisabled\n              votingDescriptor={votingDescriptor}\n              projectId={projectId}\n            />\n          </PopContainer>\n        )}\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  idea: ({ ideaId, render }) => <GetIdea ideaId={ideaId}>{render}</GetIdea>,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <VoteWrapper {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  sharingModalTitle: {\n    id: 'app.containers.IdeasShow.sharingModalTitle',\n    defaultMessage: 'Thanks for submitting your idea!',\n  },\n  optionSharingModalTitle: {\n    id: 'app.containers.IdeasShow.optionSharingModalTitle',\n    defaultMessage: 'Your option has been successfully posted!',\n  },\n  projectSharingModalTitle: {\n    id: 'app.containers.IdeasShow.projectSharingModalTitle',\n    defaultMessage: 'Thanks for submitting your project!',\n  },\n  questionSharingModalTitle: {\n    id: 'app.containers.IdeasShow.questionSharingModalTitle',\n    defaultMessage: 'Your question has been successfully posted!',\n  },\n  issueSharingModalTitle: {\n    id: 'app.containers.IdeasShow.issueSharingModalTitle',\n    defaultMessage: 'Thanks for submitting your issue!',\n  },\n  contributionSharingModalTitle: {\n    id: 'app.containers.IdeasShow.contributionSharingModalTitle',\n    defaultMessage: 'Thanks for submitting your contribution!',\n  },\n\n  sharingModalSubtitle: {\n    id: 'app.containers.IdeasShow.sharingModalSubtitle',\n    defaultMessage: 'Reach more people and make your voice heard.',\n  },\n  deletedUser: {\n    id: 'app.containers.IdeasShow.deletedUser',\n    defaultMessage: 'deleted user',\n  },\n  currentStatus: {\n    id: 'app.containers.IdeasShow.currentStatus',\n    defaultMessage: 'Current status',\n  },\n  moreOptions: {\n    id: 'app.components.IdeasShow.moreOptions',\n    defaultMessage: 'More options',\n  },\n  reportAsSpam: {\n    id: 'app.components.IdeasShow.reportAsSpam',\n    defaultMessage: 'Report as spam',\n  },\n  editPost: {\n    id: 'app.components.IdeasShow.editPost',\n    defaultMessage: 'Edit',\n  },\n  deletePost: {\n    id: 'app.components.IdeasShow.deletePost',\n    defaultMessage: 'Delete',\n  },\n  deleteInputConfirmation: {\n    id: 'app.components.IdeasShow.deleteInputConfirmation',\n    defaultMessage:\n      'Are you sure you want to delete this input? This action cannot be undone.',\n  },\n  deleteInputInTimelineConfirmation: {\n    id: 'app.components.IdeasShow.deleteInputInTimelineConfirmation',\n    defaultMessage:\n      'Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered.',\n  },\n  goBack: {\n    id: 'app.components.IdeasShow.goBack',\n    defaultMessage: 'Go back',\n  },\n  send: {\n    id: 'app.components.IdeasShow.send',\n    defaultMessage: 'Send',\n  },\n  skipSharing: {\n    id: 'app.components.IdeasShow.skipSharing',\n    defaultMessage: \"Skip it, I'll do it later\",\n  },\n  reportAsSpamModalTitle: {\n    id: 'app.containers.IdeasShow.reportAsSpamModalTitle',\n    defaultMessage: 'Why do you want to report this as spam?',\n  },\n  byUserOnDate: {\n    id: 'app.components.IdeasShow.byUserOnDate',\n    defaultMessage: 'By {userName} on {date}',\n  },\n  createdTimeAgo: {\n    id: 'app.components.IdeasShow.createdTimeAgo',\n    defaultMessage: 'Created {timeAgo}',\n  },\n  or: {\n    id: 'app.components.IdeasShow.or',\n    defaultMessage: 'or',\n  },\n  proposedBudgetTitle: {\n    id: 'app.components.IdeasShow.proposedBudgetTitle',\n    defaultMessage: 'Proposed budget',\n  },\n  bodyTitle: {\n    id: 'app.components.IdeasShow.bodyTitle',\n    defaultMessage: 'Description',\n  },\n  ideaTwitterMessage: {\n    id: 'app.containers.IdeasShow.ideaTwitterMessage',\n    defaultMessage: 'Support this idea: {postTitle}',\n  },\n  optionTwitterMessage: {\n    id: 'app.containers.IdeasShow.optionTwitterMessage',\n    defaultMessage: 'Support this option: {postTitle}',\n  },\n  issueTwitterMessage: {\n    id: 'app.containers.IdeasShow.issueTwitterMessage',\n    defaultMessage: 'Support this issue: {postTitle}',\n  },\n  projectTwitterMessage: {\n    id: 'app.containers.IdeasShow.projectTwitterMessage',\n    defaultMessage: 'Support this project: {postTitle}',\n  },\n  questionTwitterMessage: {\n    id: 'app.containers.IdeasShow.questionTwitterMessage',\n    defaultMessage: 'Join the discussion: {postTitle}',\n  },\n  contributionTwitterMessage: {\n    id: 'app.containers.IdeasShow.contributionTwitterMessage',\n    defaultMessage: 'Support this contribution: {postTitle}',\n  },\n  ideaWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.ideaWhatsAppMessage',\n    defaultMessage: 'Support this idea: {postTitle}',\n  },\n  optionWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.optionWhatsAppMessage',\n    defaultMessage: 'Support this option: {postTitle}',\n  },\n  contributionWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.contributionWhatsAppMessage',\n    defaultMessage: 'Support this contribution: {postTitle}',\n  },\n  projectWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.projectWhatsAppMessage',\n    defaultMessage: 'Support this project: {postTitle}',\n  },\n  questionWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.questionWhatsAppMessage',\n    defaultMessage: 'Join the discussion: {postTitle}',\n  },\n  issueWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.ideasWhatsAppMessage',\n    defaultMessage: 'Support this issue: {postTitle}',\n  },\n  ideaEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.ideaEmailSharingSubject',\n    defaultMessage: 'Support this idea: {ideaTitle}',\n  },\n  ideaEmailSharingBody: {\n    id: 'app.containers.IdeasShow.ideaEmailSharingBody',\n    defaultMessage: \"Support this idea '{ideaTitle}' at {ideaUrl}!\",\n  },\n  optionEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.optionEmailSharingSubject',\n    defaultMessage: 'Support this option: {ideaTitle}',\n  },\n  optionEmailSharingBody: {\n    id: 'app.containers.IdeasShow.optionEmailSharingBody',\n    defaultMessage: \"Support this option '{ideaTitle}' at {ideaUrl}!\",\n  },\n  contributionEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.contributionEmailSharingSubject',\n    defaultMessage: 'Support this contribution: {ideaTitle}',\n  },\n  contributionEmailSharingBody: {\n    id: 'app.containers.IdeasShow.contributionEmailSharingBody',\n    defaultMessage: \"Support this contribution '{ideaTitle}' at {ideaUrl}!\",\n  },\n  questionEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.questionEmailSharingSubject',\n    defaultMessage: 'Join the discussion: {ideaTitle}',\n  },\n  questionEmailSharingBody: {\n    id: 'app.containers.IdeasShow.questionEmailSharingBody',\n    defaultMessage:\n      \"Join the discussion about this question '{ideaTitle}' at {ideaUrl}!\",\n  },\n  issueEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.issueEmailSharingSubject',\n    defaultMessage: 'Support this issue: {ideaTitle}',\n  },\n  issueEmailSharingBody: {\n    id: 'app.containers.IdeasShow.issueEmailSharingBody',\n    defaultMessage: \"Support this issue '{ideaTitle}' at {ideaUrl}!\",\n  },\n  projectEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.projectEmailSharingSubject',\n    defaultMessage: 'Support this project: {ideaTitle}',\n  },\n  projectEmailSharingBody: {\n    id: 'app.containers.IdeasShow.projectEmailSharingBody',\n    defaultMessage: \"Support this project '{ideaTitle}' at {ideaUrl}!\",\n  },\n  share: {\n    id: 'app.containers.IdeasShow.share',\n    defaultMessage: 'Share',\n  },\n  commentCTA: {\n    id: 'app.containers.IdeasShow.commentCTA',\n    defaultMessage: 'Add a comment',\n  },\n});\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// hooks\nimport useTopics from 'hooks/useTopics';\n\n// i18n\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\n// styling\nimport styled from 'styled-components';\nimport { fontSizes, isRtl } from 'utils/styleUtils';\nimport { transparentize } from 'polished';\n\n// typings\nimport { ITopicData } from 'services/topics';\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst Topic = styled.div`\n  color: ${({ theme }) => theme.colorSecondary};\n  font-size: ${fontSizes.small}px;\n  font-weight: 400;\n  padding: 6px 12px;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  border: 1px solid ${({ theme }) => transparentize(0.7, theme.colorSecondary)};\n  border-radius: ${(props: any) => props.theme.borderRadius};\n\n  ${isRtl`\n    margin-right: 0;\n    margin-left: 5px;\n  `}\n`;\n\ninterface Props {\n  topicIds: string[];\n  className?: string;\n  postType: 'idea' | 'initiative';\n}\n\nconst Topics = memo<Props & InjectedLocalized>(\n  ({ topicIds, className, postType, localize }) => {\n    const topics = useTopics({ topicIds });\n\n    if (!isNilOrError(topics) && topics.length > 0) {\n      return (\n        <Container id={`e2e-${postType}-topics`} className={className}>\n          {topics\n            .filter((topic) => !isNilOrError(topic))\n            .map((topic: ITopicData) => {\n              return (\n                <Topic key={topic.id} className={`e2e-${postType}-topic`}>\n                  {localize(topic.attributes.title_multiloc)}\n                </Topic>\n              );\n            })}\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst TopicsWithHoCs = injectLocalize<Props>(Topics);\n\nexport default TopicsWithHoCs;\n","import React from 'react';\nimport Button from 'components/UI/Button';\nimport { IconNames } from 'cl2-component-library';\n\ninterface Props {\n  className?: string;\n  buttonText: string;\n  iconName?: IconNames;\n  onClick?: () => void;\n  ariaExpanded?: boolean;\n}\n\nconst IdeaCTAButton = ({\n  className,\n  buttonText,\n  iconName,\n  onClick,\n  ariaExpanded,\n}: Props) => {\n  return (\n    <Button\n      className={className}\n      icon={iconName}\n      iconAriaHidden={true}\n      buttonStyle=\"white\"\n      fontWeight=\"500\"\n      onClick={onClick}\n      ariaExpanded={ariaExpanded}\n    >\n      {buttonText}\n    </Button>\n  );\n};\n\nexport default IdeaCTAButton;\n","// libraries\nimport React, { memo } from 'react';\nimport { adopt } from 'react-adopt';\nimport { get } from 'lodash-es';\nimport { Helmet } from 'react-helmet';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\nimport GetProject, { GetProjectChildProps } from 'resources/GetProject';\nimport GetUser, { GetUserChildProps } from 'resources/GetUser';\nimport GetIdeaImages, {\n  GetIdeaImagesChildProps,\n} from 'resources/GetIdeaImages';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\n// utils\nimport { stripHtml } from 'utils/textUtils';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { imageSizes } from 'utils/fileTools';\nimport getAlternateLinks from 'utils/cl-router/getAlternateLinks';\nimport getCanonicalLink from 'utils/cl-router/getCanonicalLink';\n\ninterface InputProps {\n  ideaId: string;\n}\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n  project: GetProjectChildProps;\n  author: GetUserChildProps;\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n  authUser: GetAuthUserChildProps;\n  ideaImages: GetIdeaImagesChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst IdeaMeta = memo<Props & InjectedIntlProps & InjectedLocalized>(\n  ({\n    idea,\n    locale,\n    tenant,\n    authUser,\n    ideaImages,\n    author,\n    project,\n    localize,\n  }) => {\n    if (!isNilOrError(locale) && !isNilOrError(tenant) && !isNilOrError(idea)) {\n      const { title_multiloc, body_multiloc } = idea.attributes;\n      const tenantLocales = tenant.attributes.settings.core.locales;\n      const localizedTitle = localize(title_multiloc, 50);\n      const ideaDescription = stripHtml(localize(body_multiloc), 250);\n      const ideaImage =\n        !isNilOrError(ideaImages) && ideaImages.length > 0\n          ? ideaImages[0].attributes.versions.fb\n          : null;\n      const ideaUrl = window.location.href;\n      const projectTitle =\n        !isNilOrError(project) &&\n        localize(project.attributes.title_multiloc, 20);\n      const projectSlug = !isNilOrError(project) && project.attributes.slug;\n      const ideaAuthorName = !isNilOrError(author)\n        ? `${author.attributes.first_name} ${author.attributes.last_name}`\n        : 'anonymous';\n\n      const articleJson = {\n        '@type': 'Article',\n        image: ideaImage,\n        headline: localizedTitle,\n        author: ideaAuthorName,\n        mainEntityOfPage: {\n          '@type': 'WebPage',\n          '@id': ideaUrl,\n        },\n        datePublished: idea.attributes.published_at,\n      };\n\n      const json = {\n        '@context': 'http://schema.org',\n        '@type': 'BreadcrumbList',\n        itemListElement: [\n          {\n            '@type': 'ListItem',\n            position: 1,\n            item: {\n              '@id': tenant.attributes.host,\n              name: tenant.attributes.name,\n              image: tenant.attributes.logo\n                ? tenant.attributes.logo.large\n                : null,\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 2,\n            item: {\n              '@id': `${tenant.attributes.host}/projects`,\n              name: 'Projects',\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 2,\n            item: {\n              '@id': `${tenant.attributes.host}/projects/${projectSlug}`,\n              name: projectTitle,\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 4,\n            item: {\n              '@id': `${tenant.attributes.host}/ideas`,\n              name: 'Ideas',\n            },\n          },\n        ],\n      };\n\n      return (\n        <Helmet>\n          <title>\n            {`\n            ${\n              authUser && authUser.attributes.unread_notifications\n                ? `(${authUser.attributes.unread_notifications}) `\n                : ''\n            }\n            ${localizedTitle}`}\n          </title>\n          {getCanonicalLink()}\n          {getAlternateLinks(tenantLocales)}\n          <meta name=\"title\" content={localizedTitle} />\n          <meta name=\"description\" content={ideaDescription} />\n\n          <meta property=\"og:type\" content=\"article\" />\n          <meta property=\"og:title\" content={localizedTitle} />\n          <meta property=\"ideaOgDescription\" content={ideaDescription} />\n          {ideaImage && <meta property=\"og:image\" content={ideaImage} />}\n          <meta\n            property=\"og:image:width\"\n            content={`${imageSizes.ideaImg.fb[0]}`}\n          />\n          <meta\n            property=\"og:image:height\"\n            content={`${imageSizes.ideaImg.fb[1]}`}\n          />\n\n          <meta name=\"twitter:title\" content={localizedTitle} />\n          <meta name=\"twitter:description\" content={ideaDescription} />\n          {ideaImage && <meta name=\"twitter:image\" content={ideaImage} />}\n          <meta name=\"twitter:card\" content=\"summary_large_image\" />\n\n          {ideaImage && (\n            <script type=\"application/ld+json\">\n              {JSON.stringify(articleJson)}\n            </script>\n          )}\n          <script type=\"application/ld+json\">{JSON.stringify(json)}</script>\n\n          <meta property=\"og:url\" content={ideaUrl} />\n          <meta property=\"og:locale\" content={locale} />\n        </Helmet>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  idea: ({ ideaId, render }) => <GetIdea ideaId={ideaId}>{render}</GetIdea>,\n  ideaImages: ({ ideaId, render }) => (\n    <GetIdeaImages ideaId={ideaId}>{render}</GetIdeaImages>\n  ),\n  project: ({ idea, render }) =>\n    !isNilOrError(idea) ? (\n      <GetProject projectId={idea.relationships.project.data.id}>\n        {render}\n      </GetProject>\n    ) : null,\n  author: ({ idea, render }) => (\n    <GetUser id={get(idea, 'relationships.author.data.id', null)}>\n      {render}\n    </GetUser>\n  ),\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n});\n\nconst IdeaMetaWithHoc = injectLocalize<Props>(IdeaMeta);\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <IdeaMetaWithHoc {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  twitterMessage: {\n    id: 'app.components.PostComponents.SharingModalContent.twitterMessage',\n    defaultMessage: 'Vote for {postTitle} on',\n  },\n  ideaEmailSharingSubjectText: {\n    id:\n      'app.components.PostComponents.SharingModalContent.ideaEmailSharingSubjectText',\n    defaultMessage: 'Support my idea: {postTitle}',\n  },\n  optionEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.optionEmailSharingSubject',\n    defaultMessage: 'Support my proposed option: {postTitle}.',\n  },\n  issueEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.issueEmailSharingSubject',\n    defaultMessage: 'I just posted an issue: {postTitle}.',\n  },\n  questionEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.questionEmailSharingSubject',\n    defaultMessage: 'Join the discussion: {postTitle}.',\n  },\n  contributionEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.contributionEmailSharingSubject',\n    defaultMessage: 'Support my contribution: {postTitle}.',\n  },\n  projectEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.projectEmailSharingSubject',\n    defaultMessage: 'Support my project: {postTitle}.',\n  },\n  initiativeEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.initiativeEmailSharingSubject',\n    defaultMessage: 'Support my initiative: {postTitle}.',\n  },\n  ideaEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.ideaEmailSharingBody',\n    defaultMessage: \"Support my idea '{postTitle}' at {postUrl}!\",\n  },\n  issueEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.issueEmailSharingBody',\n    defaultMessage: \"I posted an issue '{postTitle}' at {postUrl}!\",\n  },\n  optionEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.optionEmailSharingBody',\n    defaultMessage: \"Support my proposed option '{postTitle}' at {postUrl}!\",\n  },\n  contributionEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.contributionEmailSharingBody',\n    defaultMessage: \"Support my contribution '{postTitle}' at {postUrl}!\",\n  },\n  questionEmailSharingModalContentBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.questionEmailSharingModalContentBody',\n    defaultMessage:\n      \"Join the discussion about this question '{postTitle}' at {postUrl}!\",\n  },\n  projectEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.projectEmailSharingBody',\n    defaultMessage: \"Support my project '{postTitle}' at {postUrl}!\",\n  },\n  initiativeEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.initiativeEmailSharingBody',\n    defaultMessage:\n      'What do you think of this initiative? Vote on it and share the discussion at {postUrl} to make your voice heard!',\n  },\n  ideaWhatsAppMessage: {\n    id: 'app.components.PostComponents.SharingModalContent.ideaWhatsAppMessage',\n    defaultMessage: 'Support my idea: {postTitle}.',\n  },\n  optionWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.optionWhatsAppMessage',\n    defaultMessage: 'Support my option: {postTitle}.',\n  },\n  questionWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.questionWhatsAppMessage',\n    defaultMessage: 'Join the discussion: {postTitle}.',\n  },\n  contributionWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.contributionWhatsAppMessage',\n    defaultMessage: 'Support my contribution: {postTitle}.',\n  },\n  projectWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.projectWhatsAppMessage',\n    defaultMessage: 'Support my project: {postTitle}.',\n  },\n  issueWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.issueWhatsAppMessage',\n    defaultMessage: 'I just posted an issue: {postTitle}.',\n  },\n  whatsAppMessageProposal: {\n    id:\n      'app.components.PostComponents.SharingModalContent.whatsAppMessageProposal',\n    defaultMessage: 'I just posted a proposal for {orgName}: {postTitle}',\n  },\n});\n","export default {\n  sharingModalOpened: {\n    name: 'initiativeflow social sharing modal opened',\n  },\n};\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  votingDisabledProjectInactive: {\n    id: 'app.components.VoteControl.votingDisabledProjectInactive',\n    defaultMessage: 'You can no longer vote on ideas in {projectName}',\n  },\n  votingDisabledPhaseOver: {\n    id: 'app.components.VoteControl.votingDisabledPhaseOver',\n    defaultMessage: \"It's no longer possible to vote in this phase\",\n  },\n  votingDisabledFutureEnabled: {\n    id: 'app.components.VoteControl.votingDisabledFutureEnabled',\n    defaultMessage: 'Voting will be enabled once this phase starts',\n  },\n  votingPossibleLater: {\n    id: 'app.components.VoteControl.votingPossibleLater',\n    defaultMessage: 'Voting will start on {enabledFromDate}',\n  },\n  votingNotEnabled: {\n    id: 'app.components.VoteControl.votingNotEnabled',\n    defaultMessage: 'Voting is currently not enabled for this project',\n  },\n  votingDisabledMaxReached: {\n    id: 'app.components.VoteControl.votingDisabledMaxReached',\n    defaultMessage:\n      \"You've reached your maximum number of votes in {projectName}\",\n  },\n  votingNotPermitted: {\n    id: 'app.components.VoteControl.votingNotPermitted',\n    defaultMessage: 'Voting is only enabled for certain groups',\n  },\n  votingNotVerified: {\n    id: 'app.components.VoteControl.votingNotVerified',\n    defaultMessage: '{linkToVerification} in order to vote.',\n  },\n  linkToVerificationText: {\n    id: 'app.components.VoteControl.linkToVerificationText',\n    defaultMessage: 'Verify your identity',\n  },\n  upvote: {\n    id: 'app.components.VoteControl.upvote',\n    defaultMessage: 'Upvote',\n  },\n  downvote: {\n    id: 'app.components.VoteControl.downvote',\n    defaultMessage: 'Downvote',\n  },\n  a11y_upvotesDownvotes: {\n    id: 'app.containers.VoteControl.a11y_upvotesDownvotes',\n    defaultMessage:\n      'Total upvotes: {upvotesCount}, total downvotes: {downvotesCount}',\n  },\n  voteSuccessTitle: {\n    id: 'app.containers.VoteControl.voteSuccessTitle',\n    defaultMessage: 'Your vote was successfully registered!',\n  },\n  voteErrorTitle: {\n    id: 'app.containers.VoteControl.voteErrorTitle',\n    defaultMessage: 'Something went wrong',\n  },\n  voteErrorSubTitle: {\n    id: 'app.containers.VoteControl.voteErrorSubTitle',\n    defaultMessage:\n      'Due to an error your vote could not being registered. Please try again in a few minutes.',\n  },\n  close: {\n    id: 'app.containers.VoteControl.close',\n    defaultMessage: 'Close',\n  },\n});\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { IRelationship, Multiloc, ImageSizes, ILinks } from 'typings';\nimport { first } from 'rxjs/operators';\nimport { get } from 'lodash-es';\n\nexport type InitiativePublicationStatus =\n  | 'draft'\n  | 'published'\n  | 'archived'\n  | 'spam';\n\nexport type IInitiativeAction =\n  | 'posting_initiative'\n  | 'commenting_initiative'\n  | 'voting_initiative'\n  | 'comment_voting_initiative';\n\nexport interface IInitiativeData {\n  id: string;\n  type: 'initiatives';\n  attributes: {\n    title_multiloc: Multiloc;\n    body_multiloc: Multiloc;\n    author_name: string;\n    slug: string;\n    publication_status: InitiativePublicationStatus;\n    upvotes_count: number;\n    comments_count: number;\n    location_point_geojson: GeoJSON.Point;\n    location_description: string;\n    budget: number | null;\n    created_at: string;\n    updated_at: string;\n    published_at: string;\n    header_bg: ImageSizes;\n    expires_at: string;\n  };\n  relationships: {\n    topics: {\n      data: IRelationship[];\n    };\n    initiative_images: {\n      data: IRelationship[];\n    };\n    author: {\n      data: IRelationship | null;\n    };\n    assignee: {\n      data: IRelationship | null;\n    };\n    initiative_status?: {\n      data: IRelationship | null;\n    };\n    user_vote?: {\n      data: IRelationship | null;\n    };\n  };\n}\n\nexport interface IInitiative {\n  data: IInitiativeData;\n}\n\nexport interface IInitiatives {\n  data: IInitiativeData[];\n  links: ILinks;\n}\n\nexport interface IInitiativeAdd {\n  author_id?: string | null;\n  assignee_id?: string | null;\n  initiative_status_id?: string | null;\n  publication_status?: InitiativePublicationStatus;\n  title_multiloc?: Multiloc;\n  body_multiloc?: Multiloc;\n  topic_ids?: string[] | null;\n  area_ids?: string[] | null;\n  phase_ids?: string[] | null;\n  location_point_geojson?: GeoJSON.Point | null;\n  location_description?: string | null;\n}\nexport interface IInitiativesCount {\n  count: number;\n}\n\nexport interface IInitiativesFilterCounts {\n  initiative_status_id: {\n    [key: string]: number;\n  };\n  area_id: {\n    [key: string]: number;\n  };\n  topic_id: {\n    [key: string]: number;\n  };\n  total: number;\n}\n\nexport interface IGeotaggedInitiativeData {\n  id: string;\n  type: string;\n  attributes: {\n    title_multiloc: Multiloc;\n    location_point_geojson: GeoJSON.Point;\n    location_description: string;\n  };\n}\n\nexport interface IInitiativeLinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface InitiativeActivity {\n  id: string;\n  type: 'activity';\n  attributes: {\n    action: string;\n    acted_at: string;\n    change: string[] | { [key: string]: string }[] | null;\n  };\n  relationships: {\n    user: { data: IRelationship };\n  };\n}\n\nexport type InitiativeDisabledReason =\n  | 'not_permitted'\n  | 'not_verified'\n  | 'not_signed_in';\n\nexport function initiativeByIdStream(initiativeId: string) {\n  return streams.get<IInitiative>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}`,\n  });\n}\n\nexport function initiativeBySlugStream(initiativeSlug: string) {\n  return streams.get<IInitiative>({\n    apiEndpoint: `${API_PATH}/initiatives/by_slug/${initiativeSlug}`,\n  });\n}\n\nexport function initiativesStream(streamParams: IStreamParams | null = null) {\n  return streams.get<IInitiatives>({\n    apiEndpoint: `${API_PATH}/initiatives`,\n    ...streamParams,\n  });\n}\n\nexport function initiativesFilterCountsStream(\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IInitiativesFilterCounts>({\n    apiEndpoint: `${API_PATH}/initiatives/filter_counts`,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n\nexport function initiativesMarkersStream(\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<{\n    data: IGeotaggedInitiativeData[];\n    links: IInitiativeLinks;\n  }>({\n    apiEndpoint: `${API_PATH}/initiatives/as_markers`,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n\nexport async function addInitiative(object: IInitiativeAdd) {\n  const response = await streams.add<IInitiative>(`${API_PATH}/initiatives`, {\n    initiative: object,\n  });\n  return response;\n}\n\nexport async function updateInitiative(\n  initiativeId: string,\n  object: Partial<IInitiativeAdd>\n) {\n  const response = await streams.update<IInitiative>(\n    `${API_PATH}/initiatives/${initiativeId}`,\n    initiativeId,\n    { initiative: object }\n  );\n  streams.fetchAllWith({\n    apiEndpoint: [\n      `${API_PATH}/stats/initiatives_count`,\n      `${API_PATH}/initiatives`,\n      `${API_PATH}/initiatives/${initiativeId}/activities`,\n    ],\n  });\n  return response;\n}\n\nexport async function deleteInitiative(initiativeId: string) {\n  const [initiative, response] = await Promise.all([\n    initiativeByIdStream(initiativeId).observable.pipe(first()).toPromise(),\n    streams.delete(`${API_PATH}/initiatives/${initiativeId}`, initiativeId),\n  ]);\n\n  const authorId = get(initiative, 'relationships.author.data.id', false);\n\n  streams.fetchAllWith({\n    apiEndpoint: authorId\n      ? [`${API_PATH}/users/${authorId}/initiatives_count`]\n      : [],\n  });\n\n  return response;\n}\n\nexport interface IInitiativeAllowedTransitions {\n  [key: string]: {\n    feedback_needed: boolean;\n  };\n}\n\nexport function initiativeAllowedTransitionsStream(initiativeId: string) {\n  return streams.get<IInitiativeAllowedTransitions>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}/allowed_transitions`,\n  });\n}\n\nexport interface IInitiativesFilterCounts {\n  initiative_status_id: {\n    [key: string]: number;\n  };\n  area_id: {\n    [key: string]: number;\n  };\n  topic_id: {\n    [key: string]: number;\n  };\n  total: number;\n}\n\nexport function initiativeActivities(initiativeId: string) {\n  return streams.get<{ data: InitiativeActivity[] }>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}/activities`,\n  });\n}\n\nexport type IInitiativeActionDescriptors = {\n  [key in IInitiativeAction]: {\n    enabled: boolean;\n    disabled_reason: InitiativeDisabledReason | null;\n  };\n};\n\nexport function getInitiativeActionDescriptors() {\n  return streams.get<IInitiativeActionDescriptors>({\n    apiEndpoint: `${API_PATH}/action_descriptors/initiatives`,\n  });\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport GoToCommentsButton from '../../Buttons/GoToCommentsButton';\nimport IdeaSharingButton from '../../Buttons/IdeaSharingButton';\nimport SharingButtonComponent from '../../Buttons/SharingButtonComponent';\nimport { isNilOrError } from 'utils/helperUtils';\nimport useIdea from 'hooks/useIdea';\n\nconst Container = styled.div``;\n\nconst StyledGoToCommentsButton = styled(GoToCommentsButton)`\n  margin-bottom: 10px;\n`;\n\ninterface Props {\n  ideaId: string;\n  border?: string;\n  className?: string;\n}\n\nconst IdeaCTAButtons = ({ ideaId, className }: Props) => {\n  const idea = useIdea({ ideaId });\n\n  if (!isNilOrError(idea)) {\n    const commentingEnabled =\n      idea.attributes.action_descriptor.commenting_idea.enabled;\n\n    return (\n      <Container className={className || ''}>\n        {commentingEnabled && <StyledGoToCommentsButton />}\n        <IdeaSharingButton\n          ideaId={ideaId}\n          buttonComponent={<SharingButtonComponent />}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n};\n\nexport default IdeaCTAButtons;\n","import React, { FormEvent, memo, useState } from 'react';\nimport { includes, isUndefined } from 'lodash-es';\nimport {\n  isNilOrError,\n  isUndefinedOrError,\n  capitalizeParticipationContextType,\n} from 'utils/helperUtils';\n\n// components\nimport Button from 'components/UI/Button';\n\n// services\nimport { IProjectData } from 'services/projects';\nimport {\n  getCurrentPhase,\n  getLatestRelevantPhase,\n  IPhaseData,\n} from 'services/phases';\nimport { addBasket, updateBasket } from 'services/baskets';\n\n// resources\nimport { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport { GetAppConfigurationChildProps } from 'resources/GetAppConfiguration';\nimport { GetLocaleChildProps } from 'resources/GetLocale';\nimport { GetIdeaChildProps } from 'resources/GetIdea';\nimport { GetProjectChildProps } from 'resources/GetProject';\nimport { GetPhasesChildProps } from 'resources/GetPhases';\n\n// hooks\nimport useAuthUser from 'hooks/useAuthUser';\nimport useAppConfiguration from 'hooks/useAppConfiguration';\nimport useLocale from 'hooks/useLocale';\nimport useIdea from 'hooks/useIdea';\nimport useBasket from 'hooks/useBasket';\nimport useProject from 'hooks/useProject';\nimport usePhases from 'hooks/usePhases';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from 'containers/ProjectsShowPage/shared/pb/tracks';\n\n// utils\nimport streams from 'utils/streams';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\n\n// i18n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\nimport FormattedBudget from 'utils/currency/FormattedBudget';\n\n// styles\nimport styled from 'styled-components';\nimport { fontSizes, colors, defaultCardStyle, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport PBExpenses from 'containers/ProjectsShowPage/shared/pb/PBExpenses';\n\n// typings\nimport { IParticipationContextType } from 'typings';\n\nconst IdeaCardContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst IdeaPageContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n\n  ${media.smallerThanMaxTablet`\n    padding: 20px;\n    background: ${colors.backgroundLightGrey};\n  `}\n`;\n\nconst BudgetWithButtonWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: center;\n`;\n\nconst Budget = styled.div`\n  width: 100%;\n  height: 90px;\n  color: ${(props: any) => props.theme.colorText};\n  font-size: ${fontSizes.medium}px;\n  font-weight: 600;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 3px;\n  ${defaultCardStyle};\n`;\n\nconst StyledPBExpenses = styled(PBExpenses)`\n  margin-top: 25px;\n  padding: 20px;\n`;\n\ninterface OuterProps {\n  view: 'ideaCard' | 'ideaPage';\n  projectId: string;\n  ideaId: string;\n  className?: string;\n}\n\ninterface InnerProps extends OuterProps {\n  authUser: GetAuthUserChildProps;\n  tenant: GetAppConfigurationChildProps;\n  locale: GetLocaleChildProps;\n  idea: GetIdeaChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n  participationContext: IProjectData | IPhaseData;\n  participationContextId: string;\n  participationContextType: IParticipationContextType;\n}\n\nconst AssignBudgetControl = memo<InnerProps & InjectedIntlProps>(\n  ({\n    view,\n    ideaId,\n    authUser,\n    tenant,\n    locale,\n    idea,\n    phases,\n    participationContext,\n    participationContextId,\n    participationContextType,\n    intl,\n    className,\n  }) => {\n    const basket = useBasket(\n      participationContext?.relationships?.user_basket?.data?.id\n    );\n\n    const [processing, setProcessing] = useState(false);\n\n    const handleAddRemoveButtonClick = (event?: FormEvent) => {\n      event?.preventDefault();\n      assignBudget();\n    };\n\n    const assignBudget = async () => {\n      const timeout = (ms: number) =>\n        new Promise((resolve) => setTimeout(resolve, ms));\n      const done = async () => {\n        await timeout(200);\n        setProcessing(false);\n      };\n\n      if (!isNilOrError(idea)) {\n        const isBudgetingEnabled =\n          idea.attributes.action_descriptor.budgeting?.enabled;\n        const basketIdeaIds = !isNilOrError(basket)\n          ? basket.relationships.ideas.data.map((idea) => idea.id)\n          : [];\n        const isInBasket = includes(basketIdeaIds, ideaId);\n        const budgetingDisabledReason =\n          idea.attributes.action_descriptor.budgeting?.disabled_reason;\n\n        if (\n          isNilOrError(authUser) ||\n          budgetingDisabledReason === 'not_verified'\n        ) {\n          openSignUpInModal({\n            verification: budgetingDisabledReason === 'not_verified',\n            verificationContext:\n              budgetingDisabledReason === 'not_verified'\n                ? {\n                    action: 'budgeting',\n                    id: participationContextId,\n                    type: participationContextType,\n                  }\n                : undefined,\n          });\n        } else if (!isNilOrError(authUser) && isBudgetingEnabled) {\n          setProcessing(true);\n\n          if (!isNilOrError(basket)) {\n            let newIdeas: string[] = [];\n\n            if (isInBasket) {\n              newIdeas = basket.relationships.ideas.data\n                .filter((basketIdea) => basketIdea.id !== idea.id)\n                .map((basketIdea) => basketIdea.id);\n            } else {\n              newIdeas = [\n                ...basket.relationships.ideas.data.map(\n                  (basketIdea) => basketIdea.id\n                ),\n                idea.id,\n              ];\n            }\n\n            try {\n              await updateBasket(basket.id, {\n                user_id: authUser.id,\n                participation_context_id: participationContextId,\n                participation_context_type: capitalizeParticipationContextType(\n                  participationContextType\n                ),\n                idea_ids: newIdeas,\n                submitted_at: null,\n              });\n              done();\n              trackEventByName(tracks.ideaAddedToBasket);\n            } catch (error) {\n              done();\n              streams.fetchAllWith({ dataId: [basket.id] });\n            }\n          } else {\n            try {\n              await addBasket({\n                user_id: authUser.id,\n                participation_context_id: participationContextId,\n                participation_context_type: capitalizeParticipationContextType(\n                  participationContextType\n                ),\n                idea_ids: [idea.id],\n              });\n              done();\n              trackEventByName(tracks.basketCreated);\n            } catch (error) {\n              done();\n            }\n          }\n        }\n      }\n    };\n\n    if (\n      !isUndefined(authUser) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(idea) &&\n      !isUndefined(basket) &&\n      idea.attributes.budget\n    ) {\n      const basketIdeaIds = !isNilOrError(basket)\n        ? basket.relationships.ideas.data.map((idea) => idea.id)\n        : [];\n      const isInBasket = includes(basketIdeaIds, ideaId);\n      const isBudgetingEnabled =\n        idea.attributes.action_descriptor.budgeting?.enabled;\n      const isSignedIn = !!authUser;\n      const budgetingDisabledReason =\n        idea.attributes.action_descriptor.budgeting?.disabled_reason;\n      const isPermitted = budgetingDisabledReason !== 'not_permitted';\n      const hasBudgetingDisabledReason = !!idea.attributes.action_descriptor\n        .budgeting?.disabled_reason;\n      const isPBContext =\n        participationContext?.attributes?.participation_method === 'budgeting';\n      const isCurrentPhase =\n        getCurrentPhase(phases)?.id === participationContext?.id;\n      const isCurrent =\n        (participationContextType === 'project' &&\n          (participationContext as IProjectData).attributes\n            .publication_status !== 'archived') ||\n        isCurrentPhase;\n\n      if (isPBContext) {\n        const addRemoveButton =\n          isCurrent && isPermitted ? (\n            <Button\n              onClick={handleAddRemoveButtonClick}\n              disabled={\n                isSignedIn && !isBudgetingEnabled && !hasBudgetingDisabledReason\n              }\n              processing={processing}\n              bgColor={isInBasket ? colors.clRedError : colors.clGreen}\n              iconSize=\"18px\"\n              icon={!isInBasket ? 'basket-plus' : 'basket-minus'}\n              className={`e2e-assign-budget-button ${\n                isInBasket ? 'in-basket' : 'not-in-basket'\n              }`}\n              ariaLabel={intl.formatMessage(\n                !isInBasket\n                  ? messages.addToMyBasket\n                  : messages.removeFromMyBasket\n              )}\n            >\n              <FormattedMessage\n                {...(!isInBasket\n                  ? view === 'ideaCard'\n                    ? messages.add\n                    : messages.addToMyBasket\n                  : view === 'ideaCard'\n                  ? messages.remove\n                  : messages.removeFromMyBasket)}\n              />\n            </Button>\n          ) : null;\n\n        if (view === 'ideaCard') {\n          return (\n            <IdeaCardContainer\n              className={`e2e-assign-budget ${className || ''}`}\n              aria-live=\"polite\"\n            >\n              {addRemoveButton}\n            </IdeaCardContainer>\n          );\n        }\n\n        if (view === 'ideaPage') {\n          return (\n            <IdeaPageContainer\n              className={`pbAssignBudgetControlContainer e2e-assign-budget ${\n                className || ''\n              }`}\n              aria-live=\"polite\"\n            >\n              <BudgetWithButtonWrapper>\n                <Budget>\n                  <ScreenReaderOnly>\n                    <FormattedMessage {...messages.a11y_price} />\n                  </ScreenReaderOnly>\n                  <FormattedBudget value={idea.attributes.budget} />\n                </Budget>\n                {addRemoveButton}\n              </BudgetWithButtonWrapper>\n              {isPermitted && (\n                <StyledPBExpenses\n                  participationContextId={participationContextId}\n                  participationContextType={participationContextType}\n                  viewMode=\"column\"\n                />\n              )}\n            </IdeaPageContainer>\n          );\n        }\n      }\n    }\n\n    return null;\n  }\n);\n\n// Contains the logic to determine the participationContext (= the project or most relevant phase the idea belongs to at the moment it's being loaded)\n// It's important to get the proper participationContext both here and in VoteControl to be able to determine which control (if any) should be shown, as\n// the same idea can be present in multiple phases (e.g. a voting and a PB phase) and can therefore have a different control based on the participationContext that's been determined.\n// Similar logic can be found in the VoteControl component. The important thing here is to figure out if the idea belongs to multiple phases, and if that's the case determine\n// the most relevant current phase via the 'getLatestRelevantPhase()' function.\n// This logic used to be all over the place, but now it should be present only in this component and VoteControl. Try to keep it that way :).\nconst AssignBudgetControlWrapper = memo<OuterProps & InjectedIntlProps>(\n  ({ view, projectId, ideaId, className, intl }) => {\n    const authUser = useAuthUser();\n    const tenant = useAppConfiguration();\n    const locale = useLocale();\n    const idea = useIdea({ ideaId });\n    const project = useProject({ projectId });\n    const phases = usePhases(projectId);\n\n    const isContinuousProject =\n      project?.attributes.process_type === 'continuous';\n    const ideaPhaseIds = !isNilOrError(idea)\n      ? idea?.relationships?.phases?.data?.map((item) => item.id)\n      : null;\n    const ideaPhases = !isNilOrError(phases)\n      ? phases?.filter((phase) => includes(ideaPhaseIds, phase.id))\n      : null;\n    const latestRelevantIdeaPhase = ideaPhases\n      ? getLatestRelevantPhase(ideaPhases)\n      : null;\n    const participationContext = isContinuousProject\n      ? project\n      : latestRelevantIdeaPhase;\n    const participationContextType = isContinuousProject ? 'project' : 'phase';\n    const participationContextId = participationContext?.id || null;\n\n    if (\n      !isUndefinedOrError(authUser) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(project) &&\n      !isUndefinedOrError(phases) &&\n      participationContext &&\n      participationContextId\n    ) {\n      return (\n        <AssignBudgetControl\n          view={view}\n          projectId={projectId}\n          ideaId={ideaId}\n          authUser={authUser}\n          tenant={tenant.data}\n          locale={locale}\n          idea={idea}\n          project={project}\n          phases={phases}\n          participationContext={participationContext}\n          participationContextType={participationContextType}\n          participationContextId={participationContextId}\n          intl={intl}\n          className={className}\n        />\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl<OuterProps>(AssignBudgetControlWrapper);\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { uuidRegExp } from 'utils/helperUtils';\n\nexport interface IIdeaVoteData {\n  id: string;\n  type: 'vote';\n  attributes: {\n    mode: 'up' | 'down';\n  };\n  relationships: {\n    votable: {\n      data: {\n        id: string;\n        type: 'votable';\n      };\n    };\n    user: {\n      data: {\n        id: string;\n        type: 'user';\n      };\n    };\n  };\n}\n\ninterface ILinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface IIdeaVotes {\n  data: IIdeaVoteData[];\n  links: ILinks;\n}\n\nexport interface IIdeaVote {\n  data: IIdeaVoteData;\n}\n\nexport interface INewVoteProperties {\n  user_id?: string;\n  mode: 'up' | 'down';\n}\n\nexport function voteStream(\n  voteId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IIdeaVote>({\n    apiEndpoint: `${API_PATH}/votes/${voteId}`,\n    ...streamParams,\n  });\n}\n\nexport function votesStream(\n  ideaId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IIdeaVotes>({\n    apiEndpoint: `${API_PATH}/ideas/${ideaId}/votes`,\n    ...streamParams,\n  });\n}\n\nexport async function addVote(\n  ideaId: string,\n  object: INewVoteProperties,\n  refetchAllActiveIdeas = false\n) {\n  const response = await streams.add<IIdeaVote>(\n    `${API_PATH}/ideas/${ideaId}/votes`,\n    { vote: object }\n  );\n\n  if (refetchAllActiveIdeas) {\n    const ideaEndpointRegexp = new RegExp(`/ideas/${uuidRegExp}$`);\n    streams.fetchAllWith({\n      regexApiEndpoint: [ideaEndpointRegexp],\n      onlyFetchActiveStreams: true,\n    });\n  }\n\n  return response;\n}\n\nexport async function deleteVote(\n  _ideaId,\n  voteId: string,\n  refetchAllActiveIdeas = false\n) {\n  const response = await streams.delete(`${API_PATH}/votes/${voteId}`, voteId);\n\n  if (refetchAllActiveIdeas) {\n    const ideaEndpointRegexp = new RegExp(`/ideas/${uuidRegExp}$`);\n    streams.fetchAllWith({\n      regexApiEndpoint: [ideaEndpointRegexp],\n      onlyFetchActiveStreams: true,\n    });\n  }\n\n  return response;\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  noResultsFound: {\n    id: 'app.components.IdeasShowPage.noResultsFound',\n    defaultMessage: 'No results found.',\n  },\n  goBack: {\n    id: 'app.components.IdeasShowPage.goBack',\n    defaultMessage: 'Go back',\n  },\n  goBackToList: {\n    id: 'app.components.IdeasShowPage.goBackToList',\n    defaultMessage: 'Go back to the list',\n  },\n});\n","export default {\n  clickUpvote: {\n    name: 'Idea upvote clicked',\n  },\n  clickDownvote: {\n    name: 'Idea downvote clicked',\n  },\n  sharingModalOpened: {\n    name: 'ideaflow social sharing modal opened',\n  },\n  clickTranslateIdeaButton: {\n    name: 'Clicked button to translate idea title/description',\n  },\n  clickGoBackToOriginalIdeaCopyButton: {\n    name:\n      'Clicked button to go back to original, non-translated idea title/description',\n  },\n};\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { TPermissionItem, hasPermission } from 'services/permissions';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  item: TPermissionItem | null;\n  action: string;\n  context?: any;\n}\n\ntype children = (renderProps: GetPermissionChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  permission: boolean | undefined;\n}\n\nexport type GetPermissionChildProps = boolean | undefined;\n\nexport default class GetPermission extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      permission: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { item, action, context } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ item, action, context });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ item, action, context }) => {\n            if (!isNilOrError(item)) {\n              return hasPermission({ item, action, context });\n            }\n\n            return of(false);\n          })\n        )\n        .subscribe((permission) => this.setState({ permission })),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { item, action, context } = this.props;\n    this.inputProps$.next({ item, action, context });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { permission } = this.state;\n    return (children as children)(permission);\n  }\n}\n","import React, { memo } from 'react';\nimport { isError } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { adopt } from 'react-adopt';\n\n// components\nimport IdeasShow from 'containers/IdeasShow';\nimport Button from 'components/UI/Button';\nimport IdeaShowPageTopBar from './IdeaShowPageTopBar';\n\n// resources\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\n\n// hooks\nimport useWindowSize from 'hooks/useWindowSize';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// style\nimport styled from 'styled-components';\nimport { media, fontSizes, colors, viewportWidths } from 'utils/styleUtils';\n\nconst IdeaNotFoundWrapper = styled.div`\n  height: calc(\n    100vh - ${(props) => props.theme.menuHeight + props.theme.footerHeight}px\n  );\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 4rem;\n  font-size: ${fontSizes.large}px;\n  color: ${colors.label};\n`;\n\nconst Container = styled.div`\n  background: #fff;\n`;\n\nconst StyledIdeaShowPageTopBar = styled(IdeaShowPageTopBar)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 1000;\n`;\n\n// note: StyledIdeasShow styles defined here should match that in PostPageFullscreenModal!\nconst StyledIdeasShow = styled(IdeasShow)`\n  min-height: calc(\n    100vh - ${(props) => props.theme.menuHeight + props.theme.footerHeight}px\n  );\n  padding-top: 40px;\n  padding-left: 60px;\n  padding-right: 60px;\n\n  ${media.smallerThanMaxTablet`\n    min-height: calc(100vh - ${({\n      theme: { mobileMenuHeight, mobileTopBarHeight },\n    }) => mobileMenuHeight + mobileTopBarHeight}px);\n    padding-top: 35px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    padding-top: 25px;\n    padding-left: 15px;\n    padding-right: 15px;\n  `}\n`;\n\ninterface InputProps {}\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst goBackToListMessage = <FormattedMessage {...messages.goBackToList} />;\n\nconst IdeasShowPage = memo<Props>(({ idea }) => {\n  const { windowWidth } = useWindowSize();\n  const smallerThanMaxTablet = windowWidth <= viewportWidths.largeTablet;\n\n  if (isError(idea)) {\n    return (\n      <IdeaNotFoundWrapper>\n        <p>\n          <FormattedMessage {...messages.noResultsFound} />\n        </p>\n        <Button linkTo=\"/ideas\" text={goBackToListMessage} icon=\"arrow-back\" />\n      </IdeaNotFoundWrapper>\n    );\n  }\n\n  if (!isNilOrError(idea)) {\n    return (\n      <Container>\n        {smallerThanMaxTablet && <StyledIdeaShowPageTopBar ideaId={idea.id} />}\n        <StyledIdeasShow\n          ideaId={idea.id}\n          projectId={idea.relationships.project.data.id}\n          insideModal={false}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nconst Data = adopt<DataProps, InputProps & WithRouterProps>({\n  idea: ({ params, render }) => (\n    <GetIdea ideaSlug={params.slug}>{render}</GetIdea>\n  ),\n});\n\nexport default withRouter<InputProps>(\n  (inputProps: InputProps & WithRouterProps) => (\n    <Data {...inputProps}>\n      {(dataProps) => <IdeasShowPage {...inputProps} {...dataProps} />}\n    </Data>\n  )\n);\n","const columnsGapDesktop = 90;\nconst rightColumnWidthDesktop = 350;\nconst columnsGapTablet = 60;\nconst rightColumnWidthTablet = 300;\nconst pageContentMaxWidth = 1210;\n\nexport {\n  columnsGapDesktop,\n  rightColumnWidthDesktop,\n  columnsGapTablet,\n  rightColumnWidthTablet,\n  pageContentMaxWidth,\n};\n","import useIdeaCustomFieldsSchemas from 'hooks/useIdeaCustomFieldsSchemas';\nimport { IIdeaFormSchemas } from 'services/ideaCustomFieldsSchemas';\n\nexport type GetIdeaCustomFieldsSchemasChildProps =\n  | IIdeaFormSchemas\n  | undefined\n  | null\n  | Error;\n\ntype children = (\n  renderProps: GetIdeaCustomFieldsSchemasChildProps\n) => JSX.Element | null;\n\ninterface Props {\n  projectId: string | null;\n  children?: children;\n}\n\nexport default (props: Props) => {\n  const ideaCustomFieldsSchema = useIdeaCustomFieldsSchemas({\n    projectId: props.projectId,\n  });\n  return (props.children as children)(ideaCustomFieldsSchema);\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { isNilOrError } from 'utils/helperUtils';\nimport isFieldEnabled from '../isFieldEnabled';\n\n// components\nimport Status from './Status';\nimport Location from './Location';\nimport Attachments from './Attachments';\nimport IdeaTopics from './IdeaTopics';\nimport PostedBy from './PostedBy';\n\n// hooks\nimport useLocale from 'hooks/useLocale';\nimport useIdeaCustomFieldsSchemas from 'hooks/useIdeaCustomFieldsSchemas';\nimport Outlet from 'components/Outlet';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  border-top: solid 1px #ccc;\n  border-bottom: solid 1px #ccc;\n`;\n\ninterface Props {\n  ideaId: string;\n  authorId: string | null;\n  projectId: string;\n  statusId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst MetaInformation = ({\n  ideaId,\n  projectId,\n  statusId,\n  authorId,\n  compact,\n  className,\n}: Props) => {\n  const locale = useLocale();\n  const ideaCustomFieldsSchemas = useIdeaCustomFieldsSchemas({ projectId });\n  if (!isNilOrError(locale) && !isNilOrError(ideaCustomFieldsSchemas)) {\n    const topicsEnabled = isFieldEnabled(\n      'topic_ids',\n      ideaCustomFieldsSchemas,\n      locale\n    );\n    const locationEnabled = isFieldEnabled(\n      'location',\n      ideaCustomFieldsSchemas,\n      locale\n    );\n    const attachmentsEnabled = isFieldEnabled(\n      'attachments',\n      ideaCustomFieldsSchemas,\n      locale\n    );\n\n    return (\n      <Container className={`${className || ''} ${compact ? 'compact' : ''}`}>\n        <PostedBy authorId={authorId} ideaId={ideaId} compact={compact} />\n        <Status statusId={statusId} compact={compact} />\n        {topicsEnabled && <IdeaTopics ideaId={ideaId} compact={compact} />}\n        {locationEnabled && (\n          <Location projectId={projectId} ideaId={ideaId} compact={compact} />\n        )}\n        {attachmentsEnabled && (\n          <Attachments ideaId={ideaId} compact={compact} />\n        )}\n        <Outlet\n          id=\"app.containers.IdeasShow.MetaInformation\"\n          ideaId={ideaId}\n          compact={compact}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n};\n\nexport default MetaInformation;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Attachment from './Attachment';\nimport useResourceFiles from 'hooks/useResourceFiles';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\nconst Container = styled.div``;\nconst StyledAttachment = styled(Attachment)<{ isLastItem: boolean }>`\n  margin-bottom: ${({ isLastItem }) => (!isLastItem ? '10px' : '0')};\n`;\n\ninterface Props {\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst Attachments = ({\n  ideaId,\n  compact,\n  className,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  const files = useResourceFiles({ resourceType: 'idea', resourceId: ideaId });\n\n  if (!isNilOrError(files) && files.length > 0) {\n    return (\n      <Item className={className || ''} compact={compact}>\n        <Header>{formatMessage(messages.attachments)}</Header>\n        <Container className={className}>\n          {Array.isArray(files) &&\n            files.map((file, index) => (\n              <StyledAttachment\n                isLastItem={index === files.length - 1}\n                file={file}\n                key={file.id}\n              />\n            ))}\n        </Container>\n      </Item>\n    );\n  }\n\n  return null;\n};\n\nexport default injectIntl(Attachments);\n","import React, { memo, FormEvent } from 'react';\nimport clHistory from 'utils/cl-router/history';\nimport { Button } from 'cl2-component-library';\nimport useProject from 'hooks/useProject';\nimport useLocale from 'hooks/useLocale';\nimport useLocalize from 'hooks/useLocalize';\nimport { isNilOrError } from 'utils/helperUtils';\nimport eventEmitter from 'utils/eventEmitter';\n\ninterface Props {\n  projectId: string;\n  className?: string;\n  insideModal: boolean;\n}\n\nconst GoBackButton = memo(({ projectId, className, insideModal }: Props) => {\n  const project = useProject({ projectId });\n  const locale = useLocale();\n  const localize = useLocalize();\n\n  const onGoBack = (event: FormEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n\n    if (insideModal) {\n      eventEmitter.emit('closeIdeaModal');\n    } else if (!isNilOrError(project)) {\n      clHistory.push(`/projects/${project.attributes.slug}`);\n    } else {\n      clHistory.push('/');\n    }\n  };\n\n  if (!isNilOrError(project) && !isNilOrError(locale)) {\n    return (\n      <Button\n        className={className}\n        id=\"e2e-idea-other-link\"\n        locale={locale}\n        icon=\"circle-arrow-left\"\n        onClick={onGoBack}\n        buttonStyle=\"text\"\n        iconSize=\"26px\"\n        padding=\"0\"\n        textDecorationHover=\"underline\"\n      >\n        {localize(project.attributes.title_multiloc)}\n      </Button>\n    );\n  }\n\n  return null;\n});\n\nexport default GoBackButton;\n","import {\n  IIdeaFormSchemas,\n  CustomFieldCodes,\n} from 'services/ideaCustomFieldsSchemas';\nimport { Locale } from 'typings';\n\nexport default function isFieldEnabled(\n  fieldCode: CustomFieldCodes,\n  ideaCustomFieldsSchemas: IIdeaFormSchemas,\n  locale: Locale\n) {\n  return (\n    ideaCustomFieldsSchemas.ui_schema_multiloc[locale][fieldCode][\n      'ui:widget'\n    ] !== 'hidden'\n  );\n}\n","import React from 'react';\nimport { BehaviorSubject, Subscription, combineLatest } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  mergeScan,\n  map,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\nimport {\n  ICommentData,\n  commentsForIdeaStream,\n  commentsForInitiativeStream,\n  CommentsSort,\n} from 'services/comments';\nimport { unionBy, isString, get } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\ntype children = (renderProps: GetCommentsChildProps) => JSX.Element | null;\n\ninterface Props {\n  postId: string;\n  children?: children;\n  postType: 'idea' | 'initiative';\n}\n\ninterface State {\n  commentsList: ICommentData[] | undefined | null | Error;\n  loadingInital: boolean;\n  loadingMore: boolean;\n  hasMore: boolean;\n}\n\ninterface IQueryParameters {\n  pageNumber: number;\n  pageSize: number;\n  sort: CommentsSort;\n}\n\nexport interface GetCommentsChildProps extends State {\n  onLoadMore: () => void;\n  onChangeSort: (sort: CommentsSort) => void;\n}\n\nexport default class GetComments extends React.Component<Props, State> {\n  private postId$: BehaviorSubject<string>;\n  private postType$: BehaviorSubject<string>;\n  private sort$: BehaviorSubject<CommentsSort>;\n  private loadMore$: BehaviorSubject<null>;\n  private subscription: Subscription;\n  private initialQueryParameters: IQueryParameters = {\n    pageNumber: 0,\n    pageSize: 15,\n    sort: '-new',\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      commentsList: undefined,\n      loadingInital: false,\n      loadingMore: false,\n      hasMore: true,\n    };\n  }\n\n  componentDidMount() {\n    this.postId$ = new BehaviorSubject(this.props.postId);\n    this.postType$ = new BehaviorSubject(this.props.postType);\n    this.sort$ = new BehaviorSubject(this.initialQueryParameters.sort);\n    this.loadMore$ = new BehaviorSubject(null);\n\n    this.subscription = combineLatest(\n      this.postId$.pipe(distinctUntilChanged()),\n      this.postType$.pipe(distinctUntilChanged()),\n      this.sort$.pipe(distinctUntilChanged())\n    )\n      .pipe(\n        switchMap(([postId, postType, sort]) => {\n          let commentsList:\n            | ICommentData[]\n            | undefined\n            | null\n            | Error = undefined;\n          let pageNumber = this.initialQueryParameters.pageNumber;\n          const pageSize = this.initialQueryParameters.pageSize;\n          let hasMore = true;\n\n          return this.loadMore$.pipe(\n            tap(() =>\n              this.setState({\n                loadingInital: pageNumber === 0,\n                loadingMore: pageNumber > 0,\n              })\n            ),\n            mergeScan(() => {\n              pageNumber = pageNumber + 1;\n\n              const commentsStream =\n                postType === 'idea'\n                  ? commentsForIdeaStream\n                  : commentsForInitiativeStream;\n\n              return commentsStream(postId, {\n                queryParameters: {\n                  sort,\n                  'page[number]': pageNumber,\n                  'page[size]': pageSize,\n                },\n              }).observable.pipe(\n                map((comments) => {\n                  const selfLink = get(comments, 'links.self');\n                  const lastLink = get(comments, 'links.last');\n                  hasMore =\n                    isString(selfLink) &&\n                    isString(lastLink) &&\n                    selfLink !== lastLink;\n                  commentsList = !isNilOrError(commentsList)\n                    ? unionBy(commentsList, comments.data, 'id')\n                    : comments.data;\n                  return null;\n                })\n              );\n            }, null),\n            map(() => ({ pageNumber, commentsList, hasMore }))\n          );\n        })\n      )\n      .subscribe(({ commentsList, hasMore }) => {\n        this.setState({\n          commentsList,\n          hasMore,\n          loadingInital: false,\n          loadingMore: false,\n        });\n      });\n  }\n\n  componentDidUpdate() {\n    this.postId$.next(this.props.postId);\n  }\n\n  componentWillUnmount() {\n    this.subscription.unsubscribe();\n  }\n\n  loadMore = () => {\n    if (this.state.hasMore) {\n      this.loadMore$.next(null);\n    }\n  };\n\n  changeSort = (sort: CommentsSort) => {\n    this.sort$.next(sort);\n  };\n\n  render() {\n    const { children } = this.props;\n    return (children as children)({\n      ...this.state,\n      onLoadMore: this.loadMore,\n      onChangeSort: this.changeSort,\n    });\n  }\n}\n"],"sourceRoot":""}