(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/VeQ":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.statusId,a=(0,o.useState)(null),n=(0,r.default)(a,2),l=n[0],d=n[1];return(0,o.useEffect)((function(){var e=(0,i.ideaStatusStream)(t).observable.subscribe((function(e){d(e.data)}));return function(){return e.unsubscribe()}}),[t]),l};var r=n(a("J4zp")),o=a("q1tI"),i=a("X7fv")},"08jh":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({showMore:{id:"app.components.IdeaCards.showMore",defaultMessage:"Show more"},noFilteredResults:{id:"app.containers.IdeaCards.noFilteredResults",defaultMessage:"No results found. Please try a different filter or search term."},tryDifferentFilters:{id:"app.containers.IdeaCards.tryDifferentFilters",defaultMessage:"No results found. Please try a different filter or search term."},topics:{id:"app.containers.IdeaCards.topics",defaultMessage:"Topics"},projectFilterTitle:{id:"app.containers.IdeaCards.projectFilterTitle",defaultMessage:"Projects"},statusTitle:{id:"app.containers.IdeaCards.statusTitle",defaultMessage:"Status"},sortTitle:{id:"app.containers.IdeaCards.sortTitle",defaultMessage:"Sorting"},topicsTitle:{id:"app.containers.IdeaCards.topicsTitle",defaultMessage:"Topics"},trending:{id:"app.containers.IdeaCards.trending",defaultMessage:"Trending"},random:{id:"app.containers.IdeaCards.random",defaultMessage:"Random"},popular:{id:"app.containers.IdeaCards.popular",defaultMessage:"Popular"},newest:{id:"app.containers.IdeaCards.newest",defaultMessage:"Newest"},oldest:{id:"app.containers.IdeaCards.oldest",defaultMessage:"Oldest"},map:{id:"app.containers.IdeaCards.map",defaultMessage:"Map"},list:{id:"app.containers.IdeaCards.list",defaultMessage:"List"},xResults:{id:"app.containers.IdeaCards.xResults",defaultMessage:"{ideasCount, plural, no {# results} one {# result} other {# results}}"},all:{id:"app.containers.IdeaCards.all",defaultMessage:"All"},filter:{id:"app.containers.IdeaCards.filter",defaultMessage:"Filter"},showResults:{id:"app.containers.IdeaCards.showResults",defaultMessage:"Show results"},showXResults:{id:"app.containers.IdeaCards.showXResults",defaultMessage:"Show {ideasCount, plural, no {# results} one {# result} other {# results}}"},resetFilters:{id:"app.containers.IdeaCards.resetFilters",defaultMessage:"Reset filters"},a11y_totalItems:{id:"app.containers.IdeaCards.a11y_totalItems",defaultMessage:"Total items: {ideasCount}"}});t.default=n},"3hBy":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({map:{id:"app.components.PostCardsComponents.map",defaultMessage:"Map"},list:{id:"app.components.PostCardsComponents.list",defaultMessage:"List"}});t.default=n},"4sB7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({remove:{id:"app.components.AssignBudgetControl.remove",defaultMessage:"Remove"},removeFromMyBasket:{id:"app.components.AssignBudgetControl.removeFromMyBasket",defaultMessage:"Remove from my basket"},add:{id:"app.components.AssignBudgetControl.add",defaultMessage:"Add"},addToMyBasket:{id:"app.components.AssignBudgetControl.addToMyBasket",defaultMessage:"Add to my basket"},budgetingNotPossible:{id:"app.components.VoteControl.budgetingNotPossible",defaultMessage:"Making changes to your budget is not possible at this time."},budgetingFutureEnabled:{id:"app.components.VoteControl.budgetingFutureEnabled",defaultMessage:"You can allocate your budget starting from {enabledFromDate}."},budgetingNotPermitted:{id:"app.components.VoteControl.budgetingNotPermitted",defaultMessage:"Participatory budgeting is only enabled for certain groups."},budgetingNotVerified:{id:"app.components.VoteControl.budgetingNotVerified",defaultMessage:"Please {verifyAccountLink} to continue."},verifyAccountLinkText:{id:"app.components.AssignBudgetControl.verifyAccountLinkText",defaultMessage:"verify your account"},a11y_price:{id:"app.components.AssignBudgetControl.a11y_price",defaultMessage:"Price: "},backToOverview:{id:"app.components.AssignBudgetControl.backToOverview",defaultMessage:"Back to overview"}});t.default=n},"56cC":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=n(a("6L1S")),l=a("iP56"),d=n(a("kemx")),s=n(a("vOnD")),u=a("96Cm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}var f=s.default.footer.withConfig({displayName:"FooterWithBudgetControl__Footer",componentId:"sc-8w3hmm-0"})(["display:flex;justify-content:space-between;"]),p=s.default.div.withConfig({displayName:"FooterWithBudgetControl__BudgetControl",componentId:"sc-8w3hmm-1"})(["display:flex;align-items:center;"]),m=s.default.span.withConfig({displayName:"FooterWithBudgetControl__IdeaBudget",componentId:"sc-8w3hmm-2"})(["color:",";font-size:","px;color:",";font-weight:600;display:flex;align-items:center;justify-content:center;margin-right:16px;"],u.colors.label,u.fontSizes.base,(function(e){return e.theme.colorText})),g=s.default.span.withConfig({displayName:"FooterWithBudgetControl__CommentsCount",componentId:"sc-8w3hmm-3"})(["color:",";font-size:","px;display:flex;flex-direction:row;align-items:center;"],u.colors.label,u.fontSizes.base),v=(0,s.default)(l.Icon).withConfig({displayName:"FooterWithBudgetControl__CommentIcon",componentId:"sc-8w3hmm-4"})(["width:20px;height:20px;fill:",";margin-right:8px;"],u.colors.label),h=(0,o.memo)((function(e){var t,a,n,r=e.idea,l=e.participationContextId,s=e.participationContextType,u=null==r||null===(t=r.relationships)||void 0===t||null===(a=t.project.data)||void 0===a?void 0:a.id,c=null==r||null===(n=r.attributes)||void 0===n?void 0:n.budget;return o.default.createElement(f,null,o.default.createElement(g,{className:"e2e-ideacard-comment-count"},o.default.createElement(v,{name:"comments"}),r.attributes.comments_count),l&&s&&c&&o.default.createElement(p,null,o.default.createElement(m,null,o.default.createElement(i.default,{value:c})),o.default.createElement(d.default,{view:"ideaCard",projectId:u,ideaId:r.id})))}));t.default=h},"9Y8i":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=a("KLnl"),l=n(a("/VeQ")),d=n(a("3A/8")),s=n(a("vOnD")),u=a("ufqH"),c=a("96Cm");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}var p=s.default.div.withConfig({displayName:"StatusBadge__Container",componentId:"sc-1cz6lfu-0"})(["color:",";font-size:","px;font-weight:600;text-transform:uppercase;text-align:center;line-height:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;hyphens:auto;padding:5px 8px;display:inline-block;border-radius:",";border:1px solid ",";"],(function(e){return e.color}),c.fontSizes.xs,(function(e){return e.theme.borderRadius}),(function(e){var t=e.color;return(0,u.transparentize)(.7,t)})),m=(0,o.memo)((function(e){var t=e.statusId,a=e.id,n=e.className,r=(0,l.default)({statusId:t});if(!(0,i.isNilOrError)(r)){var s,u=(null==r||null===(s=r.attributes)||void 0===s?void 0:s.color)||"#bbb";return o.default.createElement(p,{id:a||"",className:n||"",color:u},o.default.createElement(d.default,{value:r.attributes.title_multiloc}))}return null}));t.default=m},"9b7z":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Card=void 0,a("ma9I");var o,i,l,d,s,u=n(a("VkAN")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),f=n(a("puQj")),p=n(a("jWBj")),m=n(a("py5Z")),g=n(a("vOnD")),v=a("96Cm");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}var b="17px",y="162px",w="180px",C=(0,g.default)(p.default).withConfig({displayName:"Compact__Container",componentId:"qet06v-0"})(["width:100%;min-height:calc("," + "," + ",");display:flex;align-items:center;padding:",";cursor:pointer;",";&.desktop{",";transform:translate(0px,-2px);}@media (max-width:1220px) and (min-width:1023px){min-height:calc( "," + "," + "," );}",""],y,b,b,b,v.defaultCardStyle,v.defaultCardHoverStyle,w,b,b,v.media.smallerThanMinTablet(o||(o=(0,u.default)(["\n    min-height: unset;\n    flex-direction: column;\n    align-items: stretch;\n  "])))),P=g.default.div.withConfig({displayName:"Compact__IdeaCardImageWrapper",componentId:"qet06v-1"})(["flex:0 0 ",";width:",";height:",";display:flex;align-items:center;justify-content:center;margin-right:18px;overflow:hidden;border-radius:",";@media (max-width:1220px) and (min-width:1023px){height:",";}",""],y,y,y,(function(e){return e.theme.borderRadius}),w,v.media.smallerThanMinTablet(i||(i=(0,u.default)(["\n    width: 100%;\n    margin-bottom: 18px;\n  "])))),x=(0,g.default)(m.default).withConfig({displayName:"Compact__IdeaCardImage",componentId:"qet06v-2"})(["width:100%;height:100%;flex:1;"]),_=g.default.div.withConfig({displayName:"Compact__ContentWrapper",componentId:"qet06v-3"})(["height:",";flex:0 1 100%;display:flex;flex-direction:column;align-items:stretch;padding-top:0px;padding-bottom:2px;@media (max-width:1220px) and (min-width:1023px){height:",";}",""],y,w,v.media.smallerThanMinTablet(l||(l=(0,u.default)(["\n    height: unset;\n  "])))),O=g.default.header.withConfig({displayName:"Compact__Header",componentId:"qet06v-4"})(["padding:0;margin:0;margin-bottom:12px;",""],v.media.smallerThanMinTablet(d||(d=(0,u.default)(["\n    margin-bottom: 15px;\n  "])))),j=g.default.h3.withConfig({displayName:"Compact__Title",componentId:"qet06v-5"})(["color:",";font-size:21px;font-weight:500;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;line-height:26px;max-height:78px;padding:0;margin:0;overflow:hidden;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;"],(function(e){return e.theme.colorText})),k=g.default.div.withConfig({displayName:"Compact__Body",componentId:"qet06v-6"})(["flex-grow:1;",""],v.media.smallerThanMinTablet(s||(s=(0,u.default)(["\n    margin-bottom: 25px;\n  "])))),I=(0,c.memo)((function(e){var t=e.to,a=e.onClick,n=e.image,r=e.imagePlaceholder,o=e.hideImage,i=e.hideImagePlaceholder,l=e.title,d=e.body,s=e.footer,u=e.className;return c.default.createElement(C,{onClick:a,to:t,className:"e2e-card ".concat(u," ").concat(f.default.mobile||f.default.tablet?"mobile":"desktop")},!o&&n&&c.default.createElement(P,{hasImage:!!n},c.default.createElement(x,{src:n,cover:!0,alt:""})),!i&&!n&&c.default.createElement(P,{hasImage:!!n},r),c.default.createElement(_,null,c.default.createElement(O,{className:"e2e-card-title"},"string"==typeof l?c.default.createElement(j,{title:l},l):l),c.default.createElement(k,null,d),s))}));t.Card=I;var M=I;t.default=M},CmRk:function(e,t,a){"use strict";a("yq1k"),a("JTJg"),a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("ma9I"),a("2B1R"),a("TeQF"),a("FZtP"),a("oVuX");var i,l,d,s=n(a("pVnL")),u=n(a("J4zp")),c=n(a("yXPU")),f=n(a("lwsE")),p=n(a("W8MJ")),m=n(a("PJYZ")),g=n(a("7W2i")),v=n(a("a1gu")),h=n(a("Nsbk")),b=n(a("lSNA")),y=n(a("VkAN")),w=z(a("q1tI")),C=a("T89o"),P=a("DtyJ"),x=a("ahDk"),_=a("KLnl"),O=a("dtw8"),j=a("Rw3A"),k=n(a("dcoO")),I=a("P92B"),M=a("iP56"),E=a("x303"),N=a("ngE2"),S=a("lq1v"),D=a("uZm3"),T=a("MfpC"),q=a("+9pX"),R=a("q3BX"),B=a("iH/W"),F=z(a("vOnD")),V=a("96Cm"),A=a("ufqH");function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(W=function(e){return e?a:t})(e)}function z(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=W(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}var L=(0,F.keyframes)(["from{transform:scale3d(1,1,1);}40%{transform:scale3d(1.25,1.25,1.25);}to{transform:scale3d(1,1,1);}"]),$=F.default.div.withConfig({displayName:"VoteControl__Container",componentId:"h9cg2l-0"})(["display:flex;align-items:center;"," *{user-select:none;}"],(0,V.isRtl)(i||(i=(0,y.default)(["\n    flex-direction: row-reverse;\n  "])))),J=F.default.div.withConfig({displayName:"VoteControl__VoteIconContainer",componentId:"h9cg2l-1"})(["display:flex;align-items:center;justify-content:center;margin-right:1px;border-radius:50%;transition:all 60ms ease-out;background-color:white;"," "," ",""],(function(e){return"border"===e.styleType&&(0,F.css)(["border:solid 1px ",";"],(0,A.lighten)(.2,V.colors.label))}),(function(e){var t=e.styleType,a=e.votingEnabled;return"shadow"===t&&a&&(0,F.css)(["box-shadow:",";&:hover{box-shadow:",";}"],V.defaultStyles.boxShadow,V.defaultStyles.boxShadowHoverSmall)}),(function(e){var t=e.votingEnabled,a=e.size;if(t){if("1"===a)return(0,F.css)(["width:35px;height:35px;"]);if("2"===a)return(0,F.css)(["width:45px;height:45px;"]);if("3"===a)return(0,F.css)(["width:48px;height:48px;"]);if("4"===a)return(0,F.css)(["width:50px;height:50px;"])}return(0,F.css)(["margin-left:5px;"])})),H=(0,F.default)(M.Icon).withConfig({displayName:"VoteControl__VoteIcon",componentId:"h9cg2l-2"})(["width:19px;height:19px;fill:",";transition:all 100ms ease-out;"," "," "," ",""],V.colors.label,(function(e){return"1"===e.size?(0,F.css)(["width:17px;height:17px;"]):(0,F.css)([""])}),(function(e){return"2"===e.size?(0,F.css)(["width:18px;height:18px;"]):(0,F.css)([""])}),(function(e){return"3"===e.size?(0,F.css)(["width:20px;height:20px;"]):(0,F.css)([""])}),(function(e){return"4"===e.size?(0,F.css)(["width:21px;height:21px;"]):(0,F.css)([""])})),Q=F.default.div.withConfig({displayName:"VoteControl__VoteCount",componentId:"h9cg2l-3"})(["color:",";font-size:","px;font-weight:400;display:flex;align-items:center;justify-content:flex-start;margin-left:5px;transition:all 100ms ease-out;&:not(.enabled){margin-left:3px;}"],V.colors.label,V.fontSizes.base),K=F.default.button.withConfig({displayName:"VoteControl__Vote",componentId:"h9cg2l-4"})(["display:flex;align-items:center;padding:0;margin:0;cursor:pointer;border:none;"," &.voteClick ","{animation:",";}&:not(.enabled){","{width:auto;border:none;background:none;}","{margin-right:4px;}}"],(0,V.isRtl)(l||(l=(0,y.default)(["\n    flex-direction: row-reverse;\n  "]))),J,(0,F.css)([""," 350ms"],L),J,H),Z=(0,F.default)(K).withConfig({displayName:"VoteControl__Upvote",componentId:"h9cg2l-5"})(["margin-right:8px;&:not(.enabled){","{","}}","{","}","{margin-bottom:4px;",";}","{min-width:20px;margin-right:5px;","}&:hover.enabled{","{","}","{","}","{","}}"],Q,(0,V.isRtl)(d||(d=(0,y.default)(["\n        margin-right: 5px;\n      "]))),J,(function(e){return e.active&&"border-color: ".concat(V.colors.clGreen,"; background: ").concat(V.colors.clGreen,";")}),H,(function(e){var t=e.active,a=e.enabled;return t&&a?(0,F.css)(["fill:#fff;"]):t&&!a?(0,F.css)(["fill:",";"],V.colors.clGreen):void 0}),Q,(function(e){return e.active&&"color: ".concat(V.colors.clGreen,";")}),J,(function(e){return!e.active&&"border: 1px solid ".concat(V.colors.clGreen,";")}),H,(function(e){return!e.active&&"fill: ".concat(V.colors.clGreen,";")}),Q,(function(e){return!e.active&&"color: ".concat(V.colors.clGreen,";")})),X=(0,F.default)(K).withConfig({displayName:"VoteControl__Downvote",componentId:"h9cg2l-6"})(["","{","}","{margin-top:4px;",";}","{","}&:hover.enabled{","{","}","{","}","{","}}"],J,(function(e){return e.active&&"border-color: ".concat(V.colors.clRed,"; background: ").concat(V.colors.clRed,";")}),H,(function(e){var t=e.active,a=e.enabled;return t&&a?(0,F.css)(["fill:#fff;"]):t&&!a?(0,F.css)(["fill:",";"],V.colors.clRed):void 0}),Q,(function(e){return e.active&&"color: ".concat(V.colors.clRed,";")}),J,(function(e){return!e.active&&"border: 1px solid ".concat(V.colors.clRed,";")}),H,(function(e){return!e.active&&"fill: ".concat(V.colors.clRed,";")}),Q,(function(e){return!e.active&&"color: ".concat(V.colors.clRed,";")})),Y=function(e){(0,g.default)(n,e);var t,a=U(n);function n(e){var t;return(0,f.default)(this,n),t=a.call(this,e),(0,b.default)((0,m.default)(t),"voting$",void 0),(0,b.default)((0,m.default)(t),"id$",void 0),(0,b.default)((0,m.default)(t),"subscriptions",void 0),(0,b.default)((0,m.default)(t),"upvoteElement",void 0),(0,b.default)((0,m.default)(t),"downvoteElement",void 0),(0,b.default)((0,m.default)(t),"votingAnimationDone",(function(){t.setState({votingAnimation:null})})),(0,b.default)((0,m.default)(t),"onClickUpvote",(function(e){e.preventDefault(),e.stopPropagation(),t.vote("up")})),(0,b.default)((0,m.default)(t),"onClickDownvote",(function(e){e.preventDefault(),e.stopPropagation(),t.vote("down")})),(0,b.default)((0,m.default)(t),"vote",function(){var e=(0,c.default)(o.default.mark((function e(a){var n,r,i,l,d,s,u,c,f,p,m,g,v,h,b,y,w,C,P,x;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=n.authUser,i=n.myVoteId,l=n.myVoteMode,d=n.voting,s=n.idea,u=n.participationContext,c=n.participationContextId,f=n.participationContextType,p=t.props,m=p.ideaId,g=p.disabledVoteClick,v=null==s?void 0:s.data.attributes.action_descriptor.voting_idea.enabled,h=null==s?void 0:s.data.attributes.action_descriptor.voting_idea.cancelling_enabled,b=null==s?void 0:s.data.attributes.action_descriptor.voting_idea.disabled_reason,y=!(0,_.isNilOrError)(r),w=!(!l||a!==l),C=!(0,_.isNilOrError)(r)&&r.data.attributes.verified,d){e.next=42;break}if((0,_.isNilOrError)(r)||!(v||h&&w)){e.next=41;break}if(e.prev=10,t.voting$.next(a),x="limited"===(null==u||null===(P=u.attributes)||void 0===P?void 0:P.voting_method),!i||!l||l===a){e.next=19;break}return t.setState((function(e){return{upvotesCount:"up"===a?e.upvotesCount+1:e.upvotesCount-1,downvotesCount:"down"===a?e.downvotesCount+1:e.downvotesCount-1,myVoteMode:a}})),e.next=17,(0,S.deleteVote)(m,i,x);case 17:return e.next=19,(0,S.addVote)(m,{user_id:r.data.id,mode:a},x);case 19:if(!i||!l||l!==a){e.next=23;break}return t.setState((function(e){return{upvotesCount:"up"===a?e.upvotesCount-1:e.upvotesCount,downvotesCount:"down"===a?e.downvotesCount-1:e.downvotesCount,myVoteMode:null}})),e.next=23,(0,S.deleteVote)(m,i,x);case 23:if(l){e.next=27;break}return t.setState((function(e){return{upvotesCount:"up"===a?e.upvotesCount+1:e.upvotesCount,downvotesCount:"down"===a?e.downvotesCount+1:e.downvotesCount,myVoteMode:a}})),e.next=27,(0,S.addVote)(m,{user_id:r.data.id,mode:a},x);case 27:return e.next=29,(0,N.ideaByIdStream)(m).fetch();case 29:return t.voting$.next(null),e.abrupt("return","success");case 33:return e.prev=33,e.t0=e.catch(10),t.voting$.next(null),e.next=38,(0,N.ideaByIdStream)(m).fetch();case 38:throw"error";case 39:e.next=42;break;case 41:y&&!C&&"not_verified"===b?(0,B.openVerificationModal)():y||!v&&"not_verified"!==b&&"not_signed_in"!==b&&"not_permitted"!==b?b&&(null==g||g(b)):(0,R.openSignUpInModal)({verification:"not_verified"===b,verificationContext:"not_verified"===b&&c&&f?{action:"voting_idea",id:c,type:f}:void 0,action:function(){return t.vote(a)}});case 42:return e.abrupt("return");case 43:case"end":return e.stop()}}),e,null,[[10,33]])})));return function(t){return e.apply(this,arguments)}}()),(0,b.default)((0,m.default)(t),"setContainerRef",(function(e){var a,n;null===(a=t.props)||void 0===a||null===(n=a.setRef)||void 0===n||n.call(a,e)})),(0,b.default)((0,m.default)(t),"setUpvoteRef",(function(e){t.upvoteElement=e})),(0,b.default)((0,m.default)(t),"setDownvoteRef",(function(e){t.downvoteElement=e})),(0,b.default)((0,m.default)(t),"removeFocus",(function(e){e.preventDefault()})),t.state={showVoteControl:!1,authUser:null,upvotesCount:0,downvotesCount:0,voting:null,votingAnimation:null,myVoteId:void 0,myVoteMode:void 0,idea:null,participationContext:null,participationContextId:null,participationContextType:null,loaded:!1},t.voting$=new P.BehaviorSubject(null),t.id$=new P.BehaviorSubject(null),t.subscriptions=[],t.upvoteElement=null,t.downvoteElement=null,t}return(0,p.default)(n,[{key:"componentDidMount",value:function(){var e,t,a=this,n=(0,E.authUserStream)().observable,r=this.voting$.pipe((0,x.distinctUntilChanged)()),o=this.id$.pipe((0,x.filter)((function(e){return(0,C.isString)(e)})),(0,x.distinctUntilChanged)());this.id$.next(this.props.ideaId),null===(e=this.upvoteElement)||void 0===e||e.addEventListener("animationend",this.votingAnimationDone),null===(t=this.downvoteElement)||void 0===t||t.addEventListener("animationend",this.votingAnimationDone);var i=o.pipe((0,x.switchMap)((function(e){var t=(0,N.ideaByIdStream)(e).observable;return(0,P.combineLatest)(t,r)})),(0,x.filter)((function(e){var t=(0,u.default)(e,2);t[0];return null===t[1]})),(0,x.map)((function(e){var t=(0,u.default)(e,2),a=t[0];t[1];return a}))),l=(0,P.combineLatest)(n,i).pipe((0,x.switchMap)((function(e){var t=(0,u.default)(e,2),a=t[0],n=t[1];if(a&&n&&n.data.relationships.user_vote&&null!==n.data.relationships.user_vote.data){var o=n.data.relationships.user_vote.data.id,i=(0,S.voteStream)(o).observable;return(0,P.combineLatest)(i,r).pipe((0,x.filter)((function(e){var t=(0,u.default)(e,2);t[0];return null===t[1]})),(0,x.map)((function(e){var t=(0,u.default)(e,2),a=t[0];t[1];return a})))}return(0,P.of)(null)})));this.subscriptions=[r.subscribe((function(e){a.setState((function(t){return{voting:e,votingAnimation:null!==e&&null===t.voting?e:t.votingAnimation}}))})),i.pipe((0,x.switchMap)((function(e){var t=(0,P.of)(null),a=(0,P.of)(null),r=!(0,C.isEmpty)((0,C.get)(e.data.relationships.phases,"data",null));return!r&&e.data.relationships.project.data&&(t=(0,D.projectByIdStream)(e.data.relationships.project.data.id).observable),r&&e.data.relationships.phases.data.length>0&&(a=(0,P.combineLatest)(e.data.relationships.phases.data.map((function(e){return(0,T.phaseStream)(e.id).observable})))),(0,P.combineLatest)(t,a,n).pipe((0,x.map)((function(t){var a=(0,u.default)(t,3),n=a[0],r=a[1],o=a[2];return{idea:e,project:n,phases:r,authUser:o}})))}))).subscribe((function(e){var t,n,r,o,i=e.idea,l=e.project,d=e.phases,s=e.authUser,u=!(0,_.isNilOrError)(s),c=i.data.attributes.upvotes_count,f=i.data.attributes.downvotes_count,p=i.data.attributes.action_descriptor.voting_idea.enabled,m=i.data.attributes.action_descriptor.voting_idea.cancelling_enabled,g=i.data.attributes.action_descriptor.voting_idea.disabled_reason,v=i.data.attributes.action_descriptor.voting_idea.future_enabled,h="continuous"===(null==l?void 0:l.data.attributes.process_type),b=null==i||null===(t=i.data)||void 0===t||null===(n=t.relationships)||void 0===n||null===(r=n.phases)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.map((function(e){return e.id})),y=null==d?void 0:d.filter((function(e){return(0,C.includes)(b,e.data.id)})).map((function(e){return e.data})),w=y?(0,T.getLatestRelevantPhase)(y):null,P=h?"project":"phase",x=h?(null==l?void 0:l.data.id)||null:(null==w?void 0:w.id)||null,O=h?(null==l?void 0:l.data)||null:w,j=!p&&"not_verified"===g&&u,k=!("budgeting"===(null==O?void 0:O.attributes.participation_method)||!(p||!p&&("not_signed_in"===g||"not_verified"===g&&!u)||m||v||c>0||f>0||j||!j&&"not_permitted"===g));a.setState({idea:i,participationContext:O,participationContextId:x,participationContextType:P,showVoteControl:k,upvotesCount:c,downvotesCount:f,authUser:s,loaded:!0})})),l.subscribe((function(e){a.setState({myVoteId:e?e.data.id:null,myVoteMode:e?e.data.attributes.mode:null})}))]}},{key:"componentDidUpdate",value:(t=(0,c.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.id$.next(this.props.ideaId);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.upvoteElement)||void 0===e||e.removeEventListener("animationend",this.votingAnimationDone),null===(t=this.downvoteElement)||void 0===t||t.removeEventListener("animationend",this.votingAnimationDone),this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){var e=this.props,t=e.size,a=e.className,n=e.intl.formatMessage,r=e.ariaHidden,o=e.styleType,i=this.state,l=i.idea,d=i.authUser,u=i.showVoteControl,c=i.myVoteMode,f=i.votingAnimation,p=i.upvotesCount,m=i.downvotesCount,g=null==l?void 0:l.data.attributes.action_descriptor.voting_idea,v=null==g?void 0:g.enabled,h=null==g?void 0:g.cancelling_enabled,b=null==g?void 0:g.disabled_reason,y=!(0,_.isNilOrError)(d),C=!(0,_.isNilOrError)(d)&&d.data.attributes.verified,P="up"!==c&&v||"up"===c&&h||!C&&"not_verified"===b||!y&&"not_signed_in"===b,x="down"!==c&&v||"down"===c&&h||!C&&"not_verified"===b||!y&&"not_signed_in"===b,O="boolean"!=typeof(null==g?void 0:g.downvoting_enabled)||(null==g?void 0:g.downvoting_enabled);if(!u)return null;var M=w.default.createElement(w.default.Fragment,null,w.default.createElement(q.ScreenReaderOnly,null,w.default.createElement(j.FormattedMessage,(0,s.default)({},k.default.a11y_upvotesDownvotes,{values:{upvotesCount:p,downvotesCount:m}}))),w.default.createElement(I.LiveMessage,{message:n(k.default.a11y_upvotesDownvotes,{upvotesCount:p,downvotesCount:m}),"aria-live":"polite"}));return w.default.createElement(w.default.Fragment,null,M,w.default.createElement($,{className:[a,"e2e-vote-controls",null===c?"neutral":c].filter((function(e){return e})).join(" "),"aria-hidden":r,ref:this.setContainerRef},w.default.createElement(Z,{active:"up"===c,enabled:P,onMouseDown:this.removeFocus,onClick:this.onClickUpvote,ref:this.setUpvoteRef,className:["e2e-ideacard-upvote-button","up"===f?"voteClick":"upvote",P?"enabled":"disabled","up"===c?"active":""].join(" "),tabIndex:r?-1:0},w.default.createElement(J,{styleType:o,size:t,votingEnabled:P},w.default.createElement(H,{name:"upvote",size:t,enabled:P}),w.default.createElement(q.ScreenReaderOnly,null,w.default.createElement(j.FormattedMessage,k.default.upvote))),w.default.createElement(Q,{"aria-hidden":!0,className:[v?"enabled":""].join(" ")},p)),O&&w.default.createElement(X,{active:"down"===c,enabled:x,onMouseDown:this.removeFocus,onClick:this.onClickDownvote,ref:this.setDownvoteRef,className:["e2e-ideacard-downvote-button","down"===f?"voteClick":"downvote",x?"enabled":"disabled"].join(" "),tabIndex:r?-1:0},w.default.createElement(J,{styleType:o,size:t,votingEnabled:x},w.default.createElement(H,{name:"downvote",size:t,enabled:x}),w.default.createElement(q.ScreenReaderOnly,null,w.default.createElement(j.FormattedMessage,k.default.downvote))),w.default.createElement(Q,{"aria-hidden":!0,className:v?"enabled":""},m))))}}]),n}(w.PureComponent);(0,b.default)(Y,"defaultProps",{ariaHidden:!1});var G=(0,O.withRouter)((0,j.injectIntl)(Y));t.default=G},EP0W:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ideaImageStream=function(e,t){var a="".concat(l.API_PATH,"/ideas/").concat(e,"/images/").concat(t);return d.default.get({apiEndpoint:a})},t.ideaImagesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(l.API_PATH,"/ideas/").concat(e,"/images");return d.default.get(c({apiEndpoint:a},t))},t.deleteIdeaImage=function(e,t){return d.default.delete("".concat(l.API_PATH,"/ideas/").concat(e,"/images/").concat(t),t)},t.addIdeaImage=function(e,t){return f.apply(this,arguments)};var r=n(a("o0o1")),o=n(a("yXPU")),i=n(a("lSNA"));a("ma9I");var l=a("p0gT"),d=n(a("1Kqg")),s=a("ngE2");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(){return(f=(0,o.default)(r.default.mark((function e(t,a){var n,o,i,u,c=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:null,o="".concat(l.API_PATH,"/ideas/").concat(t,"/images"),i={image:{ordering:n,image:a}},e.next=5,d.default.add(o,i);case 5:return u=e.sent,e.next=8,(0,s.ideaByIdStream)(t).fetch();case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},HahP:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2B1R");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=a("KuRP"),l=n(a("2fl8")),d=n(a("vOnD")),s=a("96Cm"),u=a("ufqH"),c=a("Rw3A"),f=n(a("3hBy")),p=n(a("XtmO"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}var g=d.default.div.withConfig({displayName:"ViewButtons__Container",componentId:"sc-1j0vvv8-0"})(["display:flex;padding:4px;background:",";border-radius:",";"],(0,u.darken)(.06,s.colors.lightGreyishBlue),(function(e){return e.theme.borderRadius})),v=(0,d.default)(l.default).withConfig({displayName:"ViewButtons__ListButton",componentId:"sc-1j0vvv8-1"})([""]),h=(0,d.default)(l.default).withConfig({displayName:"ViewButtons__MapButton",componentId:"sc-1j0vvv8-2"})(["margin-left:4px;"]),b=(0,o.memo)((function(e){var t=e.className,a=e.selectedView,n=e.onClick,r="card"===a,l="map"===a,d=function(e){return function(t){t.preventDefault(),n(e),(0,i.trackEventByName)(p.default.toggleDisplay,{locationButtonWasClicked:location.pathname,selectedDisplayMode:e})}};return o.default.createElement(g,{className:"e2e-list-map-viewbuttons ".concat(t||""),role:"tablist"},o.default.createElement(v,{buttonStyle:"white",icon:"list2",role:"tab","aria-selected":r,onClick:d("card"),padding:"7px 12px",textColor:s.colors.text,bgColor:r?void 0:"transparent",bgHoverColor:r?void 0:"rgba(0,0,0,0.12)",boxShadowHover:r?void 0:"none",fullWidth:!0},o.default.createElement(c.FormattedMessage,f.default.list)),o.default.createElement(h,{buttonStyle:"white",icon:"map",role:"tab","aria-selected":l,onClick:d("map"),padding:"7px 12px",textColor:s.colors.text,bgColor:l?void 0:"transparent",bgHoverColor:l?void 0:"rgba(0,0,0,0.12)",boxShadowHover:l?void 0:"none",fullWidth:!0},o.default.createElement(c.FormattedMessage,f.default.map)))}));t.default=b},"Q/be":function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("PJYZ")),d=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),c=n(a("lSNA")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),p=n(a("ks7M")),m=a("Rw3A"),g=n(a("08jh")),v=a("DbO4");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,d.default)(a,e);var t=b(a);function a(e){var n;return(0,o.default)(this,a),n=t.call(this,e),(0,c.default)((0,l.default)(n),"handleOnChange",(function(e){n.setState({selectedValue:e}),n.props.onChange(e[0])})),(0,c.default)((0,l.default)(n),"sortTitle",f.default.createElement(m.FormattedMessage,g.default.sortTitle)),n.state={selectedValue:[e.defaultSortingMethod||v.ideaDefaultSortMethodFallback]},n}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.alignment,t=this.state.selectedValue,a=[{text:f.default.createElement(m.FormattedMessage,g.default.trending),value:"trending"},{text:f.default.createElement(m.FormattedMessage,g.default.random),value:"random"},{text:f.default.createElement(m.FormattedMessage,g.default.popular),value:"popular"},{text:f.default.createElement(m.FormattedMessage,g.default.newest),value:"new"},{text:f.default.createElement(m.FormattedMessage,g.default.oldest),value:"-new"}];return f.default.createElement(p.default,{id:"e2e-ideas-sort-dropdown",title:this.sortTitle,name:"sort",selected:t,values:a,onChange:this.handleOnChange,multipleSelectionAllowed:!1,width:"180px",left:"left"===e?"-5px":void 0,mobileLeft:"left"===e?"-5px":void 0,right:"right"===e?"-5px":void 0,mobileRight:"right"===e?"-5px":void 0})}}]),a}(f.PureComponent);t.default=y},XJHN:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("yWo2"),a("SYor"),a("rB9j"),a("UxlC"),a("oVuX"),a("TeQF");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=P(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=n(a("FrK0")),l=n(a("9b7z")),d=a("iP56"),s=n(a("Qs0S")),u=n(a("tzUK")),c=n(a("56cC")),f=n(a("38aM")),p=n(a("etVs")),m=n(a("V3HD")),g=a("JRPe"),v=a("T89o"),h=n(a("IAnr")),b=a("KLnl"),y=n(a("vOnD")),w=a("ufqH"),C=a("96Cm");function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(P=function(e){return e?a:t})(e)}var x=y.default.div.withConfig({displayName:"Compact__BodyWrapper",componentId:"sc-1jcgbgj-0"})(["display:flex;align-items:flex-start;"]),_=(0,y.default)(s.default).withConfig({displayName:"Compact__StyledAvatar",componentId:"sc-1jcgbgj-1"})(["margin-right:6px;margin-left:-4px;margin-top:-2px;"]),O=y.default.div.withConfig({displayName:"Compact__Body",componentId:"sc-1jcgbgj-2"})(["font-size:","px;font-weight:300;color:",";display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;line-height:21px;max-height:42px;overflow:hidden;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;"],C.fontSizes.small,C.colors.label),j=(0,y.default)(i.default).withConfig({displayName:"Compact__StyledUserName",componentId:"sc-1jcgbgj-3"})(["font-size:","px;font-weight:500;color:",";font-weight:500;"],C.fontSizes.small,C.colors.label),k=y.default.span.withConfig({displayName:"Compact__Separator",componentId:"sc-1jcgbgj-4"})(["margin-left:4px;margin-right:4px;"]),I=y.default.span.withConfig({displayName:"Compact__TimeAgo",componentId:"sc-1jcgbgj-5"})(["font-weight:500;margin-right:5px;"]),M=y.default.div.withConfig({displayName:"Compact__ImagePlaceholderContainer",componentId:"sc-1jcgbgj-6"})(["width:100%;height:100%;flex:1;display:flex;align-items:center;justify-content:center;background:",";"],(0,w.transparentize)(.94,C.colors.label)),E=(0,y.default)(d.Icon).withConfig({displayName:"Compact__ImagePlaceholderIcon",componentId:"sc-1jcgbgj-7"})(["width:34px;fill:",";"],(0,w.transparentize)(.62,C.colors.label)),N=(0,o.memo)((function(e){var t,a,n,r,i,d,s,m=e.ideaId,y=e.localize,P=e.className,N=e.participationMethod,S=e.participationContextId,D=e.participationContextType,T=e.hideImage,q=e.hideImagePlaceholder,R=e.hideIdeaStatus,B=(0,f.default)({ideaId:m}),F=(0,p.default)({ideaId:m,ideaImageId:(0,v.get)(B,"relationships.idea_images.data[0].id")});if((0,b.isNilOrError)(B))return null;var V=null===(t=B.relationships.author.data)||void 0===t?void 0:t.id,A=y(B.attributes.title_multiloc),W=y(B.attributes.body_multiloc).replace(/<[^>]*>?/gm,"").replaceAll("&amp;","&").trim(),z=null==B||null===(a=B.attributes)||void 0===a||null===(n=a.action_descriptor)||void 0===n?void 0:n.voting_idea,U=null==B||null===(r=B.attributes)||void 0===r||null===(i=r.action_descriptor)||void 0===i?void 0:i.commenting_idea,L=[P,"e2e-idea-card",null!=B&&null!==(d=B.relationships)&&void 0!==d&&null!==(s=d.user_vote)&&void 0!==s&&s.data?"voted":"not-voted",U&&U.enabled?"e2e-comments-enabled":"e2e-comments-disabled",B.attributes.comments_count>0?"e2e-has-comments":null,z&&z.downvoting_enabled?"e2e-downvoting-enabled":"e2e-downvoting-disabled"].filter((function(e){return"string"==typeof e&&""!==e})).join(" ");return o.default.createElement(l.default,{onClick:function(e){e.preventDefault(),h.default.emit("cardClick",{id:B.id,slug:B.attributes.slug,type:"idea"})},className:L,title:A,to:"/ideas/".concat(B.attributes.slug),image:(0,b.isNilOrError)(F)?null:F.attributes.versions.large,imagePlaceholder:o.default.createElement(M,null,o.default.createElement(E,{name:"budgeting"===N?"moneybag":"idea"})),hideImage:T,hideImagePlaceholder:q,body:o.default.createElement(x,null,V&&o.default.createElement(_,{size:36,userId:V,hideIfNoAvatar:!0,fillColor:(0,w.transparentize)(.6,C.colors.label)}),o.default.createElement(O,null,o.default.createElement(j,{userId:V||null}),o.default.createElement(k,{"aria-hidden":!0},"•"),o.default.createElement(I,null,o.default.createElement(g.FormattedRelative,{value:B.attributes.created_at,style:"numeric"})),W)),footer:"budgeting"===N?o.default.createElement(c.default,{idea:B,participationContextId:S,participationContextType:D}):"ideation"===N?o.default.createElement(u.default,{idea:B,hideIdeaStatus:R}):o.default.createElement(o.default.Fragment,null)})})),S=(0,m.default)(N);t.default=S},XtmO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={toggleDisplay:"Changed idea/initiative cards display mode"}},anjn:function(e,t,a){"use strict";a("2B1R"),a("SuFq"),a("pNMO"),a("5DmW"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("QILm"));a("ToJy"),a("FZtP"),a("TeQF"),a("tkto"),a("rB9j"),a("hByQ");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("PJYZ")),d=n(a("7W2i")),s=n(a("a1gu")),u=n(a("Nsbk")),c=n(a("lSNA")),f=n(a("q1tI")),p=a("T89o"),m=a("DtyJ"),g=a("ahDk"),v=a("ngE2"),h=(a("uZm3"),a("ErwY")),b=["children"],y=["children"];function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var x=function(e){(0,d.default)(a,e);var t=P(a);function a(e){var n;(0,o.default)(this,a),n=t.call(this,e),(0,c.default)((0,l.default)(n),"defaultQueryParameters",void 0),(0,c.default)((0,l.default)(n),"queryParameters$",void 0),(0,c.default)((0,l.default)(n),"subscriptions",void 0),(0,c.default)((0,l.default)(n),"propsToQueryParamsShape",(function(){return{projects:n.props.projectIds,"page[number]":n.props.pageNumber,"page[size]":n.props.pageSize,phase:n.props.phaseId,author:n.props.authorId,sort:n.props.sort,topics:n.props.topics,areas:n.props.areas,idea_status:n.props.ideaStatusId,publication_status:n.props.publicationStatus,project_publication_status:n.props.projectPublicationStatus,bounding_box:n.props.boundingBox,assignee:n.props.assignee,feedback_needed:n.props.feedbackNeeded,search:void 0}})),(0,c.default)((0,l.default)(n),"getQueryParametersFromProps",(function(){var e=n.propsToQueryParamsShape();return Object.keys(e).filter((function(t){return null===e[t]})).forEach((function(t){return e[t]=void 0})),e})),(0,c.default)((0,l.default)(n),"getQueryParameters",(function(e,t){var a=void 0;(0,p.isNil)(t.projectIds)?a=e.projects:(0,p.isArray)(t.projectIds)&&(a=t.projectIds);var n={projects:a,"page[number]":t.pageNumber,"page[size]":t.pageSize,phase:t.phaseId,author:t.authorId,sort:t.sort,search:t.search,topics:t.topics,areas:t.areas,idea_status:t.ideaStatusId,publication_status:t.publicationStatus,project_publication_status:t.projectPublicationStatus,bounding_box:t.boundingBox,assignee:t.assignee,feedback_needed:t.feedbackNeeded};return C(C(C({},e),(0,p.omitBy)(n,p.isNil)),{},{projects:a})})),(0,c.default)((0,l.default)(n),"loadMore",(function(){n.state.loadingMore||n.queryParameters$.next(C(C({},n.state.queryParameters),{},{"page[number]":n.state.queryParameters["page[number]"]+1}))})),(0,c.default)((0,l.default)(n),"handleChangePage",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{"page[number]":e}))})),(0,c.default)((0,l.default)(n),"handlePhaseOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{phase:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleSearchOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{search:e||void 0,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleSortOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{sort:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleProjectsOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{projects:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleTopicsOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{topics:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleAreasOnchange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{areas:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleStatusOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{idea_status:e||void 0,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handlePublicationStatusOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{publication_status:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleProjectPublicationStatusOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{project_publication_status:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleAssigneeOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{assignee:e,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleFeedbackFilterOnChange",(function(e){n.queryParameters$.next(C(C({},n.state.queryParameters),{},{feedback_needed:e||void 0,"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleIdeaFiltering",(function(e){n.queryParameters$.next(C(C(C({},n.state.queryParameters),e),{},{"page[number]":1}))})),(0,c.default)((0,l.default)(n),"handleResetParamsToProps",(function(e){var t=n.getQueryParametersFromProps();e&&e.length>0?n.queryParameters$.next(C(C({},n.state.queryParameters),(0,p.omit)(t,e))):n.queryParameters$.next(t)})),n.defaultQueryParameters={"page[number]":e.pageNumber,"page[size]":e.pageSize,sort:e.sort,projects:void 0,phase:void 0,author:void 0,search:void 0,topics:void 0,areas:void 0,idea_status:void 0,publication_status:void 0,project_publication_status:void 0,bounding_box:void 0,assignee:void 0,feedback_needed:void 0};var r=n.getQueryParameters(n.defaultQueryParameters,e);return n.state={queryParameters:r,list:void 0,hasMore:!1,querying:!0,loadingMore:!1,sortAttribute:(0,h.getSortAttribute)(e.sort),sortDirection:(0,h.getSortDirection)(e.sort),currentPage:1,lastPage:1},n.queryParameters$=new m.BehaviorSubject(r),n.subscriptions=[],n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t={queryParameters:this.getQueryParameters(this.state.queryParameters,this.props),ideas:null,hasMore:!1},a=this.queryParameters$.pipe((0,g.distinctUntilChanged)((function(e,t){return(0,p.isEqual)(e,t)})));this.props.type&&"load-more"!==this.props.type?this.subscriptions=[a.pipe((0,g.switchMap)((function(t){var a=e.state.queryParameters["page[number]"],n=t["page[number]"];return t["page[number]"]=n!==a?n:1,(e.props.mini?v.ideasMiniStream:v.ideasStream)({queryParameters:t}).observable.pipe((0,g.map)((function(e){return{queryParameters:t,ideas:e}})))}))).subscribe((function(t){var a=t.ideas,n=t.queryParameters;e.setState({queryParameters:n,list:a?a.data:null,querying:!1,loadingMore:!1,sortAttribute:(0,h.getSortAttribute)(n.sort),sortDirection:(0,h.getSortDirection)(n.sort),currentPage:(0,h.getPageNumberFromUrl)(a.links.self)||1,lastPage:(0,h.getPageNumberFromUrl)(a.links.last)||1})}))]:this.subscriptions=[a.pipe((0,g.mergeScan)((function(t,a){var n=(0,p.omit)((0,p.cloneDeep)(t.queryParameters),"page[number]"),r=(0,p.omit)((0,p.cloneDeep)(a),"page[number]"),o=t.queryParameters["page[number]"],i=a["page[number]"],l=(0,p.isEqual)(n,r)&&o!==i,d=l?a["page[number]"]:1,s=C(C({},a),{},{"page[number]":d});return e.setState({querying:!l,loadingMore:l}),(e.props.mini?v.ideasMiniStream:v.ideasStream)({queryParameters:s}).observable.pipe((0,g.map)((function(e){var a=(0,p.get)(e,"links.self"),n=(0,p.get)(e,"links.last"),r=(0,p.isString)(a)&&(0,p.isString)(n)&&a!==n;return{queryParameters:s,hasMore:r,ideas:l?(0,p.unionBy)(t.ideas||[],e.data,"id"):e.data}})))}),t)).subscribe((function(t){var a=t.ideas,n=t.queryParameters,r=t.hasMore;e.setState({queryParameters:n,hasMore:r,list:a,querying:!1,loadingMore:!1})}))]}},{key:"componentDidUpdate",value:function(e,t){e.children;var a=(0,r.default)(e,b),n=this.props,o=(n.children,(0,r.default)(n,y));if(!(0,p.isEqual)(a,o)){var i=this.getQueryParameters(this.state.queryParameters,this.props);this.queryParameters$.next(i)}}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(C(C({},this.state),{},{onLoadMore:this.loadMore,onChangePage:this.handleChangePage,onChangeProjects:this.handleProjectsOnChange,onChangePhase:this.handlePhaseOnChange,onChangeSearchTerm:this.handleSearchOnChange,onChangeSorting:this.handleSortOnChange,onChangeTopics:this.handleTopicsOnChange,onChangeAreas:this.handleAreasOnchange,onChangeStatus:this.handleStatusOnChange,onChangePublicationStatus:this.handlePublicationStatusOnChange,onChangeProjectPublicationStatus:this.handleProjectPublicationStatusOnChange,onChangeAssignee:this.handleAssigneeOnChange,onChangeFeedbackFilter:this.handleFeedbackFilterOnChange,onIdeaFiltering:this.handleIdeaFiltering,onResetParams:this.handleResetParamsToProps,type:"ideas"}))}}]),a}(f.default.Component);t.default=x,(0,c.default)(x,"defaultProps",{pageNumber:1,pageSize:12,sort:"random"})},dcoO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({votingDisabledProjectInactive:{id:"app.components.VoteControl.votingDisabledProjectInactive",defaultMessage:"You can no longer vote on ideas in {projectName}"},votingDisabledPhaseOver:{id:"app.components.VoteControl.votingDisabledPhaseOver",defaultMessage:"It's no longer possible to vote in this phase"},votingDisabledFutureEnabled:{id:"app.components.VoteControl.votingDisabledFutureEnabled",defaultMessage:"Voting will be enabled once this phase starts"},votingPossibleLater:{id:"app.components.VoteControl.votingPossibleLater",defaultMessage:"Voting will start on {enabledFromDate}"},votingNotEnabled:{id:"app.components.VoteControl.votingNotEnabled",defaultMessage:"Voting is currently not enabled for this project"},votingDisabledMaxReached:{id:"app.components.VoteControl.votingDisabledMaxReached",defaultMessage:"You've reached your maximum number of votes in {projectName}"},votingNotPermitted:{id:"app.components.VoteControl.votingNotPermitted",defaultMessage:"Voting is only enabled for certain groups"},votingNotVerified:{id:"app.components.VoteControl.votingNotVerified",defaultMessage:"{linkToVerification} in order to vote."},linkToVerificationText:{id:"app.components.VoteControl.linkToVerificationText",defaultMessage:"Verify your identity"},upvote:{id:"app.components.VoteControl.upvote",defaultMessage:"Upvote"},downvote:{id:"app.components.VoteControl.downvote",defaultMessage:"Downvote"},a11y_upvotesDownvotes:{id:"app.containers.VoteControl.a11y_upvotesDownvotes",defaultMessage:"Total upvotes: {upvotesCount}, total downvotes: {downvotesCount}"},voteSuccessTitle:{id:"app.containers.VoteControl.voteSuccessTitle",defaultMessage:"Your vote was successfully registered!"},voteErrorTitle:{id:"app.containers.VoteControl.voteErrorTitle",defaultMessage:"Something went wrong"},voteErrorSubTitle:{id:"app.containers.VoteControl.voteErrorSubTitle",defaultMessage:"Due to an error your vote could not being registered. Please try again in a few minutes."},close:{id:"app.containers.VoteControl.close",defaultMessage:"Close"}});t.default=n},etVs:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ideaId,a=e.ideaImageId,n=(0,o.useState)(void 0),s=(0,r.default)(n,2),u=s[0],c=s[1];return(0,o.useEffect)((function(){c(void 0);var e=(0,l.of)(null);t&&a&&(e=(0,d.ideaImageStream)(t,a).observable);var n=e.subscribe((function(e){var t=(0,i.isNilOrError)(e)?e:e.data;c(t)}));return function(){return n.unsubscribe()}}),[t,a]),u};var r=n(a("J4zp")),o=a("q1tI"),i=a("KLnl"),l=a("DtyJ"),d=a("EP0W")},kemx:function(e,t,a){"use strict";a("yq1k"),a("JTJg"),a("4mDm"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("o0o1"));a("07d7"),a("5s+n"),a("2B1R"),a("TeQF"),a("ma9I");var i,l=n(a("RIqP")),d=n(a("yXPU")),s=n(a("J4zp")),u=n(a("VkAN")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=q(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),f=a("T89o"),p=a("KLnl"),m=n(a("2fl8")),g=a("MfpC"),v=a("FSpq"),h=n(a("uN1B")),b=n(a("I9mC")),y=n(a("JvRQ")),w=n(a("38aM")),C=n(a("kqpI")),P=n(a("x3zm")),x=n(a("dpb+")),_=a("KuRP"),O=n(a("Y+nY")),j=n(a("1Kqg")),k=a("q3BX"),I=a("Rw3A"),M=n(a("4sB7")),E=n(a("6L1S")),N=n(a("vOnD")),S=a("96Cm"),D=a("+9pX"),T=n(a("2AJv"));function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(q=function(e){return e?a:t})(e)}var R=N.default.div.withConfig({displayName:"AssignBudgetControl__IdeaCardContainer",componentId:"sc-1e5jska-0"})(["display:flex;align-items:center;"]),B=N.default.div.withConfig({displayName:"AssignBudgetControl__IdeaPageContainer",componentId:"sc-1e5jska-1"})(["display:flex;flex-direction:column;align-items:stretch;",""],S.media.smallerThanMaxTablet(i||(i=(0,u.default)(["\n    padding: 20px;\n    background: ",";\n  "])),S.colors.backgroundLightGrey)),F=N.default.div.withConfig({displayName:"AssignBudgetControl__BudgetWithButtonWrapper",componentId:"sc-1e5jska-2"})(["width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:center;"]),V=N.default.div.withConfig({displayName:"AssignBudgetControl__Budget",componentId:"sc-1e5jska-3"})(["width:100%;height:90px;color:",";font-size:","px;font-weight:600;text-align:center;display:flex;align-items:center;justify-content:center;margin-bottom:3px;",";"],(function(e){return e.theme.colorText}),S.fontSizes.medium,S.defaultCardStyle),A=(0,N.default)(T.default).withConfig({displayName:"AssignBudgetControl__StyledPBExpenses",componentId:"sc-1e5jska-4"})(["margin-top:25px;padding:20px;"]),W=(0,c.memo)((function(e){var t,a,n,r=e.view,i=e.ideaId,u=e.authUser,h=e.tenant,b=e.locale,y=e.idea,w=e.phases,P=e.participationContext,x=e.participationContextId,N=e.participationContextType,T=e.intl,q=e.className,W=(0,C.default)(null==P||null===(t=P.relationships)||void 0===t||null===(a=t.user_basket)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.id),z=(0,c.useState)(!1),U=(0,s.default)(z,2),L=U[0],$=U[1],J=function(){var e=(0,d.default)(o.default.mark((function e(){var t,a,n,r,s,c,m,g,h;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},a=function(){var e=(0,d.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(200);case 2:$(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),(0,p.isNilOrError)(y)){e.next=39;break}if(s=null===(n=y.attributes.action_descriptor.budgeting)||void 0===n?void 0:n.enabled,c=(0,p.isNilOrError)(W)?[]:W.relationships.ideas.data.map((function(e){return e.id})),m=(0,f.includes)(c,i),g=null===(r=y.attributes.action_descriptor.budgeting)||void 0===r?void 0:r.disabled_reason,!(0,p.isNilOrError)(u)&&"not_verified"!==g){e.next=11;break}(0,k.openSignUpInModal)({verification:"not_verified"===g,verificationContext:"not_verified"===g?{action:"budgeting",id:x,type:N}:void 0}),e.next=39;break;case 11:if((0,p.isNilOrError)(u)||!s){e.next=39;break}if($(!0),(0,p.isNilOrError)(W)){e.next=29;break}return h=[],h=m?W.relationships.ideas.data.filter((function(e){return e.id!==y.id})).map((function(e){return e.id})):[].concat((0,l.default)(W.relationships.ideas.data.map((function(e){return e.id}))),[y.id]),e.prev=16,e.next=19,(0,v.updateBasket)(W.id,{user_id:u.id,participation_context_id:x,participation_context_type:(0,p.capitalizeParticipationContextType)(N),idea_ids:h,submitted_at:null});case 19:a(),(0,_.trackEventByName)(O.default.ideaAddedToBasket),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(16),a(),j.default.fetchAllWith({dataId:[W.id]});case 27:e.next=39;break;case 29:return e.prev=29,e.next=32,(0,v.addBasket)({user_id:u.id,participation_context_id:x,participation_context_type:(0,p.capitalizeParticipationContextType)(N),idea_ids:[y.id]});case 32:a(),(0,_.trackEventByName)(O.default.basketCreated),e.next=39;break;case 36:e.prev=36,e.t1=e.catch(29),a();case 39:case"end":return e.stop()}}),e,null,[[16,23],[29,36]])})));return function(){return e.apply(this,arguments)}}();if(!(0,f.isUndefined)(u)&&!(0,p.isNilOrError)(b)&&!(0,p.isNilOrError)(h)&&!(0,p.isNilOrError)(y)&&!(0,f.isUndefined)(W)&&y.attributes.budget){var H,Q,K,Z,X,Y=(0,p.isNilOrError)(W)?[]:W.relationships.ideas.data.map((function(e){return e.id})),G=(0,f.includes)(Y,i),ee=null===(H=y.attributes.action_descriptor.budgeting)||void 0===H?void 0:H.enabled,te=!!u,ae="not_permitted"!==(null===(Q=y.attributes.action_descriptor.budgeting)||void 0===Q?void 0:Q.disabled_reason),ne=!(null===(K=y.attributes.action_descriptor.budgeting)||void 0===K||!K.disabled_reason),re="budgeting"===(null==P||null===(Z=P.attributes)||void 0===Z?void 0:Z.participation_method),oe=(null===(X=(0,g.getCurrentPhase)(w))||void 0===X?void 0:X.id)===(null==P?void 0:P.id),ie="project"===N&&"archived"!==P.attributes.publication_status||oe;if(re){var le=ie&&ae?c.default.createElement(m.default,{onClick:function(e){null==e||e.preventDefault(),J()},disabled:te&&!ee&&!ne,processing:L,bgColor:G?S.colors.clRedError:S.colors.clGreen,iconSize:"18px",icon:G?"basket-minus":"basket-plus",className:"e2e-assign-budget-button ".concat(G?"in-basket":"not-in-basket"),ariaLabel:T.formatMessage(G?M.default.removeFromMyBasket:M.default.addToMyBasket)},c.default.createElement(I.FormattedMessage,G?"ideaCard"===r?M.default.remove:M.default.removeFromMyBasket:"ideaCard"===r?M.default.add:M.default.addToMyBasket)):null;if("ideaCard"===r)return c.default.createElement(R,{className:"e2e-assign-budget ".concat(q||""),"aria-live":"polite"},le);if("ideaPage"===r)return c.default.createElement(B,{className:"pbAssignBudgetControlContainer e2e-assign-budget ".concat(q||""),"aria-live":"polite"},c.default.createElement(F,null,c.default.createElement(V,null,c.default.createElement(D.ScreenReaderOnly,null,c.default.createElement(I.FormattedMessage,M.default.a11y_price)),c.default.createElement(E.default,{value:y.attributes.budget})),le),ae&&c.default.createElement(A,{participationContextId:x,participationContextType:N,viewMode:"column"}))}}return null})),z=(0,c.memo)((function(e){var t,a,n,r=e.view,o=e.projectId,i=e.ideaId,l=e.className,d=e.intl,s=(0,h.default)(),u=(0,b.default)(),m=(0,y.default)(),v=(0,w.default)({ideaId:i}),C=(0,P.default)({projectId:o}),_=(0,x.default)(o),O="continuous"===(null==C?void 0:C.attributes.process_type),j=(0,p.isNilOrError)(v)?null:null==v||null===(t=v.relationships)||void 0===t||null===(a=t.phases)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.map((function(e){return e.id})),k=(0,p.isNilOrError)(_)?null:null==_?void 0:_.filter((function(e){return(0,f.includes)(j,e.id)})),I=k?(0,g.getLatestRelevantPhase)(k):null,M=O?C:I,E=O?"project":"phase",N=(null==M?void 0:M.id)||null;return(0,p.isUndefinedOrError)(s)||(0,p.isNilOrError)(u)||(0,p.isNilOrError)(m)||(0,p.isNilOrError)(v)||(0,p.isNilOrError)(C)||(0,p.isUndefinedOrError)(_)||!M||!N?null:c.default.createElement(W,{view:r,projectId:o,ideaId:i,authUser:s,tenant:u.data,locale:m,idea:v,project:C,phases:_,participationContext:M,participationContextType:E,participationContextId:N,intl:d,className:l})})),U=(0,I.injectIntl)(z);t.default=U},lq1v:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.voteStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d.default.get(c({apiEndpoint:"".concat(l.API_PATH,"/votes/").concat(e)},t))},t.votesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d.default.get(c({apiEndpoint:"".concat(l.API_PATH,"/ideas/").concat(e,"/votes")},t))},t.addVote=function(e,t){return f.apply(this,arguments)},t.deleteVote=function(e,t){return p.apply(this,arguments)};var r=n(a("o0o1"));a("ma9I"),a("TWNs"),a("rB9j"),a("JfAA");var o=n(a("yXPU")),i=n(a("lSNA")),l=a("p0gT"),d=n(a("1Kqg")),s=a("KLnl");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(){return(f=(0,o.default)(r.default.mark((function e(t,a){var n,o,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]&&u[2],e.next=3,d.default.add("".concat(l.API_PATH,"/ideas/").concat(t,"/votes"),{vote:a});case 3:return o=e.sent,n&&(i=new RegExp("/ideas/".concat(s.uuidRegExp,"$")),d.default.fetchAllWith({regexApiEndpoint:[i],onlyFetchActiveStreams:!0})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,o.default)(r.default.mark((function e(t,a){var n,o,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]&&u[2],e.next=3,d.default.delete("".concat(l.API_PATH,"/votes/").concat(a),a);case 3:return o=e.sent,n&&(i=new RegExp("/ideas/".concat(s.uuidRegExp,"$")),d.default.fetchAllWith({regexApiEndpoint:[i],onlyFetchActiveStreams:!0})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},tzUK:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("oVuX"),a("TeQF");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=a("iP56"),l=n(a("9Y8i")),d=n(a("CmRk")),s=n(a("vOnD")),u=a("96Cm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}var f=s.default.footer.withConfig({displayName:"FooterWithVoteControl__Container",componentId:"tzi27k-0"})(["display:flex;align-items:center;"]),p=s.default.div.withConfig({displayName:"FooterWithVoteControl__Left",componentId:"tzi27k-1"})(["flex:1;display:flex;align-items:center;"]),m=s.default.span.withConfig({displayName:"FooterWithVoteControl__CommentsCount",componentId:"tzi27k-2"})(["color:",";font-size:","px;display:flex;flex-direction:row;align-items:center;margin:0;"],u.colors.label,u.fontSizes.base),g=(0,s.default)(i.Icon).withConfig({displayName:"FooterWithVoteControl__CommentIcon",componentId:"tzi27k-3"})(["width:20px;height:20px;fill:",";margin-right:8px;"],u.colors.label),v=s.default.div.withConfig({displayName:"FooterWithVoteControl__Right",componentId:"tzi27k-4"})(["display:flex;align-items:center;"]),h=(0,s.default)(l.default).withConfig({displayName:"FooterWithVoteControl__StyledStatusBadge",componentId:"tzi27k-5"})(["display:block;margin-left:25px;"]),b=(0,s.default)(d.default).withConfig({displayName:"FooterWithVoteControl__StyledVoteControl",componentId:"tzi27k-6"})(["margin-right:30px;"]),y=(0,o.memo)((function(e){var t,a,n,r,i=e.idea,l=e.hideIdeaStatus,d=e.className,s=null==i||null===(t=i.relationships)||void 0===t||null===(a=t.idea_status)||void 0===a?void 0:a.data.id,u=null==i||null===(n=i.attributes)||void 0===n||null===(r=n.action_descriptor)||void 0===r?void 0:r.commenting_idea,c=!(!u.enabled&&"not_signed_in"!==u.disabled_reason);return o.default.createElement(f,{className:d||""},o.default.createElement(p,null,o.default.createElement(b,{styleType:"border",ideaId:i.id,size:"1",ariaHidden:!0}),o.default.createElement(m,{className:["e2e-ideacard-comment-count",c?"enabled":"disabled"].filter((function(e){return e})).join(" ")},o.default.createElement(g,{name:"comments"}),i.attributes.comments_count)),!l&&o.default.createElement(v,null,o.default.createElement(h,{statusId:s})))}));t.default=y},zAZl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={loadMoreIdeas:"Load more ideas button clicked",sortingFilter:"Clicked idea cards sort filter",topicsFilter:"Clicked idea cards topics filter"}}}]);
//# sourceMappingURL=21.cdfc8e595d23da9fde9a.chunk.js.map