{"version":3,"sources":["webpack:///./app/containers/Admin/projects/edit/volunteering/EditCause.tsx","webpack:///./app/containers/Admin/projects/edit/volunteering/messages.ts","webpack:///./app/services/causes.ts","webpack:///./app/hooks/useCause.ts"],"names":["Container","styled","div","ButtonContainer","EditCause","memo","props","formatMessage","intl","causeId","params","projectId","cause","useState","touched","setTouched","processing","setProcessing","errors","setErrors","title_multiloc","description_multiloc","image","formValues","setFormValues","useEffect","isNilOrError","attributes","large","convertUrlToUploadFile","handleTitleOnChange","useCallback","prevFormValues","handleDescriptionOnChange","_locale","handleImageOnAdd","images","handleImageOnRemove","handleOnSubmit","updateCause","base64","then","clHistory","push","catch","errorResponse","json","SectionTitle","FormattedMessage","messages","editCauseTitle","SectionDescription","editCauseSubtitle","Section","SectionField","type","id","valueMultiloc","onChange","label","causeTitleLabel","fieldName","apiErrors","causeDescriptionLabel","labelTooltipText","causeDescriptionTooltip","withCTAButton","Label","causeImageLabel","acceptedFileTypes","imagePreviewRatio","maxImagePreviewWidth","onAdd","onRemove","buttonStyle","onClick","disabled","saveCause","isEmpty","text","causeErrorMessage","showBackground","showIcon","withRouter","injectIntl","defineMessages","titleVolunteeringTab","defaultMessage","subtitleVolunteeringTab","exportVolunteers","addCauseButton","editButtonLabel","deleteButtonLabel","xVolunteers","causeDeletionConfirmation","newCauseTitle","newCauseSubtitle","streams","get","apiEndpoint","participationContextType","participationContextId","streamParams","API_PATH","delete","ordering","update","object","add","stream","fetchAllWith","regexApiEndpoint","dataId","undefined","setCause","subscription","causeByIdStream","observable","subscribe","data","unsubscribe"],"mappings":"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","file":"139.84760b2c785ffc8eb229.chunk.js","sourcesContent":["import React, { memo, useCallback, useState, useEffect } from 'react';\nimport { isEmpty } from 'lodash-es';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport clHistory from 'utils/cl-router/history';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { convertUrlToUploadFile } from 'utils/fileTools';\n\n// Services\nimport { updateCause } from 'services/causes';\nimport useCause from 'hooks/useCause';\n\n// Components\nimport {\n  Section,\n  SectionField,\n  SectionTitle,\n  SectionDescription,\n} from 'components/admin/Section';\nimport QuillMultilocWithLocaleSwitcher from 'components/UI/QuillEditor/QuillMultilocWithLocaleSwitcher';\nimport InputMultilocWithLocaleSwitcher from 'components/UI/InputMultilocWithLocaleSwitcher';\nimport Button from 'components/UI/Button';\nimport Error from 'components/UI/Error';\nimport { Label } from 'cl2-component-library';\nimport ImagesDropzone from 'components/UI/ImagesDropzone';\n\n// i18n\nimport { injectIntl, FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport { InjectedIntlProps } from 'react-intl';\n\n// Styling\nimport styled from 'styled-components';\n\n// Typing\nimport { Multiloc, Locale, UploadFile } from 'typings';\n\nconst Container = styled.div``;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n`;\n\ninterface Props {\n  className?: string;\n}\n\ninterface IFormValues {\n  title_multiloc: Multiloc | null;\n  description_multiloc: Multiloc | null;\n  image: UploadFile | null;\n}\n\nconst EditCause = memo<Props & InjectedIntlProps & WithRouterProps>((props) => {\n  const {\n    intl: { formatMessage },\n  } = props;\n  const causeId = props.params.causeId;\n  const projectId = props.params.projectId;\n  const cause = useCause({ causeId });\n\n  const [touched, setTouched] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [errors, setErrors] = useState<{ [key: string]: any }>({});\n  const [formValues, setFormValues] = useState<IFormValues>({\n    title_multiloc: null,\n    description_multiloc: null,\n    image: null,\n  });\n\n  // Load the API cause object in the local form values\n  useEffect(() => {\n    if (!processing) {\n      (async () => {\n        if (!isNilOrError(cause)) {\n          let image: UploadFile | null = null;\n          if (cause.attributes.image?.large) {\n            image = await convertUrlToUploadFile(cause.attributes.image.large);\n          }\n          setFormValues({\n            image,\n            title_multiloc: cause.attributes.title_multiloc,\n            description_multiloc: cause.attributes.description_multiloc,\n          });\n        }\n      })();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cause]);\n\n  const handleTitleOnChange = useCallback((title_multiloc: Multiloc) => {\n    setTouched(true);\n    setFormValues((prevFormValues) => ({\n      ...prevFormValues,\n      title_multiloc,\n    }));\n  }, []);\n\n  const handleDescriptionOnChange = useCallback(\n    (description_multiloc: Multiloc, _locale: Locale) => {\n      setTouched(true);\n      setFormValues((prevFormValues) => ({\n        ...prevFormValues,\n        description_multiloc,\n      }));\n    },\n    []\n  );\n\n  const handleImageOnAdd = useCallback((images: UploadFile[]) => {\n    setTouched(true);\n    setFormValues((prevFormValues) => ({\n      ...prevFormValues,\n      image: images[0],\n    }));\n  }, []);\n\n  const handleImageOnRemove = useCallback(() => {\n    setTouched(true);\n    setFormValues((prevFormValues) => ({\n      ...prevFormValues,\n      image: null,\n    }));\n  }, []);\n\n  const handleOnSubmit = useCallback(() => {\n    const { title_multiloc, description_multiloc, image } = formValues;\n\n    if (!processing && title_multiloc && description_multiloc) {\n      setProcessing(true);\n      setErrors({});\n\n      updateCause(causeId, {\n        description_multiloc,\n        title_multiloc,\n        image: image?.base64,\n      })\n        .then(() => {\n          setProcessing(false);\n          setErrors({});\n          setTouched(false);\n          clHistory.push(`/admin/projects/${projectId}/volunteering`);\n        })\n        .catch((errorResponse) => {\n          setProcessing(false);\n          setErrors(errorResponse?.json?.errors || {});\n        });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [formValues, processing]);\n\n  return (\n    <Container>\n      <SectionTitle>\n        <FormattedMessage {...messages.editCauseTitle} />\n      </SectionTitle>\n      <SectionDescription>\n        <FormattedMessage {...messages.editCauseSubtitle} />\n      </SectionDescription>\n\n      <Section>\n        <SectionField>\n          <InputMultilocWithLocaleSwitcher\n            type=\"text\"\n            id=\"cause-title\"\n            valueMultiloc={formValues.title_multiloc}\n            onChange={handleTitleOnChange}\n            label={formatMessage(messages.causeTitleLabel)}\n          />\n          <Error\n            fieldName=\"title_multiloc\"\n            apiErrors={errors?.title_multiloc}\n          />\n        </SectionField>\n\n        <SectionField>\n          <QuillMultilocWithLocaleSwitcher\n            id=\"cause-description\"\n            valueMultiloc={formValues.description_multiloc}\n            onChange={handleDescriptionOnChange}\n            label={formatMessage(messages.causeDescriptionLabel)}\n            labelTooltipText={formatMessage(messages.causeDescriptionTooltip)}\n            withCTAButton\n          />\n          <Error\n            fieldName=\"description_multiloc\"\n            apiErrors={errors?.description_multiloc}\n          />\n        </SectionField>\n        <SectionField>\n          <Label>\n            <FormattedMessage {...messages.causeImageLabel} />\n          </Label>\n          <ImagesDropzone\n            acceptedFileTypes=\"image/jpg, image/jpeg, image/png, image/gif\"\n            images={formValues.image ? [formValues.image] : null}\n            imagePreviewRatio={120 / 480}\n            maxImagePreviewWidth=\"500px\"\n            onAdd={handleImageOnAdd}\n            onRemove={handleImageOnRemove}\n          />\n        </SectionField>\n      </Section>\n\n      <ButtonContainer>\n        <Button\n          buttonStyle=\"admin-dark\"\n          onClick={handleOnSubmit}\n          processing={processing}\n          disabled={!touched}\n        >\n          <FormattedMessage {...messages.saveCause} />\n        </Button>\n\n        {!isEmpty(errors) && (\n          <Error\n            text={formatMessage(messages.causeErrorMessage)}\n            showBackground={false}\n            showIcon={false}\n          />\n        )}\n      </ButtonContainer>\n    </Container>\n  );\n});\n\nexport default withRouter(injectIntl(EditCause));\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  titleVolunteeringTab: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.titleVolunteeringTab',\n    defaultMessage: 'Volunteering',\n  },\n  subtitleVolunteeringTab: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.subtitleVolunteeringTab',\n    defaultMessage:\n      'Here, you can set up the causes users can volunteer for and download the volunteers.',\n  },\n  exportVolunteers: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.exportVolunteers',\n    defaultMessage: 'Export volunteers',\n  },\n  addCauseButton: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.addCauseButton',\n    defaultMessage: 'Add cause',\n  },\n  editButtonLabel: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.editButtonLabel',\n    defaultMessage: 'Edit',\n  },\n  deleteButtonLabel: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.deleteButtonLabel',\n    defaultMessage: 'Delete',\n  },\n  xVolunteers: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.xVolunteers',\n    defaultMessage:\n      '{x, plural, =0 {no volunteers} one {# volunteer} other {# volunteers}}',\n  },\n  causeDeletionConfirmation: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDeletionConfirmation',\n    defaultMessage: 'Are you sure?',\n  },\n  newCauseTitle: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseTitle',\n    defaultMessage: 'New cause',\n  },\n  newCauseSubtitle: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseSubtitle',\n    defaultMessage:\n      'A cause is an action or activity that citizens can volunteer to.',\n  },\n  editCauseTitle: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseTitle',\n    defaultMessage: 'Edit cause',\n  },\n  editCauseSubtitle: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseSubtitle',\n    defaultMessage:\n      'A cause is an action or activity that citizens can volunteer to.',\n  },\n  causeTitleLabel: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeTitleLabel',\n    defaultMessage: 'Title',\n  },\n  causeDescriptionLabel: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionLabel',\n    defaultMessage: 'Description',\n  },\n  causeDescriptionTooltip: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionTooltip',\n    defaultMessage:\n      'Use this explain what is required from volunteers and what they can expect.',\n  },\n  causeImageLabel: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeImageLabel',\n    defaultMessage: 'Image',\n  },\n  saveCause: {\n    id: 'app.containers.AdminPage.ProjectEdit.VolunteeringTab.saveCause',\n    defaultMessage: 'Save',\n  },\n  causeErrorMessage: {\n    id:\n      'app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeErrorMessage',\n    defaultMessage: \"Couldn't save because the form contains errors.\",\n  },\n});\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { Multiloc, ImageSizes } from 'typings';\n\nconst apiEndpoint = `${API_PATH}/causes`;\n\nexport interface ICauseData {\n  id: string;\n  type: string;\n  attributes: {\n    title_multiloc: Multiloc;\n    description_multiloc: Multiloc;\n    image: ImageSizes;\n    volunteers_count: number;\n    ordering: number;\n  };\n  relationships: {\n    participation_context: {\n      data: {\n        type: 'project' | 'phase';\n        id: string;\n      };\n    };\n    user_volunteer?: {\n      data: null | {\n        id: string;\n      };\n    };\n  };\n}\n\nexport interface ICauseLinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface ICauses {\n  data: ICauseData[];\n  links: ICauseLinks;\n}\n\nexport interface ICause {\n  data: ICauseData;\n}\n\nexport function causeByIdStream(causeId: string) {\n  return streams.get<ICause>({ apiEndpoint: `${apiEndpoint}/${causeId}` });\n}\n\nexport function causesStream(\n  participationContextType: 'project' | 'phase',\n  participationContextId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<ICauses>({\n    apiEndpoint: `${API_PATH}/${participationContextType}s/${participationContextId}/causes`,\n    ...streamParams,\n  });\n}\n\nexport async function addCause(object) {\n  const stream = await streams.add<ICause>(apiEndpoint, { cause: object });\n  await streams.fetchAllWith({ regexApiEndpoint: [/^.*causes$/] });\n  return stream;\n}\n\nexport async function updateCause(causeId: string, object) {\n  const stream = streams.update<ICause>(`${apiEndpoint}/${causeId}`, causeId, {\n    cause: object,\n  });\n  await streams.fetchAllWith({ dataId: [causeId] });\n  return stream;\n}\n\nexport function deleteCause(causeId: string) {\n  return streams.delete(`${apiEndpoint}/${causeId}`, causeId);\n}\n\nexport function reorderCause(causeId: string, ordering: number) {\n  return streams.update<ICause>(`${apiEndpoint}/${causeId}/reorder`, causeId, {\n    cause: { ordering },\n  });\n}\n","import { useState, useEffect } from 'react';\nimport { ICauseData, causeByIdStream } from 'services/causes';\n\ninterface Input {\n  causeId: string;\n}\n\nexport default function useCause({ causeId }: Input) {\n  const [cause, setCause] = useState<ICauseData | undefined | null | Error>(\n    undefined\n  );\n\n  useEffect(() => {\n    const subscription = causeByIdStream(causeId).observable.subscribe(\n      (cause) => {\n        setCause(cause.data);\n      }\n    );\n\n    return () => subscription.unsubscribe();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return cause;\n}\n"],"sourceRoot":""}