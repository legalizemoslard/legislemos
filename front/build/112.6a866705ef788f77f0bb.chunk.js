(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{"5Jsl":function(e,t,n){"use strict";n("SuFq");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("o0o1")),u=a(n("yXPU")),o=a(n("lwsE")),l=a(n("W8MJ")),i=a(n("PJYZ")),c=a(n("7W2i")),s=a(n("a1gu")),d=a(n("Nsbk")),f=a(n("lSNA")),p=a(n("q1tI")),m=a(n("2fl8")),g=n("Rw3A"),v=a(n("M1Et")),b=n("bWQU");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var h=function(e){(0,c.default)(n,e);var t=y(n);function n(e){var a;return(0,o.default)(this,n),a=t.call(this,e),(0,f.default)((0,i.default)(a),"handleExportVolunteers",(0,u.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({exporting:!0}),e.next=3,(0,b.exportVolunteers)(a.props.participationContextId,a.props.participationContextType);case 3:a.setState({exporting:!1});case 4:case"end":return e.stop()}}),e)})))),a.state={exporting:!1},a}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props.className,t=this.state.exporting;return p.default.createElement(m.default,{buttonStyle:"secondary",icon:"download",onClick:this.handleExportVolunteers,processing:t,className:e},p.default.createElement(g.FormattedMessage,v.default.exportVolunteers))}}]),n}(p.default.PureComponent);t.default=h},Crrq:function(e,t,n){"use strict";n("SuFq");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AdminProjectVolunteering=void 0,n("TeQF"),n("2B1R");var r=a(n("pVnL")),u=a(n("lwsE")),o=a(n("W8MJ")),l=a(n("7W2i")),i=a(n("a1gu")),c=a(n("Nsbk")),s=a(n("q1tI")),d=n("KLnl"),f=n("dtw8"),p=n("ifvJ"),m=a(n("vOnD")),g=a(n("M7uY")),v=a(n("M8tl")),b=a(n("5Jsl")),y=a(n("iuJL")),h=a(n("3A/8")),P=n("Loij"),E=a(n("M1Et")),j=n("Rw3A");function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.default)(this,n)}}var x=m.default.div.withConfig({displayName:"volunteering__Container",componentId:"sc-1jnmh8s-0"})(["display:flex;flex-direction:column;"]),T=m.default.div.withConfig({displayName:"volunteering__PhaseContainer",componentId:"sc-1jnmh8s-1"})(["&:not(:last-child){margin-bottom:50px;}"]),O=m.default.div.withConfig({displayName:"volunteering__HeaderContainer",componentId:"sc-1jnmh8s-2"})(["display:flex;justify-content:space-between;align-items:flex-start;padding:0;margin:0;margin-bottom:30px;"]),C=m.default.div.withConfig({displayName:"volunteering__Left",componentId:"sc-1jnmh8s-3"})(["margin-right:80px;"]),A=function(e){(0,l.default)(n,e);var t=w(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.phases;if((0,d.isNilOrError)(t))return null;if("continuous"===t.attributes.process_type&&"volunteering"===t.attributes.participation_method)return s.default.createElement(x,null,s.default.createElement(O,null,s.default.createElement(C,null,s.default.createElement(P.SectionTitle,null,s.default.createElement(j.FormattedMessage,E.default.titleVolunteeringTab)),s.default.createElement(P.SectionDescription,null,s.default.createElement(j.FormattedMessage,E.default.subtitleVolunteeringTab))),s.default.createElement(b.default,{participationContextType:"project",participationContextId:t.id})),s.default.createElement(y.default,{projectId:t.id,participationContextType:"project",participationContextId:t.id}));if("timeline"===t.attributes.process_type&&!(0,d.isNilOrError)(n)){var a=n.filter((function(e){return"volunteering"===e.attributes.participation_method}));return 0===a.length?null:s.default.createElement(x,null,s.default.createElement(P.SectionTitle,null,s.default.createElement(j.FormattedMessage,E.default.titleVolunteeringTab)),s.default.createElement(P.SectionDescription,null,s.default.createElement(j.FormattedMessage,E.default.subtitleVolunteeringTab)),a.map((function(e){return s.default.createElement(T,{key:e.id},s.default.createElement(O,null,s.default.createElement(C,null,s.default.createElement("h3",null,s.default.createElement(h.default,{value:e.attributes.title_multiloc}))),s.default.createElement(b.default,{participationContextId:e.id,participationContextType:"phase"})),s.default.createElement(y.default,{projectId:t.id,participationContextType:"phase",participationContextId:e.id}))})))}return null}}]),n}(s.default.PureComponent);t.AdminProjectVolunteering=A;var M=(0,p.adopt)({phases:function(e){var t=e.params,n=e.render;return s.default.createElement(v.default,{projectId:t.projectId},n)},project:function(e){var t=e.params,n=e.render;return s.default.createElement(g.default,{projectId:t.projectId},n)}}),I=(0,f.withRouter)((function(e){return s.default.createElement(M,e,(function(t){return s.default.createElement(A,(0,r.default)({},e,t))}))}));t.default=I},M1Et:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n("JRPe").defineMessages)({titleVolunteeringTab:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.titleVolunteeringTab",defaultMessage:"Volunteering"},subtitleVolunteeringTab:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.subtitleVolunteeringTab",defaultMessage:"Here, you can set up the causes users can volunteer for and download the volunteers."},exportVolunteers:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.exportVolunteers",defaultMessage:"Export volunteers"},addCauseButton:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.addCauseButton",defaultMessage:"Add cause"},editButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editButtonLabel",defaultMessage:"Edit"},deleteButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.deleteButtonLabel",defaultMessage:"Delete"},xVolunteers:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.xVolunteers",defaultMessage:"{x, plural, =0 {no volunteers} one {# volunteer} other {# volunteers}}"},causeDeletionConfirmation:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDeletionConfirmation",defaultMessage:"Are you sure?"},newCauseTitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseTitle",defaultMessage:"New cause"},newCauseSubtitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseSubtitle",defaultMessage:"A cause is an action or activity that citizens can volunteer to."},editCauseTitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseTitle",defaultMessage:"Edit cause"},editCauseSubtitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseSubtitle",defaultMessage:"A cause is an action or activity that citizens can volunteer to."},causeTitleLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeTitleLabel",defaultMessage:"Title"},causeDescriptionLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionLabel",defaultMessage:"Description"},causeDescriptionTooltip:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionTooltip",defaultMessage:"Use this explain what is required from volunteers and what they can expect."},causeImageLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeImageLabel",defaultMessage:"Image"},saveCause:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.saveCause",defaultMessage:"Save"},causeErrorMessage:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeErrorMessage",defaultMessage:"Couldn't save because the form contains errors."}});t.default=a},NYsU:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.useState)(void 0),n=(0,r.default)(t,2),a=n[0],l=n[1];return(0,u.useEffect)((function(){var t;return e.phaseId?t=(0,o.causesStream)("phase",e.phaseId):e.projectId&&(t=(0,o.causesStream)("project",e.projectId)),t=t.observable.subscribe((function(e){l(e)})),function(){return t.unsubscribe()}}),[]),a};var r=a(n("J4zp")),u=n("q1tI"),o=n("Rpcw")},Rpcw:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.causeByIdStream=function(e){return i.default.get({apiEndpoint:"".concat(d,"/").concat(e)})},t.causesStream=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i.default.get(s({apiEndpoint:"".concat(l.API_PATH,"/").concat(e,"s/").concat(t,"/causes")},n))},t.addCause=function(e){return f.apply(this,arguments)},t.updateCause=function(e,t){return p.apply(this,arguments)},t.deleteCause=function(e){return i.default.delete("".concat(d,"/").concat(e),e)},t.reorderCause=function(e,t){return i.default.update("".concat(d,"/").concat(e,"/reorder"),e,{cause:{ordering:t}})};var r=a(n("o0o1")),u=a(n("yXPU")),o=a(n("lSNA"));n("ma9I");var l=n("p0gT"),i=a(n("1Kqg"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d="".concat(l.API_PATH,"/causes");function f(){return(f=(0,u.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.add(d,{cause:t});case 2:return n=e.sent,e.next=5,i.default.fetchAllWith({regexApiEndpoint:[/^.*causes$/]});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,u.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.default.update("".concat(d,"/").concat(t),t,{cause:n}),e.next=3,i.default.fetchAllWith({dataId:[t]});case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},bWQU:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("FZtP"),n("27RR");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.volunteersStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.default.get(f({apiEndpoint:"".concat(l.API_PATH,"/causes/").concat(e,"/volunteers")},t))},t.addVolunteer=function(e){return p.apply(this,arguments)},t.deleteVolunteer=function(e,t){return m.apply(this,arguments)},t.exportVolunteers=function(e,t){return g.apply(this,arguments)};var r=a(n("o0o1"));n("ma9I");var u=a(n("yXPU")),o=a(n("lSNA")),l=n("p0gT"),i=a(n("1Kqg")),c=n("QyKF"),s=n("Iab2");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){return(p=(0,u.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.add("".concat(l.API_PATH,"/causes/").concat(t,"/volunteers"),null);case 2:return n=e.sent,e.next=5,i.default.fetchAllWith({dataId:[t]});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,u.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.delete("".concat(l.API_PATH,"/causes/").concat(t,"/volunteers"),n);case 2:return a=e.sent,e.next=5,i.default.fetchAllWith({dataId:[t]});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,u.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.requestBlob)("".concat(l.API_PATH,"/").concat(n,"s/").concat(t,"/volunteers/as_xlsx"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");case 2:a=e.sent,(0,s.saveAs)(a,"volunteers-export.xlsx");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},iuJL:function(e,t,n){"use strict";n("4mDm"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("pDQq"),n("fbCW"),n("07d7"),n("5s+n"),n("p532"),n("ma9I"),n("2B1R");var u=a(n("pVnL")),o=a(n("J4zp")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=u?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),i=a(n("vOnD")),c=n("T89o"),s=n("l8Oe"),d=a(n("DDKl")),f=n("KLnl"),p=a(n("NYsU")),m=n("Rpcw"),g=n("gzy/"),v=n("rqWd"),b=a(n("2fl8")),y=n("Rw3A"),h=a(n("M1Et")),P=a(n("3A/8"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}var j=i.default.div.withConfig({displayName:"AllCauses__Container",componentId:"sc-1a19f51-0"})([""]),w=i.default.div.withConfig({displayName:"AllCauses__Buttons",componentId:"sc-1a19f51-1"})(["display:flex;align-items:center;"]),x=(0,s.DragDropContext)(d.default)((0,y.injectIntl)((function(e){var t=e.participationContextType,n=e.participationContextId,a=e.projectId,r=e.intl,i="phase"===t?n:null,s=(0,p.default)({projectId:a,phaseId:i}),d=(0,l.useState)(null),E=(0,o.default)(d,2),x=E[0],T=E[1],O=(0,l.useState)(!1),C=(0,o.default)(O,2),A=C[0],M=C[1],I=x||((0,f.isNilOrError)(s)?[]:s.data),V=(0,l.useCallback)((function(e,t){if(!A){if(!I)return;var n=(0,c.clone)(I);n.splice(e,1),n.splice(t,0,I[e]),T(n)}}),[A,I]),_=(0,l.useCallback)((function(e,t){if(I){var n=I.find((function(t){return t.id===e}));n&&n.attributes.ordering!==t?(M(!0),(0,m.reorderCause)(e,t).finally((function(){return M(!1)}))):T(null)}}),[A,I]),D=function(e){return function(t){if(!A){var n=r.formatMessage(h.default.causeDeletionConfirmation);t.preventDefault(),window.confirm(n)&&(T(null),M(!0),(0,m.deleteCause)(e.id).finally((function(){M(!1)})))}}},R=i?"/admin/projects/".concat(a,"/volunteering/phases/").concat(i,"/causes/new"):"/admin/projects/".concat(a,"/volunteering/causes/new");return(0,f.isNilOrError)(s)?null:l.default.createElement(j,null,l.default.createElement(v.ButtonWrapper,null,l.default.createElement(b.default,{buttonStyle:"cl-blue",icon:"plus-circle",linkTo:R},l.default.createElement(y.FormattedMessage,h.default.addCauseButton))),l.default.createElement(g.List,{key:s.data.length},I.map((function(e,t){var n=!1;return t===I.length-1&&(n=!0),l.default.createElement(g.SortableRow,{key:e.id,id:e.id,index:t,lastItem:n,moveRow:V,dropRow:_},l.default.createElement(g.TextCell,{className:"expand"},l.default.createElement(P.default,{value:e.attributes.title_multiloc})),l.default.createElement("div",null,l.default.createElement(y.FormattedMessage,(0,u.default)({},h.default.xVolunteers,{values:{x:e.attributes.volunteers_count}}))),l.default.createElement(w,null,l.default.createElement(b.default,{onClick:D(e),icon:"delete",buttonStyle:"text"},l.default.createElement(y.FormattedMessage,h.default.deleteButtonLabel)),l.default.createElement(b.default,{linkTo:"/admin/projects/".concat(a,"/volunteering/causes/").concat(e.id),icon:"edit",buttonStyle:"secondary"},l.default.createElement(y.FormattedMessage,h.default.editButtonLabel))))}))))})));t.default=x}}]);
//# sourceMappingURL=112.6a866705ef788f77f0bb.chunk.js.map