(window.webpackJsonp=window.webpackJsonp||[]).push([[83,188],{"13cB":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,i("JRPe").defineMessages)({edit:{id:"app.components.admin.PostManager.PostPreview.edit",defaultMessage:"Edit"},delete:{id:"app.components.admin.PostManager.PostPreview.delete",defaultMessage:"Delete"},deleteInputConfirmation:{id:"app.components.admin.PostManager.PostPreview.deleteInputConfirmation",defaultMessage:"Are you sure you want to delete this input? This action cannot be undone."},deleteInputInTimelineConfirmation:{id:"app.components.admin.PostManager.PostPreview.deleteInputInTimelineConfirmation",defaultMessage:"Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered."},deleteInitiativeConfirmation:{id:"app.components.admin.PostManager.PostPreview.deleteInitiativeConfirmation",defaultMessage:"Are you sure you want to delete this initiative?"},voteCounts:{id:"app.components.admin.PostManager.PostPreview.voteCounts",defaultMessage:"Vote counts:"},currentStatus:{id:"app.components.admin.PostManager.PostPreview.currentStatus",defaultMessage:"Current status"},assignee:{id:"app.components.admin.PostManager.PostPreview.assignee",defaultMessage:"Assignee"},picks:{id:"app.components.admin.PostManager.PostPreview.picks",defaultMessage:"Picks: {picksNumber}"},pbItemCountTooltip:{id:"app.components.admin.PostManager.PostPreview.pbItemCountTooltip",defaultMessage:"The number of times this has been included in other participants' participatory budgets"},cancelEdit:{id:"app.components.admin.PostManager.PostPreview.cancelEdit",defaultMessage:"Cancel edit"},noOne:{id:"app.components.admin.PostManager.PostPreview.noOne",defaultMessage:"Unassigned"},save:{id:"app.components.admin.PostManager.PostPreview.save",defaultMessage:"Save"},submitError:{id:"app.components.admin.PostManager.PostPreview.submitError",defaultMessage:"Error"},postedIn:{id:"app.containers.IdeasShow.postedIn",defaultMessage:"Posted in {projectLink}"},xDaysLeft:{id:"app.containers.IdeasShow.xDaysLeft",defaultMessage:"{x, plural, =0 {Less than a day} one {One day} other {# days}} left"},proposedBudgetTitle:{id:"app.containers.IdeasShow.proposedBudgetTitle",defaultMessage:"Proposed budget"},bodyTitle:{id:"app.containers.IdeasShow.bodyTitle",defaultMessage:"Description"}});t.default=n},A4tC:function(e,t,i){"use strict";i("TeQF"),i("SuFq");var n=i("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("FZtP");var a=n(i("lwsE")),o=n(i("W8MJ")),r=n(i("PJYZ")),l=n(i("7W2i")),s=n(i("a1gu")),u=n(i("Nsbk")),d=n(i("lSNA")),c=n(i("q1tI")),f=i("T89o"),p=i("DtyJ"),v=i("ahDk"),m=n(i("aTp4")),h=i("Nv6i"),g=i("jtPO"),y=i("pQfs"),b=i("vDWu"),I=i("c95D"),w=i("OKda"),P=i("KLnl");function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,s.default)(this,i)}}var S=function(e){(0,l.default)(i,e);var t=M(i);function i(e){var n;return(0,a.default)(this,i),n=t.call(this,e),(0,d.default)((0,r.default)(n),"inputProps$",void 0),(0,d.default)((0,r.default)(n),"subscriptions",void 0),n.state={files:void 0},n}return(0,o.default)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.props,i=t.resourceId,n=t.resourceType,a=t.resetOnChange;this.inputProps$=new p.BehaviorSubject({resourceId:i,resourceType:n}),this.subscriptions=[this.inputProps$.pipe((0,v.distinctUntilChanged)((function(e,t){return(0,m.default)(e,t)})),(0,v.tap)((function(){return a&&e.setState({files:void 0})})),(0,v.filter)((function(e){var t=e.resourceId;return(0,f.isString)(t)})),(0,v.switchMap)((function(e){var t,i=e.resourceId,n=e.resourceType;return"project"===n&&(t=h.projectFilesStream),"phase"===n&&(t=g.phaseFilesStream),"event"===n&&(t=y.eventFilesStream),"page"===n&&(t=b.pageFilesStream),"idea"===n&&(t=I.ideaFilesStream),"initiative"===n&&(t=w.initiativeFilesStream),t(i).observable}))).subscribe((function(t){e.setState({files:(0,P.isNilOrError)(t)?t:t.data})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.resourceId,i=e.resourceType,n=e.resetOnChange;this.inputProps$.next({resourceId:t,resourceType:i,resetOnChange:n})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.files)}}]),i}(c.default.Component);t.default=S,(0,d.default)(S,"defaultProps",{resetOnChange:!0})},QLN2:function(e,t,i){"use strict";i("4mDm"),i("07d7"),i("PKPk"),i("ENF9"),i("3bBZ"),i("5DmW");var n=i("TqRt"),a=i("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,l=n(i("J4zp")),s=n(i("VkAN")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=m(t);if(i&&i.has(e))return i.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i("q1tI")),d=i("iP56"),c=n(i("pQ8y")),f=n(i("vOnD")),p=i("96Cm"),v=i("ufqH");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(m=function(e){return e?i:t})(e)}var h=f.default.div.withConfig({displayName:"CollapsibleBox__Container",componentId:"qoxmo-0"})(["background:#fff;border:1px solid ",";border-radius:",";"],p.colors.separation,(function(e){return e.theme.borderRadius})),g=f.default.div.withConfig({displayName:"CollapsibleBox__Title",componentId:"qoxmo-1"})(["display:flex;align-items:center;"]),y=(0,f.default)(d.Icon).withConfig({displayName:"CollapsibleBox__TitleIcon",componentId:"qoxmo-2"})(["flex:0 0 16px;width:16px;height:23px;fill:",";margin-right:13px;",""],p.colors.label,p.media.smallerThanMinTablet(o||(o=(0,s.default)(["\n    flex: 0 0 14px;\n    width: 14px;\n    height: 20px;\n  "])))),b=f.default.div.withConfig({displayName:"CollapsibleBox__ContentLabel",componentId:"qoxmo-3"})(["color:",";font-size:","px;font-weight:400;margin-right:6px;text-align:left;transition:all 100ms ease-out;"],p.colors.label,p.fontSizes.base),I=f.default.button.withConfig({displayName:"CollapsibleBox__ContentToggleButton",componentId:"qoxmo-4"})(["background-color:#fff;display:flex;align-items:center;justify-content:space-between;cursor:pointer;width:100%;height:100%;padding-left:18px;padding-right:20px;padding-top:10px;padding-bottom:10px;color:",";font-size:","px;line-height:24px;font-weight:600;border-radius:",";&:hover{","{color:",";}}"],(function(e){return e.theme.colorText}),p.fontSizes.base,(function(e){return e.theme.borderRadius}),b,(0,v.darken)(.2,p.colors.label)),w=(0,f.default)(d.Icon).withConfig({displayName:"CollapsibleBox__ArrowIcon",componentId:"qoxmo-5"})(["flex:0 0 13px;width:13px;height:13px;fill:",";transform:rotate(90deg);transition:all 0.2s linear;&.open{transform:rotate(0deg);}"],p.colors.label),P=f.default.div.withConfig({displayName:"CollapsibleBox__Wrapper",componentId:"qoxmo-6"})(["position:relative;overflow:hidden;z-index:2;padding:20px;background-color:",";margin-top:1px;"," &.content-enter{height:0;opacity:0;&.content-enter-active{height:100%;opacity:1;transition:all ","ms ease-out;}}&.content-exit{height:100%;opacity:1;&.content-exit-active{height:0;opacity:0;transition:all ","ms ease-out;}}"],(function(e){return e.contentBackgroundColor||"#fff"}),p.media.largePhone(r||(r=(0,s.default)(["\n    padding: 30px 20px;\n  "]))),300,300),M=(0,u.memo)((function(e){var t=(0,u.useState)(!1),i=(0,l.default)(t,2),n=i[0],a=i[1],o=(0,u.useCallback)((function(){a(!n)}),[n]),r=e.className,s=e.titleIconName,d=e.title,f=e.children,p=e.contentBackgroundColor,v=e.e2eId;return u.default.createElement(h,{className:r},u.default.createElement(I,{id:v||"","aria-expanded":n,onClick:o},u.default.createElement(g,null,s&&u.default.createElement(y,{name:s}),u.default.createElement(b,null,d)),u.default.createElement(w,{name:"dropdown",className:n?"open":""})),u.default.createElement(c.default,{classNames:"content",in:n,timeout:300,mountOnEnter:!0,unmountOnExit:!0,exit:!0},u.default.createElement(P,{contentBackgroundColor:p},u.default.createElement(u.Suspense,{fallback:null},f))))}));t.default=M},RgDP:function(e,t,i){"use strict";i("TeQF"),i("SuFq");var n=i("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("FZtP");var a=n(i("lwsE")),o=n(i("W8MJ")),r=n(i("PJYZ")),l=n(i("7W2i")),s=n(i("a1gu")),u=n(i("Nsbk")),d=n(i("lSNA")),c=n(i("q1tI")),f=i("DtyJ"),p=i("ahDk"),v=n(i("aTp4")),m=i("fM+I"),h=i("T89o"),g=i("KLnl");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,s.default)(this,i)}}var b=function(e){(0,l.default)(i,e);var t=y(i);function i(e){var n;return(0,a.default)(this,i),n=t.call(this,e),(0,d.default)((0,r.default)(n),"inputProps$",void 0),(0,d.default)((0,r.default)(n),"subscriptions",void 0),n.state={initiativeAllowedTransitions:void 0},n}return(0,o.default)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;this.inputProps$=new f.BehaviorSubject({id:t}),this.subscriptions=[this.inputProps$.pipe((0,p.distinctUntilChanged)((function(e,t){return(0,v.default)(e,t)})),(0,p.filter)((function(e){var t=e.id;return(0,h.isString)(t)})),(0,p.switchMap)((function(e){var t=e.id;return(0,h.isString)(t)?(0,m.initiativeAllowedTransitionsStream)(t).observable:(0,f.of)(null)}))).subscribe((function(t){return e.setState({initiativeAllowedTransitions:(0,g.isNilOrError)(t)?null:t})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props.id;this.inputProps$.next({id:e})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.initiativeAllowedTransitions)}}]),i}(c.default.Component);t.default=b},VUEM:function(e,t,i){"use strict";i("ENF9"),i("5DmW");var n=i("TqRt"),a=i("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("4mDm"),i("07d7"),i("5s+n"),i("PKPk"),i("3bBZ");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i("q1tI")),r=n(i("QLN2"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}var s=o.default.lazy((function(){return i.e(151).then(i.t.bind(null,"jcw9",7))})),u=(0,o.memo)((function(e){var t=e.address,i=e.position,n=e.className,a=e.projectId;return o.default.createElement(r.default,{e2eId:"e2e-map-toggle",className:n,titleIconName:"position",title:t},o.default.createElement(s,{position:i,projectId:a}))}));t.default=u},bc9h:function(e,t,i){"use strict";i("SuFq");var n=i("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("FZtP");var a=n(i("lwsE")),o=n(i("W8MJ")),r=n(i("PJYZ")),l=n(i("7W2i")),s=n(i("a1gu")),u=n(i("Nsbk")),d=n(i("lSNA")),c=n(i("q1tI")),f=i("DtyJ"),p=i("ahDk"),v=n(i("aTp4")),m=i("gkAX"),h=i("T89o");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,s.default)(this,i)}}var y=function(e){(0,l.default)(i,e);var t=g(i);function i(e){var n;return(0,a.default)(this,i),n=t.call(this,e),(0,d.default)((0,r.default)(n),"inputProps$",void 0),(0,d.default)((0,r.default)(n),"subscriptions",void 0),n.state={initiativeImages:void 0},n}return(0,o.default)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.props.initiativeId;this.inputProps$=new f.BehaviorSubject({initiativeId:t}),this.subscriptions=[this.inputProps$.pipe((0,p.distinctUntilChanged)((function(e,t){return(0,v.default)(e,t)})),(0,p.switchMap)((function(e){var t=e.initiativeId;return(0,h.isString)(t)?(0,m.initiativeImagesStream)(t).observable:(0,f.of)(null)}))).subscribe((function(t){e.setState({initiativeImages:t?t.data:null})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props.initiativeId;this.inputProps$.next({initiativeId:e})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.initiativeImages)}}]),i}(c.default.Component);t.default=y},cFZl:function(e,t,i){"use strict";i("SuFq"),i("4mDm"),i("07d7"),i("PKPk"),i("ENF9"),i("3bBZ"),i("5DmW");var n=i("TqRt"),a=i("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("ma9I"),i("2B1R"),i("fbCW");var o=n(i("pVnL")),r=n(i("lwsE")),l=n(i("W8MJ")),s=n(i("PJYZ")),u=n(i("7W2i")),d=n(i("a1gu")),c=n(i("Nsbk")),f=n(i("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=j(t);if(i&&i.has(e))return i.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i("q1tI")),v=i("ifvJ"),m=i("T89o"),h=i("KLnl"),g=i("Rw3A"),y=n(i("V3HD")),b=n(i("13cB")),I=n(i("vOnD")),w=i("iP56"),P=i("fM+I"),M=n(i("dGz1")),S=n(i("bB4g")),O=n(i("RgDP")),C=n(i("FSVo")),x=n(i("yYlr")),E=n(i("YLV/")),k=i("KuRP"),_=n(i("f2mI")),N=n(i("IAnr")),T=n(i("fToi"));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(j=function(e){return e?i:t})(e)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,d.default)(this,i)}}var B=(0,I.default)(w.Label).withConfig({displayName:"FeedbackSettings__StyledLabel",componentId:"sc-1kt3l40-0"})(["margin-top:20px;"]),R=I.default.div.withConfig({displayName:"FeedbackSettings__Container",componentId:"sc-1kt3l40-1"})([""]),W=function(e){(0,u.default)(i,e);var t=D(i);function i(){var e;(0,r.default)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,s.default)(e),"getStatusOptions",(function(t,i){var n=e.props.localize;return(0,h.isNilOrError)(t)?[]:t.map((function(e){return{value:e.id,label:n(e.attributes.title_multiloc),isDisabled:i&&void 0===i[e.id]}}))})),(0,f.default)((0,s.default)(e),"getInitiativeStatusOption",(0,m.memoize)((function(t,i){var n=e.props.localize;if(!(0,h.isNilOrError)(t)&&t.relationships.initiative_status&&t.relationships.initiative_status.data&&!(0,h.isNilOrError)(i)){var a=i.find((function(e){return e.id===(0,m.get)(t,"relationships.initiative_status.data.id")}));return a?{value:a.id,label:n(a.attributes.title_multiloc),color:a.attributes.color}:null}return null}),(function(e,t){return JSON.stringify({initiativeId:(0,h.isNilOrError)(e)?void 0:(0,m.get)(e,"relationships.initiative_status.data.id"),statusesId:(0,h.isNilOrError)(t)?void 0:t.map((function(e){return e.id}))})}))),(0,f.default)((0,s.default)(e),"getAssigneeOptions",(0,m.memoize)((function(t){var i=e.props.intl.formatMessage;if(!(0,h.isNilOrError)(t.usersList)){var n=t.usersList.map((function(e){return{value:e.id,label:"".concat(e.attributes.first_name," ").concat(e.attributes.last_name)}}));return n.push({value:"unassigned",label:i(b.default.noOne)}),n}return[]}))),(0,f.default)((0,s.default)(e),"onStatusChange",(function(t){var i=e.props,n=i.tenant,a=i.initiativeId,o=i.authUser,r=o?o.id:null,l=!(0,h.isNilOrError)(n)&&n.id;N.default.emit(T.default.statusChangeModalOpen,{initiativeId:a,newStatusId:t.value}),(0,k.trackEventByName)(_.default.initiativeStatusChange,{tenant:l,location:"Initiative preview/popup",initiative:a,adminAtWork:r})})),(0,f.default)((0,s.default)(e),"onAssigneeChange",(function(t){var i=e.props,n=i.tenant,a=i.initiativeId,o=i.authUser,r=t?t.value:null,l=o?o.id:null,s=!(0,h.isNilOrError)(n)&&n.id;(0,P.updateInitiative)(a,{assignee_id:r}),(0,k.trackEventByName)(_.default.changeInitiativeAssignment,{tenant:s,location:"Initiative preview",initiative:a,assignee:r,adminAtWork:l})})),e}return(0,l.default)(i,[{key:"render",value:function(){var e=this.props,t=e.initiative,i=e.className,n=e.statuses,a=e.prospectAssignees,o=e.allowedTransitions,r=this.getStatusOptions(n,o),l=this.getInitiativeStatusOption(t,n),s=this.getAssigneeOptions(a),u=(0,m.get)(t,"relationships.assignee.data.id","unassigned");return(0,h.isNilOrError)(t)?null:p.default.createElement(R,{className:"".concat(i," e2e-initiative-settings")},p.default.createElement(B,{value:p.default.createElement(g.FormattedMessage,b.default.currentStatus),htmlFor:"initiative-preview-select-status"}),p.default.createElement(w.Select,{id:"initiative-preview-select-status",options:r,onChange:this.onStatusChange,value:l}),p.default.createElement(B,{value:p.default.createElement(g.FormattedMessage,b.default.assignee),htmlFor:"initiative-preview-select-assignee"}),p.default.createElement(w.Select,{id:"initiative-preview-select-assignee",options:s,onChange:this.onAssigneeChange,value:u}))}}]),i}(p.PureComponent),A=(0,v.adopt)({tenant:p.default.createElement(x.default,null),authUser:p.default.createElement(E.default,null),initiative:function(e){var t=e.initiativeId,i=e.render;return p.default.createElement(C.default,{id:t},i)},statuses:p.default.createElement(S.default,null),prospectAssignees:p.default.createElement(M.default,{canAdmin:!0}),allowedTransitions:function(e){var t=e.initiativeId,i=e.render;return p.default.createElement(O.default,{id:t},i)}}),F=(0,g.injectIntl)((0,y.default)(W));t.default=function(e){return p.default.createElement(A,e,(function(t){return p.default.createElement(F,(0,o.default)({},e,t))}))}},fToi:function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.statusChangeModalOpen="initiatiateStatusChange"}(n||(n={}));var a=n;t.default=a},mMY6:function(e,t,i){"use strict";i("SuFq"),i("4mDm"),i("07d7"),i("PKPk"),i("ENF9"),i("3bBZ"),i("5DmW");var n=i("TqRt"),a=i("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InitiativeContent=void 0,i("ma9I");var o=n(i("pVnL")),r=n(i("lwsE")),l=n(i("W8MJ")),s=n(i("PJYZ")),u=n(i("7W2i")),d=n(i("a1gu")),c=n(i("Nsbk")),f=n(i("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=F(t);if(i&&i.has(e))return i.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i("q1tI")),v=i("KLnl"),m=i("ifvJ"),h=i("T89o"),g=i("di2/"),y=n(i("zJWc")),b=n(i("Mh2d")),I=n(i("VUEM")),w=n(i("/Eug")),P=n(i("sLV3")),M=n(i("LtqC")),S=n(i("vPs5")),O=n(i("cFZl")),C=n(i("2fl8")),x=i("b0Ul"),E=n(i("je0/")),k=i("fM+I"),_=n(i("A4tC")),N=n(i("FSVo")),T=n(i("bc9h")),j=n(i("yiTP")),D=n(i("V3HD")),B=i("Rw3A"),R=n(i("13cB")),W=n(i("vOnD")),A=i("96Cm");function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(F=function(e){return e?i:t})(e)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,d.default)(this,i)}}var q=(0,W.default)(y.default).withConfig({displayName:"InitiativeContent__StyledTitle",componentId:"j0up2e-0"})(["margin-bottom:30px;"]),J=W.default.div.withConfig({displayName:"InitiativeContent__Row",componentId:"j0up2e-1"})(["display:flex;width:100%;"]),$=W.default.div.withConfig({displayName:"InitiativeContent__Left",componentId:"j0up2e-2"})(["flex:5;margin-right:50px;height:100%;"]),z=W.default.img.withConfig({displayName:"InitiativeContent__Image",componentId:"j0up2e-3"})(["width:100%;margin:0 0 2rem;padding:0;border-radius:8px;border:1px solid ",";"],A.colors.separation),U=(0,W.default)(b.default).withConfig({displayName:"InitiativeContent__StyledBody",componentId:"j0up2e-4"})(["margin-bottom:20px;"]),V=(0,W.default)(I.default).withConfig({displayName:"InitiativeContent__StyledMap",componentId:"j0up2e-5"})(["margin-bottom:40px;"]),Z=(0,W.default)(w.default).withConfig({displayName:"InitiativeContent__StyledOfficialFeedback",componentId:"j0up2e-6"})(["margin-top:70px;"]),K=(0,W.default)(M.default).withConfig({displayName:"InitiativeContent__StyledComments",componentId:"j0up2e-7"})(["margin-top:30px;"]),Q=W.default.div.withConfig({displayName:"InitiativeContent__Right",componentId:"j0up2e-8"})(["flex:2;position:sticky;top:80px;align-self:flex-start;color:",";font-size:","px;line-height:19px;"],A.colors.adminTextColor,A.fontSizes.base),Y=W.default.div.withConfig({displayName:"InitiativeContent__VotePreview",componentId:"j0up2e-9"})(["border:1px solid #e0e0e0;box-shadow:0px 0px 15px rgba(0,0,0,0.05);border-radius:3px;padding:20px;"]),G=W.default.div.withConfig({displayName:"InitiativeContent__DaysLeft",componentId:"j0up2e-10"})(["color:",";margin-bottom:20px;"],A.colors.label),H=function(e){(0,u.default)(i,e);var t=L(i);function i(){var e;(0,r.default)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,s.default)(e),"handleClickDelete",(function(){var t=e.props,i=t.initiative,n=t.closePreview,a=e.props.intl.formatMessage(R.default.deleteInitiativeConfirmation);(0,v.isNilOrError)(i)||window.confirm(a)&&((0,k.deleteInitiative)(i.id),n())})),e}return(0,l.default)(i,[{key:"render",value:function(){var e=this.props,t=e.initiative,i=e.localize,n=e.initiativeImages,a=e.initiativeFiles,r=e.handleClickEdit,l=e.locale;if(!(0,v.isNilOrError)(t)&&!(0,v.isNilOrError)(l)){var s=t.id,u=i(t.attributes.title_multiloc),d=!(0,v.isNilOrError)(n)&&n.length>0?(0,h.get)(n[0],"attributes.versions.large",null):null,c=t.attributes.location_point_geojson||null,f=t.attributes.location_description||null,m=(0,g.getDaysRemainingUntil)(t.attributes.expires_at);return p.default.createElement(x.Container,null,p.default.createElement(x.Top,null,p.default.createElement(C.default,{icon:"edit",buttonStyle:"text",textColor:A.colors.adminTextColor,onClick:r},p.default.createElement(B.FormattedMessage,R.default.edit)),p.default.createElement(C.default,{icon:"delete",buttonStyle:"text",textColor:A.colors.adminTextColor,onClick:this.handleClickDelete},p.default.createElement(B.FormattedMessage,R.default.delete))),p.default.createElement(x.Content,null,p.default.createElement(q,{postId:s,title:u,postType:"initiative"}),p.default.createElement(J,null,p.default.createElement($,null,d&&p.default.createElement(z,{src:d,alt:"",className:"e2e-initiativeImage"}),p.default.createElement(P.default,{authorId:(0,h.get)(t,"relationships.author.data.id",null),showAboutInitiatives:!1}),p.default.createElement(U,{postId:s,postType:"initiative",body:i(t.attributes.body_multiloc),locale:l}),c&&f&&p.default.createElement(V,{address:f,position:c}),a&&!(0,v.isNilOrError)(a)&&p.default.createElement(S.default,{files:a}),p.default.createElement(Z,{postId:s,postType:"initiative",permissionToPost:!0}),p.default.createElement(K,{postId:s,postType:"initiative"})),p.default.createElement(Q,null,p.default.createElement(Y,null,p.default.createElement(G,null,p.default.createElement(B.FormattedMessage,(0,o.default)({},R.default.xDaysLeft,{values:{x:m}}))),p.default.createElement(E.default,{initiativeId:s})),p.default.createElement(O.default,{initiativeId:s})))))}return null}}]),i}(p.PureComponent);t.InitiativeContent=H;var X=(0,m.adopt)({initiative:function(e){var t=e.initiativeId,i=e.render;return p.default.createElement(N.default,{id:t},i)},initiativeFiles:function(e){var t=e.initiativeId,i=e.render;return p.default.createElement(_.default,{resourceId:t,resourceType:"initiative"},i)},initiativeImages:function(e){var t=e.initiativeId,i=e.render;return p.default.createElement(T.default,{initiativeId:t},i)},locale:p.default.createElement(j.default,null)}),ee=(0,B.injectIntl)((0,D.default)(H)),te=function(e){return p.default.createElement(X,e,(function(t){return p.default.createElement(ee,(0,o.default)({},e,t))}))};t.default=te},r5eU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,i("JRPe").defineMessages)({metaTitle:{id:"app.containers.InitiativesShow.metaTitle",defaultMessage:"Initiative: {initiativeTitle}"},invisibleTitleContent:{id:"app.containers.InitiativesShow.invisibleTitleContent",defaultMessage:"What is this initiative about?"},metaOgTitle:{id:"app.containers.InitiativesShow.metaOgTitle",defaultMessage:"Support this initiative: {initiativeTitle}"},initiativeOgDescription:{id:"app.containers.InitiativesShow.initiativeOgDescription",defaultMessage:"What do you think of this initiative? Join the discussion and vote to make your voice heard."},learnMore:{id:"app.containers.InitiativesShow.learnMore",defaultMessage:"Learn more about initiatives"},postedBy:{id:"app.containers.InitiativesShow.postedBy",defaultMessage:"Initiative posted by {authorName}"},postedByShort:{id:"app.containers.InitiativesShow.postedByShort",defaultMessage:"Posted by {authorName}"},twitterMessage:{id:"app.containers.InitiativesShow.twitterMessage",defaultMessage:"Vote for {initiativeTitle} on"},whatsAppMessage:{id:"app.containers.InitiativesShow.whatsAppMessage",defaultMessage:"{initiativeTitle} | from the participation platform of {orgName}"},emailSharingSubject:{id:"app.containers.InitiativesShow.emailSharingSubject",defaultMessage:"Support my initiative: {initiativeTitle}."},emailSharingBody:{id:"app.containers.InitiativesShow.emailSharingBody",defaultMessage:"What do you think of this initiative? Vote on it and share the discussion at {initiativeUrl} to make your voice heard!"},allInitiatives:{id:"app.containers.InitiativesShow.allInitiatives",defaultMessage:"All Initiatves"},moreOptions:{id:"app.components.InitiativesShow.moreOptions",defaultMessage:"More options"},reportAsSpam:{id:"app.components.InitiativesShow.reportAsSpam",defaultMessage:"Report as spam"},editInitiative:{id:"app.components.InitiativesShow.editInitiative",defaultMessage:"Edit initiative"},deleteInitiative:{id:"app.components.InitiativesShow.deleteInitiative",defaultMessage:"Delete initiative"},deleteInitiativeConfirmation:{id:"app.components.InitiativesShow.deleteInitiativeConfirmation",defaultMessage:"Are you sure you want to delete this initiative?"},reportAsSpamModalTitle:{id:"app.containers.InitiativesShow.reportAsSpamModalTitle",defaultMessage:"Why do you want to report this as spam?"},skipSharing:{id:"app.components.InitiativesShow.skipSharing",defaultMessage:"Skip it, I'll do it later"},shareTitle:{id:"app.components.InitiativesShow.shareTitle",defaultMessage:"Congratulations, your initiative was successfully posted!"},shareSubtitle:{id:"app.components.InitiativesShow.shareSubtitle",defaultMessage:"Share your initiative to reach {votingThreshold} votes in {daysLimit} days."},a11y_voteControl:{id:"app.containers.InitiativesShow.a11y_voteControl",defaultMessage:"Voting and status"}});t.default=n},sLV3:function(e,t,i){"use strict";i("4mDm"),i("07d7"),i("PKPk"),i("ENF9"),i("3bBZ"),i("5DmW");var n=i("TqRt"),a=i("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("pVnL"));i("yWo2");var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=m(t);if(i&&i.has(e))return i.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i("q1tI")),l=i("iP56"),s=n(i("FrK0")),u=n(i("jWBj")),d=n(i("vOnD")),c=i("96Cm"),f=i("ufqH"),p=n(i("r5eU")),v=i("Rw3A");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(m=function(e){return e?i:t})(e)}var h=d.default.div.withConfig({displayName:"PostedBy__Container",componentId:"sc-1fb9rk5-0"})(["display:flex;align-items:center;margin-bottom:25px;"]),g=(0,d.default)(l.Icon).withConfig({displayName:"PostedBy__InitiativesIcon",componentId:"sc-1fb9rk5-1"})(["width:42px;height:42px;background-color:rgba(4,77,108,0.06);fill:",";border-radius:50%;padding:10px;margin-right:17px;"],c.colors.adminTextColor),y=d.default.div.withConfig({displayName:"PostedBy__PostedByWrapper",componentId:"sc-1fb9rk5-2"})(["display:flex;flex-direction:column;"]),b=d.default.div.withConfig({displayName:"PostedBy__PostedByText",componentId:"sc-1fb9rk5-3"})(["color:",";font-size:","px;margin-bottom:3px;"],(function(e){return e.theme.colorText}),c.fontSizes.base),I=(0,d.default)(u.default).withConfig({displayName:"PostedBy__AboutInitiativesLink",componentId:"sc-1fb9rk5-4"})(["font-size:","px;color:",";text-decoration:underline;&:hover{color:",";text-decoration:underline;}"],c.fontSizes.small,c.colors.clGreyOnGreyBackground,(0,f.darken)(.2,c.colors.clGreyOnGreyBackground)),w=(0,r.memo)((function(e){var t=e.authorId,i=e.className,n=e.showAboutInitiatives;if(t){var a=r.default.createElement(s.default,{userId:t,fontWeight:500,isLinkToProfile:!0,hideLastName:!0});return r.default.createElement(h,{id:"e2e-initiative-posted-by",className:i||""},r.default.createElement(g,{name:"initiatives"}),r.default.createElement(y,null,r.default.createElement(b,null,r.default.createElement(v.FormattedMessage,(0,o.default)({},p.default.postedBy,{values:{authorName:a}}))),n&&r.default.createElement(I,{to:"/pages/initiatives"},r.default.createElement(v.FormattedMessage,p.default.learnMore))))}return null}));t.default=w},zIn5:function(e,t,i){"use strict";i("2B1R"),i("SuFq"),i("tkto"),i("pNMO"),i("TeQF"),i("5DmW"),i("FZtP"),i("27RR");var n=i("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("ToJy");var a=n(i("J4zp")),o=n(i("lwsE")),r=n(i("W8MJ")),l=n(i("PJYZ")),s=n(i("7W2i")),u=n(i("a1gu")),d=n(i("Nsbk")),c=n(i("lSNA")),f=n(i("q1tI")),p=i("DtyJ"),v=i("ahDk"),m=i("RLXT"),h=i("T89o"),g=i("KLnl");function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){(0,c.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,u.default)(this,i)}}var w=function(e){(0,s.default)(i,e);var t=I(i);function i(e){var n;return(0,o.default)(this,i),n=t.call(this,e),(0,c.default)((0,l.default)(n),"postId$",void 0),(0,c.default)((0,l.default)(n),"postType$",void 0),(0,c.default)((0,l.default)(n),"sort$",void 0),(0,c.default)((0,l.default)(n),"loadMore$",void 0),(0,c.default)((0,l.default)(n),"subscription",void 0),(0,c.default)((0,l.default)(n),"initialQueryParameters",{pageNumber:0,pageSize:15,sort:"-new"}),(0,c.default)((0,l.default)(n),"loadMore",(function(){n.state.hasMore&&n.loadMore$.next(null)})),(0,c.default)((0,l.default)(n),"changeSort",(function(e){n.sort$.next(e)})),n.state={commentsList:void 0,loadingInital:!1,loadingMore:!1,hasMore:!0},n}return(0,r.default)(i,[{key:"componentDidMount",value:function(){var e=this;this.postId$=new p.BehaviorSubject(this.props.postId),this.postType$=new p.BehaviorSubject(this.props.postType),this.sort$=new p.BehaviorSubject(this.initialQueryParameters.sort),this.loadMore$=new p.BehaviorSubject(null),this.subscription=(0,p.combineLatest)(this.postId$.pipe((0,v.distinctUntilChanged)()),this.postType$.pipe((0,v.distinctUntilChanged)()),this.sort$.pipe((0,v.distinctUntilChanged)())).pipe((0,v.switchMap)((function(t){var i=(0,a.default)(t,3),n=i[0],o=i[1],r=i[2],l=void 0,s=e.initialQueryParameters.pageNumber,u=e.initialQueryParameters.pageSize,d=!0;return e.loadMore$.pipe((0,v.tap)((function(){return e.setState({loadingInital:0===s,loadingMore:s>0})})),(0,v.mergeScan)((function(){return s+=1,("idea"===o?m.commentsForIdeaStream:m.commentsForInitiativeStream)(n,{queryParameters:{sort:r,"page[number]":s,"page[size]":u}}).observable.pipe((0,v.map)((function(e){var t=(0,h.get)(e,"links.self"),i=(0,h.get)(e,"links.last");return d=(0,h.isString)(t)&&(0,h.isString)(i)&&t!==i,l=(0,g.isNilOrError)(l)?e.data:(0,h.unionBy)(l,e.data,"id"),null})))}),null),(0,v.map)((function(){return{pageNumber:s,commentsList:l,hasMore:d}})))}))).subscribe((function(t){var i=t.commentsList,n=t.hasMore;e.setState({commentsList:i,hasMore:n,loadingInital:!1,loadingMore:!1})}))}},{key:"componentDidUpdate",value:function(){this.postId$.next(this.props.postId)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){return(0,this.props.children)(b(b({},this.state),{},{onLoadMore:this.loadMore,onChangeSort:this.changeSort}))}}]),i}(f.default.Component);t.default=w}}]);
//# sourceMappingURL=83.e3ed17c7d53304d3ceb8.chunk.js.map