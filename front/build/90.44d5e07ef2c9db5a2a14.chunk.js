(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{"/mrp":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r("JRPe").defineMessages)({resolutionday:{id:"app.containers.AdminPage.DashboardPage.resolutionday",defaultMessage:"in Days"},resolutionweek:{id:"app.containers.AdminPage.DashboardPage.resolutionweek",defaultMessage:"in Weeks"},resolutionmonth:{id:"app.containers.AdminPage.DashboardPage.resolutionmonth",defaultMessage:"in Months"}});t.default=a},"5nK0":function(e,t,r){"use strict";r("SuFq"),r("tkto"),r("pNMO"),r("5DmW"),r("FZtP"),r("27RR"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("pVnL")),l=a(r("QILm"));r("ma9I"),r("fbCW"),r("sMBO"),r("2B1R"),r("TeQF");var i=a(r("lwsE")),u=a(r("W8MJ")),c=a(r("PJYZ")),s=a(r("7W2i")),f=a(r("a1gu")),d=a(r("Nsbk")),p=a(r("lSNA")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r("q1tI")),h=r("T89o"),v=a(r("bSmz")),y=a(r("V3HD")),g=r("Rw3A"),b=a(r("Zi2k")),O=r("kyyJ"),E=["value","name"];function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var k=function(e){(0,s.default)(r,e);var t=F(r);function r(){var e;(0,i.default)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,p.default)((0,c.default)(e),"convertToGraphFormat",(function(t){var r=t.series,a=t.projects,n=e.props,o=n.localize,l=n.currentResourceByProject,i="votes"===l?"total":l,u=(0,h.map)(r[i],(function(e,t){return{name:o(a[t].title_multiloc),value:e,code:t}})),c=(0,h.sortBy)(u,"name");return c.length>0?c:null})),(0,p.default)((0,c.default)(e),"convertSerie",(function(t){var r=e.props,a=r.currentProjectFilter,n=r.currentResourceByProject,o=r.projectOptions,i=r.intl.formatMessage;if(t&&n){var u,c=t.find((function(e){return e.code===a})),s=c?c.value:0;if(c)u=c.name;else{var f=o.find((function(e){return e.value===a}));u=f?f.label:i(b.default.selectedProject)}return{convertedSerie:t.filter((function(e){return e.code!==a})).map((function(e){var t=e.value,r=e.name,a=(0,l.default)(e,E),n=r.length>60?"".concat(r.substring(0,61),"..."):r;return j({value:t-s,name:n},a)})),selectedCount:s,selectedName:u}}return{convertedSerie:t,selectedCount:null,selectedName:null}})),e}return(0,u.default)(r,[{key:"getCurrentStream",value:function(e){return"ideas"===e?O.ideasByProjectStream:"comments"===e?O.commentsByProjectStream:O.votesByProjectStream}},{key:"render",value:function(){var e=this.props,t=e.currentResourceByProject,r=e.currentProjectFilter,a=e.onResourceByProjectChange;return m.default.createElement(v.default,(0,o.default)({},this.props,{onResourceByXChange:a,currentSelectedResource:t,stream:this.getCurrentStream(t),convertToGraphFormat:this.convertToGraphFormat,convertSerie:this.convertSerie,currentFilter:r,byWhat:"Project"}))}}]),r}(m.PureComponent),S=(0,y.default)((0,g.injectIntl)(k));t.default=S},Jwvg:function(e,t,r){"use strict";r("2B1R"),r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("pVnL")),l=a(r("lwsE")),i=a(r("W8MJ")),u=a(r("PJYZ")),c=a(r("7W2i")),s=a(r("a1gu")),f=a(r("Nsbk")),d=a(r("lSNA")),p=a(r("q1tI")),m=r("T89o"),h=r("Rw3A"),v=a(r("Zi2k")),y=a(r("CHxe")),g=r("4XXU"),b=r("ONLP"),O=r("FvIY"),E=r("iP56"),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r("vOnD"));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var F=(0,P.default)(E.Icon).withConfig({displayName:"BarChartActiveUsersByTime__InfoIcon",componentId:"ygtbik-0"})(["display:flex;align-items:center;cursor:pointer;width:20px;height:22px;margin-left:10px;"]),k=(0,P.default)(g.ResponsiveContainer).withConfig({displayName:"BarChartActiveUsersByTime__StyledResponsiveContainer",componentId:"ygtbik-1"})([".recharts-wrapper{@media print{margin:0 auto;}}"]),S=function(e){(0,c.default)(r,e);var t=j(r);function r(e){var a;return(0,l.default)(this,r),a=t.call(this,e),(0,d.default)((0,u.default)(a),"subscription",void 0),(0,d.default)((0,u.default)(a),"currentChart",void 0),(0,d.default)((0,u.default)(a),"convertToGraphFormat",(function(e){var t=a.props.graphUnit;return(0,m.isEmpty)(e.series[t])?null:(0,m.map)(e.series[t],(function(e,t){return{value:e,name:t,code:t}}))})),(0,d.default)((0,u.default)(a),"formatTick",(function(e){var t=a.props.resolution;return(0,a.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"short"})})),(0,d.default)((0,u.default)(a),"formatLabel",(function(e){var t=a.props.resolution;return(0,a.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"long",year:"numeric"})})),a.state={serie:null},a.currentChart=p.default.createRef(),a}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startAt,r=e.endAt,a=e.resolution,n=e.currentGroupFilter,o=e.currentTopicFilter,l=e.currentProjectFilter;this.resubscribe(t,r,a,l,n,o)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.startAt,a=t.endAt,n=t.resolution,o=t.currentGroupFilter,l=t.currentTopicFilter,i=t.currentProjectFilter;r===e.startAt&&a===e.endAt&&n===e.resolution&&o===e.currentGroupFilter&&l===e.currentTopicFilter&&i===e.currentProjectFilter||this.resubscribe(r,a,n,i,o,l)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"resubscribe",value:function(e,t,r,a,n,o){var l=this,i=this.props.stream;this.subscription&&this.subscription.unsubscribe(),this.subscription=i({queryParameters:{start_at:e,end_at:t,interval:r,project:a,group:n,topic:o}}).observable.subscribe((function(e){var t=l.convertToGraphFormat(e);l.setState({serie:t})}))}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.graphTitle,a=e.infoMessage,n=this.state.serie,l=this.props.theme,i=l.chartLabelSize,u=l.chartLabelColor,c=l.barHoverColor,s=l.animationBegin,f=l.animationDuration,d=l.newBarFill,E=!n||n.every((function(e){return(0,m.isEmpty)(e)}))||n.length<=0;return p.default.createElement(b.GraphCard,{className:t},p.default.createElement(b.GraphCardInner,null,p.default.createElement(b.GraphCardHeader,null,p.default.createElement(b.GraphCardTitle,null,r,a&&p.default.createElement(O.Popup,{basic:!0,trigger:p.default.createElement("div",null,p.default.createElement(F,{name:"info"})),content:a,position:"top left"})),!E&&p.default.createElement(y.default,(0,o.default)({svgNode:this.currentChart,name:r},this.props))),E?p.default.createElement(b.NoDataContainer,null,p.default.createElement(h.FormattedMessage,v.default.noData)):p.default.createElement(k,null,p.default.createElement(g.BarChart,{data:null!=n?n:void 0,ref:this.currentChart},p.default.createElement(g.Bar,{dataKey:"value",name:r,fill:d,animationDuration:f,animationBegin:s,isAnimationActive:!0}),p.default.createElement(g.XAxis,{dataKey:"name",stroke:u,fontSize:i,tick:{transform:"translate(0, 7)"},tickFormatter:this.formatTick}),p.default.createElement(g.YAxis,{stroke:u,fontSize:i}),p.default.createElement(g.Tooltip,{isAnimationActive:!1,labelFormatter:this.formatLabel,cursor:{fill:c}})))))}}]),r}(p.default.PureComponent),T=(0,h.injectIntl)((0,P.withTheme)(S));t.default=T},KZD7:function(e,t,r){"use strict";r("SuFq"),r("tkto"),r("pNMO"),r("5DmW"),r("FZtP"),r("27RR"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r("pVnL")),l=a(r("QILm"));r("ma9I"),r("fbCW"),r("sMBO"),r("2B1R"),r("TeQF");var i=a(r("lwsE")),u=a(r("W8MJ")),c=a(r("PJYZ")),s=a(r("7W2i")),f=a(r("a1gu")),d=a(r("Nsbk")),p=a(r("lSNA")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r("q1tI")),h=r("T89o"),v=a(r("bSmz")),y=a(r("Zi2k")),g=r("Rw3A"),b=a(r("V3HD")),O=r("kyyJ"),E=["value","name"];function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var k=function(e){(0,s.default)(r,e);var t=F(r);function r(){var e;(0,i.default)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,p.default)((0,c.default)(e),"convertToGraphFormat",(function(t){var r=t.series,a=t.topics,n=e.props,o=n.localize,l=n.currentResourceByTopic,i="votes"===l?"total":l,u=(0,h.map)(r[i],(function(e,t){return{name:o(a[t].title_multiloc),value:e,code:t}})),c=(0,h.sortBy)(u,"name");return c.length>0?c:null})),(0,p.default)((0,c.default)(e),"convertSerie",(function(t){var r=e.props,a=r.currentTopicFilter,n=r.currentResourceByTopic,o=r.topicOptions,i=r.intl.formatMessage;if(t&&n){var u,c=t.find((function(e){return e.code===a})),s=c?c.value:0;if(c)u=c.name;else{var f=o.find((function(e){return e.value===a}));u=f?f.label:i(y.default.selectedTopic)}return{convertedSerie:t.filter((function(e){return e.code!==a})).map((function(e){var t=e.value,r=e.name,a=(0,l.default)(e,E),n=r.length>60?"".concat(r.substring(0,61),"..."):r;return j({value:t-s,name:n},a)})),selectedCount:s,selectedName:u}}return{convertedSerie:t,selectedCount:null,selectedName:null}})),e}return(0,u.default)(r,[{key:"getCurrentStream",value:function(e){return"ideas"===e?O.ideasByTopicStream:"comments"===e?O.commentsByTopicStream:O.votesByTopicStream}},{key:"render",value:function(){var e=this.props,t=e.currentResourceByTopic,r=e.currentTopicFilter,a=e.onResourceByTopicChange;return m.default.createElement(v.default,(0,o.default)({},this.props,{onResourceByXChange:a,currentSelectedResource:t,stream:this.getCurrentStream(t),convertToGraphFormat:this.convertToGraphFormat,convertSerie:this.convertSerie,currentFilter:r,byWhat:"Topic"}))}}]),r}(m.PureComponent),S=(0,b.default)((0,g.injectIntl)(k));t.default=S},Spza:function(e,t,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("2B1R"),r("ma9I"),r("TeQF");var o=a(r("pVnL")),l=a(r("RIqP")),i=a(r("lwsE")),u=a(r("W8MJ")),c=a(r("PJYZ")),s=a(r("7W2i")),f=a(r("a1gu")),d=a(r("Nsbk")),p=a(r("lSNA")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=L(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r("q1tI")),h=r("ifvJ"),v=a(r("wd/R")),y=r("ONLP"),g=a(r("TDU/")),b=a(r("Jwvg")),O=a(r("xcGu")),E=a(r("wAts")),P=a(r("5nK0")),C=a(r("KZD7")),j=a(r("UquU")),F=a(r("zjEE")),k=r("KuRP"),S=a(r("DTaU")),T=a(r("Zi2k")),R=r("Rw3A"),B=a(r("V3HD")),w=a(r("Frrm")),A=a(r("J+il")),M=a(r("lPdK")),x=r("KLnl"),N=r("kyyJ"),D=a(r("TjhY"));function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(L=function(e){return e?r:t})(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var G=function(e){(0,s.default)(r,e);var t=I(r);function r(e){var a;(0,i.default)(this,r),a=t.call(this,e),(0,p.default)((0,c.default)(a),"resourceOptions",void 0),(0,p.default)((0,c.default)(a),"handleChangeResolution",(function(e){a.setState({resolution:e})})),(0,p.default)((0,c.default)(a),"handleChangeTimeRange",(function(e,t){var r=t&&e&&v.default.duration(t.diff(e)),n=r?r.asMonths()>6?"month":r.asWeeks()>4?"week":"day":"month";a.setState({startAtMoment:e,endAtMoment:t,resolution:n})})),(0,p.default)((0,c.default)(a),"handleOnProjectFilter",(function(e){a.props.trackFilterOnProject({extra:{project:e}}),a.setState({currentProjectFilter:e.value,currentProjectFilterLabel:e.label})})),(0,p.default)((0,c.default)(a),"handleOnGroupFilter",(function(e){a.props.trackFilterOnGroup({extra:{group:e}}),a.setState({currentGroupFilter:e.value,currentGroupFilterLabel:e.label})})),(0,p.default)((0,c.default)(a),"handleOnTopicFilter",(function(e){a.props.trackFilterOnTopic({extra:{topic:e}}),a.setState({currentTopicFilter:e.value,currentTopicFilterLabel:e.label})})),(0,p.default)((0,c.default)(a),"onResourceByTopicChange",(function(e){a.props.trackResourceChange({extra:{newResource:e,graph:"resourceByTopic"}}),a.setState({currentResourceByTopic:e.value})})),(0,p.default)((0,c.default)(a),"onResourceByProjectChange",(function(e){a.props.trackResourceChange({extra:{newResource:e,graph:"resourceByProject"}}),a.setState({currentResourceByProject:e.value})})),(0,p.default)((0,c.default)(a),"generateProjectOptions",(function(){var e=a.props,t=e.projects,r=e.projects.projectsList,n=e.localize,o=e.onlyModerator,i=e.intl.formatMessage,u=[];return(0,x.isNilOrError)(t)||(0,x.isNilOrError)(r)||(u=r.map((function(e){return{value:e.id,label:n(e.attributes.title_multiloc)}}))),o||(u=[{value:"",label:i(T.default.allProjects)}].concat((0,l.default)(u))),u})),(0,p.default)((0,c.default)(a),"generateGroupsOptions",(function(){var e=a.props,t=e.groups,r=e.groups.groupsList,n=e.intl.formatMessage,o=e.localize,i=[];return(0,x.isNilOrError)(t)||(0,x.isNilOrError)(r)||(i=r.map((function(e){return{value:e.id,label:o(e.attributes.title_multiloc)}}))),[{value:"",label:n(T.default.allGroups)}].concat((0,l.default)(i))})),(0,p.default)((0,c.default)(a),"generateTopicOptions",(function(){var e=a.props,t=e.topics,r=e.localize,n=e.intl.formatMessage,o=[];return(0,x.isNilOrError)(t)||(o=t.filter((function(e){return!(0,x.isNilOrError)(e)})).map((function(e){return{value:e.id,label:r(e.attributes.title_multiloc)}}))),[{value:"",label:n(T.default.allTopics)}].concat((0,l.default)(o))}));var n=e.onlyModerator,o=e.projects.projectsList,u=e.intl.formatMessage;return a.state={resolution:"month",startAtMoment:void 0,endAtMoment:(0,v.default)(),currentProjectFilter:n&&o&&o.length>0?o[0].id:void 0,currentProjectFilterLabel:void 0,currentGroupFilter:void 0,currentGroupFilterLabel:void 0,currentTopicFilter:void 0,currentTopicFilterLabel:void 0,currentResourceByTopic:"ideas",currentResourceByProject:"ideas",projectFilterOptions:a.generateProjectOptions(),groupFilterOptions:a.generateGroupsOptions(),topicFilterOptions:a.generateTopicOptions()},a.resourceOptions=[{value:"ideas",label:u(T.default.inputs)},{value:"comments",label:u(T.default.comments)},{value:"votes",label:u(T.default.votes)}],a}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.projects.projectsList,a=t.topics,n=t.groups,o=t.onlyModerator;r!==e.projects.projectsList&&(this.setState({projectFilterOptions:this.generateProjectOptions()}),o&&null===this.state.currentProjectFilter&&this.setState({currentProjectFilter:r&&r.length>0?r[0].id:void 0})),a!==e.topics&&this.setState({topicFilterOptions:this.generateTopicOptions()}),n!==e.groups&&this.setState({groupFilterOptions:this.generateGroupsOptions()})}},{key:"render",value:function(){var e=this.state,t=e.resolution,r=e.startAtMoment,a=e.endAtMoment,n=e.currentProjectFilter,l=e.currentGroupFilter,i=e.currentTopicFilter,u=e.projectFilterOptions,c=e.groupFilterOptions,s=e.topicFilterOptions,f=r&&r.toISOString(),d=a&&a.toISOString(),p=this.props,h=p.projects,v=p.projects.projectsList,k=p.intl.formatMessage,S=k(T.default.numberOfActiveParticipantsDescription);return h&&!(0,x.isNilOrError)(v)?m.default.createElement(m.default.Fragment,null,m.default.createElement(y.ControlBar,null,m.default.createElement(F.default,{startAtMoment:r,endAtMoment:a,onChange:this.handleChangeTimeRange}),m.default.createElement(g.default,{value:t,onChange:this.handleChangeResolution})),m.default.createElement(E.default,{currentProjectFilter:n,currentGroupFilter:l,currentTopicFilter:i,projectFilterOptions:u,groupFilterOptions:c,topicFilterOptions:s,onProjectFilter:this.handleOnProjectFilter,onGroupFilter:this.handleOnGroupFilter,onTopicFilter:this.handleOnTopicFilter}),m.default.createElement(y.GraphsContainer,null,m.default.createElement(O.default,(0,o.default)({graphUnit:"users",graphUnitMessageKey:"users",graphTitle:k(T.default.usersByTimeTitle),startAt:f,endAt:d,xlsxEndpoint:N.usersByTimeXlsxEndpoint,lineStream:N.usersByTimeCumulativeStream,barStream:N.usersByTimeStream,className:"e2e-active-users-chart"},this.state)),m.default.createElement(b.default,(0,o.default)({graphUnit:"users",graphUnitMessageKey:"activeUsers",graphTitle:k(T.default.activeUsersByTimeTitle),startAt:f,endAt:d,xlsxEndpoint:N.activeUsersByTimeXlsxEndpoint,stream:N.activeUsersByTimeStream,infoMessage:S,className:"e2e-active-users-chart"},this.state)),m.default.createElement(O.default,(0,o.default)({graphTitle:k(T.default.inputs),graphUnit:"ideas",graphUnitMessageKey:"ideas",startAt:f,endAt:d,xlsxEndpoint:N.ideasByTimeCumulativeXlsxEndpoint,className:"e2e-ideas-chart",lineStream:N.ideasByTimeCumulativeStream,barStream:N.ideasByTimeStream},this.state)),m.default.createElement(O.default,(0,o.default)({graphTitle:k(T.default.commentsByTimeTitle),graphUnit:"comments",graphUnitMessageKey:"comments",startAt:f,endAt:d,xlsxEndpoint:N.commentsByTimeCumulativeXlsxEndpoint,className:"e2e-comments-chart",lineStream:N.commentsByTimeCumulativeStream,barStream:N.commentsByTimeStream},this.state)),m.default.createElement(y.Column,null,m.default.createElement(j.default,(0,o.default)({className:"fullWidth e2e-votes-chart",startAt:f,endAt:d},this.state)),m.default.createElement(P.default,(0,o.default)({className:"dynamicHeight fullWidth e2e-resource-by-project-chart",onResourceByProjectChange:this.onResourceByProjectChange,resourceOptions:this.resourceOptions,projectOptions:u,startAt:f,endAt:d},this.state))),m.default.createElement(y.Column,null,m.default.createElement(D.default,(0,o.default)({className:"fullWidth dynamicHeight",startAt:f,endAt:d},this.state)),m.default.createElement(C.default,(0,o.default)({className:"fullWidth dynamicHeight e2e-resource-by-topic-chart",topicOptions:s,onResourceByTopicChange:this.onResourceByTopicChange,resourceOptions:this.resourceOptions,startAt:f,endAt:d},this.state))))):null}}]),r}(m.PureComponent),W=(0,h.adopt)({groups:m.default.createElement(A.default,null),topics:m.default.createElement(M.default,null),projects:m.default.createElement(w.default,{publicationStatuses:["draft","published","archived"],filterCanModerate:!0})}),_=(0,k.injectTracks)({trackFilterOnGroup:S.default.filteredOnGroup,trackFilterOnProject:S.default.filteredOnProject,trackFilterOnTopic:S.default.filteredOnTopic,trackResourceChange:S.default.choseResource})((0,B.default)((0,R.injectIntl)(G)));t.default=function(e){return m.default.createElement(W,e,(function(t){return m.default.createElement(_,(0,o.default)({},e,t))}))}},"TDU/":function(e,t,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("ma9I"),r("fbCW"),r("sMBO");var o=a(r("lwsE")),l=a(r("W8MJ")),i=a(r("PJYZ")),u=a(r("7W2i")),c=a(r("a1gu")),s=a(r("Nsbk")),f=a(r("lSNA")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r("q1tI")),p=a(r("vOnD")),m=r("Rw3A"),h=a(r("/mrp")),v=a(r("EsqC"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,c.default)(this,r)}}var b=p.default.div.withConfig({displayName:"ResolutionControl__Container",componentId:"sc-6ibpf5-0"})([""]),O=function(e){(0,u.default)(r,e);var t=g(r);function r(){var e;(0,o.default)(this,r);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),(0,f.default)((0,i.default)(e),"handleOnResolutionChange",(function(t){e.props.onChange(t)})),e}return(0,l.default)(r,[{key:"render",value:function(){var e,t=this.props,r=t.value,a=t.className,n=[{name:"day",label:d.default.createElement(m.FormattedMessage,h.default.resolutionday)},{name:"week",label:d.default.createElement(m.FormattedMessage,h.default.resolutionweek)},{name:"month",label:d.default.createElement(m.FormattedMessage,h.default.resolutionmonth)}];return d.default.createElement(b,{className:a},d.default.createElement(v.default,{items:n,selectedValue:null===(e=n.find((function(e){return e.name===r})))||void 0===e?void 0:e.name,onClick:this.handleOnResolutionChange}))}}]),r}(d.PureComponent);t.default=O},TjhY:function(e,t,r){"use strict";r("SuFq");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IdeasByStatusChart=void 0,r("2B1R"),r("tkto");var n=a(r("pVnL")),o=a(r("lwsE")),l=a(r("W8MJ")),i=a(r("PJYZ")),u=a(r("7W2i")),c=a(r("a1gu")),s=a(r("Nsbk")),f=a(r("lSNA")),d=a(r("q1tI")),p=r("T89o"),m=r("Rw3A"),h=a(r("Zi2k")),v=r("vOnD"),y=a(r("CHxe")),g=r("4XXU"),b=r("ONLP"),O=a(r("x4KB")),E=r("kyyJ"),P=a(r("V3HD"));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,c.default)(this,r)}}var j=function(e){(0,u.default)(r,e);var t=C(r);function r(e){var a;return(0,o.default)(this,r),a=t.call(this,e),(0,f.default)((0,i.default)(a),"currentChart",void 0),a.currentChart=d.default.createRef(),a}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props.theme,t=e.chartFill,r=e.chartLabelSize,a=e.chartLabelColor,n=e.barHoverColor,o=e.animationBegin,l=e.animationDuration,i=this.props,u=i.currentGroupFilterLabel,c=i.currentGroupFilter,s=i.className,f=i.serie,v=i.intl.formatMessage,O=!f||f.every((function(e){return(0,p.isEmpty)(e)}))||f.length<=0,P=v(h.default.inputs),C=function(e){var t=e.x,n=e.y,o=e.value;return d.default.createElement("text",{x:t,y:n,dx:20,dy:-6,fontFamily:"sans-serif",fill:a,fontSize:r,textAnchor:"middle"}," ",o," ")};return d.default.createElement(b.GraphCard,{className:s},d.default.createElement(b.GraphCardInner,null,d.default.createElement(b.GraphCardHeader,null,d.default.createElement(b.GraphCardTitle,null,d.default.createElement(m.FormattedMessage,h.default.inputsByStatusTitle)),!O&&d.default.createElement(y.default,{name:v(h.default.inputsByStatusTitle),svgNode:this.currentChart,xlsxEndpoint:E.ideasByStatusXlsxEndpoint,currentGroupFilterLabel:u,currentGroupFilter:c})),O?d.default.createElement(b.NoDataContainer,null,d.default.createElement(m.FormattedMessage,h.default.noData)):d.default.createElement(g.ResponsiveContainer,{height:f.length>1?50*f.length:100},d.default.createElement(g.BarChart,{data:f,layout:"vertical",ref:this.currentChart},d.default.createElement(g.Bar,{dataKey:"value",name:P,fill:t,label:d.default.createElement(C,null),barSize:5,animationDuration:l,animationBegin:o},f.map((function(e,r){return d.default.createElement(g.Cell,{key:"cell-".concat(r),fill:e.color&&e.color||t,opacity:.8})}))),d.default.createElement(g.YAxis,{dataKey:"name",type:"category",width:150,stroke:a,fontSize:r,tickLine:!1}),d.default.createElement(g.XAxis,{stroke:a,fontSize:r,type:"number",tick:{transform:"translate(0, 7)"}}),d.default.createElement(g.Tooltip,{isAnimationActive:!1,cursor:{fill:n}})))))}}]),r}(d.default.PureComponent);t.IdeasByStatusChart=j;var F=(0,m.injectIntl)((0,v.withTheme)(j)),k=(0,P.default)((function(e){return d.default.createElement(O.default,(0,n.default)({},e,{stream:E.ideasByStatusStream,convertToGraphFormat:function(t){var r=t.series.ideas,a=t.idea_status;return Object.keys(r).length<=0?null:(0,p.map)(a,(function(t,a){return{value:r[a]||0,name:e.localize(t.title_multiloc),code:a,color:t.color,ordering:t.ordering}}))}}),(function(t){return d.default.createElement(F,(0,n.default)({},t,e))}))}));t.default=k},UquU:function(e,t,r){"use strict";r("2B1R"),r("SuFq");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("07d7"),r("JfAA");var n=a(r("pVnL")),o=a(r("J4zp")),l=a(r("lwsE")),i=a(r("W8MJ")),u=a(r("PJYZ")),c=a(r("7W2i")),s=a(r("a1gu")),f=a(r("Nsbk")),d=a(r("lSNA")),p=a(r("q1tI")),m=r("DtyJ"),h=r("T89o"),v=r("vOnD"),y=r("ufqH"),g=r("kyyJ"),b=a(r("CHxe")),O=r("4XXU"),E=r("ONLP"),P=a(r("Zi2k")),C=r("Rw3A");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var F=function(e){(0,c.default)(r,e);var t=j(r);function r(e){var a;return(0,l.default)(this,r),a=t.call(this,e),(0,d.default)((0,u.default)(a),"combined$",void 0),(0,d.default)((0,u.default)(a),"currentChart",void 0),(0,d.default)((0,u.default)(a),"formatTick",(function(e){var t=a.props.resolution;return(0,a.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"short"})})),(0,d.default)((0,u.default)(a),"formatLabel",(function(e){var t=a.props.resolution;return(0,a.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"long",year:"numeric"})})),(0,d.default)((0,u.default)(a),"formatSerieChange",(function(e){return e>0?"(+".concat(e.toString(),")"):e<0?"(".concat(e.toString(),")"):null})),a.state={serie:null},a.currentChart=p.default.createRef(),a}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startAt,r=e.endAt,a=e.resolution,n=e.currentGroupFilter,o=e.currentTopicFilter,l=e.currentProjectFilter;this.resubscribe(t,r,a,n,o,l)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.startAt,a=t.endAt,n=t.resolution,o=t.currentGroupFilter,l=t.currentTopicFilter,i=t.currentProjectFilter;r===e.startAt&&a===e.endAt&&n===e.resolution&&o===e.currentGroupFilter&&l===e.currentTopicFilter&&i===e.currentProjectFilter||this.resubscribe(r,a,n,o,l,i)}},{key:"componentWillUnmount",value:function(){this.combined$.unsubscribe()}},{key:"convertAndMergeSeries",value:function(e,t){var r=e.series,a=r.up,n=r.down,o=r.total;return(0,h.isEmpty)(o)||(0,h.isEmpty)(t.series.total)?null:(0,h.map)(o,(function(e,r){return{total:e,down:n[r],up:a[r],date:r,code:r,cumulatedTotal:t.series.total[r]}}))}},{key:"resubscribe",value:function(e,t,r,a,n,l){var i=this;this.combined$&&this.combined$.unsubscribe();var u={queryParameters:{start_at:e,end_at:t,interval:r,project:l,group:a,topic:n}},c=(0,g.votesByTimeStream)(u).observable,s=(0,g.votesByTimeCumulativeStream)(u).observable;this.combined$=(0,m.combineLatest)(c,s).subscribe((function(e){var t=(0,o.default)(e,2),r=t[0],a=t[1],n=i.convertAndMergeSeries(r,a);i.setState({serie:n})}))}},{key:"getFormattedNumbers",value:function(e){if(e&&e.length>0){var t=e[0].cumulatedTotal,r=e[e.length-1].cumulatedTotal,a=r-t,n="";return a>0?n="increase":a<0&&(n="decrease"),{typeOfChange:n,totalNumber:r,formattedSerieChange:this.formatSerieChange(a)}}return{totalNumber:null,formattedSerieChange:null,typeOfChange:""}}},{key:"render",value:function(){var e=this.props.theme,t=e.chartLabelSize,r=e.chartLabelColor,a=e.newLineColor,o=e.animationBegin,l=e.animationDuration,i=e.cartesianGridColor,u=e.newBarFill,c=this.props.intl.formatMessage,s=this.state.serie,f=this.getFormattedNumbers(s),d=this.props,m=d.className,h=d.resolution,v=f.totalNumber,j=f.formattedSerieChange,F=f.typeOfChange;return p.default.createElement(E.GraphCard,{className:m},p.default.createElement(E.GraphCardInner,null,p.default.createElement(E.GraphCardHeader,null,p.default.createElement(E.GraphCardTitle,null,p.default.createElement(C.FormattedMessage,P.default.votes),p.default.createElement(E.GraphCardFigureContainer,null,p.default.createElement(E.GraphCardFigure,null,v),p.default.createElement(E.GraphCardFigureChange,{className:F},j))),s&&p.default.createElement(b.default,(0,n.default)({svgNode:this.currentChart,xlsxEndpoint:g.votesByTimeXlsxEndpoint,name:c(P.default.votes)},this.props))),s?p.default.createElement(O.ResponsiveContainer,null,p.default.createElement(O.ComposedChart,{data:s,margin:{right:40},ref:this.currentChart},p.default.createElement(O.CartesianGrid,{stroke:i,strokeWidth:.5}),p.default.createElement(O.XAxis,{dataKey:"date",interval:"preserveStartEnd",stroke:r,fontSize:t,tick:{transform:"translate(0, 7)"},tickFormatter:this.formatTick,tickLine:!1}),p.default.createElement(O.YAxis,{stroke:r,fontSize:t,yAxisId:"cumulatedTotal",tickLine:!1},p.default.createElement(O.Label,{value:c(P.default.total),angle:-90,position:"center",dx:-15})),p.default.createElement(O.YAxis,{yAxisId:"barValue",orientation:"right",tickLine:!1},p.default.createElement(O.Label,{value:c(P.default.perPeriod,{period:c(P.default[h])}),angle:90,position:"center",dx:15})),p.default.createElement(O.Tooltip,{isAnimationActive:!1,labelFormatter:this.formatLabel}),p.default.createElement(O.Bar,{dataKey:"up",name:c(P.default.numberOfVotesUp),fill:(0,y.rgba)(u,1),animationDuration:l,animationBegin:o,stackId:"1",yAxisId:"barValue",barSize:20}),p.default.createElement(O.Bar,{dataKey:"down",name:c(P.default.numberOfVotesDown),fill:(0,y.rgba)(u,.7),stackId:"1",animationDuration:l,animationBegin:o,stroke:"none",yAxisId:"barValue",barSize:20}),p.default.createElement(O.Line,{type:"monotone",dataKey:"cumulatedTotal",name:c(P.default.total),dot:s&&(null==s?void 0:s.length)<31,stroke:a,fill:a,strokeWidth:1,yAxisId:"cumulatedTotal"}),p.default.createElement(O.Legend,{wrapperStyle:{paddingTop:"20px"}}))):p.default.createElement(E.NoDataContainer,null,p.default.createElement(C.FormattedMessage,P.default.noData))))}}]),r}(p.default.PureComponent),k=(0,C.injectIntl)((0,v.withTheme)(F));t.default=k},bSmz:function(e,t,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=a(r("pVnL")),i=a(r("lwsE")),u=a(r("W8MJ")),c=a(r("PJYZ")),s=a(r("7W2i")),f=a(r("a1gu")),d=a(r("Nsbk")),p=a(r("lSNA")),m=a(r("VkAN")),h=T(r("q1tI")),v=r("Rw3A"),y=a(r("Zi2k")),g=T(r("vOnD")),b=r("96Cm"),O=a(r("x4KB")),E=a(r("CHxe")),P=r("4XXU"),C=r("ONLP"),j=r("iP56"),F=r("+9pX"),k=r("kyyJ");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var B=(0,g.default)(F.HiddenLabel).withConfig({displayName:"SelectableResourceChart__SHiddenLabel",componentId:"sc-1e5jl28-0"})(["flex:1;margin-right:15px;@media (max-width:1300px){width:100%;}"]),w=g.default.h3.withConfig({displayName:"SelectableResourceChart__GraphCardTitle",componentId:"sc-1e5jl28-1"})(["margin:0;margin-right:15px;",""],b.media.smallerThan1280px(o||(o=(0,m.default)(["\n    margin-bottom: 15px;\n  "])))),A=function(e){(0,s.default)(r,e);var t=R(r);function r(e){var a;return(0,i.default)(this,r),a=t.call(this,e),(0,p.default)((0,c.default)(a),"currentChart",void 0),a.currentChart=h.default.createRef(),a}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.theme,t=e.barHoverColor,r=e.chartLabelSize,a=e.chartLabelColor,n=e.barFill,o=e.animationBegin,i=e.animationDuration,u=e.newBarFill,c=this.props,s=c.className,f=c.onResourceByXChange,d=c.currentSelectedResource,p=c.resourceOptions,m=c.intl.formatMessage,g=c.currentFilter,b=c.byWhat,O=c.convertSerie,F=c.serie,S=d&&m({ideas:y.default.inputs,comments:y.default.comments,votes:y.default.votes}[d]),T=O(F),R=T.convertedSerie,A=T.selectedCount,M=T.selectedName,x=g&&F?m(y.default.resourceByDifference,{selectedResourceName:S,selectedName:M}):S,N={ideasTopic:k.ideasByTopicXlsxEndpoint,commentsTopic:k.commentsByTopicXlsxEndpoint,votesTopic:k.votesByTopicXlsxEndpoint,ideasProject:k.ideasByProjectXlsxEndpoint,commentsProject:k.commentsByProjectXlsxEndpoint,votesProject:k.votesByProjectXlsxEndpoint};return h.default.createElement(C.GraphCard,{className:s},h.default.createElement(C.GraphCardInner,null,h.default.createElement(C.GraphCardHeaderWithFilter,null,h.default.createElement(w,null,h.default.createElement(v.FormattedMessage,y.default["participationPer".concat(b)])),h.default.createElement(B,null,h.default.createElement(v.FormattedMessage,y.default["hiddenLabelPickResourceBy".concat(b)]),h.default.createElement(j.Select,{id:"select".concat(b),onChange:f,value:d,options:p})),F&&h.default.createElement(E.default,(0,l.default)({className:"",svgNode:this.currentChart,name:m(y.default["participationPer".concat(b)])},this.props,{xlsxEndpoint:N[d+b]}))),F?h.default.createElement(h.default.Fragment,null,g&&h.default.createElement(v.FormattedMessage,(0,l.default)({tagName:"p"},y.default.totalCount,{values:{selectedCount:A,selectedName:M,selectedResourceName:S}})),h.default.createElement(P.ResponsiveContainer,{height:F.length>1?50*F.length:100},h.default.createElement(P.BarChart,{data:null!=R?R:void 0,layout:"vertical",ref:this.currentChart},h.default.createElement(P.Bar,{dataKey:"value",name:x,fill:u,barSize:20,animationDuration:i,animationBegin:o,isAnimationActive:!0},h.default.createElement(P.LabelList,{fill:n,fontSize:r})),h.default.createElement(P.YAxis,{dataKey:"name",type:"category",width:150,stroke:a,fontSize:r,tickLine:!1}),h.default.createElement(P.XAxis,{stroke:a,fontSize:r,type:"number",tick:{transform:"translate(0, 7)"}}),h.default.createElement(P.Tooltip,{isAnimationActive:!1,cursor:{fill:t}})))):h.default.createElement(C.NoDataContainer,null,g&&A?h.default.createElement(v.FormattedMessage,(0,l.default)({},y.default.totalCount,{values:{selectedCount:A,selectedName:M,selectedResourceName:S}})):h.default.createElement(v.FormattedMessage,y.default.noData))))}}]),r}(h.PureComponent),M=(0,v.injectIntl)((0,g.withTheme)(A));t.default=function(e){return h.default.createElement(O.default,e,(function(t){return h.default.createElement(M,(0,l.default)({},t,e))}))}},lPdK:function(e,t,r){"use strict";r("SuFq");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("ToJy"),r("2B1R"),r("TeQF"),r("FZtP");var n=a(r("lwsE")),o=a(r("W8MJ")),l=a(r("PJYZ")),i=a(r("7W2i")),u=a(r("a1gu")),c=a(r("Nsbk")),s=a(r("lSNA")),f=a(r("q1tI")),d=r("T89o"),p=r("DtyJ"),m=r("ahDk"),h=r("Sxt5"),v=r("rltp"),y=r("KLnl");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,u.default)(this,r)}}var b=function(e){(0,i.default)(r,e);var t=g(r);function r(e){var a;return(0,n.default)(this,r),a=t.call(this,e),(0,s.default)((0,l.default)(a),"inputProps$",void 0),(0,s.default)((0,l.default)(a),"subscriptions",void 0),a.state={topics:void 0},a}return(0,o.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.topicIds,a=t.code,n=t.exclude_code,o=t.sort,l=t.projectId;this.inputProps$=new p.BehaviorSubject({topicIds:r,code:a,exclude_code:n,sort:o,projectId:l}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(e,t){return(0,d.isEqual)(e,t)})),(0,m.switchMap)((function(e){var t=e.topicIds,r=e.code,a=e.exclude_code,n=e.sort,o=e.projectId,l={code:r,exclude_code:a,sort:n};return o?(0,v.projectTopicsStream)(o).observable.pipe((0,m.map)((function(e){return e.data.filter((function(e){return e})).map((function(e){return e.relationships.topic.data.id}))})),(0,m.switchMap)((function(e){return(0,p.combineLatest)(e.map((function(e){return(0,h.topicByIdStream)(e).observable.pipe((0,m.map)((function(e){return(0,y.isNilOrError)(e)?e:e.data})))})))}))):t?t.length>0?(0,p.combineLatest)(t.map((function(e){return(0,h.topicByIdStream)(e).observable.pipe((0,m.map)((function(e){return(0,y.isNilOrError)(e)?e:e.data})))}))):(0,p.of)(null):(0,h.topicsStream)({queryParameters:l}).observable.pipe((0,m.map)((function(e){return e.data})))}))).subscribe((function(t){e.setState({topics:t})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.topicIds,r=e.code,a=e.exclude_code,n=e.sort,o=e.projectId;this.inputProps$.next({topicIds:t,code:r,exclude_code:a,sort:n,projectId:o})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.topics)}}]),r}(f.default.Component);t.default=b},xcGu:function(e,t,r){"use strict";r("2B1R"),r("SuFq"),r("4mDm"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var a=r("TqRt"),n=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("07d7"),r("JfAA");var o=a(r("pVnL")),l=a(r("J4zp")),i=a(r("lwsE")),u=a(r("W8MJ")),c=a(r("PJYZ")),s=a(r("7W2i")),f=a(r("a1gu")),d=a(r("Nsbk")),p=a(r("lSNA")),m=a(r("q1tI")),h=r("DtyJ"),v=r("T89o"),y=r("Rw3A"),g=a(r("Zi2k")),b=a(r("CHxe")),O=r("4XXU"),E=r("ONLP"),P=r("FvIY"),C=r("iP56"),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=F(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,r&&r.set(e,a);return a}(r("vOnD"));function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(F=function(e){return e?r:t})(e)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var S=(0,j.default)(C.Icon).withConfig({displayName:"LineBarChart__InfoIcon",componentId:"sc-1660lxj-0"})(["display:flex;align-items:center;cursor:pointer;width:20px;height:22px;margin-left:10px;"]),T=(0,j.default)(O.ResponsiveContainer).withConfig({displayName:"LineBarChart__StyledResponsiveContainer",componentId:"sc-1660lxj-1"})([".recharts-wrapper{@media print{margin:0 auto;}}"]),R=function(e){(0,s.default)(r,e);var t=k(r);function r(e){var a;return(0,i.default)(this,r),a=t.call(this,e),(0,p.default)((0,c.default)(a),"combined$",void 0),(0,p.default)((0,c.default)(a),"currentChart",void 0),(0,p.default)((0,c.default)(a),"convertAndMergeSeries",(function(e,t){var r=a.props.graphUnit;if(!(0,v.isEmpty)(t.series[r])&&!(0,v.isEmpty)(e.series[r]))return(0,v.map)(t.series[r],(function(t,a){return{total:t,barValue:e.series[r][a],name:a,code:a}}))})),(0,p.default)((0,c.default)(a),"formatTick",(function(e){var t=a.props.resolution;return(0,a.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"short"})})),(0,p.default)((0,c.default)(a),"formatLabel",(function(e){var t=a.props.resolution;return(0,a.props.intl.formatDate)(e,{day:"month"===t?void 0:"2-digit",month:"long",year:"numeric"})})),(0,p.default)((0,c.default)(a),"formatSerieChange",(function(e){return e>0?"(+".concat(e.toString(),")"):e<0?"(".concat(e.toString(),")"):null})),a.state={serie:void 0},a.currentChart=m.default.createRef(),a}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.resubscribe()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.startAt,a=t.endAt,n=t.resolution,o=t.currentGroupFilter,l=t.currentTopicFilter,i=t.currentProjectFilter;r===e.startAt&&a===e.endAt&&n===e.resolution&&o===e.currentGroupFilter&&l===e.currentTopicFilter&&i===e.currentProjectFilter||this.resubscribe()}},{key:"componentWillUnmount",value:function(){this.combined$.unsubscribe()}},{key:"resubscribe",value:function(){var e=this,t=this.props,r=t.barStream,a=t.lineStream,n=t.startAt,o=t.endAt,i=t.resolution,u=t.currentProjectFilter,c=t.currentGroupFilter,s=t.currentTopicFilter;this.combined$&&this.combined$.unsubscribe();var f={queryParameters:{start_at:n,end_at:o,interval:i,project:u,group:c,topic:s}},d=r(f).observable,p=a(f).observable;this.combined$=(0,h.combineLatest)(d,p).subscribe((function(t){var r=(0,l.default)(t,2),a=r[0],n=r[1],o=e.convertAndMergeSeries(a,n);e.setState({serie:o})}))}},{key:"getFormattedNumbers",value:function(e){if(e){var t=e&&e[0].total,r=e&&e[e.length-1].total,a=r-t,n="";return a>0?n="increase":a<0&&(n="decrease"),{typeOfChange:n,totalNumber:r,formattedSerieChange:this.formatSerieChange(a)}}return{totalNumber:null,formattedSerieChange:null,typeOfChange:""}}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.props,r=t.className,a=t.graphTitle,n=t.infoMessage,l=t.resolution,i=this.state.serie,u=this.props.theme,c=u.chartLabelSize,s=u.chartLabelColor,f=u.cartesianGridColor,d=u.newBarFill,p=u.newLineColor,h=this.getFormattedNumbers(i),C=h.totalNumber,j=h.formattedSerieChange,F=h.typeOfChange,k=!i||i.every((function(e){return(0,v.isEmpty)(e)}))||i.length<=0;return m.default.createElement(E.GraphCard,{className:r},m.default.createElement(E.GraphCardInner,null,m.default.createElement(E.GraphCardHeader,null,m.default.createElement(E.GraphCardTitle,null,a,n&&m.default.createElement(P.Popup,{basic:!0,trigger:m.default.createElement("div",null,m.default.createElement(S,{name:"info"})),content:n,position:"top left"}),m.default.createElement(E.GraphCardFigureContainer,null,m.default.createElement(E.GraphCardFigure,null,C),m.default.createElement(E.GraphCardFigureChange,{className:F},j))),!k&&m.default.createElement(b.default,(0,o.default)({svgNode:this.currentChart,name:a},this.props))),k?m.default.createElement(E.NoDataContainer,null,m.default.createElement(y.FormattedMessage,g.default.noData)):m.default.createElement(T,null,m.default.createElement(O.ComposedChart,{data:i,reverseStackOrder:!0,ref:this.currentChart},m.default.createElement(O.CartesianGrid,{stroke:f,strokeWidth:.5}),m.default.createElement(O.XAxis,{dataKey:"name",interval:"preserveStartEnd",stroke:s,fontSize:c,tick:{transform:"translate(0, 7)"},tickFormatter:this.formatTick,tickLine:!1}),m.default.createElement(O.YAxis,{yAxisId:"total",stroke:s,fontSize:c,tickLine:!1},m.default.createElement(O.Label,{value:e(g.default.total),angle:-90,position:"center",dx:-15})),m.default.createElement(O.YAxis,{yAxisId:"barValue",orientation:"right",allowDecimals:!1,tickLine:!1},m.default.createElement(O.Label,{value:e(g.default.perPeriod,{period:e(g.default[l])}),angle:90,position:"center",dx:15})),m.default.createElement(O.Tooltip,{isAnimationActive:!1,labelFormatter:this.formatLabel,cursor:{strokeWidth:1}}),m.default.createElement(O.Bar,{dataKey:"barValue",yAxisId:"barValue",barSize:20,fill:d,fillOpacity:1,name:e(g.default.totalForPeriod,{period:e(g.default[l])})}),m.default.createElement(O.Line,{type:"monotone",yAxisId:"total",dataKey:"total",activeDot:Boolean(i&&(null==i?void 0:i.length)<31),stroke:p,fill:p,strokeWidth:1,name:e(g.default.total)}),m.default.createElement(O.Legend,{wrapperStyle:{paddingTop:"20px"}})))))}}]),r}(m.default.PureComponent),B=(0,y.injectIntl)((0,j.withTheme)(R));t.default=B}}]);
//# sourceMappingURL=90.44d5e07ef2c9db5a2a14.chunk.js.map