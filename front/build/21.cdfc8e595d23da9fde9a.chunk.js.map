{"version":3,"sources":["webpack:///./app/hooks/useIdeaStatus.ts","webpack:///./app/components/IdeaCards/messages.ts","webpack:///./app/components/PostCardsComponents/messages.ts","webpack:///./app/components/AssignBudgetControl/messages.ts","webpack:///./app/components/IdeaCard/Compact/FooterWithBudgetControl.tsx","webpack:///./app/components/StatusBadge/index.tsx","webpack:///./app/components/UI/Card/Compact.tsx","webpack:///./app/components/VoteControl/index.tsx","webpack:///./app/services/ideaImages.ts","webpack:///./app/components/PostCardsComponents/ViewButtons.tsx","webpack:///./app/components/IdeaCards/SortFilterDropdown.tsx","webpack:///./app/components/IdeaCard/Compact/index.tsx","webpack:///./app/components/PostCardsComponents/tracks.ts","webpack:///./app/resources/GetIdeas.tsx","webpack:///./app/components/VoteControl/messages.ts","webpack:///./app/hooks/useIdeaImage.ts","webpack:///./app/components/AssignBudgetControl/index.tsx","webpack:///./app/services/ideaVotes.ts","webpack:///./app/components/IdeaCard/Compact/FooterWithVoteControl.tsx","webpack:///./app/components/IdeaCards/tracks.ts"],"names":["statusId","useState","ideaStatus","setIdeaStatus","useEffect","subscription","ideaStatusStream","observable","subscribe","response","data","unsubscribe","defineMessages","showMore","id","defaultMessage","noFilteredResults","tryDifferentFilters","topics","projectFilterTitle","statusTitle","sortTitle","topicsTitle","trending","random","popular","newest","oldest","map","list","xResults","all","filter","showResults","showXResults","resetFilters","a11y_totalItems","remove","removeFromMyBasket","add","addToMyBasket","budgetingNotPossible","budgetingFutureEnabled","budgetingNotPermitted","budgetingNotVerified","verifyAccountLinkText","a11y_price","backToOverview","Footer","styled","footer","BudgetControl","div","IdeaBudget","span","colors","label","fontSizes","base","props","theme","colorText","CommentsCount","CommentIcon","Icon","memo","idea","participationContextId","participationContextType","projectId","relationships","project","ideaBudget","attributes","budget","className","name","comments_count","value","view","ideaId","Container","color","xs","borderRadius","transparentize","isNilOrError","title_multiloc","cardPadding","cardInnerHeight","cardInnerHeightExtended","Link","defaultCardStyle","defaultCardHoverStyle","media","smallerThanMinTablet","IdeaCardImageWrapper","IdeaCardImage","Image","ContentWrapper","Header","header","Title","h3","Body","Card","to","onClick","image","imagePlaceholder","hideImage","hideImagePlaceholder","title","body","bowser","mobile","tablet","hasImage","src","cover","alt","voteKeyframeAnimation","keyframes","isRtl","VoteIconContainer","styleType","css","lighten","votingEnabled","defaultStyles","boxShadow","boxShadowHoverSmall","size","VoteIcon","VoteCount","Vote","button","Upvote","active","clGreen","enabled","Downvote","clRed","VoteControl","setState","votingAnimation","event","preventDefault","stopPropagation","vote","voteMode","state","authUser","myVoteId","myVoteMode","voting","participationContext","disabledVoteClick","action_descriptor","voting_idea","cancellingEnabled","cancelling_enabled","votingDisabledReason","disabled_reason","isSignedIn","isTryingToUndoVote","isVerified","verified","voting$","next","refetchIdeas","voting_method","upvotesCount","downvotesCount","deleteVote","addVote","user_id","mode","ideaByIdStream","fetch","openVerificationModal","openSignUpInModal","verification","verificationContext","action","type","undefined","element","setRef","upvoteElement","downvoteElement","showVoteControl","loaded","BehaviorSubject","id$","subscriptions","authUser$","authUserStream","this","pipe","distinctUntilChanged","isString","addEventListener","votingAnimationDone","idea$","switchMap","combineLatest","myVote$","user_vote","voteId","vote$","voteStream","of","project$","phases$","hasPhases","isEmpty","get","phases","projectByIdStream","length","phase","phaseStream","upvotes_count","downvotes_count","votingFutureEnabled","future_enabled","isContinuousProject","process_type","ideaPhaseIds","item","ideaPhases","includes","latestRelevantIdeaPhase","getLatestRelevantPhase","shouldVerify","participation_method","myVote","removeEventListener","forEach","formatMessage","intl","ariaHidden","votingDescriptor","upvotingEnabled","downvotingEnabled","showDownvote","downvoting_enabled","screenreaderContent","ScreenReaderOnly","FormattedMessage","messages","a11y_upvotesDownvotes","values","LiveMessage","message","join","ref","setContainerRef","onMouseDown","removeFocus","onClickUpvote","setUpvoteRef","tabIndex","upvote","onClickDownvote","setDownvoteRef","downvote","PureComponent","withRouter","injectIntl","imageId","apiEndpoint","API_PATH","streams","streamParams","delete","base64","ordering","bodyData","ideaImage","darken","lightGreyishBlue","ListButton","Button","MapButton","selectedView","isListViewSelected","isMapViewSelected","handleOnClick","trackEventByName","tracks","toggleDisplay","locationButtonWasClicked","location","pathname","selectedDisplayMode","role","buttonStyle","icon","padding","textColor","text","bgColor","bgHoverColor","boxShadowHover","fullWidth","selectedValue","onChange","defaultSortingMethod","ideaDefaultSortMethodFallback","alignment","options","selected","handleOnChange","multipleSelectionAllowed","width","left","mobileLeft","right","mobileRight","BodyWrapper","StyledAvatar","Avatar","small","StyledUserName","UserName","Separator","TimeAgo","ImagePlaceholderContainer","ImagePlaceholderIcon","CompactIdeaCard","localize","participationMethod","hideIdeaStatus","ideaImageId","authorId","author","ideaTitle","bodyText","body_multiloc","replace","replaceAll","trim","commentingDescriptor","commenting_idea","newClassName","eventEmitter","emit","slug","versions","large","userId","hideIfNoAvatar","fillColor","FormattedRelative","created_at","style","GetIdeas","projects","projectIds","pageNumber","pageSize","phaseId","sort","areas","idea_status","ideaStatusId","publication_status","publicationStatus","project_publication_status","projectPublicationStatus","bounding_box","boundingBox","assignee","feedback_needed","feedbackNeeded","search","queryParamsShaped","propsToQueryParamsShape","Object","keys","key","queryParameters","isNil","isArray","inputPropsQueryParameters","omitBy","loadingMore","queryParameters$","ideaFilters","paramsToOmit","defaultQueryParameters","getQueryParametersFromProps","omit","getQueryParameters","hasMore","querying","sortAttribute","getSortAttribute","sortDirection","getSortDirection","currentPage","lastPage","startAccumulatorValue","ideas","prev","isEqual","oldPageNumber","newPageNumber","mini","ideasMiniStream","ideasStream","getPageNumberFromUrl","links","self","last","mergeScan","acc","newQueryParameters","oldQueryParamsWithoutPageNumber","cloneDeep","newQueryParamsWithoutPageNumber","isLoadingMore","selfLink","lastLink","unionBy","prevProps","_prevState","children","prevPropsWithoutChildren","nextPropsWithoutChildren","onLoadMore","loadMore","onChangePage","handleChangePage","onChangeProjects","handleProjectsOnChange","onChangePhase","handlePhaseOnChange","onChangeSearchTerm","handleSearchOnChange","onChangeSorting","handleSortOnChange","onChangeTopics","handleTopicsOnChange","onChangeAreas","handleAreasOnchange","onChangeStatus","handleStatusOnChange","onChangePublicationStatus","handlePublicationStatusOnChange","onChangeProjectPublicationStatus","handleProjectPublicationStatusOnChange","onChangeAssignee","handleAssigneeOnChange","onChangeFeedbackFilter","handleFeedbackFilterOnChange","onIdeaFiltering","handleIdeaFiltering","onResetParams","handleResetParamsToProps","React","Component","votingDisabledProjectInactive","votingDisabledPhaseOver","votingDisabledFutureEnabled","votingPossibleLater","votingNotEnabled","votingDisabledMaxReached","votingNotPermitted","votingNotVerified","linkToVerificationText","voteSuccessTitle","voteErrorTitle","voteErrorSubTitle","close","setIdeaImage","ideaImageStream","IdeaCardContainer","IdeaPageContainer","smallerThanMaxTablet","backgroundLightGrey","BudgetWithButtonWrapper","Budget","medium","StyledPBExpenses","PBExpenses","AssignBudgetControl","tenant","locale","basket","user_basket","processing","setProcessing","assignBudget","timeout","ms","Promise","resolve","setTimeout","done","isBudgetingEnabled","budgeting","basketIdeaIds","isInBasket","budgetingDisabledReason","newIdeas","basketIdea","updateBasket","participation_context_id","participation_context_type","capitalizeParticipationContextType","idea_ids","submitted_at","ideaAddedToBasket","fetchAllWith","dataId","addBasket","basketCreated","isUndefined","isPermitted","hasBudgetingDisabledReason","isPBContext","isCurrentPhase","getCurrentPhase","isCurrent","addRemoveButton","disabled","clRedError","iconSize","ariaLabel","viewMode","AssignBudgetControlWrapper","isUndefinedOrError","object","refetchAllActiveIdeas","ideaEndpointRegexp","RegExp","uuidRegExp","regexApiEndpoint","onlyFetchActiveStreams","_ideaId","Left","Right","StyledStatusBadge","StatusBadge","StyledVoteControl","isCommentingEnabled","loadMoreIdeas","sortingFilter","topicsFilter"],"mappings":"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","file":"21.cdfc8e595d23da9fde9a.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport { IIdeaStatusData, ideaStatusStream } from 'services/ideaStatuses';\n\nexport default function useIdeaStatus({ statusId }) {\n  const [ideaStatus, setIdeaStatus] = useState<IIdeaStatusData | Error | null>(\n    null\n  );\n\n  useEffect(() => {\n    const observable = ideaStatusStream(statusId).observable;\n\n    const subscription = observable.subscribe((response) => {\n      setIdeaStatus(response.data);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [statusId]);\n\n  return ideaStatus;\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  showMore: {\n    id: 'app.components.IdeaCards.showMore',\n    defaultMessage: 'Show more',\n  },\n  noFilteredResults: {\n    id: 'app.containers.IdeaCards.noFilteredResults',\n    defaultMessage:\n      'No results found. Please try a different filter or search term.',\n  },\n  tryDifferentFilters: {\n    id: 'app.containers.IdeaCards.tryDifferentFilters',\n    defaultMessage:\n      'No results found. Please try a different filter or search term.',\n  },\n  topics: {\n    id: 'app.containers.IdeaCards.topics',\n    defaultMessage: 'Topics',\n  },\n  projectFilterTitle: {\n    id: 'app.containers.IdeaCards.projectFilterTitle',\n    defaultMessage: 'Projects',\n  },\n  statusTitle: {\n    id: 'app.containers.IdeaCards.statusTitle',\n    defaultMessage: 'Status',\n  },\n  sortTitle: {\n    id: 'app.containers.IdeaCards.sortTitle',\n    defaultMessage: 'Sorting',\n  },\n  topicsTitle: {\n    id: 'app.containers.IdeaCards.topicsTitle',\n    defaultMessage: 'Topics',\n  },\n  trending: {\n    id: 'app.containers.IdeaCards.trending',\n    defaultMessage: 'Trending',\n  },\n  random: {\n    id: 'app.containers.IdeaCards.random',\n    defaultMessage: 'Random',\n  },\n  popular: {\n    id: 'app.containers.IdeaCards.popular',\n    defaultMessage: 'Popular',\n  },\n  newest: {\n    id: 'app.containers.IdeaCards.newest',\n    defaultMessage: 'Newest',\n  },\n  oldest: {\n    id: 'app.containers.IdeaCards.oldest',\n    defaultMessage: 'Oldest',\n  },\n  map: {\n    id: 'app.containers.IdeaCards.map',\n    defaultMessage: 'Map',\n  },\n  list: {\n    id: 'app.containers.IdeaCards.list',\n    defaultMessage: 'List',\n  },\n  xResults: {\n    id: 'app.containers.IdeaCards.xResults',\n    defaultMessage:\n      '{ideasCount, plural, no {# results} one {# result} other {# results}}',\n  },\n  all: {\n    id: 'app.containers.IdeaCards.all',\n    defaultMessage: 'All',\n  },\n  filter: {\n    id: 'app.containers.IdeaCards.filter',\n    defaultMessage: 'Filter',\n  },\n  showResults: {\n    id: 'app.containers.IdeaCards.showResults',\n    defaultMessage: 'Show results',\n  },\n  showXResults: {\n    id: 'app.containers.IdeaCards.showXResults',\n    defaultMessage:\n      'Show {ideasCount, plural, no {# results} one {# result} other {# results}}',\n  },\n  resetFilters: {\n    id: 'app.containers.IdeaCards.resetFilters',\n    defaultMessage: 'Reset filters',\n  },\n  a11y_totalItems: {\n    id: 'app.containers.IdeaCards.a11y_totalItems',\n    defaultMessage: 'Total items: {ideasCount}',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  map: {\n    id: 'app.components.PostCardsComponents.map',\n    defaultMessage: 'Map',\n  },\n  list: {\n    id: 'app.components.PostCardsComponents.list',\n    defaultMessage: 'List',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  remove: {\n    id: 'app.components.AssignBudgetControl.remove',\n    defaultMessage: 'Remove',\n  },\n  removeFromMyBasket: {\n    id: 'app.components.AssignBudgetControl.removeFromMyBasket',\n    defaultMessage: 'Remove from my basket',\n  },\n  add: {\n    id: 'app.components.AssignBudgetControl.add',\n    defaultMessage: 'Add',\n  },\n  addToMyBasket: {\n    id: 'app.components.AssignBudgetControl.addToMyBasket',\n    defaultMessage: 'Add to my basket',\n  },\n  budgetingNotPossible: {\n    id: 'app.components.VoteControl.budgetingNotPossible',\n    defaultMessage:\n      'Making changes to your budget is not possible at this time.',\n  },\n  budgetingFutureEnabled: {\n    id: 'app.components.VoteControl.budgetingFutureEnabled',\n    defaultMessage:\n      'You can allocate your budget starting from {enabledFromDate}.',\n  },\n  budgetingNotPermitted: {\n    id: 'app.components.VoteControl.budgetingNotPermitted',\n    defaultMessage:\n      'Participatory budgeting is only enabled for certain groups.',\n  },\n  budgetingNotVerified: {\n    id: 'app.components.VoteControl.budgetingNotVerified',\n    defaultMessage: 'Please {verifyAccountLink} to continue.',\n  },\n  verifyAccountLinkText: {\n    id: 'app.components.AssignBudgetControl.verifyAccountLinkText',\n    defaultMessage: 'verify your account',\n  },\n  a11y_price: {\n    id: 'app.components.AssignBudgetControl.a11y_price',\n    defaultMessage: 'Price: ',\n  },\n  backToOverview: {\n    id: 'app.components.AssignBudgetControl.backToOverview',\n    defaultMessage: 'Back to overview',\n  },\n});\n","import React, { memo } from 'react';\nimport FormattedBudget from 'utils/currency/FormattedBudget';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport AssignBudgetControl from 'components/AssignBudgetControl';\n\n// types\nimport { IParticipationContextType } from 'typings';\nimport { IIdeaData } from 'services/ideas';\n\n// styles\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\n\nconst Footer = styled.footer`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst BudgetControl = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst IdeaBudget = styled.span`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 16px;\n`;\n\nconst CommentsCount = styled.span`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst CommentIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n  fill: ${colors.label};\n  margin-right: 8px;\n`;\n\ninterface Props {\n  idea: IIdeaData;\n  participationContextId?: string | null;\n  participationContextType?: IParticipationContextType | null;\n}\n\nconst FooterWithBudgetControl = memo<Props>(\n  ({ idea, participationContextId, participationContextType }) => {\n    const projectId = idea?.relationships?.project.data?.id;\n    const ideaBudget = idea?.attributes?.budget;\n\n    return (\n      <Footer>\n        <CommentsCount className=\"e2e-ideacard-comment-count\">\n          <CommentIcon name=\"comments\" />\n          {idea.attributes.comments_count}\n        </CommentsCount>\n        {participationContextId && participationContextType && ideaBudget && (\n          <BudgetControl>\n            <IdeaBudget>\n              <FormattedBudget value={ideaBudget} />\n            </IdeaBudget>\n            <AssignBudgetControl\n              view=\"ideaCard\"\n              projectId={projectId}\n              ideaId={idea.id}\n            />\n          </BudgetControl>\n        )}\n      </Footer>\n    );\n  }\n);\n\nexport default FooterWithBudgetControl;\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport useIdeaStatus from 'hooks/useIdeaStatus';\nimport T from 'components/T';\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div<{ color: string }>`\n  color: ${({ color }) => color};\n  font-size: ${fontSizes.xs}px;\n  font-weight: 600;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: normal;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n  hyphens: auto;\n  padding: 5px 8px;\n  display: inline-block;\n  border-radius: ${({ theme }) => theme.borderRadius};\n  border: 1px solid ${({ color }) => transparentize(0.7, color)};\n`;\n\ninterface Props {\n  statusId: string;\n  className?: string;\n  id?: string;\n}\n\nconst StatusBadge = memo<Props>(({ statusId, id, className }) => {\n  const ideaStatus = useIdeaStatus({ statusId });\n\n  if (!isNilOrError(ideaStatus)) {\n    const color = ideaStatus?.attributes?.color || '#bbb';\n\n    return (\n      <Container id={id || ''} className={className || ''} color={color}>\n        <T value={ideaStatus.attributes.title_multiloc} />\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nexport default StatusBadge;\n","import React, { memo, MouseEvent } from 'react';\nimport bowser from 'bowser';\n\n// components\nimport Link from 'utils/cl-router/Link';\nimport Image from 'components/UI/Image';\n\n// styling\nimport styled from 'styled-components';\nimport {\n  defaultCardStyle,\n  defaultCardHoverStyle,\n  media,\n} from 'utils/styleUtils';\n\nconst cardPadding = '17px';\nconst cardInnerHeight = '162px';\nconst cardInnerHeightExtended = '180px';\n\nconst Container = styled(Link)`\n  width: 100%;\n  min-height: calc(${cardInnerHeight} + ${cardPadding} + ${cardPadding});\n  display: flex;\n  align-items: center;\n  padding: ${cardPadding};\n  cursor: pointer;\n  ${defaultCardStyle};\n\n  &.desktop {\n    ${defaultCardHoverStyle};\n    transform: translate(0px, -2px);\n  }\n\n  @media (max-width: 1220px) and (min-width: 1023px) {\n    min-height: calc(\n      ${cardInnerHeightExtended} + ${cardPadding} + ${cardPadding}\n    );\n  }\n\n  ${media.smallerThanMinTablet`\n    min-height: unset;\n    flex-direction: column;\n    align-items: stretch;\n  `}\n`;\n\nconst IdeaCardImageWrapper = styled.div<{ hasImage: boolean }>`\n  flex: 0 0 ${cardInnerHeight};\n  width: ${cardInnerHeight};\n  height: ${cardInnerHeight};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 18px;\n  overflow: hidden;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n\n  @media (max-width: 1220px) and (min-width: 1023px) {\n    height: ${cardInnerHeightExtended};\n  }\n\n  ${media.smallerThanMinTablet`\n    width: 100%;\n    margin-bottom: 18px;\n  `}\n`;\n\nconst IdeaCardImage = styled(Image)`\n  width: 100%;\n  height: 100%;\n  flex: 1;\n`;\n\nconst ContentWrapper = styled.div`\n  height: ${cardInnerHeight};\n  flex: 0 1 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  padding-top: 0px;\n  padding-bottom: 2px;\n\n  @media (max-width: 1220px) and (min-width: 1023px) {\n    height: ${cardInnerHeightExtended};\n  }\n\n  ${media.smallerThanMinTablet`\n    height: unset;\n  `}\n`;\n\nconst Header = styled.header`\n  padding: 0;\n  margin: 0;\n  margin-bottom: 12px;\n\n  ${media.smallerThanMinTablet`\n    margin-bottom: 15px;\n  `}\n`;\n\nconst Title = styled.h3`\n  color: ${(props) => props.theme.colorText};\n  font-size: 21px;\n  font-weight: 500;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  line-height: 26px;\n  max-height: 78px;\n  padding: 0;\n  margin: 0;\n  overflow: hidden;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n`;\n\nconst Body = styled.div`\n  flex-grow: 1;\n\n  ${media.smallerThanMinTablet`\n    margin-bottom: 25px;\n  `}\n`;\n\ninterface Props {\n  to: string;\n  image: string | null;\n  imagePlaceholder: JSX.Element;\n  hideImage?: boolean;\n  hideImagePlaceholder?: boolean;\n  author?: {\n    name: string;\n    id: string;\n  } | null;\n  title: JSX.Element | string;\n  body: JSX.Element | string;\n  footer: JSX.Element | string;\n  onClick: (event: MouseEvent<HTMLDivElement>) => void;\n  className?: string;\n}\n\nexport const Card = memo<Props>(\n  ({\n    to,\n    onClick,\n    image,\n    imagePlaceholder,\n    hideImage,\n    hideImagePlaceholder,\n    title,\n    body,\n    footer,\n    className,\n  }) => (\n    <Container\n      onClick={onClick}\n      to={to}\n      className={`e2e-card ${className} ${\n        !(bowser.mobile || bowser.tablet) ? 'desktop' : 'mobile'\n      }`}\n    >\n      {!hideImage && image && (\n        <IdeaCardImageWrapper hasImage={!!image}>\n          <IdeaCardImage src={image} cover={true} alt=\"\" />\n        </IdeaCardImageWrapper>\n      )}\n\n      {!hideImagePlaceholder && !image && (\n        <IdeaCardImageWrapper hasImage={!!image}>\n          {imagePlaceholder}\n        </IdeaCardImageWrapper>\n      )}\n\n      <ContentWrapper>\n        <Header className=\"e2e-card-title\">\n          {typeof title === 'string' ? (\n            <Title title={title}>{title}</Title>\n          ) : (\n            title\n          )}\n        </Header>\n\n        <Body>{body}</Body>\n\n        {footer}\n      </ContentWrapper>\n    </Container>\n  )\n);\n\nexport default Card;\n","import React, { PureComponent } from 'react';\nimport { isString, get, isEmpty, includes } from 'lodash-es';\nimport {\n  BehaviorSubject,\n  Subscription,\n  Observable,\n  combineLatest,\n  of,\n} from 'rxjs';\nimport { filter, map, switchMap, distinctUntilChanged } from 'rxjs/operators';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { withRouter, WithRouterProps } from 'react-router';\n\n// i18n\nimport { injectIntl, FormattedMessage } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\nimport { LiveMessage } from 'react-aria-live';\n\n// components\nimport { Icon } from 'cl2-component-library';\n\n// services\nimport { authUserStream } from 'services/auth';\nimport {\n  ideaByIdStream,\n  IIdea,\n  IdeaVotingDisabledReason,\n} from 'services/ideas';\nimport { IUser } from 'services/users';\nimport { voteStream, addVote, deleteVote } from 'services/ideaVotes';\nimport { projectByIdStream, IProject, IProjectData } from 'services/projects';\nimport {\n  phaseStream,\n  IPhase,\n  IPhaseData,\n  getLatestRelevantPhase,\n} from 'services/phases';\n\n// utils\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// style\nimport styled, { css, keyframes } from 'styled-components';\nimport { colors, fontSizes, defaultStyles, isRtl } from 'utils/styleUtils';\nimport { lighten } from 'polished';\n\n// typings\nimport { IParticipationContextType } from 'typings';\n\ninterface IVoteComponent {\n  active: boolean;\n  enabled: boolean | null;\n}\n\ntype TSize = '1' | '2' | '3' | '4';\ntype TStyleType = 'border' | 'shadow';\n\nconst voteKeyframeAnimation = keyframes`\n  from {\n    transform: scale3d(1, 1, 1);\n  }\n\n  40% {\n    transform: scale3d(1.25, 1.25, 1.25);\n  }\n\n  to {\n    transform: scale3d(1, 1, 1);\n  }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  * {\n    user-select: none;\n  }\n`;\n\nconst VoteIconContainer = styled.div<{\n  size: TSize;\n  votingEnabled: boolean | null;\n  styleType: TStyleType;\n}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1px;\n  border-radius: 50%;\n  transition: all 60ms ease-out;\n  background-color: white;\n\n  ${({ styleType }) => {\n    return (\n      styleType === 'border' &&\n      css`\n        border: solid 1px ${lighten(0.2, colors.label)};\n      `\n    );\n  }}\n\n\n  ${({ styleType, votingEnabled }) => {\n    return (\n      styleType === 'shadow' &&\n      votingEnabled &&\n      css`\n        box-shadow: ${defaultStyles.boxShadow};\n        &:hover {\n          box-shadow: ${defaultStyles.boxShadowHoverSmall};\n        }\n      `\n    );\n  }}\n\n  ${({ votingEnabled, size }) => {\n    if (votingEnabled) {\n      if (size === '1') {\n        return css`\n          width: 35px;\n          height: 35px;\n        `;\n      }\n\n      if (size === '2') {\n        return css`\n          width: 45px;\n          height: 45px;\n        `;\n      }\n\n      if (size === '3') {\n        return css`\n          width: 48px;\n          height: 48px;\n        `;\n      }\n\n      if (size === '4') {\n        return css`\n          width: 50px;\n          height: 50px;\n        `;\n      }\n    }\n\n    return css`\n      margin-left: 5px;\n    `;\n  }}\n`;\n\nconst VoteIcon = styled(Icon)<{\n  size: TSize;\n  enabled: boolean | null;\n}>`\n  width: 19px;\n  height: 19px;\n  fill: ${colors.label};\n  transition: all 100ms ease-out;\n\n  ${(props) =>\n    props.size === '1'\n      ? css`\n          width: 17px;\n          height: 17px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '2'\n      ? css`\n          width: 18px;\n          height: 18px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '3'\n      ? css`\n          width: 20px;\n          height: 20px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '4'\n      ? css`\n          width: 21px;\n          height: 21px;\n        `\n      : css``}\n`;\n\nconst VoteCount = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin-left: 5px;\n  transition: all 100ms ease-out;\n\n  &:not(.enabled) {\n    margin-left: 3px;\n  }\n`;\n\nconst Vote = styled.button<IVoteComponent>`\n  display: flex;\n  align-items: center;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  border: none;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  &.voteClick ${VoteIconContainer} {\n    animation: ${css`\n      ${voteKeyframeAnimation} 350ms\n    `};\n  }\n\n  &:not(.enabled) {\n    ${VoteIconContainer} {\n      width: auto;\n      border: none;\n      background: none;\n    }\n\n    ${VoteIcon} {\n      margin-right: 4px;\n    }\n  }\n`;\n\nconst Upvote = styled(Vote)`\n  margin-right: 8px;\n\n  &:not(.enabled) {\n    ${VoteCount} {\n      ${isRtl`\n        margin-right: 5px;\n      `}\n    }\n  }\n\n  ${VoteIconContainer} {\n    ${(props) =>\n      props.active &&\n      `border-color: ${colors.clGreen}; background: ${colors.clGreen};`}\n  }\n\n  ${VoteIcon} {\n    margin-bottom: 4px;\n\n    ${({ active, enabled }) => {\n      if (active && enabled) {\n        return css`\n          fill: #fff;\n        `;\n      }\n\n      if (active && !enabled) {\n        return css`\n          fill: ${colors.clGreen};\n        `;\n      }\n\n      return;\n    }};\n  }\n\n  ${VoteCount} {\n    min-width: 20px;\n    margin-right: 5px;\n    ${(props) => props.active && `color: ${colors.clGreen};`}\n  }\n\n  &:hover.enabled {\n    ${VoteIconContainer} {\n      ${(props) => !props.active && `border: 1px solid ${colors.clGreen};`}\n    }\n\n    ${VoteIcon} {\n      ${(props) => !props.active && `fill: ${colors.clGreen};`}\n    }\n\n    ${VoteCount} {\n      ${(props) => !props.active && `color: ${colors.clGreen};`}\n    }\n  }\n`;\n\nconst Downvote = styled(Vote)`\n  ${VoteIconContainer} {\n    ${(props) =>\n      props.active &&\n      `border-color: ${colors.clRed}; background: ${colors.clRed};`}\n  }\n\n  ${VoteIcon} {\n    margin-top: 4px;\n\n    ${({ active, enabled }) => {\n      if (active && enabled) {\n        return css`\n          fill: #fff;\n        `;\n      }\n\n      if (active && !enabled) {\n        return css`\n          fill: ${colors.clRed};\n        `;\n      }\n\n      return;\n    }};\n  }\n\n  ${VoteCount} {\n    ${(props) => props.active && `color: ${colors.clRed};`}\n  }\n\n  &:hover.enabled {\n    ${VoteIconContainer} {\n      ${(props) => !props.active && `border: 1px solid ${colors.clRed};`}\n    }\n\n    ${VoteIcon} {\n      ${(props) => !props.active && `fill: ${colors.clRed};`}\n    }\n\n    ${VoteCount} {\n      ${(props) => !props.active && `color: ${colors.clRed};`}\n    }\n  }\n`;\n\ninterface Props {\n  ideaId: string;\n  size: TSize;\n  unauthenticatedVoteClick?: (voteMode: 'up' | 'down') => void;\n  disabledVoteClick?: (disabled_reason?: IdeaVotingDisabledReason) => void;\n  setRef?: (element: HTMLDivElement) => void;\n  ariaHidden?: boolean;\n  className?: string;\n  styleType: TStyleType;\n}\n\ninterface State {\n  showVoteControl: boolean;\n  authUser: IUser | null;\n  upvotesCount: number;\n  downvotesCount: number;\n  voting: 'up' | 'down' | null;\n  votingAnimation: 'up' | 'down' | null;\n  myVoteId: string | null | undefined;\n  myVoteMode: 'up' | 'down' | null | undefined;\n  idea: IIdea | null;\n  participationContext: IProjectData | IPhaseData | null;\n  participationContextId: string | null;\n  participationContextType: IParticipationContextType | null;\n  loaded: boolean;\n}\n\nclass VoteControl extends PureComponent<\n  Props & InjectedIntlProps & WithRouterProps,\n  State\n> {\n  voting$: BehaviorSubject<'up' | 'down' | null>;\n  id$: BehaviorSubject<string | null>;\n  subscriptions: Subscription[];\n  upvoteElement: HTMLButtonElement | null;\n  downvoteElement: HTMLButtonElement | null;\n\n  static defaultProps = {\n    ariaHidden: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showVoteControl: false,\n      authUser: null,\n      upvotesCount: 0,\n      downvotesCount: 0,\n      voting: null,\n      votingAnimation: null,\n      myVoteId: undefined,\n      myVoteMode: undefined,\n      idea: null,\n      participationContext: null,\n      participationContextId: null,\n      participationContextType: null,\n      loaded: false,\n    };\n    this.voting$ = new BehaviorSubject(null);\n    this.id$ = new BehaviorSubject(null);\n    this.subscriptions = [];\n    this.upvoteElement = null;\n    this.downvoteElement = null;\n  }\n\n  componentDidMount() {\n    const authUser$ = authUserStream().observable;\n    const voting$ = this.voting$.pipe(distinctUntilChanged());\n    const id$ = this.id$.pipe(\n      filter((ideaId) => isString(ideaId)),\n      distinctUntilChanged()\n    ) as Observable<string>;\n\n    this.id$.next(this.props.ideaId);\n    this.upvoteElement?.addEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.downvoteElement?.addEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n\n    const idea$ = id$.pipe(\n      switchMap((ideaId: string) => {\n        const idea$ = ideaByIdStream(ideaId).observable;\n\n        return combineLatest(idea$, voting$);\n      }),\n      filter(([_idea, voting]) => {\n        return voting === null;\n      }),\n      map(([idea, _voting]) => {\n        return idea;\n      })\n    );\n\n    const myVote$ = combineLatest(authUser$, idea$).pipe(\n      switchMap(([authUser, idea]) => {\n        if (\n          authUser &&\n          idea &&\n          idea.data.relationships.user_vote &&\n          idea.data.relationships.user_vote.data !== null\n        ) {\n          const voteId = idea.data.relationships.user_vote.data.id;\n          const vote$ = voteStream(voteId).observable;\n\n          return combineLatest(vote$, voting$).pipe(\n            filter(([_vote, voting]) => {\n              return voting === null;\n            }),\n            map(([vote, _voting]) => {\n              return vote;\n            })\n          );\n        }\n\n        return of(null);\n      })\n    );\n\n    this.subscriptions = [\n      voting$.subscribe((voting) => {\n        this.setState((state) => ({\n          voting,\n          votingAnimation:\n            voting !== null && state.voting === null\n              ? voting\n              : state.votingAnimation,\n        }));\n      }),\n\n      idea$\n        .pipe(\n          switchMap((idea) => {\n            let project$: Observable<IProject | null> = of(null);\n            let phases$: Observable<IPhase[] | null> = of(null);\n            const hasPhases = !isEmpty(\n              get(idea.data.relationships.phases, 'data', null)\n            );\n\n            if (!hasPhases && idea.data.relationships.project.data) {\n              project$ = projectByIdStream(\n                idea.data.relationships.project.data.id\n              ).observable;\n            }\n\n            if (hasPhases && idea.data.relationships.phases.data.length > 0) {\n              phases$ = combineLatest(\n                idea.data.relationships.phases.data.map(\n                  (phase) => phaseStream(phase.id).observable\n                )\n              );\n            }\n\n            return combineLatest(project$, phases$, authUser$).pipe(\n              map(([project, phases, authUser]) => ({\n                idea,\n                project,\n                phases,\n                authUser,\n              }))\n            );\n          })\n        )\n        .subscribe(({ idea, project, phases, authUser }) => {\n          const isSignedIn = !isNilOrError(authUser);\n          const upvotesCount = idea.data.attributes.upvotes_count;\n          const downvotesCount = idea.data.attributes.downvotes_count;\n          const votingEnabled =\n            idea.data.attributes.action_descriptor.voting_idea.enabled;\n          const cancellingEnabled =\n            idea.data.attributes.action_descriptor.voting_idea\n              .cancelling_enabled;\n          const votingDisabledReason =\n            idea.data.attributes.action_descriptor.voting_idea.disabled_reason;\n          const votingFutureEnabled =\n            idea.data.attributes.action_descriptor.voting_idea.future_enabled;\n          const isContinuousProject =\n            project?.data.attributes.process_type === 'continuous';\n          const ideaPhaseIds = idea?.data?.relationships?.phases?.data?.map(\n            (item) => item.id\n          );\n          const ideaPhases = phases\n            ?.filter((phase) => includes(ideaPhaseIds, phase.data.id))\n            .map((phase) => phase.data);\n          const latestRelevantIdeaPhase = ideaPhases\n            ? getLatestRelevantPhase(ideaPhases)\n            : null;\n          const participationContextType = isContinuousProject\n            ? 'project'\n            : 'phase';\n          const participationContextId = isContinuousProject\n            ? project?.data.id || null\n            : latestRelevantIdeaPhase?.id || null;\n          const participationContext = isContinuousProject\n            ? project?.data || null\n            : latestRelevantIdeaPhase;\n          const isPBContext =\n            participationContext?.attributes.participation_method ===\n            'budgeting';\n          const shouldSignIn =\n            !votingEnabled &&\n            (votingDisabledReason === 'not_signed_in' ||\n              (votingDisabledReason === 'not_verified' && !isSignedIn));\n          const shouldVerify =\n            !votingEnabled &&\n            votingDisabledReason === 'not_verified' &&\n            isSignedIn;\n          const verifiedButNotPermitted =\n            !shouldVerify && votingDisabledReason === 'not_permitted';\n          const showVoteControl = !!(\n            !isPBContext &&\n            (votingEnabled ||\n              shouldSignIn ||\n              cancellingEnabled ||\n              votingFutureEnabled ||\n              upvotesCount > 0 ||\n              downvotesCount > 0 ||\n              shouldVerify ||\n              verifiedButNotPermitted)\n          );\n\n          this.setState({\n            idea,\n            participationContext,\n            participationContextId,\n            participationContextType,\n            showVoteControl,\n            upvotesCount,\n            downvotesCount,\n            authUser,\n            loaded: true,\n          });\n        }),\n\n      myVote$.subscribe((myVote) => {\n        this.setState({\n          myVoteId: myVote ? myVote.data.id : null,\n          myVoteMode: myVote ? myVote.data.attributes.mode : null,\n        });\n      }),\n    ];\n  }\n\n  async componentDidUpdate() {\n    this.id$.next(this.props.ideaId);\n  }\n\n  componentWillUnmount() {\n    this.upvoteElement?.removeEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.downvoteElement?.removeEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  votingAnimationDone = () => {\n    this.setState({ votingAnimation: null });\n  };\n\n  onClickUpvote = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.vote('up');\n  };\n\n  onClickDownvote = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.vote('down');\n  };\n\n  vote = async (voteMode: 'up' | 'down') => {\n    const {\n      authUser,\n      myVoteId,\n      myVoteMode,\n      voting,\n      idea,\n      participationContext,\n      participationContextId,\n      participationContextType,\n    } = this.state;\n    const { ideaId, disabledVoteClick } = this.props;\n    const votingEnabled =\n      idea?.data.attributes.action_descriptor.voting_idea.enabled;\n    const cancellingEnabled =\n      idea?.data.attributes.action_descriptor.voting_idea.cancelling_enabled;\n    const votingDisabledReason =\n      idea?.data.attributes.action_descriptor.voting_idea.disabled_reason;\n    const isSignedIn = !isNilOrError(authUser);\n    const isTryingToUndoVote = !!(myVoteMode && voteMode === myVoteMode);\n    const isVerified =\n      !isNilOrError(authUser) && authUser.data.attributes.verified;\n\n    if (!voting) {\n      if (\n        !isNilOrError(authUser) &&\n        (votingEnabled || (cancellingEnabled && isTryingToUndoVote))\n      ) {\n        try {\n          this.voting$.next(voteMode);\n\n          const refetchIdeas =\n            participationContext?.attributes?.voting_method === 'limited';\n\n          // Change vote (up -> down or down -> up)\n          if (myVoteId && myVoteMode && myVoteMode !== voteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up'\n                  ? state.upvotesCount + 1\n                  : state.upvotesCount - 1,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount + 1\n                  : state.downvotesCount - 1,\n              myVoteMode: voteMode,\n            }));\n            await deleteVote(ideaId, myVoteId, refetchIdeas);\n            await addVote(\n              ideaId,\n              { user_id: authUser.data.id, mode: voteMode },\n              refetchIdeas\n            );\n          }\n\n          // Cancel vote\n          if (myVoteId && myVoteMode && myVoteMode === voteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up' ? state.upvotesCount - 1 : state.upvotesCount,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount - 1\n                  : state.downvotesCount,\n              myVoteMode: null,\n            }));\n            await deleteVote(ideaId, myVoteId, refetchIdeas);\n          }\n\n          // Vote\n          if (!myVoteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up' ? state.upvotesCount + 1 : state.upvotesCount,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount + 1\n                  : state.downvotesCount,\n              myVoteMode: voteMode,\n            }));\n            await addVote(\n              ideaId,\n              { user_id: authUser.data.id, mode: voteMode },\n              refetchIdeas\n            );\n          }\n\n          await ideaByIdStream(ideaId).fetch();\n          this.voting$.next(null);\n\n          return 'success';\n        } catch (error) {\n          this.voting$.next(null);\n          await ideaByIdStream(ideaId).fetch();\n          throw 'error';\n        }\n      } else if (\n        isSignedIn &&\n        !isVerified &&\n        votingDisabledReason === 'not_verified'\n      ) {\n        openVerificationModal();\n      } else if (\n        !isSignedIn &&\n        (votingEnabled ||\n          votingDisabledReason === 'not_verified' ||\n          votingDisabledReason === 'not_signed_in' ||\n          votingDisabledReason === 'not_permitted')\n      ) {\n        openSignUpInModal({\n          verification: votingDisabledReason === 'not_verified',\n          verificationContext:\n            votingDisabledReason === 'not_verified' &&\n            participationContextId &&\n            participationContextType\n              ? {\n                  action: 'voting_idea',\n                  id: participationContextId,\n                  type: participationContextType,\n                }\n              : undefined,\n          action: () => this.vote(voteMode),\n        });\n      } else if (votingDisabledReason) {\n        disabledVoteClick?.(votingDisabledReason);\n      }\n    }\n\n    return;\n  };\n\n  setContainerRef = (element: HTMLDivElement) => {\n    this.props?.setRef?.(element);\n  };\n\n  setUpvoteRef = (element: HTMLButtonElement) => {\n    this.upvoteElement = element;\n  };\n\n  setDownvoteRef = (element: HTMLButtonElement) => {\n    this.downvoteElement = element;\n  };\n\n  removeFocus = (event: React.MouseEvent) => {\n    event.preventDefault();\n  };\n\n  render() {\n    const {\n      size,\n      className,\n      intl: { formatMessage },\n      ariaHidden,\n      styleType,\n    } = this.props;\n    const {\n      idea,\n      authUser,\n      showVoteControl,\n      myVoteMode,\n      votingAnimation,\n      upvotesCount,\n      downvotesCount,\n    } = this.state;\n    const votingDescriptor =\n      idea?.data.attributes.action_descriptor.voting_idea;\n    const votingEnabled = votingDescriptor?.enabled;\n    const cancellingEnabled = votingDescriptor?.cancelling_enabled;\n    const votingDisabledReason = votingDescriptor?.disabled_reason;\n    const isSignedIn = !isNilOrError(authUser);\n    const isVerified =\n      !isNilOrError(authUser) && authUser.data.attributes.verified;\n    const upvotingEnabled =\n      (myVoteMode !== 'up' && votingEnabled) ||\n      (myVoteMode === 'up' && cancellingEnabled) ||\n      (!isVerified && votingDisabledReason === 'not_verified') ||\n      (!isSignedIn && votingDisabledReason === 'not_signed_in');\n    const downvotingEnabled =\n      (myVoteMode !== 'down' && votingEnabled) ||\n      (myVoteMode === 'down' && cancellingEnabled) ||\n      (!isVerified && votingDisabledReason === 'not_verified') ||\n      (!isSignedIn && votingDisabledReason === 'not_signed_in');\n    // if a project is inactive (archived), downvoting_enabled is\n    // null, hence the boolean check\n    const showDownvote =\n      typeof votingDescriptor?.downvoting_enabled === 'boolean'\n        ? votingDescriptor?.downvoting_enabled\n        : true;\n\n    if (!showVoteControl) return null;\n\n    const screenreaderContent = (\n      <>\n        <ScreenReaderOnly>\n          <FormattedMessage\n            {...messages.a11y_upvotesDownvotes}\n            values={{ upvotesCount, downvotesCount }}\n          />\n        </ScreenReaderOnly>\n        <LiveMessage\n          message={formatMessage(messages.a11y_upvotesDownvotes, {\n            upvotesCount,\n            downvotesCount,\n          })}\n          aria-live=\"polite\"\n        />\n      </>\n    );\n\n    return (\n      <>\n        {screenreaderContent}\n        <Container\n          className={[\n            className,\n            'e2e-vote-controls',\n            myVoteMode === null ? 'neutral' : myVoteMode,\n          ]\n            .filter((item) => item)\n            .join(' ')}\n          aria-hidden={ariaHidden}\n          ref={this.setContainerRef}\n        >\n          <Upvote\n            active={myVoteMode === 'up'}\n            enabled={upvotingEnabled}\n            onMouseDown={this.removeFocus}\n            onClick={this.onClickUpvote}\n            ref={this.setUpvoteRef}\n            className={[\n              'e2e-ideacard-upvote-button',\n              votingAnimation === 'up' ? 'voteClick' : 'upvote',\n              upvotingEnabled ? 'enabled' : 'disabled',\n              myVoteMode === 'up' ? 'active' : '',\n            ].join(' ')}\n            tabIndex={ariaHidden ? -1 : 0}\n          >\n            <VoteIconContainer\n              styleType={styleType}\n              size={size}\n              votingEnabled={upvotingEnabled}\n            >\n              <VoteIcon name=\"upvote\" size={size} enabled={upvotingEnabled} />\n              <ScreenReaderOnly>\n                <FormattedMessage {...messages.upvote} />\n              </ScreenReaderOnly>\n            </VoteIconContainer>\n            <VoteCount\n              aria-hidden\n              className={[votingEnabled ? 'enabled' : ''].join(' ')}\n            >\n              {upvotesCount}\n            </VoteCount>\n          </Upvote>\n\n          {showDownvote && (\n            <Downvote\n              active={myVoteMode === 'down'}\n              enabled={downvotingEnabled}\n              onMouseDown={this.removeFocus}\n              onClick={this.onClickDownvote}\n              ref={this.setDownvoteRef}\n              className={[\n                'e2e-ideacard-downvote-button',\n                votingAnimation === 'down' ? 'voteClick' : 'downvote',\n                downvotingEnabled ? 'enabled' : 'disabled',\n              ].join(' ')}\n              tabIndex={ariaHidden ? -1 : 0}\n            >\n              <VoteIconContainer\n                styleType={styleType}\n                size={size}\n                votingEnabled={downvotingEnabled}\n              >\n                <VoteIcon\n                  name=\"downvote\"\n                  size={size}\n                  enabled={downvotingEnabled}\n                />\n                <ScreenReaderOnly>\n                  <FormattedMessage {...messages.downvote} />\n                </ScreenReaderOnly>\n              </VoteIconContainer>\n              <VoteCount aria-hidden className={votingEnabled ? 'enabled' : ''}>\n                {downvotesCount}\n              </VoteCount>\n            </Downvote>\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default withRouter<Props>(injectIntl(VoteControl));\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { ideaByIdStream } from 'services/ideas';\nimport { ImageSizes } from 'typings';\n\nexport interface IIdeaImageData {\n  id: string;\n  type: string;\n  attributes: {\n    versions: ImageSizes;\n    ordering: number;\n    created_at: string;\n    updated_at: string;\n  };\n}\n\nexport interface IIdeaImage {\n  data: IIdeaImageData;\n}\n\nexport interface IIdeaImages {\n  data: IIdeaImageData[];\n}\n\nexport function ideaImageStream(ideaId: string, imageId: string) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images/${imageId}`;\n  return streams.get<IIdeaImage>({ apiEndpoint });\n}\n\nexport function ideaImagesStream(\n  ideaId: string,\n  streamParams: IStreamParams | null = null\n) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images`;\n  return streams.get<IIdeaImages>({ apiEndpoint, ...streamParams });\n}\n\nexport function deleteIdeaImage(ideaId: string, imageId: string) {\n  return streams.delete(\n    `${API_PATH}/ideas/${ideaId}/images/${imageId}`,\n    imageId\n  );\n}\n\nexport async function addIdeaImage(\n  ideaId: string,\n  base64: string,\n  ordering: number | null = null\n) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images`;\n  const bodyData = {\n    image: {\n      ordering,\n      image: base64,\n    },\n  };\n\n  const ideaImage = await streams.add<IIdeaImage>(apiEndpoint, bodyData);\n  await ideaByIdStream(ideaId).fetch();\n  return ideaImage;\n}\n","import React, { memo, FormEvent } from 'react';\nimport { trackEventByName } from 'utils/analytics';\n\n// components\nimport Button from 'components/UI/Button';\n\n// styling\nimport styled from 'styled-components';\nimport { colors } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// tracks\nimport tracks from './tracks';\n\nconst Container = styled.div`\n  display: flex;\n  padding: 4px;\n  background: ${darken(0.06, colors.lightGreyishBlue)};\n  border-radius: ${(props: any) => props.theme.borderRadius};\n`;\n\nconst ListButton = styled(Button)``;\n\nconst MapButton = styled(Button)`\n  margin-left: 4px;\n`;\n\ninterface Props {\n  className?: string;\n  selectedView: 'card' | 'map';\n  onClick: (selectedView: 'card' | 'map') => void;\n}\n\nconst ViewButtons = memo<Props>(({ className, selectedView, onClick }) => {\n  const isListViewSelected = selectedView === 'card';\n  const isMapViewSelected = selectedView === 'map';\n\n  const handleOnClick = (selectedView: 'card' | 'map') => (\n    event: FormEvent\n  ) => {\n    event.preventDefault();\n    onClick(selectedView);\n    trackEventByName(tracks.toggleDisplay, {\n      locationButtonWasClicked: location.pathname,\n      selectedDisplayMode: selectedView,\n    });\n  };\n\n  return (\n    <Container\n      className={`e2e-list-map-viewbuttons ${className || ''}`}\n      role=\"tablist\"\n    >\n      <ListButton\n        buttonStyle=\"white\"\n        icon=\"list2\"\n        role=\"tab\"\n        aria-selected={isListViewSelected}\n        onClick={handleOnClick('card')}\n        padding=\"7px 12px\"\n        textColor={colors.text}\n        bgColor={!isListViewSelected ? 'transparent' : undefined}\n        bgHoverColor={!isListViewSelected ? 'rgba(0,0,0,0.12)' : undefined}\n        boxShadowHover={!isListViewSelected ? 'none' : undefined}\n        fullWidth={true}\n      >\n        <FormattedMessage {...messages.list} />\n      </ListButton>\n      <MapButton\n        buttonStyle=\"white\"\n        icon=\"map\"\n        role=\"tab\"\n        aria-selected={isMapViewSelected}\n        onClick={handleOnClick('map')}\n        padding=\"7px 12px\"\n        textColor={colors.text}\n        bgColor={!isMapViewSelected ? 'transparent' : undefined}\n        bgHoverColor={!isMapViewSelected ? 'rgba(0,0,0,0.12)' : undefined}\n        boxShadowHover={!isMapViewSelected ? 'none' : undefined}\n        fullWidth={true}\n      >\n        <FormattedMessage {...messages.map} />\n      </MapButton>\n    </Container>\n  );\n});\n\nexport default ViewButtons;\n","import React, { PureComponent } from 'react';\n\n// components\nimport FilterSelector from 'components/FilterSelector';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport {\n  IdeaDefaultSortMethod,\n  ideaDefaultSortMethodFallback,\n} from 'services/participationContexts';\n\ntype Props = {\n  id?: string | undefined;\n  alignment: 'left' | 'right';\n  onChange: (value: string) => void;\n  defaultSortingMethod?: IdeaDefaultSortMethod;\n};\n\ntype State = {\n  selectedValue: string[];\n};\n\nclass SortFilterDropdown extends PureComponent<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedValue: [\n        props.defaultSortingMethod || ideaDefaultSortMethodFallback,\n      ],\n    };\n  }\n\n  handleOnChange = (selectedValue: string[]) => {\n    this.setState({ selectedValue });\n    this.props.onChange(selectedValue[0]);\n  };\n\n  sortTitle = (<FormattedMessage {...messages.sortTitle} />);\n\n  render() {\n    const { alignment } = this.props;\n    const { selectedValue } = this.state;\n    const options = [\n      { text: <FormattedMessage {...messages.trending} />, value: 'trending' },\n      { text: <FormattedMessage {...messages.random} />, value: 'random' },\n      { text: <FormattedMessage {...messages.popular} />, value: 'popular' },\n      { text: <FormattedMessage {...messages.newest} />, value: 'new' },\n      { text: <FormattedMessage {...messages.oldest} />, value: '-new' },\n    ];\n\n    return (\n      <FilterSelector\n        id=\"e2e-ideas-sort-dropdown\"\n        title={this.sortTitle}\n        name=\"sort\"\n        selected={selectedValue}\n        values={options}\n        onChange={this.handleOnChange}\n        multipleSelectionAllowed={false}\n        width=\"180px\"\n        left={alignment === 'left' ? '-5px' : undefined}\n        mobileLeft={alignment === 'left' ? '-5px' : undefined}\n        right={alignment === 'right' ? '-5px' : undefined}\n        mobileRight={alignment === 'right' ? '-5px' : undefined}\n      />\n    );\n  }\n}\n\nexport default SortFilterDropdown;\n","import React, { memo, FormEvent } from 'react';\nimport { IOpenPostPageModalEvent } from 'containers/App';\n\n// components\nimport UserName from 'components/UI/UserName';\nimport Card from 'components/UI/Card/Compact';\nimport { Icon } from 'cl2-component-library';\nimport Avatar from 'components/Avatar';\nimport FooterWithVoteControl from './FooterWithVoteControl';\nimport FooterWithBudgetControl from './FooterWithBudgetControl';\n\n// types\nimport { ParticipationMethod } from 'services/participationContexts';\nimport { IParticipationContextType } from 'typings';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\nimport useIdeaImage from 'hooks/useIdeaImage';\n\n// i18n\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport { FormattedRelative } from 'react-intl';\n\n// utils\nimport { get } from 'lodash-es';\nimport eventEmitter from 'utils/eventEmitter';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// styles\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { colors, fontSizes } from 'utils/styleUtils';\n\nconst BodyWrapper = styled.div`\n  display: flex;\n  align-items: flex-start;\n`;\n\nconst StyledAvatar = styled(Avatar)`\n  margin-right: 6px;\n  margin-left: -4px;\n  margin-top: -2px;\n`;\n\nconst Body = styled.div`\n  font-size: ${fontSizes.small}px;\n  font-weight: 300;\n  color: ${colors.label};\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  line-height: 21px;\n  max-height: 42px;\n  overflow: hidden;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n`;\n\nconst StyledUserName = styled(UserName)`\n  font-size: ${fontSizes.small}px;\n  font-weight: 500;\n  color: ${colors.label};\n  font-weight: 500;\n`;\n\nconst Separator = styled.span`\n  margin-left: 4px;\n  margin-right: 4px;\n`;\n\nconst TimeAgo = styled.span`\n  font-weight: 500;\n  margin-right: 5px;\n`;\n\nconst ImagePlaceholderContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${transparentize(0.94, colors.label)};\n`;\n\nconst ImagePlaceholderIcon = styled(Icon)`\n  width: 34px;\n  fill: ${transparentize(0.62, colors.label)};\n`;\n\ninterface Props {\n  ideaId: string;\n  className?: string;\n  participationMethod?: ParticipationMethod | null;\n  participationContextId?: string | null;\n  participationContextType?: IParticipationContextType | null;\n  hideImage?: boolean;\n  hideImagePlaceholder?: boolean;\n  hideIdeaStatus?: boolean;\n}\n\nconst CompactIdeaCard = memo<Props & InjectedLocalized>(\n  ({\n    ideaId,\n    localize,\n    className,\n    participationMethod,\n    participationContextId,\n    participationContextType,\n    hideImage,\n    hideImagePlaceholder,\n    hideIdeaStatus,\n  }) => {\n    const idea = useIdea({ ideaId });\n\n    const ideaImage = useIdeaImage({\n      ideaId,\n      ideaImageId: get(idea, 'relationships.idea_images.data[0].id'),\n    });\n\n    if (isNilOrError(idea)) {\n      return null;\n    }\n\n    const onCardClick = (event: FormEvent) => {\n      event.preventDefault();\n\n      eventEmitter.emit<IOpenPostPageModalEvent>('cardClick', {\n        id: idea.id,\n        slug: idea.attributes.slug,\n        type: 'idea',\n      });\n    };\n\n    const authorId = idea.relationships.author.data?.id;\n    const ideaTitle = localize(idea.attributes.title_multiloc);\n    // remove html tags from wysiwyg output\n    const bodyText = localize(idea.attributes.body_multiloc)\n      .replace(/<[^>]*>?/gm, '')\n      .replaceAll('&amp;', '&')\n      .trim();\n    const votingDescriptor = idea?.attributes?.action_descriptor?.voting_idea;\n    const commentingDescriptor =\n      idea?.attributes?.action_descriptor?.commenting_idea;\n    const newClassName = [\n      className,\n      'e2e-idea-card',\n      idea?.relationships?.user_vote?.data ? 'voted' : 'not-voted',\n      commentingDescriptor && commentingDescriptor.enabled\n        ? 'e2e-comments-enabled'\n        : 'e2e-comments-disabled',\n      idea.attributes.comments_count > 0 ? 'e2e-has-comments' : null,\n      votingDescriptor && votingDescriptor.downvoting_enabled\n        ? 'e2e-downvoting-enabled'\n        : 'e2e-downvoting-disabled',\n    ]\n      .filter((item) => typeof item === 'string' && item !== '')\n      .join(' ');\n\n    const getFooter = () => {\n      if (participationMethod === 'budgeting') {\n        return (\n          <FooterWithBudgetControl\n            idea={idea}\n            participationContextId={participationContextId}\n            participationContextType={participationContextType}\n          />\n        );\n      } else if (participationMethod === 'ideation') {\n        return (\n          <FooterWithVoteControl idea={idea} hideIdeaStatus={hideIdeaStatus} />\n        );\n      } else {\n        return <></>;\n      }\n    };\n\n    return (\n      <Card\n        onClick={onCardClick}\n        className={newClassName}\n        title={ideaTitle}\n        to={`/ideas/${idea.attributes.slug}`}\n        image={\n          !isNilOrError(ideaImage) ? ideaImage.attributes.versions.large : null\n        }\n        imagePlaceholder={\n          <ImagePlaceholderContainer>\n            <ImagePlaceholderIcon\n              name={participationMethod === 'budgeting' ? 'moneybag' : 'idea'}\n            />\n          </ImagePlaceholderContainer>\n        }\n        hideImage={hideImage}\n        hideImagePlaceholder={hideImagePlaceholder}\n        body={\n          <BodyWrapper>\n            {authorId && (\n              <StyledAvatar\n                size={36}\n                userId={authorId}\n                hideIfNoAvatar={true}\n                fillColor={transparentize(0.6, colors.label)}\n              />\n            )}\n            <Body>\n              <StyledUserName userId={authorId || null} />\n              <Separator aria-hidden>&bull;</Separator>\n              <TimeAgo>\n                <FormattedRelative\n                  value={idea.attributes.created_at}\n                  style=\"numeric\"\n                />\n              </TimeAgo>\n              {bodyText}\n            </Body>\n          </BodyWrapper>\n        }\n        footer={getFooter()}\n      />\n    );\n  }\n);\n\nexport default injectLocalize(CompactIdeaCard);\n","export default {\n  toggleDisplay: 'Changed idea/initiative cards display mode',\n};\n","import React from 'react';\nimport {\n  get,\n  isString,\n  isEqual,\n  omit,\n  cloneDeep,\n  omitBy,\n  isNil,\n  isArray,\n  unionBy,\n} from 'lodash-es';\nimport { Subscription, BehaviorSubject } from 'rxjs';\nimport {\n  map,\n  distinctUntilChanged,\n  mergeScan,\n  switchMap,\n} from 'rxjs/operators';\nimport {\n  ideasStream,\n  IIdeaData,\n  IdeaPublicationStatus,\n  ideasMiniStream,\n} from 'services/ideas';\nimport { PublicationStatus as ProjectPublicationStatus } from 'services/projects';\nimport {\n  getPageNumberFromUrl,\n  getSortAttribute,\n  getSortDirection,\n  SortDirection,\n} from 'utils/paginationUtils';\n\nexport type SortAttribute =\n  | 'new'\n  | 'trending'\n  | 'popular'\n  | 'author_name'\n  | 'upvotes_count'\n  | 'downvotes_count'\n  | 'baskets_count'\n  | 'status';\nexport type Sort =\n  | 'random'\n  | 'new'\n  | '-new'\n  | 'trending'\n  | '-trending'\n  | 'popular'\n  | '-popular'\n  | 'author_name'\n  | '-author_name'\n  | 'upvotes_count'\n  | '-upvotes_count'\n  | 'downvotes_count'\n  | '-downvotes_count'\n  | 'baskets_count'\n  | '-baskets_count'\n  | 'status'\n  | '-status';\ntype PublicationStatus = IdeaPublicationStatus;\n\nexport interface InputProps {\n  type: 'load-more' | 'paginated';\n  pageNumber?: number;\n  pageSize?: number;\n  projectIds?: string[] | 'all';\n  phaseId?: string;\n  authorId?: string;\n  sort?: Sort;\n  search?: string;\n  topics?: string[];\n  areas?: string[];\n  ideaStatusId?: string;\n  publicationStatus?: PublicationStatus;\n  projectPublicationStatus?: ProjectPublicationStatus;\n  boundingBox?: number[];\n  assignee?: string;\n  feedbackNeeded?: boolean;\n  // prop mini Gets stripped down ideas containing only title, should never be cached,\n  // and is not tested in all scenarios, but improves performance drastically.\n  mini?: boolean;\n}\n\nexport interface IQueryParameters {\n  'page[number]': number;\n  'page[size]': number;\n  projects: string[] | undefined | null;\n  phase: string | undefined | null;\n  author: string | undefined | null;\n  sort: Sort;\n  search: string | undefined | null;\n  topics: string[] | undefined | null;\n  areas: string[] | undefined | null;\n  idea_status: string | undefined | null;\n  publication_status: PublicationStatus | undefined | null;\n  project_publication_status: ProjectPublicationStatus | undefined | null;\n  bounding_box: number[] | undefined | null;\n  assignee: string | undefined | null;\n  feedback_needed: boolean | undefined | null;\n}\n\ninterface IAccumulator {\n  ideas: IIdeaData[] | null;\n  queryParameters: IQueryParameters;\n  hasMore: boolean;\n}\n\ntype children = (renderProps: GetIdeasChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: (obj: GetIdeasChildProps) => JSX.Element | null;\n}\n\nexport type GetIdeasChildProps = State & {\n  onLoadMore: () => void;\n  onChangePage: (pageNumber: number) => void;\n  onChangeProjects: (projectIds: string[]) => void;\n  onChangePhase: (phaseId: string) => void;\n  onChangeSearchTerm: (search: string) => void;\n  onChangeSorting: (sort: Sort) => void;\n  onChangeTopics: (topics: string[]) => void;\n  onChangeAreas: (areas: string[]) => void;\n  onChangeStatus: (ideaStatus: string | null) => void;\n  onChangePublicationStatus: (publicationStatus: PublicationStatus) => void;\n  onChangeProjectPublicationStatus: (\n    ProjectPublicationStatus: ProjectPublicationStatus\n  ) => void;\n  onChangeAssignee: (assignee: string | undefined) => void;\n  onChangeFeedbackFilter: (feedbackNeeded: boolean) => void;\n  onIdeaFiltering: (partialQueryParameters: Partial<IQueryParameters>) => void;\n  onResetParams: (paramsToOmit?: (keyof IQueryParameters)[]) => void;\n  type: 'ideas';\n};\n\ninterface State {\n  queryParameters: IQueryParameters;\n  list: IIdeaData[] | undefined | null;\n  hasMore: boolean;\n  querying: boolean;\n  loadingMore: boolean;\n  sortAttribute: SortAttribute;\n  sortDirection: SortDirection;\n  currentPage: number;\n  lastPage: number;\n}\n\nexport default class GetIdeas extends React.Component<Props, State> {\n  defaultQueryParameters: IQueryParameters;\n  queryParameters$: BehaviorSubject<IQueryParameters>;\n  subscriptions: Subscription[];\n\n  static defaultProps = {\n    pageNumber: 1,\n    pageSize: 12,\n    sort: 'random',\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultQueryParameters = {\n      'page[number]': props.pageNumber as number,\n      'page[size]': props.pageSize as number,\n      sort: props.sort as Sort,\n      projects: undefined,\n      phase: undefined,\n      author: undefined,\n      search: undefined,\n      topics: undefined,\n      areas: undefined,\n      idea_status: undefined,\n      publication_status: undefined,\n      project_publication_status: undefined,\n      bounding_box: undefined,\n      assignee: undefined,\n      feedback_needed: undefined,\n    };\n    const queryParameters = this.getQueryParameters(\n      this.defaultQueryParameters,\n      props\n    );\n    this.state = {\n      // defaults\n      queryParameters,\n      list: undefined,\n      hasMore: false,\n      querying: true,\n      loadingMore: false,\n      sortAttribute: getSortAttribute<Sort, SortAttribute>(props.sort as Sort),\n      sortDirection: getSortDirection<Sort>(props.sort as Sort),\n      currentPage: 1,\n      lastPage: 1,\n    };\n    this.queryParameters$ = new BehaviorSubject(queryParameters);\n    this.subscriptions = [];\n  }\n\n  componentDidMount() {\n    const queryParameters = this.getQueryParameters(\n      this.state.queryParameters,\n      this.props\n    );\n    const startAccumulatorValue: IAccumulator = {\n      queryParameters,\n      ideas: null,\n      hasMore: false,\n    };\n    const queryParameters$ = this.queryParameters$.pipe(\n      distinctUntilChanged((prev, next) => isEqual(prev, next))\n    );\n\n    if (!this.props.type || this.props.type === 'load-more') {\n      this.subscriptions = [\n        queryParameters$\n          .pipe(\n            mergeScan<IQueryParameters, IAccumulator>(\n              (acc, newQueryParameters) => {\n                const oldQueryParamsWithoutPageNumber = omit(\n                  cloneDeep(acc.queryParameters),\n                  'page[number]'\n                );\n                const newQueryParamsWithoutPageNumber = omit(\n                  cloneDeep(newQueryParameters),\n                  'page[number]'\n                );\n                const oldPageNumber = acc.queryParameters['page[number]'];\n                const newPageNumber = newQueryParameters['page[number]'];\n                const isLoadingMore =\n                  isEqual(\n                    oldQueryParamsWithoutPageNumber,\n                    newQueryParamsWithoutPageNumber\n                  ) && oldPageNumber !== newPageNumber;\n                const pageNumber = isLoadingMore\n                  ? newQueryParameters['page[number]']\n                  : 1;\n                const queryParameters: IQueryParameters = {\n                  ...newQueryParameters,\n                  'page[number]': pageNumber,\n                };\n\n                this.setState({\n                  querying: !isLoadingMore,\n                  loadingMore: isLoadingMore,\n                });\n\n                const stream = this.props.mini ? ideasMiniStream : ideasStream;\n\n                return stream({ queryParameters }).observable.pipe(\n                  map((ideas) => {\n                    const selfLink = get(ideas, 'links.self');\n                    const lastLink = get(ideas, 'links.last');\n                    const hasMore =\n                      isString(selfLink) &&\n                      isString(lastLink) &&\n                      selfLink !== lastLink;\n\n                    return {\n                      queryParameters,\n                      hasMore,\n                      ideas: !isLoadingMore\n                        ? ideas.data\n                        : unionBy(acc.ideas || [], ideas.data, 'id'),\n                    };\n                  })\n                );\n              },\n              startAccumulatorValue\n            )\n          )\n          .subscribe(({ ideas, queryParameters, hasMore }) => {\n            this.setState({\n              queryParameters,\n              hasMore,\n              list: ideas,\n              querying: false,\n              loadingMore: false,\n            });\n          }),\n      ];\n    } else {\n      this.subscriptions = [\n        queryParameters$\n          .pipe(\n            switchMap((queryParameters) => {\n              const oldPageNumber = this.state.queryParameters['page[number]'];\n              const newPageNumber = queryParameters['page[number]'];\n              queryParameters['page[number]'] =\n                newPageNumber !== oldPageNumber ? newPageNumber : 1;\n\n              const stream = this.props.mini ? ideasMiniStream : ideasStream;\n\n              return stream({\n                queryParameters,\n              }).observable.pipe(map((ideas) => ({ queryParameters, ideas })));\n            })\n          )\n          .subscribe(({ ideas, queryParameters }) => {\n            this.setState({\n              queryParameters,\n              list: ideas ? ideas.data : null,\n              querying: false,\n              loadingMore: false,\n              sortAttribute: getSortAttribute<Sort, SortAttribute>(\n                queryParameters.sort\n              ),\n              sortDirection: getSortDirection<Sort>(queryParameters.sort),\n              currentPage: getPageNumberFromUrl(ideas.links.self) || 1,\n              lastPage: getPageNumberFromUrl(ideas.links.last) || 1,\n            });\n          }),\n      ];\n    }\n  }\n\n  componentDidUpdate(prevProps: Props, _prevState: State) {\n    const { children: _prevChildren, ...prevPropsWithoutChildren } = prevProps;\n    const { children: _nextChildren, ...nextPropsWithoutChildren } = this.props;\n\n    if (!isEqual(prevPropsWithoutChildren, nextPropsWithoutChildren)) {\n      const queryParameters = this.getQueryParameters(\n        this.state.queryParameters,\n        this.props\n      );\n      this.queryParameters$.next(queryParameters);\n    }\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  propsToQueryParamsShape = () => ({\n    projects: this.props.projectIds,\n    'page[number]': this.props.pageNumber as number,\n    'page[size]': this.props.pageSize as number,\n    phase: this.props.phaseId,\n    author: this.props.authorId,\n    sort: this.props.sort as Sort,\n    topics: this.props.topics,\n    areas: this.props.areas,\n    idea_status: this.props.ideaStatusId,\n    publication_status: this.props.publicationStatus,\n    project_publication_status: this.props.projectPublicationStatus,\n    bounding_box: this.props.boundingBox,\n    assignee: this.props.assignee,\n    feedback_needed: this.props.feedbackNeeded,\n    search: undefined,\n  });\n\n  getQueryParametersFromProps = () => {\n    const queryParamsShaped = this.propsToQueryParamsShape();\n    Object.keys(queryParamsShaped)\n      .filter((key) => queryParamsShaped[key] === null)\n      .forEach((key) => (queryParamsShaped[key] = undefined));\n    return queryParamsShaped as IQueryParameters; // legal because last line changes null values to undefined\n  };\n\n  getQueryParameters = (queryParameters: IQueryParameters, props: Props) => {\n    let projects: string[] | undefined | null = undefined;\n\n    if (isNil(props.projectIds)) {\n      projects = queryParameters.projects;\n    } else if (isArray(props.projectIds)) {\n      projects = props.projectIds;\n    }\n\n    const inputPropsQueryParameters: IQueryParameters = {\n      projects,\n      'page[number]': props.pageNumber as number,\n      'page[size]': props.pageSize as number,\n      phase: props.phaseId,\n      author: props.authorId,\n      sort: props.sort as Sort,\n      search: props.search,\n      topics: props.topics,\n      areas: props.areas,\n      idea_status: props.ideaStatusId,\n      publication_status: props.publicationStatus,\n      project_publication_status: props.projectPublicationStatus,\n      bounding_box: props.boundingBox,\n      assignee: props.assignee,\n      feedback_needed: props.feedbackNeeded,\n    };\n\n    // Omit all queryParameters that are nil.\n    // Why do this? Because we assume that an input prop that's nil is an input prop that should be ignored,\n    // and not overwrite a none-nil value that's part of this.state.queryParameters.\n    return {\n      ...queryParameters,\n      ...omitBy(inputPropsQueryParameters, isNil),\n      // Make an exception for 'projects', because when it's undefined we don't want to ignore it but instead pass it along\n      // to let the request know we don't want to apply a projects filter but load the ideas for all projects\n      projects,\n    };\n  };\n\n  loadMore = () => {\n    if (!this.state.loadingMore) {\n      this.queryParameters$.next({\n        ...this.state.queryParameters,\n        'page[number]': this.state.queryParameters['page[number]'] + 1,\n      });\n    }\n  };\n\n  handleChangePage = (pageNumber: number) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      'page[number]': pageNumber,\n    });\n  };\n\n  handlePhaseOnChange = (phaseId: string) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      phase: phaseId,\n      'page[number]': 1,\n    });\n  };\n\n  handleSearchOnChange = (search: string) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      search: search ? search : undefined,\n      'page[number]': 1,\n    });\n  };\n\n  handleSortOnChange = (sort: Sort) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      sort,\n      'page[number]': 1,\n    });\n  };\n\n  handleProjectsOnChange = (projects: string[]) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      projects,\n      'page[number]': 1,\n    });\n  };\n\n  handleTopicsOnChange = (topics: string[]) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      topics,\n      'page[number]': 1,\n    });\n  };\n\n  handleAreasOnchange = (areas: string[]) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      areas,\n      'page[number]': 1,\n    });\n  };\n\n  handleStatusOnChange = (ideaStatus: string | null) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      idea_status: ideaStatus || undefined,\n      'page[number]': 1,\n    });\n  };\n\n  handlePublicationStatusOnChange = (publicationStatus: PublicationStatus) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      publication_status: publicationStatus,\n      'page[number]': 1,\n    });\n  };\n\n  handleProjectPublicationStatusOnChange = (\n    projectPublicationStatus: ProjectPublicationStatus\n  ) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      project_publication_status: projectPublicationStatus,\n      'page[number]': 1,\n    });\n  };\n\n  handleAssigneeOnChange = (assignee: string | undefined) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      assignee,\n      'page[number]': 1,\n    });\n  };\n\n  handleFeedbackFilterOnChange = (feedbackNeeded: boolean) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      feedback_needed: feedbackNeeded || undefined,\n      'page[number]': 1,\n    });\n  };\n\n  handleIdeaFiltering = (ideaFilters: Partial<IQueryParameters>) => {\n    this.queryParameters$.next({\n      ...this.state.queryParameters,\n      ...ideaFilters,\n      'page[number]': 1,\n    });\n  };\n\n  handleResetParamsToProps = (paramsToOmit?: (keyof IQueryParameters)[]) => {\n    const defaultQueryParameters = this.getQueryParametersFromProps();\n\n    if (paramsToOmit && paramsToOmit.length > 0) {\n      this.queryParameters$.next({\n        ...this.state.queryParameters,\n        ...omit(defaultQueryParameters, paramsToOmit),\n      });\n    } else {\n      this.queryParameters$.next(defaultQueryParameters);\n    }\n  };\n\n  render() {\n    const { children } = this.props;\n    return (children as children)({\n      ...this.state,\n      onLoadMore: this.loadMore,\n      onChangePage: this.handleChangePage,\n      onChangeProjects: this.handleProjectsOnChange,\n      onChangePhase: this.handlePhaseOnChange,\n      onChangeSearchTerm: this.handleSearchOnChange,\n      onChangeSorting: this.handleSortOnChange,\n      onChangeTopics: this.handleTopicsOnChange,\n      onChangeAreas: this.handleAreasOnchange,\n      onChangeStatus: this.handleStatusOnChange,\n      onChangePublicationStatus: this.handlePublicationStatusOnChange,\n      onChangeProjectPublicationStatus: this\n        .handleProjectPublicationStatusOnChange,\n      onChangeAssignee: this.handleAssigneeOnChange,\n      onChangeFeedbackFilter: this.handleFeedbackFilterOnChange,\n      onIdeaFiltering: this.handleIdeaFiltering,\n      onResetParams: this.handleResetParamsToProps,\n      type: 'ideas',\n    });\n  }\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  votingDisabledProjectInactive: {\n    id: 'app.components.VoteControl.votingDisabledProjectInactive',\n    defaultMessage: 'You can no longer vote on ideas in {projectName}',\n  },\n  votingDisabledPhaseOver: {\n    id: 'app.components.VoteControl.votingDisabledPhaseOver',\n    defaultMessage: \"It's no longer possible to vote in this phase\",\n  },\n  votingDisabledFutureEnabled: {\n    id: 'app.components.VoteControl.votingDisabledFutureEnabled',\n    defaultMessage: 'Voting will be enabled once this phase starts',\n  },\n  votingPossibleLater: {\n    id: 'app.components.VoteControl.votingPossibleLater',\n    defaultMessage: 'Voting will start on {enabledFromDate}',\n  },\n  votingNotEnabled: {\n    id: 'app.components.VoteControl.votingNotEnabled',\n    defaultMessage: 'Voting is currently not enabled for this project',\n  },\n  votingDisabledMaxReached: {\n    id: 'app.components.VoteControl.votingDisabledMaxReached',\n    defaultMessage:\n      \"You've reached your maximum number of votes in {projectName}\",\n  },\n  votingNotPermitted: {\n    id: 'app.components.VoteControl.votingNotPermitted',\n    defaultMessage: 'Voting is only enabled for certain groups',\n  },\n  votingNotVerified: {\n    id: 'app.components.VoteControl.votingNotVerified',\n    defaultMessage: '{linkToVerification} in order to vote.',\n  },\n  linkToVerificationText: {\n    id: 'app.components.VoteControl.linkToVerificationText',\n    defaultMessage: 'Verify your identity',\n  },\n  upvote: {\n    id: 'app.components.VoteControl.upvote',\n    defaultMessage: 'Upvote',\n  },\n  downvote: {\n    id: 'app.components.VoteControl.downvote',\n    defaultMessage: 'Downvote',\n  },\n  a11y_upvotesDownvotes: {\n    id: 'app.containers.VoteControl.a11y_upvotesDownvotes',\n    defaultMessage:\n      'Total upvotes: {upvotesCount}, total downvotes: {downvotesCount}',\n  },\n  voteSuccessTitle: {\n    id: 'app.containers.VoteControl.voteSuccessTitle',\n    defaultMessage: 'Your vote was successfully registered!',\n  },\n  voteErrorTitle: {\n    id: 'app.containers.VoteControl.voteErrorTitle',\n    defaultMessage: 'Something went wrong',\n  },\n  voteErrorSubTitle: {\n    id: 'app.containers.VoteControl.voteErrorSubTitle',\n    defaultMessage:\n      'Due to an error your vote could not being registered. Please try again in a few minutes.',\n  },\n  close: {\n    id: 'app.containers.VoteControl.close',\n    defaultMessage: 'Close',\n  },\n});\n","import { useState, useEffect } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { Observable, of } from 'rxjs';\nimport {\n  IIdeaImage,\n  IIdeaImageData,\n  ideaImageStream,\n} from 'services/ideaImages';\n\ninterface Props {\n  ideaId: string | null | undefined;\n  ideaImageId: string | null | undefined;\n}\n\nexport default function useIdeaImage({ ideaId, ideaImageId }: Props) {\n  const [ideaImage, setIdeaImage] = useState<\n    IIdeaImageData | undefined | null | Error\n  >(undefined);\n\n  useEffect(() => {\n    setIdeaImage(undefined);\n\n    let observable: Observable<IIdeaImage | null> = of(null);\n\n    if (ideaId && ideaImageId) {\n      observable = ideaImageStream(ideaId, ideaImageId).observable;\n    }\n\n    const subscription = observable.subscribe((response) => {\n      const idea = !isNilOrError(response) ? response.data : response;\n      setIdeaImage(idea);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [ideaId, ideaImageId]);\n\n  return ideaImage;\n}\n","import React, { FormEvent, memo, useState } from 'react';\nimport { includes, isUndefined } from 'lodash-es';\nimport {\n  isNilOrError,\n  isUndefinedOrError,\n  capitalizeParticipationContextType,\n} from 'utils/helperUtils';\n\n// components\nimport Button from 'components/UI/Button';\n\n// services\nimport { IProjectData } from 'services/projects';\nimport {\n  getCurrentPhase,\n  getLatestRelevantPhase,\n  IPhaseData,\n} from 'services/phases';\nimport { addBasket, updateBasket } from 'services/baskets';\n\n// resources\nimport { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport { GetAppConfigurationChildProps } from 'resources/GetAppConfiguration';\nimport { GetLocaleChildProps } from 'resources/GetLocale';\nimport { GetIdeaChildProps } from 'resources/GetIdea';\nimport { GetProjectChildProps } from 'resources/GetProject';\nimport { GetPhasesChildProps } from 'resources/GetPhases';\n\n// hooks\nimport useAuthUser from 'hooks/useAuthUser';\nimport useAppConfiguration from 'hooks/useAppConfiguration';\nimport useLocale from 'hooks/useLocale';\nimport useIdea from 'hooks/useIdea';\nimport useBasket from 'hooks/useBasket';\nimport useProject from 'hooks/useProject';\nimport usePhases from 'hooks/usePhases';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from 'containers/ProjectsShowPage/shared/pb/tracks';\n\n// utils\nimport streams from 'utils/streams';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\n\n// i18n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\nimport FormattedBudget from 'utils/currency/FormattedBudget';\n\n// styles\nimport styled from 'styled-components';\nimport { fontSizes, colors, defaultCardStyle, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport PBExpenses from 'containers/ProjectsShowPage/shared/pb/PBExpenses';\n\n// typings\nimport { IParticipationContextType } from 'typings';\n\nconst IdeaCardContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst IdeaPageContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n\n  ${media.smallerThanMaxTablet`\n    padding: 20px;\n    background: ${colors.backgroundLightGrey};\n  `}\n`;\n\nconst BudgetWithButtonWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: center;\n`;\n\nconst Budget = styled.div`\n  width: 100%;\n  height: 90px;\n  color: ${(props: any) => props.theme.colorText};\n  font-size: ${fontSizes.medium}px;\n  font-weight: 600;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 3px;\n  ${defaultCardStyle};\n`;\n\nconst StyledPBExpenses = styled(PBExpenses)`\n  margin-top: 25px;\n  padding: 20px;\n`;\n\ninterface OuterProps {\n  view: 'ideaCard' | 'ideaPage';\n  projectId: string;\n  ideaId: string;\n  className?: string;\n}\n\ninterface InnerProps extends OuterProps {\n  authUser: GetAuthUserChildProps;\n  tenant: GetAppConfigurationChildProps;\n  locale: GetLocaleChildProps;\n  idea: GetIdeaChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n  participationContext: IProjectData | IPhaseData;\n  participationContextId: string;\n  participationContextType: IParticipationContextType;\n}\n\nconst AssignBudgetControl = memo<InnerProps & InjectedIntlProps>(\n  ({\n    view,\n    ideaId,\n    authUser,\n    tenant,\n    locale,\n    idea,\n    phases,\n    participationContext,\n    participationContextId,\n    participationContextType,\n    intl,\n    className,\n  }) => {\n    const basket = useBasket(\n      participationContext?.relationships?.user_basket?.data?.id\n    );\n\n    const [processing, setProcessing] = useState(false);\n\n    const handleAddRemoveButtonClick = (event?: FormEvent) => {\n      event?.preventDefault();\n      assignBudget();\n    };\n\n    const assignBudget = async () => {\n      const timeout = (ms: number) =>\n        new Promise((resolve) => setTimeout(resolve, ms));\n      const done = async () => {\n        await timeout(200);\n        setProcessing(false);\n      };\n\n      if (!isNilOrError(idea)) {\n        const isBudgetingEnabled =\n          idea.attributes.action_descriptor.budgeting?.enabled;\n        const basketIdeaIds = !isNilOrError(basket)\n          ? basket.relationships.ideas.data.map((idea) => idea.id)\n          : [];\n        const isInBasket = includes(basketIdeaIds, ideaId);\n        const budgetingDisabledReason =\n          idea.attributes.action_descriptor.budgeting?.disabled_reason;\n\n        if (\n          isNilOrError(authUser) ||\n          budgetingDisabledReason === 'not_verified'\n        ) {\n          openSignUpInModal({\n            verification: budgetingDisabledReason === 'not_verified',\n            verificationContext:\n              budgetingDisabledReason === 'not_verified'\n                ? {\n                    action: 'budgeting',\n                    id: participationContextId,\n                    type: participationContextType,\n                  }\n                : undefined,\n          });\n        } else if (!isNilOrError(authUser) && isBudgetingEnabled) {\n          setProcessing(true);\n\n          if (!isNilOrError(basket)) {\n            let newIdeas: string[] = [];\n\n            if (isInBasket) {\n              newIdeas = basket.relationships.ideas.data\n                .filter((basketIdea) => basketIdea.id !== idea.id)\n                .map((basketIdea) => basketIdea.id);\n            } else {\n              newIdeas = [\n                ...basket.relationships.ideas.data.map(\n                  (basketIdea) => basketIdea.id\n                ),\n                idea.id,\n              ];\n            }\n\n            try {\n              await updateBasket(basket.id, {\n                user_id: authUser.id,\n                participation_context_id: participationContextId,\n                participation_context_type: capitalizeParticipationContextType(\n                  participationContextType\n                ),\n                idea_ids: newIdeas,\n                submitted_at: null,\n              });\n              done();\n              trackEventByName(tracks.ideaAddedToBasket);\n            } catch (error) {\n              done();\n              streams.fetchAllWith({ dataId: [basket.id] });\n            }\n          } else {\n            try {\n              await addBasket({\n                user_id: authUser.id,\n                participation_context_id: participationContextId,\n                participation_context_type: capitalizeParticipationContextType(\n                  participationContextType\n                ),\n                idea_ids: [idea.id],\n              });\n              done();\n              trackEventByName(tracks.basketCreated);\n            } catch (error) {\n              done();\n            }\n          }\n        }\n      }\n    };\n\n    if (\n      !isUndefined(authUser) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(idea) &&\n      !isUndefined(basket) &&\n      idea.attributes.budget\n    ) {\n      const basketIdeaIds = !isNilOrError(basket)\n        ? basket.relationships.ideas.data.map((idea) => idea.id)\n        : [];\n      const isInBasket = includes(basketIdeaIds, ideaId);\n      const isBudgetingEnabled =\n        idea.attributes.action_descriptor.budgeting?.enabled;\n      const isSignedIn = !!authUser;\n      const budgetingDisabledReason =\n        idea.attributes.action_descriptor.budgeting?.disabled_reason;\n      const isPermitted = budgetingDisabledReason !== 'not_permitted';\n      const hasBudgetingDisabledReason = !!idea.attributes.action_descriptor\n        .budgeting?.disabled_reason;\n      const isPBContext =\n        participationContext?.attributes?.participation_method === 'budgeting';\n      const isCurrentPhase =\n        getCurrentPhase(phases)?.id === participationContext?.id;\n      const isCurrent =\n        (participationContextType === 'project' &&\n          (participationContext as IProjectData).attributes\n            .publication_status !== 'archived') ||\n        isCurrentPhase;\n\n      if (isPBContext) {\n        const addRemoveButton =\n          isCurrent && isPermitted ? (\n            <Button\n              onClick={handleAddRemoveButtonClick}\n              disabled={\n                isSignedIn && !isBudgetingEnabled && !hasBudgetingDisabledReason\n              }\n              processing={processing}\n              bgColor={isInBasket ? colors.clRedError : colors.clGreen}\n              iconSize=\"18px\"\n              icon={!isInBasket ? 'basket-plus' : 'basket-minus'}\n              className={`e2e-assign-budget-button ${\n                isInBasket ? 'in-basket' : 'not-in-basket'\n              }`}\n              ariaLabel={intl.formatMessage(\n                !isInBasket\n                  ? messages.addToMyBasket\n                  : messages.removeFromMyBasket\n              )}\n            >\n              <FormattedMessage\n                {...(!isInBasket\n                  ? view === 'ideaCard'\n                    ? messages.add\n                    : messages.addToMyBasket\n                  : view === 'ideaCard'\n                  ? messages.remove\n                  : messages.removeFromMyBasket)}\n              />\n            </Button>\n          ) : null;\n\n        if (view === 'ideaCard') {\n          return (\n            <IdeaCardContainer\n              className={`e2e-assign-budget ${className || ''}`}\n              aria-live=\"polite\"\n            >\n              {addRemoveButton}\n            </IdeaCardContainer>\n          );\n        }\n\n        if (view === 'ideaPage') {\n          return (\n            <IdeaPageContainer\n              className={`pbAssignBudgetControlContainer e2e-assign-budget ${\n                className || ''\n              }`}\n              aria-live=\"polite\"\n            >\n              <BudgetWithButtonWrapper>\n                <Budget>\n                  <ScreenReaderOnly>\n                    <FormattedMessage {...messages.a11y_price} />\n                  </ScreenReaderOnly>\n                  <FormattedBudget value={idea.attributes.budget} />\n                </Budget>\n                {addRemoveButton}\n              </BudgetWithButtonWrapper>\n              {isPermitted && (\n                <StyledPBExpenses\n                  participationContextId={participationContextId}\n                  participationContextType={participationContextType}\n                  viewMode=\"column\"\n                />\n              )}\n            </IdeaPageContainer>\n          );\n        }\n      }\n    }\n\n    return null;\n  }\n);\n\n// Contains the logic to determine the participationContext (= the project or most relevant phase the idea belongs to at the moment it's being loaded)\n// It's important to get the proper participationContext both here and in VoteControl to be able to determine which control (if any) should be shown, as\n// the same idea can be present in multiple phases (e.g. a voting and a PB phase) and can therefore have a different control based on the participationContext that's been determined.\n// Similar logic can be found in the VoteControl component. The important thing here is to figure out if the idea belongs to multiple phases, and if that's the case determine\n// the most relevant current phase via the 'getLatestRelevantPhase()' function.\n// This logic used to be all over the place, but now it should be present only in this component and VoteControl. Try to keep it that way :).\nconst AssignBudgetControlWrapper = memo<OuterProps & InjectedIntlProps>(\n  ({ view, projectId, ideaId, className, intl }) => {\n    const authUser = useAuthUser();\n    const tenant = useAppConfiguration();\n    const locale = useLocale();\n    const idea = useIdea({ ideaId });\n    const project = useProject({ projectId });\n    const phases = usePhases(projectId);\n\n    const isContinuousProject =\n      project?.attributes.process_type === 'continuous';\n    const ideaPhaseIds = !isNilOrError(idea)\n      ? idea?.relationships?.phases?.data?.map((item) => item.id)\n      : null;\n    const ideaPhases = !isNilOrError(phases)\n      ? phases?.filter((phase) => includes(ideaPhaseIds, phase.id))\n      : null;\n    const latestRelevantIdeaPhase = ideaPhases\n      ? getLatestRelevantPhase(ideaPhases)\n      : null;\n    const participationContext = isContinuousProject\n      ? project\n      : latestRelevantIdeaPhase;\n    const participationContextType = isContinuousProject ? 'project' : 'phase';\n    const participationContextId = participationContext?.id || null;\n\n    if (\n      !isUndefinedOrError(authUser) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(project) &&\n      !isUndefinedOrError(phases) &&\n      participationContext &&\n      participationContextId\n    ) {\n      return (\n        <AssignBudgetControl\n          view={view}\n          projectId={projectId}\n          ideaId={ideaId}\n          authUser={authUser}\n          tenant={tenant.data}\n          locale={locale}\n          idea={idea}\n          project={project}\n          phases={phases}\n          participationContext={participationContext}\n          participationContextType={participationContextType}\n          participationContextId={participationContextId}\n          intl={intl}\n          className={className}\n        />\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl<OuterProps>(AssignBudgetControlWrapper);\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { uuidRegExp } from 'utils/helperUtils';\n\nexport interface IIdeaVoteData {\n  id: string;\n  type: 'vote';\n  attributes: {\n    mode: 'up' | 'down';\n  };\n  relationships: {\n    votable: {\n      data: {\n        id: string;\n        type: 'votable';\n      };\n    };\n    user: {\n      data: {\n        id: string;\n        type: 'user';\n      };\n    };\n  };\n}\n\ninterface ILinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface IIdeaVotes {\n  data: IIdeaVoteData[];\n  links: ILinks;\n}\n\nexport interface IIdeaVote {\n  data: IIdeaVoteData;\n}\n\nexport interface INewVoteProperties {\n  user_id?: string;\n  mode: 'up' | 'down';\n}\n\nexport function voteStream(\n  voteId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IIdeaVote>({\n    apiEndpoint: `${API_PATH}/votes/${voteId}`,\n    ...streamParams,\n  });\n}\n\nexport function votesStream(\n  ideaId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IIdeaVotes>({\n    apiEndpoint: `${API_PATH}/ideas/${ideaId}/votes`,\n    ...streamParams,\n  });\n}\n\nexport async function addVote(\n  ideaId: string,\n  object: INewVoteProperties,\n  refetchAllActiveIdeas = false\n) {\n  const response = await streams.add<IIdeaVote>(\n    `${API_PATH}/ideas/${ideaId}/votes`,\n    { vote: object }\n  );\n\n  if (refetchAllActiveIdeas) {\n    const ideaEndpointRegexp = new RegExp(`/ideas/${uuidRegExp}$`);\n    streams.fetchAllWith({\n      regexApiEndpoint: [ideaEndpointRegexp],\n      onlyFetchActiveStreams: true,\n    });\n  }\n\n  return response;\n}\n\nexport async function deleteVote(\n  _ideaId,\n  voteId: string,\n  refetchAllActiveIdeas = false\n) {\n  const response = await streams.delete(`${API_PATH}/votes/${voteId}`, voteId);\n\n  if (refetchAllActiveIdeas) {\n    const ideaEndpointRegexp = new RegExp(`/ideas/${uuidRegExp}$`);\n    streams.fetchAllWith({\n      regexApiEndpoint: [ideaEndpointRegexp],\n      onlyFetchActiveStreams: true,\n    });\n  }\n\n  return response;\n}\n","import React, { memo } from 'react';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport StatusBadge from 'components/StatusBadge';\nimport VoteControl from 'components/VoteControl';\nimport { IIdeaData } from 'services/ideas';\n\n// styles\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.footer`\n  display: flex;\n  align-items: center;\n`;\n\nconst Left = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n`;\n\nconst CommentsCount = styled.span`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0;\n`;\n\nconst CommentIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n  fill: ${colors.label};\n  margin-right: 8px;\n`;\n\nconst Right = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledStatusBadge = styled(StatusBadge)`\n  display: block;\n  margin-left: 25px;\n`;\n\nconst StyledVoteControl = styled(VoteControl)`\n  margin-right: 30px;\n`;\n\ninterface Props {\n  idea: IIdeaData;\n  hideIdeaStatus?: boolean;\n  className?: string;\n}\n\nconst FooterWithVoteControl = memo<Props>(\n  ({ idea, hideIdeaStatus, className }) => {\n    const ideaStatusId = idea?.relationships?.idea_status?.data.id;\n    const commentingDescriptor =\n      idea?.attributes?.action_descriptor?.commenting_idea;\n    const isCommentingEnabled = !!(\n      commentingDescriptor.enabled ||\n      commentingDescriptor.disabled_reason === 'not_signed_in'\n    );\n\n    return (\n      <Container className={className || ''}>\n        <Left>\n          <StyledVoteControl\n            styleType=\"border\"\n            ideaId={idea.id}\n            size=\"1\"\n            ariaHidden\n          />\n\n          <CommentsCount\n            className={[\n              'e2e-ideacard-comment-count',\n              isCommentingEnabled ? 'enabled' : 'disabled',\n            ]\n              .filter((item) => item)\n              .join(' ')}\n          >\n            <CommentIcon name=\"comments\" />\n            {idea.attributes.comments_count}\n          </CommentsCount>\n        </Left>\n        {!hideIdeaStatus && (\n          <Right>\n            <StyledStatusBadge statusId={ideaStatusId} />\n          </Right>\n        )}\n      </Container>\n    );\n  }\n);\n\nexport default FooterWithVoteControl;\n","export default {\n  loadMoreIdeas: 'Load more ideas button clicked',\n  sortingFilter: 'Clicked idea cards sort filter',\n  topicsFilter: 'Clicked idea cards topics filter',\n};\n"],"sourceRoot":""}