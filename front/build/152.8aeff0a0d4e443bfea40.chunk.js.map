{"version":3,"sources":["webpack:///./app/components/admin/PostManager/components/LazyPostPreview/messages.ts","webpack:///./app/components/admin/PostManager/components/LazyPostPreview/Initiative/InitiativeEdit.tsx"],"names":["defineMessages","edit","id","defaultMessage","delete","deleteInputConfirmation","deleteInputInTimelineConfirmation","deleteInitiativeConfirmation","voteCounts","currentStatus","assignee","picks","pbItemCountTooltip","cancelEdit","noOne","save","submitError","postedIn","xDaysLeft","proposedBudgetTitle","bodyTitle","InitiativesEditPage","props","locale","setState","selectedLocale","state","prevProps","this","initiative","initiativeImages","goBack","initiativeFiles","topics","tenantLocales","isNilOrError","undefined","isError","initiativeTopics","filter","topic","Container","Top","icon","buttonStyle","textColor","colors","adminTextColor","onClick","FormattedMessage","messages","LocaleSwitcher","onSelectedLocaleChange","onLocaleChange","locales","Content","initiativeImage","length","onPublished","React","PureComponent","Data","adopt","exclude_code","initiativeId","render","resourceId","resourceType","inputProps","dataProps"],"mappings":"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","file":"152.8aeff0a0d4e443bfea40.chunk.js","sourcesContent":["import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  edit: {\n    id: 'app.components.admin.PostManager.PostPreview.edit',\n    defaultMessage: 'Edit',\n  },\n  delete: {\n    id: 'app.components.admin.PostManager.PostPreview.delete',\n    defaultMessage: 'Delete',\n  },\n  deleteInputConfirmation: {\n    id: 'app.components.admin.PostManager.PostPreview.deleteInputConfirmation',\n    defaultMessage:\n      'Are you sure you want to delete this input? This action cannot be undone.',\n  },\n  deleteInputInTimelineConfirmation: {\n    id:\n      'app.components.admin.PostManager.PostPreview.deleteInputInTimelineConfirmation',\n    defaultMessage:\n      'Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered.',\n  },\n  deleteInitiativeConfirmation: {\n    id:\n      'app.components.admin.PostManager.PostPreview.deleteInitiativeConfirmation',\n    defaultMessage: 'Are you sure you want to delete this initiative?',\n  },\n  voteCounts: {\n    id: 'app.components.admin.PostManager.PostPreview.voteCounts',\n    defaultMessage: 'Vote counts:',\n  },\n  currentStatus: {\n    id: 'app.components.admin.PostManager.PostPreview.currentStatus',\n    defaultMessage: 'Current status',\n  },\n  assignee: {\n    id: 'app.components.admin.PostManager.PostPreview.assignee',\n    defaultMessage: 'Assignee',\n  },\n  picks: {\n    id: 'app.components.admin.PostManager.PostPreview.picks',\n    defaultMessage: 'Picks: {picksNumber}',\n  },\n  pbItemCountTooltip: {\n    id: 'app.components.admin.PostManager.PostPreview.pbItemCountTooltip',\n    defaultMessage:\n      \"The number of times this has been included in other participants' participatory budgets\",\n  },\n  cancelEdit: {\n    id: 'app.components.admin.PostManager.PostPreview.cancelEdit',\n    defaultMessage: 'Cancel edit',\n  },\n  noOne: {\n    id: 'app.components.admin.PostManager.PostPreview.noOne',\n    defaultMessage: 'Unassigned',\n  },\n  save: {\n    id: 'app.components.admin.PostManager.PostPreview.save',\n    defaultMessage: 'Save',\n  },\n  submitError: {\n    id: 'app.components.admin.PostManager.PostPreview.submitError',\n    defaultMessage: 'Error',\n  },\n  postedIn: {\n    id: 'app.containers.IdeasShow.postedIn',\n    defaultMessage: 'Posted in {projectLink}',\n  },\n  xDaysLeft: {\n    id: 'app.containers.IdeasShow.xDaysLeft',\n    defaultMessage:\n      '{x, plural, =0 {Less than a day} one {One day} other {# days}} left',\n  },\n  proposedBudgetTitle: {\n    id: 'app.containers.IdeasShow.proposedBudgetTitle',\n    defaultMessage: 'Proposed budget',\n  },\n  bodyTitle: {\n    id: 'app.containers.IdeasShow.bodyTitle',\n    defaultMessage: 'Description',\n  },\n});\n","import React from 'react';\n\n// libraries\nimport { adopt } from 'react-adopt';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfigurationLocales, {\n  GetAppConfigurationLocalesChildProps,\n} from 'resources/GetAppConfigurationLocales';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetInitiativeImages, {\n  GetInitiativeImagesChildProps,\n} from 'resources/GetInitiativeImages';\nimport GetResourceFileObjects, {\n  GetResourceFileObjectsChildProps,\n} from 'resources/GetResourceFileObjects';\nimport GetTopics, { GetTopicsChildProps } from 'resources/GetTopics';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\nimport { isError } from 'util';\n\n// components\nimport InitiativesEditFormWrapper from 'containers/InitiativesEditPage/InitiativesEditFormWrapper';\nimport Button from 'components/UI/Button';\nimport { LocaleSwitcher } from 'cl2-component-library';\nimport { Content, Top, Container } from '../PostPreview';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from '../messages';\nimport { colors } from 'utils/styleUtils';\n\n// typings\nimport { Locale } from 'typings';\nimport { ITopicData } from 'services/topics';\n\nexport interface InputProps {\n  initiativeId: string;\n  goBack: () => void;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  tenantLocales: GetAppConfigurationLocalesChildProps;\n  initiative: GetInitiativeChildProps;\n  initiativeImages: GetInitiativeImagesChildProps;\n  initiativeFiles: GetResourceFileObjectsChildProps;\n  topics: GetTopicsChildProps;\n}\n\ninterface Props extends DataProps, InputProps {}\n\ninterface State {\n  selectedLocale: GetLocaleChildProps;\n}\n\nexport class InitiativesEditPage extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props as Props);\n    this.state = {\n      selectedLocale: props.locale,\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const { locale } = this.props;\n    if (!this.state.selectedLocale && locale !== prevProps.locale) {\n      this.setState({ selectedLocale: locale });\n    }\n  }\n\n  onLocaleChange = (locale: Locale) => {\n    this.setState({ selectedLocale: locale });\n  };\n\n  render() {\n    const {\n      locale,\n      initiative,\n      initiativeImages,\n      goBack,\n      initiativeFiles,\n      topics,\n      tenantLocales,\n    } = this.props;\n    const { selectedLocale } = this.state;\n\n    if (\n      isNilOrError(locale) ||\n      isNilOrError(tenantLocales) ||\n      !selectedLocale ||\n      isNilOrError(initiative) ||\n      initiativeImages === undefined ||\n      initiativeFiles === undefined ||\n      isError(initiativeFiles) ||\n      isNilOrError(topics)\n    ) {\n      return null;\n    }\n    const initiativeTopics = topics.filter(\n      (topic) => !isNilOrError(topic)\n    ) as ITopicData[];\n\n    return (\n      <Container>\n        <Top>\n          <Button\n            icon=\"arrow-back\"\n            buttonStyle=\"text\"\n            textColor={colors.adminTextColor}\n            onClick={goBack}\n          >\n            <FormattedMessage {...messages.cancelEdit} />\n          </Button>\n          <LocaleSwitcher\n            onSelectedLocaleChange={this.onLocaleChange}\n            locales={tenantLocales}\n            selectedLocale={selectedLocale}\n          />\n        </Top>\n        <Content>\n          <InitiativesEditFormWrapper\n            locale={selectedLocale}\n            initiative={initiative}\n            initiativeImage={\n              isNilOrError(initiativeImages) || initiativeImages.length === 0\n                ? null\n                : initiativeImages[0]\n            }\n            onPublished={goBack}\n            initiativeFiles={initiativeFiles}\n            topics={initiativeTopics}\n          />\n        </Content>\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  topics: <GetTopics exclude_code={'custom'} />,\n  tenantLocales: <GetAppConfigurationLocales />,\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n  initiativeImages: ({ initiativeId, render }) => (\n    <GetInitiativeImages initiativeId={initiativeId}>\n      {render}\n    </GetInitiativeImages>\n  ),\n  initiativeFiles: ({ initiativeId, render }) => (\n    <GetResourceFileObjects resourceId={initiativeId} resourceType=\"initiative\">\n      {render}\n    </GetResourceFileObjects>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <InitiativesEditPage {...dataProps} {...inputProps} />}\n  </Data>\n);\n"],"sourceRoot":""}