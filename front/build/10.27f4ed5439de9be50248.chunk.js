(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{NjPQ:function(e,t,r){"use strict";r("2B1R"),r("SuFq"),r("pNMO"),r("5DmW"),r("27RR");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("QILm"));r("ToJy"),r("FZtP"),r("TeQF"),r("tkto"),r("rB9j"),r("hByQ");var i=a(r("lwsE")),u=a(r("W8MJ")),s=a(r("PJYZ")),o=a(r("7W2i")),c=a(r("a1gu")),l=a(r("Nsbk")),p=a(r("lSNA")),d=a(r("q1tI")),f=r("T89o"),h=r("DtyJ"),v=r("ahDk"),m=r("fM+I"),g=r("ErwY"),P=["children"],b=["children"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,c.default)(this,r)}}var O=function(e){(0,o.default)(r,e);var t=q(r);function r(e){var a;(0,i.default)(this,r),a=t.call(this,e),(0,p.default)((0,s.default)(a),"defaultQueryParameters",void 0),(0,p.default)((0,s.default)(a),"queryParameters$",void 0),(0,p.default)((0,s.default)(a),"subscriptions",void 0),(0,p.default)((0,s.default)(a),"propsToQueryParamsShape",(function(){return{"page[number]":a.props.pageNumber,"page[size]":a.props.pageSize,author:a.props.authorId,sort:a.props.sort,topics:a.props.topics,areas:a.props.areas,initiative_status:a.props.initiativeStatusId,publication_status:a.props.publicationStatus,bounding_box:a.props.boundingBox,assignee:a.props.assignee,feedback_needed:a.props.feedbackNeeded,search:void 0}})),(0,p.default)((0,s.default)(a),"getQueryParametersFromProps",(function(){var e=a.propsToQueryParamsShape();return Object.keys(e).filter((function(t){return null===e[t]})).forEach((function(t){return e[t]=void 0})),e})),(0,p.default)((0,s.default)(a),"getQueryParameters",(function(e,t){var r={"page[number]":t.pageNumber,"page[size]":t.pageSize,author:t.authorId,sort:t.sort,search:t.search,topics:t.topics,areas:t.areas,initiative_status:t.initiativeStatusId,publication_status:t.publicationStatus,bounding_box:t.boundingBox,assignee:t.assignee,feedback_needed:t.feedbackNeeded};return S(S({},e),(0,f.omitBy)(r,f.isNil))})),(0,p.default)((0,s.default)(a),"loadMore",(function(){a.state.loadingMore||a.queryParameters$.next(S(S({},a.state.queryParameters),{},{"page[number]":a.state.queryParameters["page[number]"]+1}))})),(0,p.default)((0,s.default)(a),"handleChangePage",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{"page[number]":e}))})),(0,p.default)((0,s.default)(a),"handleSearchOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{search:e||void 0,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleSortOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{sort:e,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleTopicsOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{topics:e,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleAreasOnchange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{areas:e,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleStatusOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{initiative_status:e||void 0,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handlePublicationStatusOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{publication_status:e,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleAssigneeOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{assignee:e,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleFeedbackFilterOnChange",(function(e){a.queryParameters$.next(S(S({},a.state.queryParameters),{},{feedback_needed:e||void 0,"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleInitiativeFiltering",(function(e){a.queryParameters$.next(S(S(S({},a.state.queryParameters),e),{},{"page[number]":1}))})),(0,p.default)((0,s.default)(a),"handleResetParamsToProps",(function(e){var t=a.getQueryParametersFromProps();e&&e.length>0?a.queryParameters$.next(S(S({},a.state.queryParameters),(0,f.omit)(t,e))):a.queryParameters$.next(t)})),a.defaultQueryParameters={"page[number]":e.pageNumber,"page[size]":e.pageSize,sort:e.sort,author:void 0,search:void 0,topics:void 0,areas:void 0,initiative_status:void 0,publication_status:void 0,bounding_box:void 0,assignee:void 0,feedback_needed:void 0};var n=a.getQueryParameters(a.defaultQueryParameters,e);return a.state={queryParameters:n,list:void 0,hasMore:!1,querying:!0,loadingMore:!1,sortAttribute:(0,g.getSortAttribute)(e.sort),sortDirection:(0,g.getSortDirection)(e.sort),currentPage:1,lastPage:1},a.queryParameters$=new h.BehaviorSubject(n),a.subscriptions=[],a}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this,t={queryParameters:this.getQueryParameters(this.state.queryParameters,this.props),initiatives:null,hasMore:!1},r=this.queryParameters$.pipe((0,v.distinctUntilChanged)((function(e,t){return(0,f.isEqual)(e,t)})));this.props.type&&"load-more"!==this.props.type?this.subscriptions=[r.pipe((0,v.switchMap)((function(t){var r=e.state.queryParameters["page[number]"],a=t["page[number]"];return t["page[number]"]=a!==r?a:1,(0,m.initiativesStream)({queryParameters:t}).observable.pipe((0,v.map)((function(e){return{queryParameters:t,initiatives:e}})))}))).subscribe((function(t){var r=t.initiatives,a=t.queryParameters;e.setState({queryParameters:a,list:r?r.data:null,querying:!1,loadingMore:!1,sortAttribute:(0,g.getSortAttribute)(a.sort),sortDirection:(0,g.getSortDirection)(a.sort),currentPage:(0,g.getPageNumberFromUrl)(r.links.self)||1,lastPage:(0,g.getPageNumberFromUrl)(r.links.last)||1})}))]:this.subscriptions=[r.pipe((0,v.mergeScan)((function(t,r){var a=(0,f.omit)((0,f.cloneDeep)(t.queryParameters),"page[number]"),n=(0,f.omit)((0,f.cloneDeep)(r),"page[number]"),i=t.queryParameters["page[number]"],u=r["page[number]"],s=(0,f.isEqual)(a,n)&&i!==u,o=s?r["page[number]"]:1,c=S(S({},r),{},{"page[number]":o});return e.setState({querying:!s,loadingMore:s}),(0,m.initiativesStream)({queryParameters:c}).observable.pipe((0,v.map)((function(e){var r=(0,f.get)(e,"links.self"),a=(0,f.get)(e,"links.last"),n=(0,f.isString)(r)&&(0,f.isString)(a)&&r!==a;return{queryParameters:c,hasMore:n,initiatives:s?(0,f.unionBy)(t.initiatives||[],e.data,"id"):e.data}})))}),t)).subscribe((function(t){var r=t.initiatives,a=t.queryParameters,n=t.hasMore;e.setState({queryParameters:a,hasMore:n,list:r,querying:!1,loadingMore:!1})}))]}},{key:"componentDidUpdate",value:function(e,t){e.children;var r=(0,n.default)(e,P),a=this.props,i=(a.children,(0,n.default)(a,b));if(!(0,f.isEqual)(r,i)){var u=this.getQueryParameters(this.state.queryParameters,this.props);this.queryParameters$.next(u)}}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(S(S({},this.state),{},{onLoadMore:this.loadMore,onChangePage:this.handleChangePage,onChangeSearchTerm:this.handleSearchOnChange,onChangeSorting:this.handleSortOnChange,onChangeTopics:this.handleTopicsOnChange,onChangeAreas:this.handleAreasOnchange,onChangeStatus:this.handleStatusOnChange,onChangePublicationStatus:this.handlePublicationStatusOnChange,onChangeAssignee:this.handleAssigneeOnChange,onChangeFeedbackFilter:this.handleFeedbackFilterOnChange,onInitiativeFiltering:this.handleInitiativeFiltering,onResetParams:this.handleResetParamsToProps}))}}]),r}(d.default.Component);t.default=O,(0,p.default)(O,"defaultProps",{pageNumber:1,pageSize:12,sort:"new"})},UjZJ:function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.initiativeStatusStream=function(e){return i.default.get({apiEndpoint:"".concat(n.API_PATH,"/initiative_statuses/").concat(e)})},t.initiativeStatusesStream=function(){return i.default.get({apiEndpoint:"".concat(n.API_PATH,"/initiative_statuses")})},r("ma9I");var n=r("p0gT"),i=a(r("1Kqg"))},bB4g:function(e,t,r){"use strict";r("SuFq");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("FZtP");var n=a(r("lwsE")),i=a(r("W8MJ")),u=a(r("PJYZ")),s=a(r("7W2i")),o=a(r("a1gu")),c=a(r("Nsbk")),l=a(r("lSNA")),p=a(r("q1tI")),d=r("UjZJ"),f=r("KLnl");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,o.default)(this,r)}}var v=function(e){(0,s.default)(r,e);var t=h(r);function r(e){var a;return(0,n.default)(this,r),a=t.call(this,e),(0,l.default)((0,u.default)(a),"subscriptions",void 0),a.state={initiativeStatuses:void 0},a}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.subscriptions=[(0,d.initiativeStatusesStream)().observable.subscribe((function(t){e.setState({initiativeStatuses:(0,f.isNilOrError)(t)?null:t.data})}))]}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.initiativeStatuses)}}]),r}(p.default.Component);t.default=v},"fM+I":function(e,t,r){"use strict";r("tkto"),r("pNMO"),r("TeQF"),r("5DmW"),r("FZtP"),r("27RR");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.initiativeByIdStream=h,t.initiativeBySlugStream=function(e){return c.default.get({apiEndpoint:"".concat(o.API_PATH,"/initiatives/by_slug/").concat(e)})},t.initiativesStream=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return c.default.get(f({apiEndpoint:"".concat(o.API_PATH,"/initiatives")},e))},t.initiativesFilterCountsStream=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return c.default.get(f(f({apiEndpoint:"".concat(o.API_PATH,"/initiatives/filter_counts")},e),{},{cacheStream:!1}))},t.initiativesMarkersStream=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return c.default.get(f(f({apiEndpoint:"".concat(o.API_PATH,"/initiatives/as_markers")},e),{},{cacheStream:!1}))},t.addInitiative=function(e){return v.apply(this,arguments)},t.updateInitiative=function(e,t){return m.apply(this,arguments)},t.deleteInitiative=function(e){return g.apply(this,arguments)},t.initiativeAllowedTransitionsStream=function(e){return c.default.get({apiEndpoint:"".concat(o.API_PATH,"/initiatives/").concat(e,"/allowed_transitions")})},t.initiativeActivities=function(e){return c.default.get({apiEndpoint:"".concat(o.API_PATH,"/initiatives/").concat(e,"/activities")})},t.getInitiativeActionDescriptors=function(){return c.default.get({apiEndpoint:"".concat(o.API_PATH,"/action_descriptors/initiatives")})};var n=a(r("o0o1")),i=a(r("J4zp")),u=a(r("yXPU")),s=a(r("lSNA"));r("ma9I"),r("4mDm"),r("07d7"),r("5s+n"),r("PKPk"),r("3bBZ");var o=r("p0gT"),c=a(r("1Kqg")),l=r("ahDk"),p=r("T89o");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e){return c.default.get({apiEndpoint:"".concat(o.API_PATH,"/initiatives/").concat(e)})}function v(){return(v=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.add("".concat(o.API_PATH,"/initiatives"),{initiative:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,u.default)(n.default.mark((function e(t,r){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.update("".concat(o.API_PATH,"/initiatives/").concat(t),t,{initiative:r});case 2:return a=e.sent,c.default.fetchAllWith({apiEndpoint:["".concat(o.API_PATH,"/stats/initiatives_count"),"".concat(o.API_PATH,"/initiatives"),"".concat(o.API_PATH,"/initiatives/").concat(t,"/activities")]}),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,u.default)(n.default.mark((function e(t){var r,a,u,s,d;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([h(t).observable.pipe((0,l.first)()).toPromise(),c.default.delete("".concat(o.API_PATH,"/initiatives/").concat(t),t)]);case 2:return r=e.sent,a=(0,i.default)(r,2),u=a[0],s=a[1],d=(0,p.get)(u,"relationships.author.data.id",!1),c.default.fetchAllWith({apiEndpoint:d?["".concat(o.API_PATH,"/users/").concat(d,"/initiatives_count")]:[]}),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},lPdK:function(e,t,r){"use strict";r("SuFq");var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("ToJy"),r("2B1R"),r("TeQF"),r("FZtP");var n=a(r("lwsE")),i=a(r("W8MJ")),u=a(r("PJYZ")),s=a(r("7W2i")),o=a(r("a1gu")),c=a(r("Nsbk")),l=a(r("lSNA")),p=a(r("q1tI")),d=r("T89o"),f=r("DtyJ"),h=r("ahDk"),v=r("Sxt5"),m=r("rltp"),g=r("KLnl");function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,o.default)(this,r)}}var b=function(e){(0,s.default)(r,e);var t=P(r);function r(e){var a;return(0,n.default)(this,r),a=t.call(this,e),(0,l.default)((0,u.default)(a),"inputProps$",void 0),(0,l.default)((0,u.default)(a),"subscriptions",void 0),a.state={topics:void 0},a}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.topicIds,a=t.code,n=t.exclude_code,i=t.sort,u=t.projectId;this.inputProps$=new f.BehaviorSubject({topicIds:r,code:a,exclude_code:n,sort:i,projectId:u}),this.subscriptions=[this.inputProps$.pipe((0,h.distinctUntilChanged)((function(e,t){return(0,d.isEqual)(e,t)})),(0,h.switchMap)((function(e){var t=e.topicIds,r=e.code,a=e.exclude_code,n=e.sort,i=e.projectId,u={code:r,exclude_code:a,sort:n};return i?(0,m.projectTopicsStream)(i).observable.pipe((0,h.map)((function(e){return e.data.filter((function(e){return e})).map((function(e){return e.relationships.topic.data.id}))})),(0,h.switchMap)((function(e){return(0,f.combineLatest)(e.map((function(e){return(0,v.topicByIdStream)(e).observable.pipe((0,h.map)((function(e){return(0,g.isNilOrError)(e)?e:e.data})))})))}))):t?t.length>0?(0,f.combineLatest)(t.map((function(e){return(0,v.topicByIdStream)(e).observable.pipe((0,h.map)((function(e){return(0,g.isNilOrError)(e)?e:e.data})))}))):(0,f.of)(null):(0,v.topicsStream)({queryParameters:u}).observable.pipe((0,h.map)((function(e){return e.data})))}))).subscribe((function(t){e.setState({topics:t})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.topicIds,r=e.code,a=e.exclude_code,n=e.sort,i=e.projectId;this.inputProps$.next({topicIds:t,code:r,exclude_code:a,sort:n,projectId:i})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.topics)}}]),r}(p.default.Component);t.default=b}}]);
//# sourceMappingURL=10.27f4ed5439de9be50248.chunk.js.map