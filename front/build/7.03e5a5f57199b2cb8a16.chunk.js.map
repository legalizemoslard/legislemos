{"version":3,"sources":["webpack:///./app/resources/GetInitiativesPermissions.tsx","webpack:///./app/components/AvatarBubbles/index.tsx","webpack:///./app/components/CityLogoSection/index.tsx","webpack:///./app/resources/GetRandomAvatars.tsx","webpack:///./app/containers/LandingPage/index.tsx","webpack:///./app/components/ProjectAndFolderCards/LoadingBox.tsx","webpack:///./app/components/CityLogoSection/messages.ts","webpack:///./app/components/AvatarBubbles/messages.ts","webpack:///./app/hooks/useInitiativesPermissions.ts","webpack:///./app/services/initiatives.ts","webpack:///./app/resources/GetAvatars.tsx","webpack:///./app/services/avatars.ts","webpack:///./app/containers/LandingPage/SignedOutHeader.tsx","webpack:///./app/containers/LandingPage/InitiativesCTABox.tsx"],"names":["children","action","EmptyContainer","styled","div","Container","props","width","height","AvatarImageBubble","img","size","index","overlap","UserCountBubble","bgColor","UserCountBubbleInner","digits","getFontSize","AvatarBubblesWithHoCs","avatarIds","context","className","userCountBgColor","colors","label","formatMessage","intl","avatars","userCount","isNilOrError","isNumber","bubbleSize","bubbleOverlap","imageSize","avatarsWithImage","filter","avatar","isError","attributes","avatarImagesCount","length","remainingUsers","remainingUsersDigits","toString","containerHeight","containerWidth","map","key","src","alt","ScreenReaderOnly","messages","numberOfUsers","undefined","inputProps","ids","limit","data","meta","total","LogoLink","a","TenantLogo","CityLogoSection","memo","locale","appConfiguration","currentTenantLogo","logo","medium","tenantSite","settings","core","organization_site","footerLocale","title","iframeTitle","name","id","href","target","injectIntl","GetRandomAvatars","state","this","inputProps$","BehaviorSubject","subscriptions","pipe","distinctUntilChanged","prev","next","isEqual","switchMap","randomAvatarsStream","queryParameters","context_type","type","context_id","observable","subscribe","setState","forEach","subscription","unsubscribe","React","Component","ProjectAndFolderCards","lazy","main","theme","menuHeight","footerHeight","media","smallerThanMaxTablet","StyledQuillEditedContent","QuillEditedContent","colorText","FooterBanner","colorMain","fontSizes","xxxl","StyledAvatarBubbles","AvatarBubbles","Content","StyledContentContainer","ContentContainer","background","ProjectSection","smallerThanMinTablet","SectionContainer","section","CustomSectionContentContainer","StyledInitiativesCTABox","InitiativesCTABox","LandingPage","event","preventDefault","trackEventByName","tracks","clickCreateAccountCTA","extra","location","openSignUpInModal","tenant","authUser","homepageInfoPage","postingPermission","showCustomSection","isEmptyMultiloc","body_multiloc","customSectionBodyMultiloc","postingProposalsEnabled","enabled","headerSloganMultiLoc","header_slogan","genericSlogan","FormattedMessage","tagName","subtitleCity","mode","Suspense","fallback","publicationStatusFilter","showTitle","layout","value","supportHtml","translatedSlogan","fontWeight","padding","buttonStyle","onClick","signUpIn","text","createAccount","PureComponent","Data","adopt","slug","LandingPageWithHoC","withTheme","dataProps","defaultCardStyle","Spinner","defineMessages","defaultMessage","useState","actionPermission","setActionPermission","useEffect","combineLatest","getInitiativeActionDescriptors","currentAppConfigurationStream","authUserStream","actionDescriptors","actionDescriptor","show","disabledReason","disabled_reason","initiativeSlug","streams","get","apiEndpoint","API_PATH","streamParams","cacheStream","initiativeId","initiativeByIdStream","object","add","initiative","response","update","fetchAllWith","Promise","all","first","toPromise","delete","authorId","GetAvatars","avatarByIdStream","avatarId","Header","desktop","HeaderImage","HeaderImageBackground","HeaderImageOverlay","signedOutHeaderOverlayColor","signedOutHeaderOverlayOpacity","HeaderContent","maxPageWidth","HeaderTitle","h1","hasHeader","signedOutHeaderTitleFontSize","xxxxl","signedOutHeaderTitleFontWeight","HeaderSubtitle","h2","xl","SignUpButton","Button","SignedOutHeader","localize","headerTitle","header_title","titleCity","headerSubtitle","headerImage","header_bg","large","SignedOutHeaderWithHoC","BoxContainer","BackgroundIcon","Icon","TextContainer","Title","xxl","Text","base","ButtonContainer","BrowseInitiativesButton","StartInitiativeButton","smallerThanSmallTablet","windowWidth","viewportWidths","smallTablet","signUp","useCallback","flow","clHistory","push","initiativesBoxTitle","initiativesBoxText","textColor","textDecorationHover","fullWidth","linkTo","browseInitiative","startInitiative"],"mappings":"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","file":"7.03e5a5f57199b2cb8a16.chunk.js","sourcesContent":["import { IInitiativeAction } from 'services/initiatives';\nimport { ActionPermission } from 'services/actionTakingRules';\nimport useInitiativesPermissions, {\n  IInitiativeDisabledReason,\n} from 'hooks/useInitiativesPermissions';\n\ninterface InputProps {}\n\ntype children = (\n  renderProps: GetInitiativesPermissionsChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n  action: IInitiativeAction;\n}\n\nexport type GetInitiativesPermissionsChildProps =\n  | ActionPermission<IInitiativeDisabledReason>\n  | undefined;\n\nexport default ({ children, action }: Props) => {\n  const initiativesPermissions = useInitiativesPermissions(action);\n  return (children as children)(initiativesPermissions);\n};\n","import React from 'react';\nimport { isNumber, isError } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// services\nimport { IAvatarData } from 'services/avatars';\n\n// resources\nimport GetRandomAvatars from 'resources/GetRandomAvatars';\nimport GetAvatars from 'resources/GetAvatars';\n\n// i18n\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\n// styling\nimport styled from 'styled-components';\nimport { colors } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\n\nconst getFontSize = (size: number, digits: number) => {\n  if (size >= 34) {\n    if (digits <= 2) {\n      return 14;\n    }\n\n    if (digits === 3) {\n      return 12;\n    }\n\n    if (digits >= 4) {\n      return 11;\n    }\n  } else {\n    if (digits <= 2) {\n      return 12;\n    }\n\n    if (digits === 3) {\n      return 11;\n    }\n\n    if (digits >= 4) {\n      return 10;\n    }\n  }\n\n  return 14;\n};\n\nconst EmptyContainer = styled.div``;\n\nconst Container = styled.div<{ width: number; height: number }>`\n  flex-shrink: 0;\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n  position: relative;\n`;\n\nconst AvatarImageBubble = styled.img<{\n  overlap: number;\n  index: number;\n  size: number;\n}>`\n  width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  border-radius: 50%;\n  border: solid 2px #fff;\n  text-indent: -9999px;\n  position: absolute;\n  z-index: ${(props) => props.index + 1};\n  left: ${(props) => props.index * (props.size - props.overlap)}px;\n  object-fit: cover;\n  object-position: center;\n`;\n\nconst UserCountBubble = styled.div<{\n  overlap: number;\n  index: number;\n  size: number;\n  bgColor: string;\n}>`\n  width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-bottom: 0;\n  border-radius: 50%;\n  border: solid 2px #fff;\n  background: ${(props: any) => props.bgColor};\n  position: absolute;\n  z-index: ${(props) => props.index + 1};\n  left: ${(props) => props.index * (props.size - props.overlap)}px;\n`;\n\nconst UserCountBubbleInner = styled.div<{ size: number; digits: number }>`\n  color: #fff;\n  font-size: ${({ size, digits }) => getFontSize(size, digits)}px;\n  font-weight: 500;\n  display: flex;\n`;\n\n/* InputProps\n * limit: the number of avatars you need, you'll get one extra bubble with the remaining count, defaults to 3\n * context: extra info if you use the component in a specific context, defaults to platform-wide\n * size: image size, each bubble will be 4px bigger because of margins, defaults to 30px\n * overlap: the number of pixel the bubbles overlap, defaults to 7\n */\ninterface InputProps {\n  limit?: number;\n  context?: {\n    type: 'project' | 'group';\n    id: string;\n  };\n  size?: number;\n  overlap?: number;\n  userCountBgColor?: string;\n  avatarIds?: string[];\n  className?: string;\n  userCount?: number;\n}\n\ninterface DataProps {\n  avatars: (IAvatarData | Error)[] | null;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst defaultLimit = 4;\n\nconst AvatarBubbles = ({\n  avatarIds,\n  context,\n  size = 34,\n  overlap,\n  className,\n  userCountBgColor = colors.label,\n  intl: { formatMessage },\n  avatars,\n  userCount,\n}: Props & InjectedIntlProps) => {\n  if (!isNilOrError(avatars) && isNumber(userCount) && userCount > 0) {\n    const bubbleSize = size + 4;\n    const bubbleOverlap = overlap || 10;\n    const imageSize = bubbleSize > 160 ? 'large' : 'medium';\n    const avatarsWithImage = avatars.filter(\n      (avatar) =>\n        !isError(avatar) &&\n        avatar.attributes.avatar &&\n        avatar.attributes.avatar[imageSize]\n    ) as IAvatarData[];\n    const avatarImagesCount = avatarsWithImage.length;\n    const remainingUsers = userCount - avatarImagesCount;\n    const remainingUsersDigits = remainingUsers.toString().length;\n    const bubblesCount = avatarImagesCount + (remainingUsers > 0 ? 1 : 0);\n    const containerHeight = bubbleSize + 2;\n    const containerWidth =\n      bubblesCount * (bubbleSize - bubbleOverlap) + bubbleOverlap + 2;\n\n    if (avatarIds || context || avatarImagesCount > 0) {\n      return (\n        <Container\n          className={className}\n          width={containerWidth}\n          height={containerHeight}\n        >\n          {avatarsWithImage.map((avatar, index) => (\n            <AvatarImageBubble\n              key={index}\n              index={index}\n              overlap={bubbleOverlap}\n              size={bubbleSize}\n              src={avatar.attributes.avatar[imageSize]}\n              alt=\"\"\n            />\n          ))}\n          {remainingUsers > 0 && (\n            <UserCountBubble\n              index={avatarsWithImage.length}\n              overlap={bubbleOverlap}\n              size={bubbleSize}\n              bgColor={userCountBgColor}\n            >\n              <UserCountBubbleInner\n                size={bubbleSize}\n                digits={remainingUsersDigits}\n                aria-hidden\n              >\n                +{remainingUsers}\n              </UserCountBubbleInner>\n              <ScreenReaderOnly>\n                {formatMessage(messages.numberOfUsers, {\n                  numberOfUsers: userCount,\n                })}\n              </ScreenReaderOnly>\n            </UserCountBubble>\n          )}\n        </Container>\n      );\n    }\n  } else if (avatars !== undefined) {\n    return <EmptyContainer className={className} />;\n  }\n\n  return null;\n};\n\nconst AvatarBubblesWithHoCs = injectIntl(AvatarBubbles);\n\nexport default (inputProps: InputProps) => {\n  if (inputProps.avatarIds) {\n    return (\n      <GetAvatars ids={inputProps.avatarIds}>\n        {(avatars) => (\n          <AvatarBubblesWithHoCs\n            {...inputProps}\n            avatars={!isNilOrError(avatars) ? avatars : null}\n          />\n        )}\n      </GetAvatars>\n    );\n  }\n\n  return (\n    <GetRandomAvatars\n      limit={inputProps.limit || defaultLimit}\n      context={inputProps.context}\n    >\n      {(avatars) => (\n        <AvatarBubblesWithHoCs\n          {...inputProps}\n          avatars={!isNilOrError(avatars) ? avatars.data : null}\n          userCount={!isNilOrError(avatars) ? avatars.meta.total : undefined}\n        />\n      )}\n    </GetRandomAvatars>\n  );\n};\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Fragment from 'components/Fragment';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { injectIntl } from 'utils/cl-intl';\nimport messages from './messages';\n\n// hooks\nimport useLocale from 'hooks/useLocale';\nimport useAppConfiguration from 'hooks/useAppConfiguration';\n\n// style\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding-right: 20px;\n  padding-left: 20px;\n  padding-top: 110px;\n  padding-bottom: 130px;\n  background: #fff;\n  width: 100%;\n`;\n\nconst LogoLink = styled.a`\n  cursor: pointer;\n`;\n\nconst TenantLogo = styled.img`\n  height: 50px;\n  margin-bottom: 20px;\n`;\n\ninterface Props {}\n\nconst CityLogoSection = memo(\n  ({ intl: { formatMessage } }: Props & InjectedIntlProps) => {\n    const locale = useLocale();\n    const appConfiguration = useAppConfiguration();\n\n    if (!isNilOrError(appConfiguration)) {\n      const currentTenantLogo =\n        appConfiguration.data.attributes.logo?.medium || null;\n      const tenantSite =\n        appConfiguration.data.attributes.settings.core.organization_site;\n      const footerLocale = `footer-city-logo-${locale}`;\n\n      if (currentTenantLogo) {\n        return (\n          <Fragment\n            title={formatMessage(messages.iframeTitle)}\n            name={footerLocale}\n          >\n            <Container id=\"hook-footer-logo\">\n              {tenantSite ? (\n                <LogoLink href={tenantSite} target=\"_blank\">\n                  <TenantLogo src={currentTenantLogo} alt=\"Organization logo\" />\n                </LogoLink>\n              ) : (\n                <TenantLogo src={currentTenantLogo} alt=\"Organization logo\" />\n              )}\n            </Container>\n          </Fragment>\n        );\n      }\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(CityLogoSection);\n","import React from 'react';\nimport { isEqual } from 'lodash-es';\nimport { Subscription, BehaviorSubject } from 'rxjs';\nimport { IAvatars, randomAvatarsStream } from 'services/avatars';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\n\ninterface InputProps {\n  limit?: number;\n  context?: {\n    type: 'project' | 'group' | 'idea' | 'initiative';\n    id: string;\n  };\n}\n\ntype children = (renderProps: GetRandomAvatarsChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  avatars: IAvatars | undefined | null;\n}\n\nexport type GetRandomAvatarsChildProps = IAvatars | undefined | null;\n\nexport default class GetRandomAvatars extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      avatars: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { limit, context } = this.props;\n    this.inputProps$ = new BehaviorSubject({ limit, context });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => isEqual(prev, next)),\n          switchMap(({ limit, context }) => {\n            if (context) {\n              return randomAvatarsStream({\n                queryParameters: {\n                  limit,\n                  context_type: context.type,\n                  context_id: context.id,\n                },\n              }).observable;\n            }\n\n            return randomAvatarsStream({\n              queryParameters: {\n                limit,\n              },\n            }).observable;\n          })\n        )\n        .subscribe((avatars) =>\n          this.setState({ avatars: !isNilOrError(avatars) ? avatars : null })\n        ),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { limit, context } = this.props;\n    this.inputProps$.next({ limit, context });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { avatars } = this.state;\n    return (children as children)(avatars);\n  }\n}\n","import React, { PureComponent, Suspense } from 'react';\nimport { adopt } from 'react-adopt';\n\n// components\nimport ContentContainer from 'components/ContentContainer';\nimport CityLogoSection from 'components/CityLogoSection';\nimport Button from 'components/UI/Button';\nimport AvatarBubbles from 'components/AvatarBubbles';\nimport SignedOutHeader from './SignedOutHeader';\nimport SignedInHeader from './SignedInHeader';\nimport InitiativesCTABox from './InitiativesCTABox';\nimport T from 'components/T';\nimport Fragment from 'components/Fragment';\nimport QuillEditedContent from 'components/UI/QuillEditedContent';\nimport LoadingBox from 'components/ProjectAndFolderCards/LoadingBox';\nconst ProjectAndFolderCards = React.lazy(() =>\n  import('components/ProjectAndFolderCards')\n);\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetPage, { GetPageChildProps } from 'resources/GetPage';\n\n// utils\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from './tracks';\nimport { isNilOrError, isEmptyMultiloc } from 'utils/helperUtils';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// style\nimport styled, { withTheme } from 'styled-components';\nimport { media, fontSizes, colors } from 'utils/styleUtils';\nimport GetInitiativesPermissions, {\n  GetInitiativesPermissionsChildProps,\n} from 'resources/GetInitiativesPermissions';\nimport FeatureFlag from 'components/FeatureFlag';\nimport Outlet from 'components/Outlet';\n\nconst Container = styled.main`\n  height: 100%;\n  min-height: calc(\n    100vh - ${(props) => props.theme.menuHeight + props.theme.footerHeight}px\n  );\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  background: #fff;\n\n  ${media.smallerThanMaxTablet`\n    min-height: auto;\n  `}\n`;\n\nconst StyledQuillEditedContent = styled(QuillEditedContent)`\n  h1,\n  h2 {\n    color: ${(props) => props.theme.colorText};\n  }\n\n  p,\n  li {\n    color: ${colors.label};\n  }\n`;\n\nconst FooterBanner = styled.div`\n  background: ${({ theme }) => theme.colorMain};\n  width: 100%;\n  min-height: 300px;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding-left: 30px;\n  padding-right: 30px;\n  padding-top: 50px;\n  padding-bottom: 60px;\n\n  h2 {\n    color: #fff;\n    font-size: ${fontSizes.xxxl}px;\n    line-height: normal;\n    font-weight: 600;\n    margin-bottom: 30px;\n    max-width: 500px;\n    text-align: center;\n\n    ${media.smallerThanMaxTablet`\n      font-size: ${fontSizes.xxxl}px;\n    `}\n  }\n`;\n\nconst StyledAvatarBubbles = styled(AvatarBubbles)`\n  margin-bottom: 45px;\n`;\n\nconst Content = styled.div`\n  width: 100%;\n  z-index: 3;\n`;\n\nconst StyledContentContainer = styled(ContentContainer)`\n  background: ${colors.background};\n  border-bottom: solid 1px #eaeaea;\n`;\n\nconst ProjectSection = styled.div`\n  width: 100%;\n  padding-top: 40px;\n  padding-bottom: 90px;\n\n  ${media.smallerThanMinTablet`\n    padding-bottom: 60px;\n  `}\n`;\n\nconst SectionContainer = styled.section`\n  width: 100%;\n  margin-top: 10px;\n`;\n\nconst CustomSectionContentContainer = styled(ContentContainer)`\n  width: 100%;\n  max-width: 750px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: 80px;\n  padding-bottom: 80px;\n  background: #fff;\n\n  ${media.smallerThanMinTablet`\n    padding-top: 40px;\n    padding-bottom: 40px;\n  `}\n`;\n\nconst StyledInitiativesCTABox = styled(InitiativesCTABox)`\n  padding-top: 10px;\n  padding-bottom: 40px;\n`;\n\nexport interface InputProps {\n  ideaId: string;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n  authUser: GetAuthUserChildProps;\n  homepageInfoPage: GetPageChildProps;\n  postingPermission: GetInitiativesPermissionsChildProps;\n}\n\ninterface Props extends InputProps, DataProps {\n  theme: any;\n}\n\ninterface State {}\n\nclass LandingPage extends PureComponent<Props, State> {\n  signUpIn = (event: React.FormEvent) => {\n    event.preventDefault();\n    trackEventByName(tracks.clickCreateAccountCTA, {\n      extra: { location: 'footer' },\n    });\n    openSignUpInModal();\n  };\n\n  render() {\n    const {\n      locale,\n      tenant,\n      authUser,\n      homepageInfoPage,\n      postingPermission,\n    } = this.props;\n\n    if (\n      !isNilOrError(locale) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(homepageInfoPage)\n    ) {\n      // custom section\n      const showCustomSection = !isEmptyMultiloc(\n        homepageInfoPage.attributes.body_multiloc\n      );\n      const customSectionBodyMultiloc =\n        homepageInfoPage.attributes.body_multiloc;\n      const postingProposalsEnabled = !!postingPermission?.enabled;\n\n      // tranlate header slogan into a h2 wih a fallback\n      const headerSloganMultiLoc =\n        tenant.attributes.settings.core.header_slogan;\n      const genericSlogan = (\n        <FormattedMessage tagName=\"h2\" {...messages.subtitleCity} />\n      );\n\n      return (\n        <>\n          <Container id=\"e2e-landing-page\">\n            {!isNilOrError(authUser) ? (\n              <SignedInHeader />\n            ) : (\n              <Fragment name=\"signed-out-header\">\n                <SignedOutHeader />\n              </Fragment>\n            )}\n\n            <Content>\n              <StyledContentContainer mode=\"page\">\n                <ProjectSection id=\"e2e-landing-page-project-section\">\n                  <SectionContainer>\n                    <Suspense fallback={<LoadingBox />}>\n                      <ProjectAndFolderCards\n                        publicationStatusFilter={['published', 'archived']}\n                        showTitle={true}\n                        layout=\"dynamic\"\n                      />\n                    </Suspense>\n                  </SectionContainer>\n                </ProjectSection>\n\n                <Outlet id=\"app.containers.LandingPage.EventsWidget\" />\n\n                <FeatureFlag name=\"initiatives\">\n                  {postingProposalsEnabled && <StyledInitiativesCTABox />}\n                </FeatureFlag>\n              </StyledContentContainer>\n\n              {showCustomSection && (\n                <CustomSectionContentContainer>\n                  <StyledQuillEditedContent>\n                    <Fragment\n                      name={\n                        !isNilOrError(homepageInfoPage)\n                          ? `pages/${\n                              homepageInfoPage && homepageInfoPage.id\n                            }/content`\n                          : ''\n                      }\n                    >\n                      <T value={customSectionBodyMultiloc} supportHtml={true} />\n                    </Fragment>\n                  </StyledQuillEditedContent>\n                </CustomSectionContentContainer>\n              )}\n\n              {!authUser && (\n                <FooterBanner>\n                  {headerSloganMultiLoc ? (\n                    <T value={headerSloganMultiLoc}>\n                      {(translatedSlogan) =>\n                        translatedSlogan ? (\n                          <h2>{translatedSlogan}</h2>\n                        ) : (\n                          genericSlogan\n                        )\n                      }\n                    </T>\n                  ) : (\n                    genericSlogan\n                  )}\n                  <StyledAvatarBubbles />\n                  <Button\n                    fontWeight=\"500\"\n                    padding=\"13px 22px\"\n                    buttonStyle=\"primary-inverse\"\n                    onClick={this.signUpIn}\n                    text={<FormattedMessage {...messages.createAccount} />}\n                  />\n                </FooterBanner>\n              )}\n              <CityLogoSection />\n            </Content>\n          </Container>\n        </>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n  homepageInfoPage: <GetPage slug=\"homepage-info\" />,\n  postingPermission: <GetInitiativesPermissions action=\"posting_initiative\" />,\n});\n\nconst LandingPageWithHoC = withTheme(LandingPage);\n\n// TODO: add spinner fallback for lazy-loaded cards?\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <LandingPageWithHoC {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React, { memo } from 'react';\nimport { Spinner } from 'cl2-component-library';\nimport styled from 'styled-components';\nimport { defaultCardStyle } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  width: 100%;\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  ${defaultCardStyle};\n`;\n\ninterface Props {\n  className?: string;\n}\n\nconst LoadingBox = memo<Props>(({ className }) => (\n  <Container className={className || ''}>\n    <Spinner />\n  </Container>\n));\n\nexport default LoadingBox;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  iframeTitle: {\n    id: 'app.components.CityLogoSection.iframeTitle',\n    defaultMessage: 'More information about {orgName}',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  numberOfUsers: {\n    id: 'app.components.AvatarBubbles.numberOfUsers',\n    defaultMessage: '{numberOfUsers} users',\n  },\n});\n","import { useState, useEffect } from 'react';\nimport {\n  getInitiativeActionDescriptors,\n  IInitiativeAction,\n} from 'services/initiatives';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { ActionPermission } from 'services/actionTakingRules';\nimport { currentAppConfigurationStream } from 'services/appConfiguration';\nimport { authUserStream } from 'services/auth';\nimport { combineLatest } from 'rxjs';\n\nexport type IInitiativeDisabledReason = 'notPermitted';\n\nexport type IPreliminaryAction =\n  | 'sign_in_up'\n  | 'verify'\n  | 'sign_in_up_and_verify';\n\nexport default function useInitiativesPermissions(action: IInitiativeAction) {\n  const [actionPermission, setActionPermission] = useState<\n    ActionPermission<IInitiativeDisabledReason> | null | undefined\n  >(undefined);\n\n  useEffect(() => {\n    const subscription = combineLatest(\n      getInitiativeActionDescriptors().observable,\n      currentAppConfigurationStream().observable,\n      authUserStream().observable\n    ).subscribe(([actionDescriptors, tenant, authUser]) => {\n      if (!isNilOrError(tenant) && !isNilOrError(actionDescriptors)) {\n        const actionDescriptor = actionDescriptors[action];\n\n        if (actionDescriptor.enabled) {\n          setActionPermission({\n            show: true,\n            enabled: true,\n            disabledReason: null,\n            action: null,\n          });\n        } else {\n          switch (actionDescriptor.disabled_reason) {\n            case 'not_verified':\n              if (isNilOrError(authUser)) {\n                setActionPermission({\n                  show: true,\n                  enabled: 'maybe',\n                  disabledReason: null,\n                  action: 'sign_in_up_and_verify',\n                });\n              } else {\n                setActionPermission({\n                  show: true,\n                  enabled: 'maybe',\n                  disabledReason: null,\n                  action: 'verify',\n                });\n              }\n              break;\n            case 'not_signed_in':\n              setActionPermission({\n                show: true,\n                enabled: 'maybe',\n                disabledReason: null,\n                action: 'sign_in_up',\n              });\n              break;\n            default:\n              setActionPermission({\n                show: true,\n                enabled: false,\n                disabledReason: 'notPermitted',\n                action: null,\n              });\n          }\n        }\n      }\n    });\n\n    return () => subscription.unsubscribe();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return actionPermission as ActionPermission<IInitiativeDisabledReason>;\n}\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { IRelationship, Multiloc, ImageSizes, ILinks } from 'typings';\nimport { first } from 'rxjs/operators';\nimport { get } from 'lodash-es';\n\nexport type InitiativePublicationStatus =\n  | 'draft'\n  | 'published'\n  | 'archived'\n  | 'spam';\n\nexport type IInitiativeAction =\n  | 'posting_initiative'\n  | 'commenting_initiative'\n  | 'voting_initiative'\n  | 'comment_voting_initiative';\n\nexport interface IInitiativeData {\n  id: string;\n  type: 'initiatives';\n  attributes: {\n    title_multiloc: Multiloc;\n    body_multiloc: Multiloc;\n    author_name: string;\n    slug: string;\n    publication_status: InitiativePublicationStatus;\n    upvotes_count: number;\n    comments_count: number;\n    location_point_geojson: GeoJSON.Point;\n    location_description: string;\n    budget: number | null;\n    created_at: string;\n    updated_at: string;\n    published_at: string;\n    header_bg: ImageSizes;\n    expires_at: string;\n  };\n  relationships: {\n    topics: {\n      data: IRelationship[];\n    };\n    initiative_images: {\n      data: IRelationship[];\n    };\n    author: {\n      data: IRelationship | null;\n    };\n    assignee: {\n      data: IRelationship | null;\n    };\n    initiative_status?: {\n      data: IRelationship | null;\n    };\n    user_vote?: {\n      data: IRelationship | null;\n    };\n  };\n}\n\nexport interface IInitiative {\n  data: IInitiativeData;\n}\n\nexport interface IInitiatives {\n  data: IInitiativeData[];\n  links: ILinks;\n}\n\nexport interface IInitiativeAdd {\n  author_id?: string | null;\n  assignee_id?: string | null;\n  initiative_status_id?: string | null;\n  publication_status?: InitiativePublicationStatus;\n  title_multiloc?: Multiloc;\n  body_multiloc?: Multiloc;\n  topic_ids?: string[] | null;\n  area_ids?: string[] | null;\n  phase_ids?: string[] | null;\n  location_point_geojson?: GeoJSON.Point | null;\n  location_description?: string | null;\n}\nexport interface IInitiativesCount {\n  count: number;\n}\n\nexport interface IInitiativesFilterCounts {\n  initiative_status_id: {\n    [key: string]: number;\n  };\n  area_id: {\n    [key: string]: number;\n  };\n  topic_id: {\n    [key: string]: number;\n  };\n  total: number;\n}\n\nexport interface IGeotaggedInitiativeData {\n  id: string;\n  type: string;\n  attributes: {\n    title_multiloc: Multiloc;\n    location_point_geojson: GeoJSON.Point;\n    location_description: string;\n  };\n}\n\nexport interface IInitiativeLinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface InitiativeActivity {\n  id: string;\n  type: 'activity';\n  attributes: {\n    action: string;\n    acted_at: string;\n    change: string[] | { [key: string]: string }[] | null;\n  };\n  relationships: {\n    user: { data: IRelationship };\n  };\n}\n\nexport type InitiativeDisabledReason =\n  | 'not_permitted'\n  | 'not_verified'\n  | 'not_signed_in';\n\nexport function initiativeByIdStream(initiativeId: string) {\n  return streams.get<IInitiative>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}`,\n  });\n}\n\nexport function initiativeBySlugStream(initiativeSlug: string) {\n  return streams.get<IInitiative>({\n    apiEndpoint: `${API_PATH}/initiatives/by_slug/${initiativeSlug}`,\n  });\n}\n\nexport function initiativesStream(streamParams: IStreamParams | null = null) {\n  return streams.get<IInitiatives>({\n    apiEndpoint: `${API_PATH}/initiatives`,\n    ...streamParams,\n  });\n}\n\nexport function initiativesFilterCountsStream(\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IInitiativesFilterCounts>({\n    apiEndpoint: `${API_PATH}/initiatives/filter_counts`,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n\nexport function initiativesMarkersStream(\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<{\n    data: IGeotaggedInitiativeData[];\n    links: IInitiativeLinks;\n  }>({\n    apiEndpoint: `${API_PATH}/initiatives/as_markers`,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n\nexport async function addInitiative(object: IInitiativeAdd) {\n  const response = await streams.add<IInitiative>(`${API_PATH}/initiatives`, {\n    initiative: object,\n  });\n  return response;\n}\n\nexport async function updateInitiative(\n  initiativeId: string,\n  object: Partial<IInitiativeAdd>\n) {\n  const response = await streams.update<IInitiative>(\n    `${API_PATH}/initiatives/${initiativeId}`,\n    initiativeId,\n    { initiative: object }\n  );\n  streams.fetchAllWith({\n    apiEndpoint: [\n      `${API_PATH}/stats/initiatives_count`,\n      `${API_PATH}/initiatives`,\n      `${API_PATH}/initiatives/${initiativeId}/activities`,\n    ],\n  });\n  return response;\n}\n\nexport async function deleteInitiative(initiativeId: string) {\n  const [initiative, response] = await Promise.all([\n    initiativeByIdStream(initiativeId).observable.pipe(first()).toPromise(),\n    streams.delete(`${API_PATH}/initiatives/${initiativeId}`, initiativeId),\n  ]);\n\n  const authorId = get(initiative, 'relationships.author.data.id', false);\n\n  streams.fetchAllWith({\n    apiEndpoint: authorId\n      ? [`${API_PATH}/users/${authorId}/initiatives_count`]\n      : [],\n  });\n\n  return response;\n}\n\nexport interface IInitiativeAllowedTransitions {\n  [key: string]: {\n    feedback_needed: boolean;\n  };\n}\n\nexport function initiativeAllowedTransitionsStream(initiativeId: string) {\n  return streams.get<IInitiativeAllowedTransitions>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}/allowed_transitions`,\n  });\n}\n\nexport interface IInitiativesFilterCounts {\n  initiative_status_id: {\n    [key: string]: number;\n  };\n  area_id: {\n    [key: string]: number;\n  };\n  topic_id: {\n    [key: string]: number;\n  };\n  total: number;\n}\n\nexport function initiativeActivities(initiativeId: string) {\n  return streams.get<{ data: InitiativeActivity[] }>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}/activities`,\n  });\n}\n\nexport type IInitiativeActionDescriptors = {\n  [key in IInitiativeAction]: {\n    enabled: boolean;\n    disabled_reason: InitiativeDisabledReason | null;\n  };\n};\n\nexport function getInitiativeActionDescriptors() {\n  return streams.get<IInitiativeActionDescriptors>({\n    apiEndpoint: `${API_PATH}/action_descriptors/initiatives`,\n  });\n}\n","import React from 'react';\nimport { isEqual } from 'lodash-es';\nimport { Subscription, BehaviorSubject, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, switchMap, map, filter } from 'rxjs/operators';\nimport { IAvatarData, avatarByIdStream } from 'services/avatars';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  ids?: string[];\n}\n\ntype children = (renderProps: GetAvatarsChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  avatars: (IAvatarData | Error)[] | undefined | null | Error;\n}\n\nexport type GetAvatarsChildProps =\n  | (IAvatarData | Error)[]\n  | undefined\n  | null\n  | Error;\n\nexport default class GetAvatars extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      avatars: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { ids } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ ids });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => isEqual(prev, next)),\n          filter(({ ids }) => !!(ids && ids.length > 0)),\n          switchMap(({ ids }: { ids: string[] }) => {\n            return combineLatest(\n              ids.map((id) =>\n                avatarByIdStream(id).observable.pipe(\n                  map((avatar) =>\n                    !isNilOrError(avatar) ? avatar.data : avatar\n                  )\n                )\n              )\n            );\n          })\n        )\n        .subscribe((avatars) => {\n          this.setState({ avatars });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    this.inputProps$.next({ ids: this.props.ids });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { avatars } = this.state;\n    return (children as children)(avatars);\n  }\n}\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\n\nconst apiEndpoint = `${API_PATH}/avatars`;\n\nexport interface IAvatarData {\n  id: string;\n  type: string;\n  attributes: {\n    avatar: {\n      small: string;\n      medium: string;\n      large: string;\n    };\n  };\n}\n\nexport interface IAvatar {\n  data: IAvatarData;\n}\n\nexport interface IAvatars {\n  data: IAvatarData[];\n  meta: {\n    total: number;\n  };\n}\n\n/*\n * cf http://developers.citizenlab.co/api-docs/frontweb_api/epic/CL2-2838-landing-page-i1/avatars/list_random_user_avatars.html\n * limit: number of avaters returned, defaults to 5, max 10.\n * context_type: when null, context is the whole platform.\n */\ninterface IAvatarsQueryParams {\n  limit?: number | null;\n  context_type?: 'group' | 'project' | 'idea' | 'initiative' | null;\n  context_id?: string | null;\n}\n\ninterface IStreamAvatarsParams extends IStreamParams {\n  queryParameters?: IAvatarsQueryParams;\n}\n\nexport function avatarByIdStream(avatarId: string) {\n  return streams.get<IAvatar>({\n    apiEndpoint: `${API_PATH}/avatars/${avatarId}`,\n    cacheStream: false,\n  });\n}\n\nexport function randomAvatarsStream(\n  streamParams: IStreamAvatarsParams | null = null\n) {\n  return streams.get<IAvatars>({\n    apiEndpoint,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n","import React, { PureComponent } from 'react';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Button from 'components/UI/Button';\nimport AvatarBubbles from 'components/AvatarBubbles';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from './tracks';\n\n// utils\nimport { openSignUpInModal } from 'components/SignUpIn/events';\n\n// i18n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport messages from './messages';\n\n// style\nimport styled from 'styled-components';\nimport { media, fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  min-height: 450px;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  ${media.desktop`\n    min-height: 450px;\n  `}\n\n  ${media.smallerThanMaxTablet`\n    min-height: 350px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    min-height: 300px;\n  `}\n`;\n\nconst HeaderImage = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst HeaderImageBackground = styled.div<{ src: string | null }>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n  background-image: url(${({ src }) => src});\n`;\n\nconst HeaderImageOverlay = styled.div`\n  background: ${({ theme }) =>\n    theme.signedOutHeaderOverlayColor || theme.colorMain};\n  opacity: ${({ theme }) => theme.signedOutHeaderOverlayOpacity};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst HeaderContent = styled.div`\n  width: 100%;\n  height: 100%;\n  max-width: ${(props) => props.theme.maxPageWidth + 60}px;\n  padding-top: 50px;\n  padding-bottom: 50px;\n  padding-left: 30px;\n  padding-right: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 1;\n`;\n\nconst HeaderTitle = styled.h1<{ hasHeader: boolean }>`\n  width: 100%;\n  color: ${({ hasHeader, theme }) => (hasHeader ? '#fff' : theme.colorMain)};\n  font-size: ${({ theme }) =>\n    theme.signedOutHeaderTitleFontSize || fontSizes.xxxxl}px;\n  font-weight: ${({ theme }) => theme.signedOutHeaderTitleFontWeight || 600};\n  line-height: normal;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n\n  ${media.smallerThanMaxTablet`\n    font-size: ${fontSizes.xxxl}px;\n  `}\n`;\n\nconst HeaderSubtitle = styled.h2<{ hasHeader: boolean }>`\n  width: 100%;\n  color: ${({ hasHeader, theme }) => (hasHeader ? '#fff' : theme.colorMain)};\n  font-size: ${fontSizes.xl}px;\n  line-height: 28px;\n  font-weight: 400;\n  text-align: center;\n  text-decoration: none;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n  padding: 0;\n  margin: 0;\n  margin-top: 30px;\n\n  ${media.smallerThanMinTablet`\n    margin-top: 15px;\n  `}\n`;\n\nconst StyledAvatarBubbles = styled(AvatarBubbles)`\n  margin-top: 18px;\n  min-height: 40px;\n`;\n\nconst SignUpButton = styled(Button)`\n  margin-top: 38px;\n\n  ${media.smallerThanMinTablet`\n    margin-top: 30px;\n  `}\n`;\n\nexport interface InputProps {\n  className?: string;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass SignedOutHeader extends PureComponent<\n  Props & InjectedLocalized & InjectedIntlProps,\n  State\n> {\n  signUpIn = (event: React.FormEvent) => {\n    event.preventDefault();\n    trackEventByName(tracks.clickCreateAccountCTA, {\n      extra: { location: 'signed-out header' },\n    });\n    openSignUpInModal();\n  };\n\n  render() {\n    const {\n      locale,\n      tenant,\n      className,\n      localize,\n      intl: { formatMessage },\n    } = this.props;\n\n    if (!isNilOrError(locale) && !isNilOrError(tenant)) {\n      const headerTitle =\n        localize(tenant?.attributes?.settings?.core?.header_title) ||\n        formatMessage(messages.titleCity);\n      const headerSubtitle =\n        localize(tenant?.attributes?.settings?.core?.header_slogan) ||\n        formatMessage(messages.subtitleCity);\n      const headerImage = tenant?.attributes?.header_bg?.large;\n\n      return (\n        <Container className={`e2e-signed-out-header ${className}`}>\n          <Header id=\"hook-header\">\n            <HeaderImage id=\"hook-header-image\">\n              <HeaderImageBackground src={headerImage || null} />\n              <HeaderImageOverlay />\n            </HeaderImage>\n\n            <HeaderContent\n              id=\"hook-header-content\"\n              className=\"e2e-signed-out-header-title\"\n            >\n              <HeaderTitle hasHeader={!!headerImage}>{headerTitle}</HeaderTitle>\n\n              <HeaderSubtitle\n                hasHeader={!!headerImage}\n                className=\"e2e-signed-out-header-subtitle\"\n              >\n                {headerSubtitle}\n              </HeaderSubtitle>\n\n              <StyledAvatarBubbles />\n\n              <SignUpButton\n                fontWeight=\"500\"\n                padding=\"13px 22px\"\n                buttonStyle=\"primary-inverse\"\n                onClick={this.signUpIn}\n                text={<FormattedMessage {...messages.createAccount} />}\n                className=\"e2e-signed-out-header-cta-button\"\n              />\n            </HeaderContent>\n          </Header>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n});\n\nconst SignedOutHeaderWithHoC = injectIntl(injectLocalize(SignedOutHeader));\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <SignedOutHeaderWithHoC {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React, { memo, useCallback } from 'react';\n\n// hooks\nimport useWindowSize from 'hooks/useWindowSize';\nimport useAuthUser from 'hooks/useAuthUser';\n\n// styling\nimport styled, { withTheme } from 'styled-components';\nimport {\n  colors,\n  fontSizes,\n  media,\n  viewportWidths,\n  defaultCardStyle,\n} from 'utils/styleUtils';\n\n// components\nimport Button from 'components/UI/Button';\nimport { Icon } from 'cl2-component-library';\n\n// utils\nimport clHistory from 'utils/cl-router/history';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\n\n// intl\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\nconst Container = styled.div``;\n\nconst BoxContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 60px 40px;\n  position: relative;\n  overflow: hidden;\n  margin-bottom: 70px;\n  ${defaultCardStyle};\n\n  ${media.smallerThanMaxTablet`\n    padding: 60px 50px 50px;\n    margin-bottom: 20px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    flex-direction: column;\n    align-items: flex-start;\n    padding: 60px 30px 40px;\n  `}\n`;\n\nconst BackgroundIcon = styled(Icon)`\n  fill: rgba(4, 77, 108, 0.03);\n  height: 500px;\n  width: auto;\n  position: absolute;\n  top: -200px;\n  right: -150px;\n`;\n\nconst TextContainer = styled.div`\n  flex: 1 1 auto;\n`;\n\nconst Title = styled.h2`\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.xxl}px;\n  line-height: 33px;\n  font-weight: 600;\n  margin-bottom: 10px;\n  max-width: 400px;\n\n  ${media.smallerThanMinTablet`\n    max-width: none;\n    text-align: center;\n  `}\n`;\n\nconst Text = styled.div`\n  max-width: 400px;\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 300;\n\n  ${media.smallerThanMinTablet`\n    max-width: none;\n    text-align: center;\n  `}\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n\n  ${media.smallerThanMaxTablet`\n    flex-direction: column;\n    justify-content: center;\n    align-items: stretch;\n    margin-left: 20px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    margin-left: 0;\n    width: 100%;\n    margin-top: 20px;\n  `}\n`;\n\nconst BrowseInitiativesButton = styled(Button)``;\n\nconst StartInitiativeButton = styled(Button)`\n  margin-left: 20px;\n\n  ${media.smallerThanMaxTablet`\n    margin-top: 15px;\n    margin-left: 0;\n  `}\n\n  ${media.smallerThanMinTablet`\n    margin-top: 20px;\n  `}\n`;\n\ninterface InputProps {\n  className?: string;\n}\n\ninterface Props extends InputProps {\n  theme: any;\n}\n\nconst InitiativesCTABox = memo<Props>(({ theme, className }) => {\n  const authUser = useAuthUser();\n  const { windowWidth } = useWindowSize();\n\n  const smallerThanSmallTablet = windowWidth <= viewportWidths.smallTablet;\n\n  const signUp = useCallback(() => {\n    openSignUpInModal({\n      flow: 'signup',\n      action: () => clHistory.push('/initiatives/new'),\n    });\n  }, []);\n\n  return (\n    <Container className={className}>\n      <BoxContainer>\n        <BackgroundIcon name=\"initiatives\" />\n        <TextContainer>\n          <Title>\n            <FormattedMessage {...messages.initiativesBoxTitle} />\n          </Title>\n          <Text>\n            <FormattedMessage {...messages.initiativesBoxText} />\n          </Text>\n        </TextContainer>\n        <ButtonContainer>\n          <BrowseInitiativesButton\n            fontWeight=\"500\"\n            padding=\"13px 22px\"\n            buttonStyle=\"text\"\n            textColor={theme.colorMain}\n            textDecorationHover=\"underline\"\n            fullWidth={smallerThanSmallTablet}\n            linkTo=\"/initiatives\"\n            text={<FormattedMessage {...messages.browseInitiative} />}\n            className=\"e2e-initiatives-landing-CTA-browse\"\n          />\n          <StartInitiativeButton\n            fontWeight=\"500\"\n            padding=\"13px 22px\"\n            linkTo={!isNilOrError(authUser) ? '/initiatives/new' : undefined}\n            onClick={!authUser ? signUp : undefined}\n            fullWidth={smallerThanSmallTablet}\n            text={<FormattedMessage {...messages.startInitiative} />}\n            className=\"e2e-initiatives-landing-CTA-new\"\n          />\n        </ButtonContainer>\n      </BoxContainer>\n    </Container>\n  );\n});\n\nexport default withTheme(InitiativesCTABox);\n"],"sourceRoot":""}