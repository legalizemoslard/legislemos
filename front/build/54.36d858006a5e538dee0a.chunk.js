(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{M1Et:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({titleVolunteeringTab:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.titleVolunteeringTab",defaultMessage:"Volunteering"},subtitleVolunteeringTab:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.subtitleVolunteeringTab",defaultMessage:"Here, you can set up the causes users can volunteer for and download the volunteers."},exportVolunteers:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.exportVolunteers",defaultMessage:"Export volunteers"},addCauseButton:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.addCauseButton",defaultMessage:"Add cause"},editButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editButtonLabel",defaultMessage:"Edit"},deleteButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.deleteButtonLabel",defaultMessage:"Delete"},xVolunteers:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.xVolunteers",defaultMessage:"{x, plural, =0 {no volunteers} one {# volunteer} other {# volunteers}}"},causeDeletionConfirmation:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDeletionConfirmation",defaultMessage:"Are you sure?"},newCauseTitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseTitle",defaultMessage:"New cause"},newCauseSubtitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseSubtitle",defaultMessage:"A cause is an action or activity that citizens can volunteer to."},editCauseTitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseTitle",defaultMessage:"Edit cause"},editCauseSubtitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseSubtitle",defaultMessage:"A cause is an action or activity that citizens can volunteer to."},causeTitleLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeTitleLabel",defaultMessage:"Title"},causeDescriptionLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionLabel",defaultMessage:"Description"},causeDescriptionTooltip:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionTooltip",defaultMessage:"Use this explain what is required from volunteers and what they can expect."},causeImageLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeImageLabel",defaultMessage:"Image"},saveCause:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.saveCause",defaultMessage:"Save"},causeErrorMessage:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeErrorMessage",defaultMessage:"Couldn't save because the form contains errors."}});t.default=n},Rpcw:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.causeByIdStream=function(e){return o.default.get({apiEndpoint:"".concat(d,"/").concat(e)})},t.causesStream=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.default.get(s({apiEndpoint:"".concat(l.API_PATH,"/").concat(e,"s/").concat(t,"/causes")},a))},t.addCause=function(e){return p.apply(this,arguments)},t.updateCause=function(e,t){return f.apply(this,arguments)},t.deleteCause=function(e){return o.default.delete("".concat(d,"/").concat(e),e)},t.reorderCause=function(e,t){return o.default.update("".concat(d,"/").concat(e,"/reorder"),e,{cause:{ordering:t}})};var r=n(a("o0o1")),i=n(a("yXPU")),u=n(a("lSNA"));a("ma9I");var l=a("p0gT"),o=n(a("1Kqg"));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d="".concat(l.API_PATH,"/causes");function p(){return(p=(0,i.default)(r.default.mark((function e(t){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.add(d,{cause:t});case 2:return a=e.sent,e.next=5,o.default.fetchAllWith({regexApiEndpoint:[/^.*causes$/]});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,i.default)(r.default.mark((function e(t,a){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.default.update("".concat(d,"/").concat(t),t,{cause:a}),e.next=3,o.default.fetchAllWith({dataId:[t]});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},o5Y6:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("lSNA")),u=n(a("J4zp")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),o=a("T89o"),c=a("dtw8"),s=n(a("JUYq")),d=a("Rpcw"),p=a("Loij"),f=n(a("w13Z")),g=n(a("WTKl")),m=n(a("2fl8")),b=n(a("Zc1O")),P=n(a("lbhY")),v=a("iP56"),j=a("Rw3A"),E=n(a("M1Et")),w=n(a("vOnD"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=w.default.div.withConfig({displayName:"NewCause__Container",componentId:"ul2err-0"})([""]),M=w.default.div.withConfig({displayName:"NewCause__ButtonContainer",componentId:"ul2err-1"})(["display:flex;"]),C=(0,l.memo)((function(e){var t=e.intl.formatMessage,a=(0,l.useState)(!1),n=(0,u.default)(a,2),r=n[0],i=n[1],c=(0,l.useState)(!1),w=(0,u.default)(c,2),y=w[0],h=w[1],C=(0,l.useState)({}),A=(0,u.default)(C,2),_=A[0],V=A[1],D=(0,l.useState)({title_multiloc:null,description_multiloc:null,image:null}),S=(0,u.default)(D,2),x=S[0],k=S[1],I=e.params.projectId,L=e.params.phaseId,F=L?"phase":"project",R=L||I,N=(0,l.useCallback)((function(e){i(!0),k((function(t){return O(O({},t),{},{title_multiloc:e})}))}),[]),B=(0,l.useCallback)((function(e,t){i(!0),k((function(t){return O(O({},t),{},{description_multiloc:e})}))}),[]),W=(0,l.useCallback)((function(e){i(!0),k((function(t){return O(O({},t),{},{image:e[0]})}))}),[]),q=(0,l.useCallback)((function(){i(!0),k((function(e){return O(O({},e),{},{image:null})}))}),[]),J=(0,l.useCallback)((function(){var e=x.title_multiloc,t=x.description_multiloc,a=x.image;if(!y&&e&&t){var n;switch(h(!0),V({}),F){case"project":n="Project";break;case"phase":n="Phase"}(0,d.addCause)({description_multiloc:t,title_multiloc:e,participation_context_type:n,participation_context_id:R,image:null==a?void 0:a.base64}).then((function(){h(!1),V({}),i(!1),s.default.push("/admin/projects/".concat(I,"/volunteering"))})).catch((function(e){var t;h(!1),V((null==e||null===(t=e.json)||void 0===t?void 0:t.errors)||{})}))}}),[x,y]);return l.default.createElement(T,null,l.default.createElement(p.SectionTitle,null,l.default.createElement(j.FormattedMessage,E.default.newCauseTitle)),l.default.createElement(p.SectionDescription,null,l.default.createElement(j.FormattedMessage,E.default.newCauseSubtitle)),l.default.createElement(p.Section,null,l.default.createElement(p.SectionField,null,l.default.createElement(g.default,{type:"text",id:"cause-title",valueMultiloc:x.title_multiloc,onChange:N,label:t(E.default.causeTitleLabel)}),l.default.createElement(b.default,{fieldName:"title_multiloc",apiErrors:null==_?void 0:_.title_multiloc})),l.default.createElement(p.SectionField,null,l.default.createElement(f.default,{id:"cause-description",valueMultiloc:x.description_multiloc,onChange:B,label:t(E.default.causeDescriptionLabel),labelTooltipText:t(E.default.causeDescriptionTooltip),withCTAButton:!0}),l.default.createElement(b.default,{fieldName:"description_multiloc",apiErrors:null==_?void 0:_.description_multiloc})),l.default.createElement(p.SectionField,null,l.default.createElement(v.Label,null,l.default.createElement(j.FormattedMessage,E.default.causeImageLabel)),l.default.createElement(P.default,{acceptedFileTypes:"image/jpg, image/jpeg, image/png, image/gif",images:x.image?[x.image]:null,imagePreviewRatio:.25,maxImagePreviewWidth:"500px",onAdd:W,onRemove:q}))),l.default.createElement(M,null,l.default.createElement(m.default,{buttonStyle:"admin-dark",onClick:J,processing:y,disabled:!r},l.default.createElement(j.FormattedMessage,E.default.saveCause)),!(0,o.isEmpty)(_)&&l.default.createElement(b.default,{text:t(E.default.causeErrorMessage),showBackground:!1,showIcon:!1})))})),A=(0,c.withRouter)((0,j.injectIntl)(C));t.default=A}}]);
//# sourceMappingURL=54.36d858006a5e538dee0a.chunk.js.map