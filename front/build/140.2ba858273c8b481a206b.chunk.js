(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{"7//b":function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmailSettingPage=void 0,n("ma9I");var a=i(n("lwsE")),u=i(n("W8MJ")),s=i(n("PJYZ")),o=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),f=i(n("lSNA")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=a?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=e[u]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),p=i(n("729O")),b=i(n("wL5/")),m=i(n("vOnD")),g=n("96Cm"),v=n("dtw8"),y=n("M57m"),h=i(n("98QT")),k=n("KLnl"),w=i(n("1Kqg")),P=n("p0gT");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var M=m.default.div.withConfig({displayName:"EmailSettingsPage__Container",componentId:"sc-1y5ce4r-0"})(["width:100%;background-color:",";display:flex;flex-direction:column;align-items:center;padding-top:30px;padding-bottom:50px;overflow-x:hidden;"],g.colors.background),E=(0,m.default)(b.default).withConfig({displayName:"EmailSettingsPage__StyledInitialFeedback",componentId:"sc-1y5ce4r-1"})(["flex-grow:1;"]),O=(0,m.default)(p.default).withConfig({displayName:"EmailSettingsPage__StyledConsentForm",componentId:"sc-1y5ce4r-2"})(["flex-grow:1;"]),U=function(e){(0,o.default)(n,e);var t=_(n);function n(e){var i;return(0,a.default)(this,n),i=t.call(this,e),(0,f.default)((0,s.default)(i),"closeInitialUnsubscribe",(function(){i.setState({initialUnsubscribeStatus:"hidden"})})),i.state={initialUnsubscribeStatus:null,unsubscribedCampaignMultiloc:null},i}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.query;"string"!=typeof t.unsubscription_token||"string"!=typeof t.campaign_id?this.setState({initialUnsubscribeStatus:"error"}):(this.setState({initialUnsubscribeStatus:"loading"}),(0,y.updateConsentByCampaignIDWithToken)(t.campaign_id,!1,t.unsubscription_token).then((function(n){var i=n.data;e.setState({initialUnsubscribeStatus:"success",unsubscribedCampaignMultiloc:i.attributes.campaign_type_description_multiloc}),w.default.fetchAllWith({apiEndpoint:["".concat(P.API_PATH,"/consents?unsubscription_token=").concat(t.unsubscription_token)]})})).catch((function(){e.setState({initialUnsubscribeStatus:"error"})})))}},{key:"render",value:function(){var e,t,n=this,i=this.state,r=i.initialUnsubscribeStatus,a=i.unsubscribedCampaignMultiloc,u=this.props.location,s="string"==typeof(null==u||null===(e=u.query)||void 0===e?void 0:e.unsubscription_token)?u.query.unsubscription_token:void 0;return d.default.createElement(M,{id:"e2e-email-settings-page"},d.default.createElement("div",null,r&&"hidden"!==r&&d.default.createElement(E,{className:"e2e-unsubscribe-status",status:r,unsubscribedCampaignMultiloc:a}),r&&"loading"!==r&&d.default.createElement(h.default,{token:"string"==typeof(null==u||null===(t=u.query)||void 0===t?void 0:t.unsubscription_token)?u.query.unsubscription_token:null},(function(e){return(0,k.isNilOrError)(e)?null:d.default.createElement(O,{consents:e,trackEventName:"Unsubcribed from unsubscribe link flow",token:s,runOnSave:n.closeInitialUnsubscribe})}))))}}]),n}(d.PureComponent);t.EmailSettingPage=U;var D=(0,v.withRouter)(U);t.default=D},"98QT":function(e,t,n){"use strict";n("SuFq");var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("FZtP");var r=i(n("lwsE")),a=i(n("W8MJ")),u=i(n("PJYZ")),s=i(n("7W2i")),o=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("lSNA")),f=i(n("q1tI")),d=n("DtyJ"),p=n("M57m"),b=n("KLnl"),m=n("ahDk");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,o.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=g(n);function n(e){var i;return(0,r.default)(this,n),i=t.call(this,e),(0,c.default)((0,u.default)(i),"subscriptions",void 0),(0,c.default)((0,u.default)(i),"token$",new d.BehaviorSubject(null)),i.state={consents:void 0},i.token$.next(e.token),i}return(0,a.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.subscriptions=[this.token$.pipe((0,m.switchMap)((function(e){return e?(0,p.consentsWithTokenStream)(e).observable:(0,d.of)(null)}))).subscribe((function(t){e.setState({consents:(0,b.isNilOrError)(t)?t:t.data})}))]}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.consents)}}]),n}(f.default.Component);t.default=v},"wL5/":function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("5DmW");var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("pVnL")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=a?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=e[u]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=n("Rw3A"),o=i(n("xdik")),l=n("OUuu"),c=i(n("vOnD")),f=n("96Cm"),d=i(n("3A/8"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var b=c.default.div.withConfig({displayName:"InitialUnsubscribeFeedback__Message",componentId:"sc-1r5om0u-0"})(["color:",";font-size:","px;"],f.colors.clBlueDarker,f.fontSizes.large),m=(0,u.memo)((function(e){var t=e.status,n=e.unsubscribedCampaignMultiloc,i=e.className;return u.default.createElement(l.FormSection,{className:i||""},u.default.createElement(b,{status:t,"aria-live":"polite"},"success"===t&&n?u.default.createElement(s.FormattedMessage,(0,a.default)({},o.default.initialUnsubscribeSuccess,{values:{campaignTitle:u.default.createElement(d.default,{value:n})}})):"error"===t?u.default.createElement(s.FormattedMessage,o.default.initialUnsubscribeError):"loading"===t?u.default.createElement(s.FormattedMessage,o.default.initialUnsubscribeLoading):null))}));t.default=m},xdik:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("JRPe").defineMessages)({initialUnsubscribeSuccess:{id:"EmailSettingsPage.initialUnsubscribeSuccess",defaultMessage:"You successfully unsubscribed from {campaignTitle}."},initialUnsubscribeError:{id:"EmailSettingsPage.initialUnsubscribeError",defaultMessage:"There was an issue unsubscribing from this campaign, please try again."},initialUnsubscribeLoading:{id:"EmailSettingsPage.initialUnsubscribeLoading",defaultMessage:"Your request is being processed, please wait..."}});t.default=i}}]);
//# sourceMappingURL=140.2ba858273c8b481a206b.chunk.js.map