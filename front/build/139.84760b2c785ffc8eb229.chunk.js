(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{"8Nyf":function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ");var n=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("o0o1")),u=n(a("lSNA")),l=n(a("yXPU")),o=n(a("J4zp")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),s=a("T89o"),d=a("dtw8"),f=n(a("JUYq")),p=a("KLnl"),g=a("1YJs"),m=a("Rpcw"),b=n(a("gBOx")),v=a("Loij"),P=n(a("w13Z")),E=n(a("WTKl")),j=n(a("2fl8")),y=n(a("Zc1O")),O=a("iP56"),w=n(a("lbhY")),T=a("Rw3A"),h=n(a("M1Et")),M=n(a("vOnD"));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=M.default.div.withConfig({displayName:"EditCause__Container",componentId:"cmzd1u-0"})([""]),V=M.default.div.withConfig({displayName:"EditCause__ButtonContainer",componentId:"cmzd1u-1"})(["display:flex;"]),x=(0,c.memo)((function(e){var t=e.intl.formatMessage,a=e.params.causeId,n=e.params.projectId,r=(0,b.default)({causeId:a}),u=(0,c.useState)(!1),d=(0,o.default)(u,2),M=d[0],C=d[1],A=(0,c.useState)(!1),x=(0,o.default)(A,2),D=x[0],k=x[1],I=(0,c.useState)({}),L=(0,o.default)(I,2),R=L[0],B=L[1],F=(0,c.useState)({title_multiloc:null,description_multiloc:null,image:null}),N=(0,o.default)(F,2),W=N[0],q=N[1];(0,c.useEffect)((function(){D||(0,l.default)(i.default.mark((function e(){var t,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,p.isNilOrError)(r)){e.next=7;break}if(a=null,null===(t=r.attributes.image)||void 0===t||!t.large){e.next=6;break}return e.next=5,(0,g.convertUrlToUploadFile)(r.attributes.image.large);case 5:a=e.sent;case 6:q({image:a,title_multiloc:r.attributes.title_multiloc,description_multiloc:r.attributes.description_multiloc});case 7:case"end":return e.stop()}}),e)})))()}),[r]);var J=(0,c.useCallback)((function(e){C(!0),q((function(t){return _(_({},t),{},{title_multiloc:e})}))}),[]),z=(0,c.useCallback)((function(e,t){C(!0),q((function(t){return _(_({},t),{},{description_multiloc:e})}))}),[]),U=(0,c.useCallback)((function(e){C(!0),q((function(t){return _(_({},t),{},{image:e[0]})}))}),[]),Z=(0,c.useCallback)((function(){C(!0),q((function(e){return _(_({},e),{},{image:null})}))}),[]),K=(0,c.useCallback)((function(){var e=W.title_multiloc,t=W.description_multiloc,r=W.image;!D&&e&&t&&(k(!0),B({}),(0,m.updateCause)(a,{description_multiloc:t,title_multiloc:e,image:null==r?void 0:r.base64}).then((function(){k(!1),B({}),C(!1),f.default.push("/admin/projects/".concat(n,"/volunteering"))})).catch((function(e){var t;k(!1),B((null==e||null===(t=e.json)||void 0===t?void 0:t.errors)||{})})))}),[W,D]);return c.default.createElement(S,null,c.default.createElement(v.SectionTitle,null,c.default.createElement(T.FormattedMessage,h.default.editCauseTitle)),c.default.createElement(v.SectionDescription,null,c.default.createElement(T.FormattedMessage,h.default.editCauseSubtitle)),c.default.createElement(v.Section,null,c.default.createElement(v.SectionField,null,c.default.createElement(E.default,{type:"text",id:"cause-title",valueMultiloc:W.title_multiloc,onChange:J,label:t(h.default.causeTitleLabel)}),c.default.createElement(y.default,{fieldName:"title_multiloc",apiErrors:null==R?void 0:R.title_multiloc})),c.default.createElement(v.SectionField,null,c.default.createElement(P.default,{id:"cause-description",valueMultiloc:W.description_multiloc,onChange:z,label:t(h.default.causeDescriptionLabel),labelTooltipText:t(h.default.causeDescriptionTooltip),withCTAButton:!0}),c.default.createElement(y.default,{fieldName:"description_multiloc",apiErrors:null==R?void 0:R.description_multiloc})),c.default.createElement(v.SectionField,null,c.default.createElement(O.Label,null,c.default.createElement(T.FormattedMessage,h.default.causeImageLabel)),c.default.createElement(w.default,{acceptedFileTypes:"image/jpg, image/jpeg, image/png, image/gif",images:W.image?[W.image]:null,imagePreviewRatio:.25,maxImagePreviewWidth:"500px",onAdd:U,onRemove:Z}))),c.default.createElement(V,null,c.default.createElement(j.default,{buttonStyle:"admin-dark",onClick:K,processing:D,disabled:!M},c.default.createElement(T.FormattedMessage,h.default.saveCause)),!(0,s.isEmpty)(R)&&c.default.createElement(y.default,{text:t(h.default.causeErrorMessage),showBackground:!1,showIcon:!1})))})),D=(0,d.withRouter)((0,T.injectIntl)(x));t.default=D},M1Et:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({titleVolunteeringTab:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.titleVolunteeringTab",defaultMessage:"Volunteering"},subtitleVolunteeringTab:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.subtitleVolunteeringTab",defaultMessage:"Here, you can set up the causes users can volunteer for and download the volunteers."},exportVolunteers:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.exportVolunteers",defaultMessage:"Export volunteers"},addCauseButton:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.addCauseButton",defaultMessage:"Add cause"},editButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editButtonLabel",defaultMessage:"Edit"},deleteButtonLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.deleteButtonLabel",defaultMessage:"Delete"},xVolunteers:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.xVolunteers",defaultMessage:"{x, plural, =0 {no volunteers} one {# volunteer} other {# volunteers}}"},causeDeletionConfirmation:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDeletionConfirmation",defaultMessage:"Are you sure?"},newCauseTitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseTitle",defaultMessage:"New cause"},newCauseSubtitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.newCauseSubtitle",defaultMessage:"A cause is an action or activity that citizens can volunteer to."},editCauseTitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseTitle",defaultMessage:"Edit cause"},editCauseSubtitle:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.editCauseSubtitle",defaultMessage:"A cause is an action or activity that citizens can volunteer to."},causeTitleLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeTitleLabel",defaultMessage:"Title"},causeDescriptionLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionLabel",defaultMessage:"Description"},causeDescriptionTooltip:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeDescriptionTooltip",defaultMessage:"Use this explain what is required from volunteers and what they can expect."},causeImageLabel:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeImageLabel",defaultMessage:"Image"},saveCause:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.saveCause",defaultMessage:"Save"},causeErrorMessage:{id:"app.containers.AdminPage.ProjectEdit.VolunteeringTab.causeErrorMessage",defaultMessage:"Couldn't save because the form contains errors."}});t.default=n},Rpcw:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.causeByIdStream=function(e){return o.default.get({apiEndpoint:"".concat(d,"/").concat(e)})},t.causesStream=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.default.get(s({apiEndpoint:"".concat(l.API_PATH,"/").concat(e,"s/").concat(t,"/causes")},a))},t.addCause=function(e){return f.apply(this,arguments)},t.updateCause=function(e,t){return p.apply(this,arguments)},t.deleteCause=function(e){return o.default.delete("".concat(d,"/").concat(e),e)},t.reorderCause=function(e,t){return o.default.update("".concat(d,"/").concat(e,"/reorder"),e,{cause:{ordering:t}})};var r=n(a("o0o1")),i=n(a("yXPU")),u=n(a("lSNA"));a("ma9I");var l=a("p0gT"),o=n(a("1Kqg"));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d="".concat(l.API_PATH,"/causes");function f(){return(f=(0,i.default)(r.default.mark((function e(t){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.add(d,{cause:t});case 2:return a=e.sent,e.next=5,o.default.fetchAllWith({regexApiEndpoint:[/^.*causes$/]});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,i.default)(r.default.mark((function e(t,a){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.default.update("".concat(d,"/").concat(t),t,{cause:a}),e.next=3,o.default.fetchAllWith({dataId:[t]});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},gBOx:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.causeId,a=(0,i.useState)(void 0),n=(0,r.default)(a,2),l=n[0],o=n[1];return(0,i.useEffect)((function(){var e=(0,u.causeByIdStream)(t).observable.subscribe((function(e){o(e.data)}));return function(){return e.unsubscribe()}}),[]),l};var r=n(a("J4zp")),i=a("q1tI"),u=a("Rpcw")}}]);
//# sourceMappingURL=139.84760b2c785ffc8eb229.chunk.js.map