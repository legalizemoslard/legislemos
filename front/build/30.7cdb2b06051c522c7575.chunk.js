(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"30Ov":function(e,t,a){"use strict";a("2B1R"),a("SuFq"),a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("FZtP");var i=n(a("J4zp")),s=n(a("lwsE")),r=n(a("W8MJ")),l=n(a("PJYZ")),o=n(a("7W2i")),d=n(a("a1gu")),u=n(a("Nsbk")),c=n(a("lSNA")),p=n(a("q1tI")),m=a("T89o"),f=a("DtyJ"),g=a("ahDk"),h=a("ghxK"),v=a("ErwY");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var A=function(e){(0,o.default)(a,e);var t=M(a);function a(e){var n;return(0,s.default)(this,a),n=t.call(this,e),(0,c.default)((0,l.default)(n),"inputProps$",void 0),(0,c.default)((0,l.default)(n),"pageChanges$",void 0),(0,c.default)((0,l.default)(n),"subscriptions",void 0),(0,c.default)((0,l.default)(n),"handleOnPageChange",(function(e){n.pageChanges$.next(e)})),n.state={currentPage:1,lastPage:1,campaigns:void 0},n}return(0,r.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.campaignNames,n=t.withoutCampaignNames,s=t.pageSize,r=t.pageNumber;this.inputProps$=new f.BehaviorSubject({campaignNames:a,withoutCampaignNames:n,pageSize:s}),this.pageChanges$=new f.BehaviorSubject(r||1),this.subscriptions=[(0,f.combineLatest)(this.inputProps$,this.pageChanges$).pipe((0,g.map)((function(e){var t=(0,i.default)(e,2),a=t[0],n=t[1];return y(y({},a),{},{pageNumber:n})})),(0,g.distinctUntilChanged)((function(e,t){return(0,m.isEqual)(e,t)})),(0,g.switchMap)((function(e){var t=e.campaignNames,a=e.withoutCampaignNames,n=e.pageSize,i=e.pageNumber;return(0,h.listCampaigns)({queryParameters:{campaign_names:t,without_campaign_names:a,"page[size]":n,"page[number]":i}}).observable}))).subscribe((function(t){e.setState({campaigns:t.data,currentPage:(0,v.getPageNumberFromUrl)(t.links.self)||1,lastPage:(0,v.getPageNumberFromUrl)(t.links.last)||1})}))]}},{key:"componentDidUpdate",value:function(){this.inputProps$.next({campaignNames:this.props.campaignNames,withoutCampaignNames:this.props.withoutCampaignNames,pageSize:this.props.pageSize})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(y(y({},this.state),{},{onChangePage:this.handleOnPageChange}))}}]),a}(p.default.Component);t.default=A,(0,c.default)(A,"defaultProps",{pageSize:20,pageNumber:1})},BPbi:function(e,t,a){"use strict";a("SuFq");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("oVuX"),a("2B1R");var i=n(a("pVnL")),s=n(a("lwsE")),r=n(a("W8MJ")),l=n(a("7W2i")),o=n(a("a1gu")),d=n(a("Nsbk")),u=n(a("q1tI")),c=a("KLnl"),p=n(a("vOnD")),m=n(a("30Ov")),f=a("ghxK"),g=a("Rw3A"),h=a("gzy/"),v=n(a("2fl8")),b=a("iP56"),y=n(a("TWBN")),M=a("rqWd"),A=n(a("TvP7")),C=n(a("KPWA")),w=n(a("bd4U")),E=a("96Cm");function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var P=p.default.div.withConfig({displayName:"All__NoCampaignsWrapper",componentId:"sc-1bcpbxt-0"})(["display:flex;flex-direction:column;align-items:center;padding:80px 0 100px;text-align:center;"]),T=p.default.h2.withConfig({displayName:"All__NoCampaignsHeader",componentId:"sc-1bcpbxt-1"})(["font-size:","px;font-weight:600;margin-bottom:10px;"],E.fontSizes.xl),O=p.default.p.withConfig({displayName:"All__NoCampaignsDescription",componentId:"sc-1bcpbxt-2"})(["color:",";font-weight:400;font-size:","px;margin-bottom:30px;max-width:450px;"],E.colors.adminSecondaryTextColor,E.fontSizes.base),_=function(e){(0,l.default)(a,e);var t=S(a);function a(){return(0,s.default)(this,a),t.apply(this,arguments)}return(0,r.default)(a,[{key:"render",value:function(){var e=this.props,t=e.campaigns,a=e.currentPage,n=e.lastPage;return(0,c.isNilOrError)(t)?null:0===t.length?u.default.createElement(u.default.Fragment,null,u.default.createElement(P,null,u.default.createElement(b.Icon,{name:"mailBig"}),u.default.createElement(T,null,u.default.createElement(g.FormattedMessage,w.default.noCampaignsHeader)),u.default.createElement(O,null,u.default.createElement(g.FormattedMessage,w.default.noCampaignsDescription)),u.default.createElement(v.default,{buttonStyle:"cl-blue",icon:"plus-circle",linkTo:"/admin/emails/custom/new"},u.default.createElement(g.FormattedMessage,w.default.addCampaignButton)))):u.default.createElement(u.default.Fragment,null,u.default.createElement(M.ButtonWrapper,null,u.default.createElement(v.default,{buttonStyle:"cl-blue",icon:"plus-circle",linkTo:"/admin/emails/custom/new"},u.default.createElement(g.FormattedMessage,w.default.addCampaignButton))),u.default.createElement(h.List,{key:t.map((function(e){return e.id})).join()},t.map((function(e){return(0,f.isDraft)(e)?u.default.createElement(A.default,{key:e.id,campaign:e}):u.default.createElement(C.default,{key:e.id,campaign:e})}))),u.default.createElement(y.default,{currentPage:a,totalPages:n,loadPage:this.props.onChangePage}))}}]),a}(u.default.Component),B=(0,g.injectIntl)(_);t.default=function(e){return u.default.createElement(m.default,{campaignNames:["manual"],pageSize:10},(function(t){return u.default.createElement(B,(0,i.default)({},e,t))}))}},KPWA:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("q1tI")),s=a("gzy/"),r=n(a("3A/8")),l=n(a("2fl8")),o=a("iP56"),d=a("Rw3A"),u=n(a("bd4U")),c=a("JRPe"),p=function(e){var t=e.campaign;return i.default.createElement(s.Row,{id:t.id},i.default.createElement(s.TextCell,{className:"expand"},i.default.createElement(r.default,{value:t.attributes.subject_multiloc})),i.default.createElement("div",null,i.default.createElement(c.FormattedDate,{value:t.attributes.updated_at}),"Â ",i.default.createElement(c.FormattedTime,{value:t.attributes.updated_at})),i.default.createElement(o.StatusLabel,{backgroundColor:"clGreenSuccess",text:i.default.createElement(d.FormattedMessage,u.default.sent)}),i.default.createElement(l.default,{linkTo:"/admin/emails/custom/".concat(t.id),icon:"charts",buttonStyle:"text"},i.default.createElement(d.FormattedMessage,u.default.statsButton)))};t.default=p},TvP7:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("q1tI")),s=a("gzy/"),r=n(a("3A/8")),l=n(a("2fl8")),o=a("iP56"),d=a("Rw3A"),u=n(a("bd4U")),c=function(e){var t=e.campaign;return i.default.createElement(s.Row,{id:t.id},i.default.createElement(s.TextCell,{className:"expand"},i.default.createElement(r.default,{value:t.attributes.subject_multiloc})),i.default.createElement(o.StatusLabel,{backgroundColor:"draftYellow",text:i.default.createElement(d.FormattedMessage,u.default.draft)}),i.default.createElement(l.default,{linkTo:"/admin/emails/custom/".concat(t.id),buttonStyle:"secondary",icon:"edit"},i.default.createElement(d.FormattedMessage,u.default.manageButtonLabel)))};t.default=c},bd4U:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({titleEmails:{id:"app.containers.Admin.emails.titleEmails",defaultMessage:"Email Campaigns"},subtitleEmails:{id:"app.containers.Admin.emails.subtitleEmails",defaultMessage:"Compose your own emails to be sent out to all users or to particular groups. And control what automated emails your users receive."},helmetTitle:{id:"app.containers.Admin.emails.helmetTitle",defaultMessage:"Email Campaigns"},helmetDescription:{id:"app.containers.Admin.emails.helmetDescription",defaultMessage:"Send out manual emails to certain citizen group and active automated campaigns"},campaignDeletionConfirmation:{id:"app.containers.Admin.emails.campaignDeletionConfirmation",defaultMessage:"Are you sure?"},addCampaignButton:{id:"app.containers.Admin.emails.addCampaignButton",defaultMessage:"Create campaign"},deleteButtonLabel:{id:"app.containers.Admin.emails.deleteButtonLabel",defaultMessage:"Delete"},statsButton:{id:"app.containers.Admin.emails.statsButton",defaultMessage:"Statistics"},editButtonLabel:{id:"app.containers.Admin.emails.editButtonLabel",defaultMessage:"Edit"},manageButtonLabel:{id:"app.containers.Admin.emails.manageButtonLabel",defaultMessage:"Manage & Edit & Preview & Delete"},fieldSender:{id:"app.containers.Admin.emails.fieldSender",defaultMessage:"From"},fieldSenderTooltip:{id:"app.containers.Admin.emails.fieldSenderTooltip",defaultMessage:"Choose whom users will see as the sender of the email."},fieldReplyTo:{id:"app.containers.Admin.emails.fieldReplyTo",defaultMessage:"Replies should go to"},fieldReplyToTooltip:{id:"app.containers.Admin.emails.fieldReplyToTooltip",defaultMessage:"Choose what email address should receive direct replies from users on your email."},fieldTo:{id:"app.containers.Admin.emails.fieldTo",defaultMessage:"To"},fieldToTooltip:{id:"app.containers.Admin.emails.fieldToTooltip",defaultMessage:"Choose the group(s) of users who will receive your email."},fieldSubject:{id:"app.containers.Admin.emails.fieldSubject",defaultMessage:"Email Subject"},fieldSubjectTooltip:{id:"app.containers.Admin.emails.fieldSubjectTooltip",defaultMessage:"This will be shown in the subject line of the email and in the userâs inbox overview. Make it clear and engaging."},fieldBody:{id:"app.containers.Admin.emails.fieldBody",defaultMessage:"Email Message"},addCampaignTitle:{id:"app.containers.Admin.emails.addCampaignTitle",defaultMessage:"New campaign"},editCampaignTitle:{id:"app.containers.Admin.emails.editCampaignTitle",defaultMessage:"Edit campaign"},draft:{id:"app.containers.Admin.emails.draft",defaultMessage:"Draft"},sent:{id:"app.containers.Admin.emails.sent",defaultMessage:"Sent"},sendNowButton:{id:"app.containers.Admin.emails.sendNowButton",defaultMessage:"Send now"},sendTestEmailButton:{id:"app.containers.Admin.emails.sendTestEmailButton",defaultMessage:"Send a preview"},sendTestEmailTooltip:{id:"app.containers.Admin.emails.sendTestEmailTooltip",defaultMessage:"Send this draft email to the email address with which you are logged in, to check how it looks like in âreal lifeâ."},previewSentConfirmation:{id:"app.containers.Admin.emails.previewSentConfirmation",defaultMessage:"A preview email has been sent to your email address"},formSaveButton:{id:"app.containers.Admin.emails.formSaveButton",defaultMessage:"Continue"},formErrorButton:{id:"app.containers.Admin.emails.formErrorButton",defaultMessage:"Continue"},formSuccessButton:{id:"app.containers.Admin.emails.formSuccessButton",defaultMessage:"Continue"},formSuccessMessage:{id:"app.containers.Admin.emails.formSuccessMessage",defaultMessage:"formSuccessMessage"},formErrorMessage:{id:"app.containers.Admin.emails.formErrorMessage",defaultMessage:"Please correct the errors above to continue"},formUnexpectedErrorMessage:{id:"app.containers.Admin.emails.formUnexpectedErrorMessage",defaultMessage:"Something went wrong, please try again later"},previewTitle:{id:"app.containers.Admin.emails.previewTitle",defaultMessage:"Preview"},recipientsTitle:{id:"app.containers.Admin.emails.recipientsTitle",defaultMessage:"Recipients"},deliveryStatus_sent:{id:"app.containers.Admin.Campaigns.deliveryStatus_sent",defaultMessage:"Sent"},deliveryStatus_failed:{id:"app.containers.Admin.Campaigns.deliveryStatus_failed",defaultMessage:"Failed"},deliveryStatus_accepted:{id:"app.containers.Admin.Campaigns.deliveryStatus_accepted",defaultMessage:"Accepted"},deliveryStatus_delivered:{id:"app.containers.Admin.Campaigns.deliveryStatus_delivered",defaultMessage:"Delivered"},deliveryStatus_opened:{id:"app.containers.Admin.Campaigns.deliveryStatus_opened",defaultMessage:"Opened"},deliveryStatus_clicked:{id:"app.containers.Admin.Campaigns.deliveryStatus_clicked",defaultMessage:"Clicked"},deliveryStatus_clickedTooltip:{id:"app.containers.Admin.Campaigns.deliveryStatus_clickedTooltip",defaultMessage:"When you added one or more links to your email, the number of users who clicked a link will be shown here."},tabCustom:{id:"app.containers.Admin.Campaigns.tabCustom",defaultMessage:"Custom"},tabAutomated:{id:"app.containers.Admin.Campaigns.tabAutomated",defaultMessage:"Automated"},campaignFrom:{id:"app.containers.Admin.Campaigns.campaignFrom",defaultMessage:"From:"},campaignTo:{id:"app.containers.Admin.Campaigns.campaignTo",defaultMessage:"To:"},noAccess:{id:"app.containers.Admin.Campaigns.noAccess",defaultMessage:"We're sorry, but it seems like you don't have access to the emails section"},deleteCampaignButton:{id:"app.containers.Admin.emails.deleteCampaignButton",defaultMessage:"Delete Campaign"},noCampaignsHeader:{id:"app.containers.Admin.emails.noCampaignsHeader",defaultMessage:"No custom email campaigns yet"},noCampaignsDescription:{id:"app.containers.Admin.emails.noCampaignsDescription",defaultMessage:"Custom email campaigns are emails created from scratch. Their content and recipients can be chosen and you can follow up on their results through statistics."},automatedEmailCampaignsInfo:{id:"app.containers.Admin.emails.automatedEmailCampaignsInfo",defaultMessage:"Automated email campaigns are sent out by default and are triggered by a userâs actions. Some of them can be turned off. Others are an inherent part of user interactions with the platform and therefore canât be turned off."},allUsers:{id:"app.containers.Admin.emails.allUsers",defaultMessage:"All users"},groups:{id:"app.containers.Admin.emails.groups",defaultMessage:"Groups"},nameVariablesInfo:{id:"app.containers.Admin.emails.nameVariablesInfo",defaultMessage:'You can speak directly to citizens using the variables \\{\\{first_name\\}\\} \\{\\{last_name\\}\\}. E.g. "Dear \\{\\{first_name\\}\\} \\{\\{last_name\\}\\}, ..."'},changeRecipientsButton:{id:"app.containers.Admin.emails.changeRecipientsButton",defaultMessage:"Change recipients"},send:{id:"app.containers.Admin.emails.send",defaultMessage:"Send"},confirmSendHeader:{id:"app.containers.Admin.emails.confirmSendHeader",defaultMessage:"Email to all users?"},toAllUsers:{id:"app.containers.Admin.emails.toAllUsers",defaultMessage:"Do you want to send this email to all users?"},senderRecipients:{id:"app.containers.Admin.emails.senderRecipients",defaultMessage:"Sender and recipients"}});t.default=n},ghxK:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.listCampaigns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.default.get(u({apiEndpoint:"".concat(c)},e))},t.createCampaign=function(e){return o.default.add("".concat(c),{campaign:e})},t.updateCampaign=function(e,t){return o.default.update("".concat(c,"/").concat(e),e,{campaign:t})},t.sendCampaign=function(e){return p.apply(this,arguments)},t.sendCampaignPreview=function(e){return o.default.add("".concat(c,"/").concat(e,"/send_preview"),{})},t.deleteCampaign=function(e){return o.default.delete("".concat(c,"/").concat(e),e)},t.campaignByIdStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.default.get(u({apiEndpoint:"".concat(c,"/").concat(e)},t))},t.listCampaignDeliveries=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.default.get(u({apiEndpoint:"".concat(c,"/").concat(e,"/deliveries")},t))},t.getCampaignStats=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.default.get(u({apiEndpoint:"".concat(c,"/").concat(e,"/stats")},t))},t.isDraft=function(e){return 0===e.attributes.deliveries_count};var i=n(a("o0o1"));a("ma9I");var s=n(a("yXPU")),r=n(a("lSNA")),l=a("p0gT"),o=n(a("1Kqg"));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c="".concat(l.API_PATH,"/campaigns");function p(){return(p=(0,s.default)(i.default.mark((function e(t){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.add("".concat(c,"/").concat(t,"/send"),{});case 2:return a=e.sent,e.next=5,o.default.fetchAllWith({apiEndpoint:["".concat(c,"/").concat(t),"".concat(l.API_PATH,"/campaigns")]});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=30.7cdb2b06051c522c7575.chunk.js.map