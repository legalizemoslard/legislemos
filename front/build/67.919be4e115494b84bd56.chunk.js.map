{"version":3,"sources":["webpack:///./app/components/Sharing/SharingDropdownButton/index.tsx","webpack:///./app/components/PostShowComponents/Comments/LoadingComments.tsx","webpack:///./app/components/VoteControl/VotingDisabled.tsx","webpack:///./app/hooks/useIdeaStatus.ts","webpack:///./app/components/InitiativeCard/messages.ts","webpack:///./app/components/PostShowComponents/SharingModalContent/index.tsx","webpack:///./app/components/UI/PopContainer/index.tsx","webpack:///./app/containers/InitiativesShow/ActionBar/InitiativeMoreActions.tsx","webpack:///./app/resources/GetInitiativesPermissions.tsx","webpack:///./app/components/AssignBudgetControl/messages.ts","webpack:///./app/containers/InitiativesShow/styleConstants.ts","webpack:///./app/components/PostShowComponents/SharingModalContent/rocket.png","webpack:///./app/services/ideaCustomFieldsSchemas.ts","webpack:///./app/components/PostShowComponents/Image.tsx","webpack:///./app/components/StatusBadge/index.tsx","webpack:///./app/resources/GetResourceFiles.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/messages.ts","webpack:///./app/containers/IdeasShow/MetaInformation/IdeaTopics.tsx","webpack:///./app/resources/GetIdeaImages.tsx","webpack:///./app/components/VoteControl/index.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Status.tsx","webpack:///./app/services/ideaImages.ts","webpack:///./app/containers/InitiativesShow/VoteControl/ThresholdReached.tsx","webpack:///./app/resources/GetInitiative.tsx","webpack:///./app/containers/IdeasShow/index.tsx","webpack:///./app/containers/IdeasShow/Buttons/IdeaSharingButton.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/ProposedVoted.tsx","webpack:///./app/containers/IdeasShow/RightColumnDesktop/index.tsx","webpack:///./app/containers/IdeasShow/IdeaProposedBudget.tsx","webpack:///./app/containers/IdeasShow/Buttons/GoToCommentsButton.tsx","webpack:///./app/containers/IdeasShow/Buttons/MobileSharingButtonComponent.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/Expired.tsx","webpack:///./app/components/UI/ProgressBar/warning_pattern.svg","webpack:///./app/components/Map/index.tsx","webpack:///./app/components/PostShowComponents/Breadcrumbs.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/Ineligible.tsx","webpack:///./app/containers/IdeasShow/Buttons/SharingButtonComponent.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Location.tsx","webpack:///./app/components/Sharing/SharingDropdownButton/SharingDropdownContent.tsx","webpack:///./app/containers/IdeasShow/IdeaMoreActions.tsx","webpack:///./app/containers/InitiativesShow/InitiativeMeta.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/Attachment.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/index.tsx","webpack:///./app/containers/IdeasShowPage/IdeaShowPageTopBar.tsx","webpack:///./app/hooks/useIdeaCustomFieldsSchemas.ts","webpack:///./app/containers/InitiativesShow/VoteControl/ProposedNotVoted.tsx","webpack:///./app/components/UI/CollapsibleBox/index.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/PostedBy.tsx","webpack:///./app/containers/IdeasShow/CTABox/VotingCTABox/Voting.tsx","webpack:///./app/containers/IdeasShow/messages.ts","webpack:///./app/components/PostShowComponents/Topics.tsx","webpack:///./app/services/initiativeStatuses.ts","webpack:///./app/components/PostShowComponents/DropdownMap/index.tsx","webpack:///./app/containers/IdeasShow/Buttons/IdeaCTAButton.tsx","webpack:///./app/components/PostShowComponents/Footer.tsx","webpack:///./app/containers/IdeasShow/IdeaMeta.tsx","webpack:///./app/resources/GetInitiativeStatus.tsx","webpack:///./app/components/PostShowComponents/SharingModalContent/messages.ts","webpack:///./app/components/PostShowComponents/SharingModalContent/tracks.ts","webpack:///./app/resources/GetInitiativeImages.tsx","webpack:///./app/components/PostShowComponents/messages.ts","webpack:///./app/components/VoteControl/messages.ts","webpack:///./app/components/UI/ProgressBar/index.tsx","webpack:///./app/containers/InitiativesShow/tracks.ts","webpack:///./app/hooks/useInitiativesPermissions.ts","webpack:///./app/services/initiatives.ts","webpack:///./app/containers/InitiativesShow/VoteControl/Custom.tsx","webpack:///./app/containers/InitiativesShowPage/InitiativeShowPageTopBar.tsx","webpack:///./app/containers/InitiativesShow/PostedByMobile.tsx","webpack:///./app/services/initiativeImages.ts","webpack:///./app/components/InitiativeCard/VoteIndicator.tsx","webpack:///./app/containers/IdeasShow/CTABox/Buttons/index.tsx","webpack:///./app/components/AssignBudgetControl/index.tsx","webpack:///./app/components/PostShowComponents/styleConstants.ts","webpack:///./app/services/ideaVotes.ts","webpack:///./app/containers/IdeasShowPage/messages.ts","webpack:///./app/containers/InitiativesShow/VoteControl/messages.ts","webpack:///./app/components/PostShowComponents/ActionBar.tsx","webpack:///./app/containers/App/PostPageFullscreenModal.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/SharedStyles.tsx","webpack:///./app/containers/IdeasShow/tracks.ts","webpack:///./app/resources/GetPermission.tsx","webpack:///./app/containers/IdeasShow/styleConstants.ts","webpack:///./app/containers/InitiativesShow/ActionBar/index.tsx","webpack:///./app/containers/InitiativesShow/messages.ts","webpack:///./app/containers/InitiativesShow/PostedBy.tsx","webpack:///./app/containers/InitiativesShow/index.tsx","webpack:///./app/components/UI/FullscreenModal/index.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/CountDown.tsx","webpack:///./app/containers/InitiativesShow/VoteControl/Answered.tsx","webpack:///./app/services/initiativeVotes.ts","webpack:///./app/resources/GetIdeaCustomFieldsSchemas.tsx","webpack:///./app/containers/IdeasShow/MetaInformation/index.tsx","webpack:///./app/containers/InitiativesShowPage/messages.ts","webpack:///./app/containers/IdeasShow/MetaInformation/Attachments.tsx","webpack:///./app/containers/IdeasShow/GoBackButton.tsx","webpack:///./app/containers/IdeasShow/isFieldEnabled.ts","webpack:///./app/resources/GetComments.tsx"],"names":["className","url","twitterMessage","whatsAppMessage","emailSubject","emailBody","utmParams","buttonComponent","dropdownContent","Container","styled","div","LoadingMessage","colors","label","fontSizes","medium","props","FormattedMessage","messages","loadingComments","small","StyledLink","Link","clBlueDark","darken","StyledButton","button","memo","projectTitle","disabled_reason","future_enabled","projectId","votingDescriptor","project","authUser","stopPropagation","event","isNilOrError","message","votingPossibleLater","votingDisabledProjectInactive","votingDisabledMaxReached","votingDisabledFutureEnabled","votingDisabledPhaseOver","votingNotPermitted","votingNotVerified","votingNotEnabled","enabledFromDate","FormattedDate","value","year","month","day","projectName","attributes","title_multiloc","to","slug","onClick","pcType","process_type","pcId","id","relationships","current_phase","data","verificationLink","preventDefault","openVerificationModal","context","action","type","onVerify","onMouseDown","linkToVerificationText","values","statusId","useState","ideaStatus","setIdeaStatus","useEffect","subscription","ideaStatusStream","observable","subscribe","response","unsubscribe","defineMessages","xComments","defaultMessage","xVotesOfY","Loading","Rocket","img","media","smallerThanMaxTablet","Title","h1","theme","colorText","xxxxl","xxxl","Description","p","large","base","SharingWrapper","SharingModalContent","postType","idea","initiative","localize","locale","postTitle","postUrl","location","origin","phases","emailSharingSubject","emailSharingBody","inputTerm","getInputTerm","getInputTermMessage","ideaEmailSharingSubjectText","option","optionEmailSharingSubject","projectEmailSharingSubject","question","questionEmailSharingSubject","issue","issueEmailSharingSubject","contribution","contributionEmailSharingSubject","ideaEmailSharingBody","optionEmailSharingBody","projectEmailSharingBody","questionEmailSharingModalContentBody","issueEmailSharingBody","contributionEmailSharingBody","ideaWhatsAppMessage","optionWhatsAppMessage","projectWhatsAppMessage","questionWhatsAppMessage","issueWhatsAppMessage","contributionWhatsAppMessage","initiativeEmailSharingSubject","initiativeEmailSharingBody","whatsAppMessageProposal","getIdeaMessages","getInitiativeMessages","this","postId","trackEventByName","tracks","sharingModalOpened","name","title","subtitle","formatMessage","intl","getPostValues","getMessages","src","rocket","alt","isInModal","source","campaign","content","Spinner","PureComponent","SharingModalContentWithHoCs","Data","adopt","tenant","render","ideaId","inputProps","dataProps","enterAnimation","keyframes","borderRadius","separation","css","IconWrapper","StyledIcon","Icon","icon","children","MoreActionsMenuWrapper","InitiativeMoreActions","setState","spamModalVisible","clHistory","push","initiativeId","deleteInitiativeConfirmation","window","confirm","deleteInitiative","goBack","state","color","item","moreOptions","actions","reportAsSpam","handler","openSpamModal","editInitiative","onEditInitiative","onDeleteInitiative","No","opened","close","closeSpamModal","header","reportAsSpamModalTitle","resourceId","resourceType","InitiativeMoreActionsWithHOCs","remove","removeFromMyBasket","add","addToMyBasket","budgetingNotPossible","budgetingFutureEnabled","budgetingNotPermitted","budgetingNotVerified","verifyAccountLinkText","a11y_price","backToOverview","streamParams","apiEndpoint","API_PATH","streams","get","Image","xs","transparentize","GetResourceFiles","files","undefined","resetOnChange","inputProps$","BehaviorSubject","subscriptions","pipe","distinctUntilChanged","prev","next","tap","filter","isString","switchMap","streamFn","projectFilesStream","phaseFilesStream","eventFilesStream","pageFilesStream","ideaFilesStream","initiativeFilesStream","forEach","React","Component","postedBy","currentStatus","topics","attachments","byUserOnDate","injectIntl","compact","topicIds","map","length","Item","Header","GetIdeaImages","ideaImages","ideaImagesStream","of","voteKeyframeAnimation","isRtl","VoteIconContainer","styleType","lighten","votingEnabled","defaultStyles","boxShadow","boxShadowHoverSmall","size","VoteIcon","VoteCount","Vote","Upvote","active","clGreen","enabled","Downvote","clRed","VoteControl","votingAnimation","vote","voteMode","myVoteId","myVoteMode","voting","participationContext","participationContextId","participationContextType","disabledVoteClick","action_descriptor","voting_idea","cancellingEnabled","cancelling_enabled","votingDisabledReason","isSignedIn","isTryingToUndoVote","isVerified","verified","voting$","refetchIdeas","voting_method","upvotesCount","downvotesCount","deleteVote","addVote","user_id","mode","ideaByIdStream","fetch","openSignUpInModal","verification","verificationContext","element","setRef","upvoteElement","downvoteElement","showVoteControl","loaded","id$","authUser$","authUserStream","addEventListener","votingAnimationDone","idea$","combineLatest","myVote$","user_vote","voteId","vote$","voteStream","project$","phases$","hasPhases","isEmpty","projectByIdStream","phase","phaseStream","upvotes_count","downvotes_count","votingFutureEnabled","isContinuousProject","ideaPhaseIds","ideaPhases","includes","latestRelevantIdeaPhase","getLatestRelevantPhase","shouldVerify","participation_method","myVote","removeEventListener","ariaHidden","upvotingEnabled","downvotingEnabled","showDownvote","downvoting_enabled","screenreaderContent","ScreenReaderOnly","a11y_upvotesDownvotes","LiveMessage","join","ref","setContainerRef","removeFocus","onClickUpvote","setUpvoteRef","tabIndex","upvote","onClickDownvote","setDownvoteRef","downvote","withRouter","imageId","delete","base64","ordering","bodyData","image","ideaImage","StatusIcon","VoteText","Button","ThresholdReached","onVote","initiativeSettings","voting_threshold","threshold_reached_message","initiativeStatus","userVoted","voteCount","voteLimit","StatusWrapper","StatusExplanation","thresholdReachedStatusExplanation","thresholdReachedStatusExplanationBold","IconTooltip","iconColor","placement","supportHtml","votingThreshold","xVotes","count","handleOnVote","withTheme","GetInitiative","initiativeByIdStream","initiativeBySlugStream","LazyComments","lazy","main","pageContentMaxWidth","Content","LeftColumn","StyledRightColumnDesktop","RightColumnDesktop","columnsGapDesktop","IdeaHeader","MobileIdeaMoreActions","IdeaMoreActions","TopBar","StyledGoBackButton","GoBackButton","BodySectionTitle","h2","StyledBody","Body","StyledIdeaProposedBudget","IdeaProposedBudget","MobileMetaInformation","MetaInformation","StyledAssignBudgetControl","AssignBudgetControl","MobileIdeaSharingButton","IdeaSharingButton","StyledOfficialFeedback","OfficialFeedback","Comments","IdeasShow","officialFeedbacks","isUndefined","officialFeedbacksList","ideaIdForSocialSharing","prevState","translateButtonClicked","trackEvent","clickGoBackToOriginalIdeaCopyButton","clickTranslateIdeaButton","newIdeaId","query","setLoaded","setTimeout","history","replaceState","pathname","windowSize","postOfficialFeedbackPermission","ideaCustomFieldsSchemas","insideModal","authorId","author","ideaTitle","idea_status","ideaImageLarge","versions","proposedBudget","proposed_budget","ideaBody","body_multiloc","isCompactView","viewportWidths","largeTablet","proposedBudgetEnabled","onTranslateIdea","proposedBudgetTitle","bodyTitle","body","view","permissionToPost","Suspense","fallback","classNames","in","timeout","enter","contentFadeInDuration","exit","handleContainerRef","closeIdeaSocialSharingModal","hasSkipButton","skipText","skipSharing","sharingModalTitle","optionSharingModalTitle","projectSharingModalTitle","questionSharingModalTitle","issueSharingModalTitle","contributionSharingModalTitle","sharingModalSubtitle","IdeasShowWithHOCs","comments","href","ideaTwitterMessage","optionTwitterMessage","projectTwitterMessage","questionTwitterMessage","issueTwitterMessage","contributionTwitterMessage","ideaEmailSharingSubject","questionEmailSharingBody","ideaUrl","scaleIn","clGreenSuccess","VotedTitle","h4","VotedText","UnvoteButton","VoteCounter","VoteTextLeft","clGreyOnGreyBackground","VoteTextRight","StyledProgressBar","ProgressBar","ProposedVoted","onCancelVote","daysLeft","getDaysRemainingUntil","expires_at","votedTitle","votedText","x","xDays","handleOnCancelVote","unvoteLink","progress","bgColor","lightGreyishBlue","rightColumnWidthDesktop","InnerContainer","Box","backgroundLightGrey","StyledVoting","Voting","StyledMetaInformation","smallerThanMinTablet","GoToCommentsButton","useCallback","commentInputElementAnchor","document","getElementById","commentInputElement","focus","preventScroll","scrollIntoView","behavior","block","buttonText","commentCTA","iconName","ariaExpanded","buttonStyle","borderColor","iconAriaHidden","share","VoteTexts","expiredStatusExplanation","expiredStatusExplanationBold","bgShaded","disabled","cancelVote","LeafletMap","defaultCardStyle","MapWrapper","BoxContainer","CloseButton","defaultOutline","CloseIcon","centerLatLng","zoomLevel","mapHeight","points","noMarkerClustering","zoomControlPosition","layersControlPosition","boxContent","onInit","onBoxClose","hideLegend","appConfig","additionalLeafletConfig","setAdditionalLeafletConfig","center","useMemo","getCenter","zoom","getZoomLevel","tileProvider","getTileProvider","tileOptions","getTileOptions","leafletConfig","handleLeafletConfigChange","onLeafletConfigChange","HomeLink","HomeIcon","Separator","LinkText","span","Breadcrumbs","links","linkToHomePage","link","key","text","Ineligible","onScrollToOfficialFeedback","eligibility_criteria","ineligibleStatusExplanation","ineligibleStatusExplanationBold","handleOnReadAnswer","readAnswer","OpenMapModalButton","Address","MapContainer","Location","isOpened","setIsOpened","point","location_point_geojson","lat","coordinates","lng","address","getAddressOrFallbackDMS","location_description","isNil","width","biggerThanMaxTablet","FacebookIcon","MessengerIcon","WhatsAppIcon","TwitterIcon","EmailIcon","secondaryText","getUrl","getUrlWithUtm","handleClick","shareButtonClicked","network","facebook","messenger","whatsapp","twitter","email","isSpamModalVisible","setIsSpamModalVisible","processType","ariaLabel","editPost","deletePost","deleteConfirmationMessage","continuous","deleteInputConfirmation","timeline","deleteInputInTimelineConfirmation","deleteIdea","onDeleteIdea","InitiativeMeta","initiativeImages","tenantLocales","settings","core","locales","localizedTitle","initiativeTitle","metaTitle","initiativeDescription","stripHtml","initiativeImage","fb","initiativeUrl","initiativeOgTitle","metaOgTitle","articleJson","headline","first_name","last_name","mainEntityOfPage","datePublished","published_at","json","itemListElement","position","host","logo","Helmet","unread_notifications","property","initiativeOgDescription","imageSizes","initiativeImg","JSON","stringify","InitiativeMetaWithHoc","FileDownloadLink","a","PaperclipIcon","file","download","target","rel","componentMap","proposed","voted","notVoted","ProposedNotVoted","expired","Expired","threshold_reached","answered","Answered","ineligible","custom","Custom","votingPermission","flow","initiatives","expiresAt","isExpired","moment","duration","diff","asSeconds","statusCode","code","StatusComponent","tagName","invisibleTitle","handleOnvote","disabledReason","initiative_status","mobileTopBarHeight","TopBarInner","biggerThanMinTablet","Left","Right","GoBackIcon","GoBackLabel","phone","goBackAction","onGoBack","eventEmitter","emit","onDisabledVoteClick","setIdeaCustomFieldsSchemas","ideaFormSchemaStream","CountDownWrapper","colorMain","OnDesktop","OnMobile","TooltipContent","inMap","TooltipContentIcon","TooltipContentText","disabledMessages","notPermitted","thresholdReachedTooltip","tippyContent","targetTime","proposedStatusExplanation","proposedStatusExplanationBold","proposedStatusExplanationMobile","proposedStatusExplanationMobileBold","interactive","hideOnClick","ariaDisabled","TitleIcon","ContentLabel","ContentToggleButton","ArrowIcon","Wrapper","contentBackgroundColor","largePhone","showContent","setShowContent","handleContentToggle","titleIconName","e2eId","mountOnEnter","unmountOnExit","UserWrapper","StyledAvatar","Avatar","PostedBy","ideaPublishedAtDate","userName","userId","isLinkToProfile","underline","fontSize","date","VoteControlWrapper","VoteWrapper","error","isContainerVisible","prevProps","voteControlComponent","setVoteControlRef","deletedUser","send","createdTimeAgo","or","Topic","colorSecondary","Topics","topic","Map","fontWeight","postPageContentMaxWidth","ContentInner","tablet","rightColumnWidthTablet","columnsGapTablet","IdeaMeta","ideaDescription","projectSlug","ideaImg","IdeaMetaWithHoc","GetInitiativeStatus","initiativeStatusStream","GetInitiativeImages","initiativeImagesStream","readMore","voteSuccessTitle","voteErrorTitle","voteErrorSubTitle","ProgressBarOuter","background","ProgressBarInner","unobserve","isIntersecting","visible","onChange","handleIntersection","warningPattern","clamp","clickTranslateInitiativeButton","clickGoBackToOriginalInitiativeCopyButton","actionPermission","setActionPermission","getInitiativeActionDescriptors","currentAppConfigurationStream","actionDescriptors","actionDescriptor","show","initiativeSlug","cacheStream","object","update","fetchAllWith","Promise","all","first","toPromise","description_multiloc","PostedByText","authorName","hideLastName","postedByShort","StatusBadge","BadgeLabel","AnsweredBadgeIcon","AnsweredStatusBadge","clGreenSuccessBackground","IneligibleBadgeIcon","IneligibleStatusBadge","CustomStatusBadge","mediumGrey","ExpiredText","ExpiredIcon","VoteIndicator","VoteIndicatorWithHOCs","StyledGoToCommentsButton","commentingEnabled","commenting_idea","IdeaCardContainer","IdeaPageContainer","BudgetWithButtonWrapper","Budget","StyledPBExpenses","PBExpenses","basket","user_basket","processing","setProcessing","assignBudget","ms","resolve","done","isBudgetingEnabled","budgeting","basketIdeaIds","ideas","isInBasket","budgetingDisabledReason","newIdeas","basketIdea","updateBasket","participation_context_id","participation_context_type","capitalizeParticipationContextType","idea_ids","submitted_at","ideaAddedToBasket","dataId","addBasket","basketCreated","budget","isPermitted","hasBudgetingDisabledReason","isPBContext","isCurrentPhase","getCurrentPhase","isCurrent","publication_status","addRemoveButton","clRedError","iconSize","viewMode","AssignBudgetControlWrapper","isUndefinedOrError","refetchAllActiveIdeas","ideaEndpointRegexp","RegExp","uuidRegExp","regexApiEndpoint","onlyFetchActiveStreams","_ideaId","noResultsFound","goBackToList","moreInfo","days","hours","minutes","answeredStatusExplanation","answeredStatusExplanationBold","xPeopleVoted","xPeople","adminSeparation","Inner","rightContent","leftContent","onTranslate","StyledIdeasShow","menuHeight","footerHeight","mobileMenuHeight","navbarRef","mobileNavbarRef","windowWidth","topBar","onClose","TooltipWrapper","HelpIcon","clickUpvote","clickDownvote","GetPermission","permission","hasPermission","StyledInitiativeMoreActions","ActionBar","onTranslateInitiative","allInitiatives","invisibleTitleContent","learnMore","shareTitle","shareSubtitle","a11y_voteControl","InitiativesIcon","adminTextColor","PostedByWrapper","AboutInitiativesLink","showAboutInitiatives","InitiativeContainer","StyledTopics","InitiativeHeader","InitiativeBannerContainer","InitiativeBannerImage","InitiativeHeaderOverlay","InitiativeBannerContent","MobileMoreActionContainer","StyledDropdownMap","DropdownMap","RightColumn","MetaContent","SharingButtonsMobile","SharingButtons","StyledVoteControl","InitiativesShow","createRef","initiativeIdForSocialSharing","officialFeedbackElement","current","inline","a11y_pronounceLatestOfficialFeedbackPost","timeoutRef","newInitiativeId","clearTimeout","initiativeFiles","daysLimit","days_limit","initiativeHeaderImageLarge","header_bg","initiativeImageLarge","initiativeGeoPosition","initiativeAddress","initiativeBody","isDesktop","isNotDesktop","align","closeInitiativeSocialSharingModal","InitiativesShowWithHOCs","slideInOutTimeout","slideInOutEasing","windowHeight","StyledFocusOn","FocusOn","useCapture","FullscreenModal","goBackUrl","removeLocale","pushState","path","handlePopstateEvent","handleKeypress","unlisten","listen","trackPage","modal","isFunction","innerHeight","fromEvent","debounceTime","height","openModal","cleanup","bottomBar","animateInOut","shards","modalPortalElement","modalContent","autoFocus","createPortal","TimeComponent","Count","Unit","refresh","Date","now","interval","setInterval","clearInterval","start","end","durationAsSeconds","formattedDuration","convertSecondsToDDHHMM","split","hoursLeft","minutesLeft","Buttons","ideaCustomFieldsSchema","topicsEnabled","locationEnabled","attachmentsEnabled","noInitiativeFoundHere","StyledAttachment","Attachment","isLastItem","Array","isArray","index","padding","textDecorationHover","fieldCode","ui_schema_multiloc","GetComments","pageNumber","pageSize","sort","hasMore","loadMore$","sort$","commentsList","loadingInital","loadingMore","postId$","postType$","initialQueryParameters","mergeScan","commentsForIdeaStream","commentsForInitiativeStream","queryParameters","selfLink","lastLink","unionBy","onLoadMore","loadMore","onChangeSort","changeSort"],"mappings":"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","file":"67.919be4e115494b84bd56.chunk.js","sourcesContent":["import React from 'react';\nimport ButtonWithDropdown from 'components/UI/ButtonWithDropdown';\nimport SharingDropdownContent from './SharingDropdownContent';\nimport { UtmParams } from '../utils';\n\ninterface Props {\n  className?: string;\n  twitterMessage: string;\n  whatsAppMessage: string;\n  emailSubject: string;\n  emailBody: string;\n  utmParams: UtmParams;\n  url: string;\n  buttonComponent: JSX.Element;\n}\n\nconst SharingDropdownButton = ({\n  className,\n  url,\n  twitterMessage,\n  whatsAppMessage,\n  emailSubject,\n  emailBody,\n  utmParams,\n  buttonComponent,\n}: Props) => {\n  return (\n    <ButtonWithDropdown\n      className={className}\n      buttonComponent={buttonComponent}\n      dropdownContent={\n        <SharingDropdownContent\n          url={url}\n          twitterMessage={twitterMessage}\n          whatsAppMessage={whatsAppMessage}\n          emailSubject={emailSubject}\n          emailBody={emailBody}\n          utmParams={utmParams}\n        />\n      }\n    />\n  );\n};\n\nexport default SharingDropdownButton;\n","import React from 'react';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst LoadingMessage = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.medium}px;\n  font-weight: 400;\n`;\n\ninterface Props {\n  className?: string;\n}\n\nexport default (props: Props) => (\n  <Container className={props.className}>\n    <LoadingMessage>\n      <FormattedMessage {...messages.loadingComments} />\n    </LoadingMessage>\n  </Container>\n);\n","import React, { MouseEvent, memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Link from 'utils/cl-router/Link';\n\n// services\nimport { IIdeaData } from 'services/ideas';\nimport { IParticipationContextType } from 'typings';\n\n// hooks\nimport useProject from 'hooks/useProject';\nimport useAuthUser from 'hooks/useAuthUser';\n\n// i18n\nimport messages from './messages';\nimport T from 'components/T';\nimport { FormattedDate } from 'react-intl';\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// utils\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// styling\nimport styled from 'styled-components';\nimport { fontSizes, colors } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\nconst Container = styled.div`\n  width: 100%;\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  font-weight: 300;\n  line-height: 20px;\n\n  > span {\n    overflow-wrap: break-word;\n    word-wrap: break-word;\n    word-break: break-word;\n    hyphens: auto;\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${colors.clBlueDark};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${darken(0.15, colors.clBlueDark)};\n    text-decoration: underline;\n  }\n`;\n\nconst StyledButton = styled.button`\n  color: ${colors.clBlueDark};\n  text-decoration: underline;\n  transition: all 80ms ease-out;\n  display: inline-block;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n\n  &:hover {\n    color: ${darken(0.15, colors.clBlueDark)};\n    text-decoration: underline;\n  }\n`;\n\ninterface Props {\n  projectId: string;\n  votingDescriptor: IIdeaData['attributes']['action_descriptor']['voting_idea'];\n}\n\nconst VotingDisabled = memo(({ projectId, votingDescriptor }: Props) => {\n  const project = useProject({ projectId });\n  const authUser = useAuthUser();\n\n  const onVerify = (\n    pcType: IParticipationContextType,\n    // it's theoretically possible to have a timeline project\n    // with no phases, in which case we would have no phase id\n    pcId: string | undefined\n  ) => (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    if (pcId && pcType) {\n      openVerificationModal({\n        context: {\n          action: 'voting_idea',\n          id: pcId,\n          type: pcType,\n        },\n      });\n    }\n  };\n\n  const removeFocus = (event: React.MouseEvent) => {\n    event.preventDefault();\n  };\n\n  const reasonToMessage = () => {\n    const { disabled_reason, future_enabled } = votingDescriptor;\n\n    if (disabled_reason === 'project_inactive') {\n      return future_enabled\n        ? messages.votingPossibleLater\n        : messages.votingDisabledProjectInactive;\n    } else if (disabled_reason === 'voting_disabled' && future_enabled) {\n      return messages.votingPossibleLater;\n    } else if (disabled_reason === 'voting_limited_max_reached') {\n      return messages.votingDisabledMaxReached;\n    } else if (disabled_reason === 'idea_not_in_current_phase') {\n      return future_enabled\n        ? messages.votingDisabledFutureEnabled\n        : messages.votingDisabledPhaseOver;\n    } else if (disabled_reason === 'not_permitted') {\n      return messages.votingNotPermitted;\n    } else if (authUser && disabled_reason === 'not_verified') {\n      return messages.votingNotVerified;\n    } else {\n      return messages.votingNotEnabled;\n    }\n  };\n\n  const stopPropagation = (event: MouseEvent | KeyboardEvent) => {\n    event.stopPropagation();\n  };\n\n  if (!isNilOrError(project)) {\n    const getProjectLink = () => {\n      const projectTitle = project.attributes.title_multiloc;\n\n      return (\n        <StyledLink\n          to={`/projects/${project.attributes.slug}`}\n          onClick={stopPropagation}\n        >\n          <T value={projectTitle} />\n        </StyledLink>\n      );\n    };\n    const message = reasonToMessage();\n    const enabledFromDate = votingDescriptor.future_enabled ? (\n      <FormattedDate\n        value={votingDescriptor.future_enabled}\n        year=\"numeric\"\n        month=\"long\"\n        day=\"numeric\"\n      />\n    ) : null;\n    const projectName = getProjectLink();\n    const pcType =\n      project.attributes.process_type === 'continuous' ? 'project' : 'phase';\n    const pcId =\n      pcType === 'project'\n        ? project.id\n        : project.relationships?.current_phase?.data?.id;\n    const verificationLink = (\n      <StyledButton\n        className=\"e2e-verify-button\"\n        onClick={onVerify(pcType, pcId)}\n        onMouseDown={removeFocus}\n      >\n        <FormattedMessage {...messages.linkToVerificationText} />\n      </StyledButton>\n    );\n\n    return (\n      <Container data-testid=\"votingDisabled_Container\">\n        <FormattedMessage\n          {...message}\n          values={{\n            enabledFromDate,\n            projectName,\n            verificationLink,\n          }}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nexport default VotingDisabled;\n","import { useState, useEffect } from 'react';\nimport { IIdeaStatusData, ideaStatusStream } from 'services/ideaStatuses';\n\nexport default function useIdeaStatus({ statusId }) {\n  const [ideaStatus, setIdeaStatus] = useState<IIdeaStatusData | Error | null>(\n    null\n  );\n\n  useEffect(() => {\n    const observable = ideaStatusStream(statusId).observable;\n\n    const subscription = observable.subscribe((response) => {\n      setIdeaStatus(response.data);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [statusId]);\n\n  return ideaStatus;\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  xComments: {\n    id: 'app.components.InitiativeCard.xComments',\n    defaultMessage:\n      '{commentsCount, plural, =0 {no comments} one {1 comment} other {# comments}}',\n  },\n  xVotesOfY: {\n    id: 'app.components.InitiativeCard.xVotesOfY',\n    defaultMessage:\n      '{xVotes, plural, =0 {no votes} one {1 vote} other {# votes}} out of {votingThreshold}',\n  },\n});\n","import React, { PureComponent } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\nimport { getInputTerm } from 'services/participationContexts';\n\n// components\nimport SharingButtons from 'components/Sharing/SharingButtons';\nimport { Spinner } from 'cl2-component-library';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetProject, { GetProjectChildProps } from 'resources/GetProject';\nimport GetPhases, { GetPhasesChildProps } from 'resources/GetPhases';\nimport { PostType } from 'resources/GetPost';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport localize, { InjectedLocalized } from 'utils/localize';\nimport messages from './messages';\nimport { getInputTermMessage } from 'utils/i18n';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from './tracks';\n\n// style\nimport styled from 'styled-components';\nimport { fontSizes, media } from 'utils/styleUtils';\nimport rocket from './rocket.png';\n\nconst Loading = styled.div`\n  width: 100%;\n  height: 460px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Rocket = styled.img`\n  width: 40px;\n  height: 40px;\n\n  ${media.smallerThanMaxTablet`\n    width: 35px;\n    height: 35px;\n  `}\n`;\n\nconst Title = styled.h1`\n  flex-shrink: 0;\n  width: 100%;\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.xxxxl}px;\n  line-height: 40px;\n  font-weight: 500;\n  text-align: center;\n  margin: 0;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  padding: 0;\n\n  ${media.smallerThanMaxTablet`\n    max-width: auto;\n    font-size: ${fontSizes.xxxl}px;\n    line-height: 36px;\n  `}\n`;\n\nconst Description = styled.p`\n  flex-shrink: 0;\n  width: 100%;\n  max-width: 500px;\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.large}px;\n  line-height: 25px;\n  font-weight: 300;\n  text-align: center;\n  margin: 0;\n  margin-top: 10px;\n  margin-bottom: 50px;\n  padding: 0;\n\n  ${media.smallerThanMaxTablet`\n    font-size: ${fontSizes.base}px;\n    line-height: 21px;\n  `}\n`;\n\nconst SharingWrapper = styled.div`\n  flex-shrink: 0;\n  width: 100%;\n  max-width: 300px;\n  display: flex;\n  flex-direction: column;\n`;\n\ninterface InputProps {\n  postType: PostType;\n  postId: string | null;\n  className?: string;\n  title: string;\n  subtitle: string;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n  authUser: GetAuthUserChildProps;\n  idea: GetIdeaChildProps;\n  initiative: GetInitiativeChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass SharingModalContent extends PureComponent<\n  Props & InjectedIntlProps & InjectedLocalized,\n  State\n> {\n  componentDidMount() {\n    const { postId, postType } = this.props;\n\n    trackEventByName(tracks.sharingModalOpened.name, {\n      postId,\n      postType,\n    });\n  }\n\n  getPostValues = () => {\n    const { postType, idea, initiative, localize, locale } = this.props;\n    let postTitle: string | null = null;\n    let postUrl: string | null = null;\n\n    if (postType === 'idea' && !isNilOrError(idea)) {\n      postTitle = localize(idea.attributes.title_multiloc);\n      postUrl = `${location.origin}/${locale}/${postType}s/${idea.attributes.slug}`;\n    }\n\n    if (postType === 'initiative' && !isNilOrError(initiative)) {\n      postTitle = localize(initiative.attributes.title_multiloc);\n      postUrl = `${location.origin}/${locale}/${postType}s/${initiative.attributes.slug}`;\n    }\n\n    return { postTitle, postUrl };\n  };\n\n  getIdeaMessages = () => {\n    const { project, phases } = this.props;\n    let emailSharingSubject: ReactIntl.FormattedMessage.MessageDescriptor | null = null;\n    let emailSharingBody: ReactIntl.FormattedMessage.MessageDescriptor | null = null;\n    let whatsAppMessage: ReactIntl.FormattedMessage.MessageDescriptor | null = null;\n\n    if (!isNilOrError(project)) {\n      const inputTerm = getInputTerm(\n        project.attributes.process_type,\n        project,\n        phases\n      );\n\n      emailSharingSubject = getInputTermMessage(inputTerm, {\n        idea: messages.ideaEmailSharingSubjectText,\n        option: messages.optionEmailSharingSubject,\n        project: messages.projectEmailSharingSubject,\n        question: messages.questionEmailSharingSubject,\n        issue: messages.issueEmailSharingSubject,\n        contribution: messages.contributionEmailSharingSubject,\n      });\n      emailSharingBody = getInputTermMessage(inputTerm, {\n        idea: messages.ideaEmailSharingBody,\n        option: messages.optionEmailSharingBody,\n        project: messages.projectEmailSharingBody,\n        question: messages.questionEmailSharingModalContentBody,\n        issue: messages.issueEmailSharingBody,\n        contribution: messages.contributionEmailSharingBody,\n      });\n      whatsAppMessage = getInputTermMessage(inputTerm, {\n        idea: messages.ideaWhatsAppMessage,\n        option: messages.optionWhatsAppMessage,\n        project: messages.projectWhatsAppMessage,\n        question: messages.questionWhatsAppMessage,\n        issue: messages.issueWhatsAppMessage,\n        contribution: messages.contributionWhatsAppMessage,\n      });\n    }\n\n    return { emailSharingSubject, emailSharingBody, whatsAppMessage };\n  };\n\n  getInitiativeMessages = () => {\n    const emailSharingSubject = messages.initiativeEmailSharingSubject;\n    const emailSharingBody = messages.initiativeEmailSharingBody;\n    const whatsAppMessage = messages.whatsAppMessageProposal;\n\n    return { emailSharingSubject, emailSharingBody, whatsAppMessage };\n  };\n\n  getMessages = () => {\n    const { postType } = this.props;\n\n    if (postType === 'idea') {\n      return this.getIdeaMessages();\n    } else {\n      return this.getInitiativeMessages();\n    }\n  };\n\n  render() {\n    const { postType, authUser, className, title, subtitle } = this.props;\n    const { formatMessage } = this.props.intl;\n\n    const { postTitle, postUrl } = this.getPostValues();\n    const {\n      emailSharingBody,\n      emailSharingSubject,\n      whatsAppMessage,\n    } = this.getMessages();\n\n    if (\n      !isNilOrError(authUser) &&\n      postUrl &&\n      emailSharingBody &&\n      emailSharingSubject &&\n      whatsAppMessage\n    ) {\n      return (\n        <Container className={className}>\n          <Rocket src={rocket} alt=\"rocket\" />\n          <Title className={`e2e-${postType}-social-sharing-modal-title`}>\n            {title}\n          </Title>\n          <Description>{subtitle}</Description>\n          <SharingWrapper>\n            <SharingButtons\n              context={postType}\n              isInModal\n              url={postUrl}\n              twitterMessage={formatMessage(messages.twitterMessage, {\n                postTitle,\n              })}\n              whatsAppMessage={formatMessage(whatsAppMessage, {\n                postTitle,\n              })}\n              emailSubject={formatMessage(emailSharingSubject, { postTitle })}\n              emailBody={formatMessage(emailSharingBody, {\n                postTitle,\n                postUrl,\n              })}\n              utmParams={{\n                source: `share_${postType}`,\n                campaign: `${postType}flow`,\n                content: authUser.id,\n              }}\n            />\n          </SharingWrapper>\n        </Container>\n      );\n    }\n\n    return (\n      <Loading>\n        <Spinner />\n      </Loading>\n    );\n  }\n}\n\nconst SharingModalContentWithHoCs = injectIntl<Props>(\n  localize(SharingModalContent)\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n  idea: ({ postId, postType, render }) => (\n    <GetIdea ideaId={postId && postType === 'idea' ? postId : null}>\n      {render}\n    </GetIdea>\n  ),\n  initiative: ({ postId, postType, render }) => (\n    <GetInitiative id={postId && postType === 'initiative' ? postId : null}>\n      {render}\n    </GetInitiative>\n  ),\n  project: ({ idea, render }) => (\n    <GetProject\n      projectId={\n        !isNilOrError(idea) ? idea.relationships.project.data.id : null\n      }\n    >\n      {render}\n    </GetProject>\n  ),\n  phases: ({ idea, render }) => (\n    <GetPhases\n      projectId={\n        !isNilOrError(idea) ? idea.relationships.project.data.id : null\n      }\n    >\n      {render}\n    </GetPhases>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => (\n      <SharingModalContentWithHoCs {...inputProps} {...dataProps} />\n    )}\n  </Data>\n);\n","import React, { FC } from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { Icon, IconNames } from 'cl2-component-library';\nimport { colors } from 'utils/styleUtils';\n\nconst enterAnimation = keyframes`\n  0% {\n    transform: scale(1, 0);\n    opacity: 0;\n  }\n  5% { transform: scale(1,0.17942745647835484); }\n  10% { transform: scale(1,0.5453767165955569); }\n  15% { transform: scale(1,0.894404964443162); }\n  20% { transform: scale(1,1.1203760160160154); }\n  25% { transform: scale(1,1.2051533263082377); }\n  30% { transform: scale(1,1.1848074616294655); }\n  35% { transform: scale(1,1.1134007773010595); }\n  40% { transform: scale(1,1.037247338664745); }\n  45% { transform: scale(1,0.9833121263387835); }\n  50% { transform: scale(1,0.9591514931191875); opacity: 1; }\n  55% { transform: scale(1,0.9592070055589312); }\n  60% { transform: scale(1,0.9725345308087797); }\n  65% { transform: scale(1,0.9888015967917715); }\n  70% { transform: scale(1,1.0013794350134355); }\n  75% { transform: scale(1,1.0078326552211365); }\n  80% { transform: scale(1,1.008821093113004); }\n  85% { transform: scale(1,1.0064881982177143); }\n  90% { transform: scale(1,1.0030929569279976); }\n  95% { transform: scale(1,1.00022141474777); }\n  100% {\n    transform: scale(1, 1);\n  }\n`;\n\nconst Container = styled.div`\n  background-color: #fff;\n  position: relative;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  border: solid 1px ${colors.separation};\n  margin-top: 0px;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  animation: ${css`\n    ${enterAnimation} 450ms linear\n  `};\n  transform-origin: center center;\n`;\n\nconst IconWrapper = styled.div`\n  width: 42px;\n  height: 42px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background: #f0f0f0;\n  margin-bottom: 15px;\n`;\n\nconst StyledIcon = styled(Icon)`\n  height: 20px;\n  fill: #333;\n`;\n\ninterface Props {\n  icon?: IconNames;\n  children: React.ReactNode;\n}\n\n/** A bordered container with an icon that animates in with a bouncy animation */\nconst PopContainer: FC<Props> = ({ icon, children }) => {\n  return (\n    <Container>\n      {icon && (\n        <IconWrapper>\n          <StyledIcon name={icon} />\n        </IconWrapper>\n      )}\n      {children}\n    </Container>\n  );\n};\n\nexport default PopContainer;\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { adopt } from 'react-adopt';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport HasPermission from 'components/HasPermission';\nimport MoreActionsMenu from 'components/UI/MoreActionsMenu';\nimport Modal from 'components/UI/Modal';\nimport SpamReportForm from 'containers/SpamReport';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from '../messages';\nimport { InjectedIntlProps } from 'react-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\n\n// services\nimport { deleteInitiative, IInitiativeData } from 'services/initiatives';\n\n// router\nimport clHistory from 'utils/cl-router/history';\n\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\n\nconst Container = styled.div``;\n\nconst MoreActionsMenuWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin-left: 35px;\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  className?: string;\n  color?: string;\n  id: string;\n}\n\ninterface DataProps {\n  authUser: GetAuthUserChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {\n  spamModalVisible: boolean;\n}\n\nclass InitiativeMoreActions extends PureComponent<\n  Props & InjectedIntlProps,\n  State\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spamModalVisible: false,\n    };\n  }\n\n  openSpamModal = () => {\n    this.setState({ spamModalVisible: true });\n  };\n\n  closeSpamModal = () => {\n    this.setState({ spamModalVisible: false });\n  };\n\n  onEditInitiative = () => {\n    clHistory.push(`/initiatives/edit/${this.props.initiative.id}`);\n  };\n\n  onDeleteInitiative = (initiativeId: string) => () => {\n    const message = this.props.intl.formatMessage(\n      messages.deleteInitiativeConfirmation\n    );\n\n    if (window.confirm(message)) {\n      deleteInitiative(initiativeId);\n      clHistory.goBack();\n    }\n  };\n\n  render() {\n    const { initiative, className, authUser, color, id } = this.props;\n    const { spamModalVisible } = this.state;\n\n    if (!isNilOrError(authUser) && !isNilOrError(initiative)) {\n      return (\n        <Container className={className}>\n          <MoreActionsMenuWrapper>\n            <HasPermission item={initiative} action=\"edit\" context={initiative}>\n              <MoreActionsMenu\n                label={<FormattedMessage {...messages.moreOptions} />}\n                color={color}\n                id={id}\n                actions={[\n                  {\n                    label: <FormattedMessage {...messages.reportAsSpam} />,\n                    handler: this.openSpamModal,\n                  },\n                  {\n                    label: <FormattedMessage {...messages.editInitiative} />,\n                    handler: this.onEditInitiative,\n                  },\n                  {\n                    label: <FormattedMessage {...messages.deleteInitiative} />,\n                    handler: this.onDeleteInitiative(initiative.id),\n                  },\n                ]}\n              />\n              <HasPermission.No>\n                <MoreActionsMenu\n                  label={<FormattedMessage {...messages.moreOptions} />}\n                  color={color}\n                  id={id}\n                  actions={[\n                    {\n                      label: <FormattedMessage {...messages.reportAsSpam} />,\n                      handler: this.openSpamModal,\n                    },\n                  ]}\n                />\n              </HasPermission.No>\n            </HasPermission>\n          </MoreActionsMenuWrapper>\n          <Modal\n            opened={spamModalVisible}\n            close={this.closeSpamModal}\n            header={<FormattedMessage {...messages.reportAsSpamModalTitle} />}\n          >\n            <SpamReportForm\n              resourceId={initiative.id}\n              resourceType=\"initiatives\"\n            />\n          </Modal>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst InitiativeMoreActionsWithHOCs = injectIntl(InitiativeMoreActions);\n\nconst Data = adopt<DataProps, InputProps>({\n  authUser: <GetAuthUser />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => (\n      <InitiativeMoreActionsWithHOCs {...inputProps} {...dataProps} />\n    )}\n  </Data>\n);\n","import { IInitiativeAction } from 'services/initiatives';\nimport { ActionPermission } from 'services/actionTakingRules';\nimport useInitiativesPermissions, {\n  IInitiativeDisabledReason,\n} from 'hooks/useInitiativesPermissions';\n\ninterface InputProps {}\n\ntype children = (\n  renderProps: GetInitiativesPermissionsChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n  action: IInitiativeAction;\n}\n\nexport type GetInitiativesPermissionsChildProps =\n  | ActionPermission<IInitiativeDisabledReason>\n  | undefined;\n\nexport default ({ children, action }: Props) => {\n  const initiativesPermissions = useInitiativesPermissions(action);\n  return (children as children)(initiativesPermissions);\n};\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  remove: {\n    id: 'app.components.AssignBudgetControl.remove',\n    defaultMessage: 'Remove',\n  },\n  removeFromMyBasket: {\n    id: 'app.components.AssignBudgetControl.removeFromMyBasket',\n    defaultMessage: 'Remove from my basket',\n  },\n  add: {\n    id: 'app.components.AssignBudgetControl.add',\n    defaultMessage: 'Add',\n  },\n  addToMyBasket: {\n    id: 'app.components.AssignBudgetControl.addToMyBasket',\n    defaultMessage: 'Add to my basket',\n  },\n  budgetingNotPossible: {\n    id: 'app.components.VoteControl.budgetingNotPossible',\n    defaultMessage:\n      'Making changes to your budget is not possible at this time.',\n  },\n  budgetingFutureEnabled: {\n    id: 'app.components.VoteControl.budgetingFutureEnabled',\n    defaultMessage:\n      'You can allocate your budget starting from {enabledFromDate}.',\n  },\n  budgetingNotPermitted: {\n    id: 'app.components.VoteControl.budgetingNotPermitted',\n    defaultMessage:\n      'Participatory budgeting is only enabled for certain groups.',\n  },\n  budgetingNotVerified: {\n    id: 'app.components.VoteControl.budgetingNotVerified',\n    defaultMessage: 'Please {verifyAccountLink} to continue.',\n  },\n  verifyAccountLinkText: {\n    id: 'app.components.AssignBudgetControl.verifyAccountLinkText',\n    defaultMessage: 'verify your account',\n  },\n  a11y_price: {\n    id: 'app.components.AssignBudgetControl.a11y_price',\n    defaultMessage: 'Price: ',\n  },\n  backToOverview: {\n    id: 'app.components.AssignBudgetControl.backToOverview',\n    defaultMessage: 'Back to overview',\n  },\n});\n","const columnsGapDesktop = 100;\nconst rightColumnWidthDesktop = 360;\nconst columnsGapTablet = 60;\nconst rightColumnWidthTablet = 300;\nconst pageContentMaxWidth = 1210;\n\nexport {\n  columnsGapDesktop,\n  rightColumnWidthDesktop,\n  columnsGapTablet,\n  rightColumnWidthTablet,\n  pageContentMaxWidth,\n};\n","export default __webpack_public_path__ + \"aaae759b408aa34fd8afbcefb716a1ab.png\";","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\n\nexport type CustomFieldCodes =\n  | 'title'\n  | 'body'\n  | 'topic_ids'\n  | 'location'\n  | 'images'\n  | 'attachments'\n  | 'proposed_budget';\n\nexport interface JSONSchemaObject {\n  title: string;\n  description: string;\n  type: 'string' | 'array';\n  uniqueItems?: boolean;\n  minItems?: number;\n  items?: {\n    type: 'string' | 'array';\n    format?: 'data-url' | 'string';\n  };\n}\n\nexport interface UISchemaObject {\n  'ui:widget'?: string;\n}\n\nexport interface IIdeaFormSchemas {\n  json_schema_multiloc: {\n    [locale: string]: {\n      type: 'object';\n      additionalProperties: boolean;\n      properties: {\n        title: JSONSchemaObject;\n        body: JSONSchemaObject;\n        topic_ids: JSONSchemaObject;\n        proposed_budget: JSONSchemaObject;\n        location: JSONSchemaObject;\n        images: JSONSchemaObject;\n        attachments: JSONSchemaObject;\n      };\n      required: string[];\n    };\n  };\n  ui_schema_multiloc: {\n    [locale: string]: {\n      title: UISchemaObject;\n      body: UISchemaObject;\n      topic_ids: UISchemaObject;\n      proposed_budget: UISchemaObject;\n      location: UISchemaObject;\n      images: UISchemaObject;\n      attachments: UISchemaObject;\n      'ui:order': string[];\n    };\n  };\n}\n\nexport function ideaFormSchemaStream(\n  projectId: string,\n  streamParams: IStreamParams | null = null\n) {\n  const apiEndpoint = `${API_PATH}/projects/${projectId}/custom_fields/schema`;\n  return streams.get<IIdeaFormSchemas>({\n    apiEndpoint,\n    ...streamParams,\n  });\n}\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { colors } from 'utils/styleUtils';\n\nconst Image = styled.img`\n  width: 100%;\n  margin-bottom: 25px;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  border: 1px solid ${colors.separation};\n`;\n\ninterface Props {\n  src: string;\n  alt: string;\n  id?: string;\n}\n\nexport default memo<Props>(({ src, alt, id }) => (\n  <Image src={src} alt={alt} id={id} />\n));\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\nimport useIdeaStatus from 'hooks/useIdeaStatus';\nimport T from 'components/T';\nimport styled from 'styled-components';\nimport { transparentize } from 'polished';\nimport { fontSizes } from 'utils/styleUtils';\n\nconst Container = styled.div<{ color: string }>`\n  color: ${({ color }) => color};\n  font-size: ${fontSizes.xs}px;\n  font-weight: 600;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: normal;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n  hyphens: auto;\n  padding: 5px 8px;\n  display: inline-block;\n  border-radius: ${({ theme }) => theme.borderRadius};\n  border: 1px solid ${({ color }) => transparentize(0.7, color)};\n`;\n\ninterface Props {\n  statusId: string;\n  className?: string;\n  id?: string;\n}\n\nconst StatusBadge = memo<Props>(({ statusId, id, className }) => {\n  const ideaStatus = useIdeaStatus({ statusId });\n\n  if (!isNilOrError(ideaStatus)) {\n    const color = ideaStatus?.attributes?.color || '#bbb';\n\n    return (\n      <Container id={id || ''} className={className || ''} color={color}>\n        <T value={ideaStatus.attributes.title_multiloc} />\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nexport default StatusBadge;\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { Subscription, BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap, filter } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  projectFilesStream,\n  IProjectFileData,\n  IProjectFiles,\n} from 'services/projectFiles';\nimport {\n  phaseFilesStream,\n  IPhaseFileData,\n  IPhaseFiles,\n} from 'services/phaseFiles';\nimport {\n  eventFilesStream,\n  IEventFileData,\n  IEventFiles,\n} from 'services/eventFiles';\nimport { pageFilesStream, IPageFileData, IPageFiles } from 'services/pageFiles';\nimport { ideaFilesStream, IIdeaFileData, IIdeaFiles } from 'services/ideaFiles';\nimport {\n  initiativeFilesStream,\n  IInitiativeFileData,\n  IInitiativeFiles,\n} from 'services/initiativeFiles';\n\nimport { isNilOrError } from 'utils/helperUtils';\n\nexport type ResourceType =\n  | 'project'\n  | 'phase'\n  | 'event'\n  | 'page'\n  | 'idea'\n  | 'initiative';\n\nexport type IResourceFileData =\n  | IProjectFileData\n  | IPhaseFileData\n  | IEventFileData\n  | IPageFileData\n  | IIdeaFileData\n  | IInitiativeFileData;\n\nexport type IResourceFiles =\n  | IProjectFiles\n  | IPhaseFiles\n  | IEventFiles\n  | IPageFiles\n  | IIdeaFiles\n  | IInitiativeFiles;\n\ninterface InputProps {\n  resetOnChange?: boolean;\n  resourceType: ResourceType;\n  resourceId: string | null;\n}\n\ntype Children = (renderProps: GetResourceFilesChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: Children;\n}\n\ninterface State {\n  files: IResourceFileData[] | undefined | null | Error;\n}\n\nexport type GetResourceFilesChildProps = State['files'];\n\nexport default class GetResourceFiles extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  public static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      files: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { resourceId, resourceType, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ resourceId, resourceType });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(() => resetOnChange && this.setState({ files: undefined })),\n          filter(({ resourceId }) => isString(resourceId)),\n          switchMap(\n            ({\n              resourceId,\n              resourceType,\n            }: {\n              resourceId: string;\n              resourceType: InputProps['resourceType'];\n            }) => {\n              let streamFn;\n              if (resourceType === 'project') {\n                streamFn = projectFilesStream;\n              }\n              if (resourceType === 'phase') {\n                streamFn = phaseFilesStream;\n              }\n              if (resourceType === 'event') {\n                streamFn = eventFilesStream;\n              }\n              if (resourceType === 'page') {\n                streamFn = pageFilesStream;\n              }\n              if (resourceType === 'idea') {\n                streamFn = ideaFilesStream;\n              }\n              if (resourceType === 'initiative') {\n                streamFn = initiativeFilesStream;\n              }\n\n              return streamFn(resourceId)\n                .observable as Observable<IResourceFiles | null>;\n            }\n          )\n        )\n        .subscribe((files) => {\n          this.setState({ files: !isNilOrError(files) ? files.data : files });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { resourceId, resourceType, resetOnChange } = this.props;\n    this.inputProps$.next({ resourceId, resourceType, resetOnChange });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { files } = this.state;\n    return (children as Children)(files);\n  }\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  postedBy: {\n    id: 'app.containers.IdeasShow.MetaInformation.postedBy',\n    defaultMessage: 'Posted by',\n  },\n  currentStatus: {\n    id: 'app.containers.IdeasShow.MetaInformation.currentStatus',\n    defaultMessage: 'Current status',\n  },\n  topics: {\n    id: 'app.containers.IdeasShow.MetaInformation.topics',\n    defaultMessage: 'Topics',\n  },\n  location: {\n    id: 'app.containers.IdeasShow.MetaInformation.location',\n    defaultMessage: 'Location',\n  },\n  attachments: {\n    id: 'app.containers.IdeasShow.MetaInformation.attachments',\n    defaultMessage: 'Attachments',\n  },\n  byUserOnDate: {\n    id: 'app.containers.IdeasShow.MetaInformation.byUserOnDate',\n    defaultMessage: '{userName} on {date}',\n  },\n});\n","import React from 'react';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\nimport Topics from 'components/PostShowComponents/Topics';\nimport useIdea from 'hooks/useIdea';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\ninterface Props {\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst IdeaTopics = ({\n  ideaId,\n  compact,\n  className,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  const idea = useIdea({ ideaId });\n\n  if (!isNilOrError(idea)) {\n    const topicIds =\n      idea.relationships.topics?.data.map((item) => item.id) || [];\n\n    if (topicIds.length > 0) {\n      return (\n        <Item className={className || ''} compact={compact}>\n          <Header>{formatMessage(messages.topics)}</Header>\n          <Topics postType=\"idea\" topicIds={topicIds} />\n        </Item>\n      );\n    }\n  }\n\n  return null;\n};\n\nexport default injectIntl(IdeaTopics);\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { IIdeaImageData, ideaImagesStream } from 'services/ideaImages';\nimport { isString } from 'lodash-es';\n\ninterface InputProps {\n  ideaId: string | null;\n}\n\ntype children = (renderProps: GetIdeaImagesChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  ideaImages: IIdeaImageData[] | undefined | null;\n}\n\nexport type GetIdeaImagesChildProps = IIdeaImageData[] | undefined | null;\n\nexport default class GetIdeaImages extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      ideaImages: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { ideaId } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ ideaId });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ ideaId }) => {\n            if (isString(ideaId)) {\n              return ideaImagesStream(ideaId).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((ideaImages) => {\n          this.setState({ ideaImages: ideaImages ? ideaImages.data : null });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { ideaId } = this.props;\n    this.inputProps$.next({ ideaId });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { ideaImages } = this.state;\n    return (children as children)(ideaImages);\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { isString, get, isEmpty, includes } from 'lodash-es';\nimport {\n  BehaviorSubject,\n  Subscription,\n  Observable,\n  combineLatest,\n  of,\n} from 'rxjs';\nimport { filter, map, switchMap, distinctUntilChanged } from 'rxjs/operators';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { withRouter, WithRouterProps } from 'react-router';\n\n// i18n\nimport { injectIntl, FormattedMessage } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\nimport { LiveMessage } from 'react-aria-live';\n\n// components\nimport { Icon } from 'cl2-component-library';\n\n// services\nimport { authUserStream } from 'services/auth';\nimport {\n  ideaByIdStream,\n  IIdea,\n  IdeaVotingDisabledReason,\n} from 'services/ideas';\nimport { IUser } from 'services/users';\nimport { voteStream, addVote, deleteVote } from 'services/ideaVotes';\nimport { projectByIdStream, IProject, IProjectData } from 'services/projects';\nimport {\n  phaseStream,\n  IPhase,\n  IPhaseData,\n  getLatestRelevantPhase,\n} from 'services/phases';\n\n// utils\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// style\nimport styled, { css, keyframes } from 'styled-components';\nimport { colors, fontSizes, defaultStyles, isRtl } from 'utils/styleUtils';\nimport { lighten } from 'polished';\n\n// typings\nimport { IParticipationContextType } from 'typings';\n\ninterface IVoteComponent {\n  active: boolean;\n  enabled: boolean | null;\n}\n\ntype TSize = '1' | '2' | '3' | '4';\ntype TStyleType = 'border' | 'shadow';\n\nconst voteKeyframeAnimation = keyframes`\n  from {\n    transform: scale3d(1, 1, 1);\n  }\n\n  40% {\n    transform: scale3d(1.25, 1.25, 1.25);\n  }\n\n  to {\n    transform: scale3d(1, 1, 1);\n  }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  * {\n    user-select: none;\n  }\n`;\n\nconst VoteIconContainer = styled.div<{\n  size: TSize;\n  votingEnabled: boolean | null;\n  styleType: TStyleType;\n}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1px;\n  border-radius: 50%;\n  transition: all 60ms ease-out;\n  background-color: white;\n\n  ${({ styleType }) => {\n    return (\n      styleType === 'border' &&\n      css`\n        border: solid 1px ${lighten(0.2, colors.label)};\n      `\n    );\n  }}\n\n\n  ${({ styleType, votingEnabled }) => {\n    return (\n      styleType === 'shadow' &&\n      votingEnabled &&\n      css`\n        box-shadow: ${defaultStyles.boxShadow};\n        &:hover {\n          box-shadow: ${defaultStyles.boxShadowHoverSmall};\n        }\n      `\n    );\n  }}\n\n  ${({ votingEnabled, size }) => {\n    if (votingEnabled) {\n      if (size === '1') {\n        return css`\n          width: 35px;\n          height: 35px;\n        `;\n      }\n\n      if (size === '2') {\n        return css`\n          width: 45px;\n          height: 45px;\n        `;\n      }\n\n      if (size === '3') {\n        return css`\n          width: 48px;\n          height: 48px;\n        `;\n      }\n\n      if (size === '4') {\n        return css`\n          width: 50px;\n          height: 50px;\n        `;\n      }\n    }\n\n    return css`\n      margin-left: 5px;\n    `;\n  }}\n`;\n\nconst VoteIcon = styled(Icon)<{\n  size: TSize;\n  enabled: boolean | null;\n}>`\n  width: 19px;\n  height: 19px;\n  fill: ${colors.label};\n  transition: all 100ms ease-out;\n\n  ${(props) =>\n    props.size === '1'\n      ? css`\n          width: 17px;\n          height: 17px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '2'\n      ? css`\n          width: 18px;\n          height: 18px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '3'\n      ? css`\n          width: 20px;\n          height: 20px;\n        `\n      : css``}\n\n  ${(props) =>\n    props.size === '4'\n      ? css`\n          width: 21px;\n          height: 21px;\n        `\n      : css``}\n`;\n\nconst VoteCount = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin-left: 5px;\n  transition: all 100ms ease-out;\n\n  &:not(.enabled) {\n    margin-left: 3px;\n  }\n`;\n\nconst Vote = styled.button<IVoteComponent>`\n  display: flex;\n  align-items: center;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  border: none;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  &.voteClick ${VoteIconContainer} {\n    animation: ${css`\n      ${voteKeyframeAnimation} 350ms\n    `};\n  }\n\n  &:not(.enabled) {\n    ${VoteIconContainer} {\n      width: auto;\n      border: none;\n      background: none;\n    }\n\n    ${VoteIcon} {\n      margin-right: 4px;\n    }\n  }\n`;\n\nconst Upvote = styled(Vote)`\n  margin-right: 8px;\n\n  &:not(.enabled) {\n    ${VoteCount} {\n      ${isRtl`\n        margin-right: 5px;\n      `}\n    }\n  }\n\n  ${VoteIconContainer} {\n    ${(props) =>\n      props.active &&\n      `border-color: ${colors.clGreen}; background: ${colors.clGreen};`}\n  }\n\n  ${VoteIcon} {\n    margin-bottom: 4px;\n\n    ${({ active, enabled }) => {\n      if (active && enabled) {\n        return css`\n          fill: #fff;\n        `;\n      }\n\n      if (active && !enabled) {\n        return css`\n          fill: ${colors.clGreen};\n        `;\n      }\n\n      return;\n    }};\n  }\n\n  ${VoteCount} {\n    min-width: 20px;\n    margin-right: 5px;\n    ${(props) => props.active && `color: ${colors.clGreen};`}\n  }\n\n  &:hover.enabled {\n    ${VoteIconContainer} {\n      ${(props) => !props.active && `border: 1px solid ${colors.clGreen};`}\n    }\n\n    ${VoteIcon} {\n      ${(props) => !props.active && `fill: ${colors.clGreen};`}\n    }\n\n    ${VoteCount} {\n      ${(props) => !props.active && `color: ${colors.clGreen};`}\n    }\n  }\n`;\n\nconst Downvote = styled(Vote)`\n  ${VoteIconContainer} {\n    ${(props) =>\n      props.active &&\n      `border-color: ${colors.clRed}; background: ${colors.clRed};`}\n  }\n\n  ${VoteIcon} {\n    margin-top: 4px;\n\n    ${({ active, enabled }) => {\n      if (active && enabled) {\n        return css`\n          fill: #fff;\n        `;\n      }\n\n      if (active && !enabled) {\n        return css`\n          fill: ${colors.clRed};\n        `;\n      }\n\n      return;\n    }};\n  }\n\n  ${VoteCount} {\n    ${(props) => props.active && `color: ${colors.clRed};`}\n  }\n\n  &:hover.enabled {\n    ${VoteIconContainer} {\n      ${(props) => !props.active && `border: 1px solid ${colors.clRed};`}\n    }\n\n    ${VoteIcon} {\n      ${(props) => !props.active && `fill: ${colors.clRed};`}\n    }\n\n    ${VoteCount} {\n      ${(props) => !props.active && `color: ${colors.clRed};`}\n    }\n  }\n`;\n\ninterface Props {\n  ideaId: string;\n  size: TSize;\n  unauthenticatedVoteClick?: (voteMode: 'up' | 'down') => void;\n  disabledVoteClick?: (disabled_reason?: IdeaVotingDisabledReason) => void;\n  setRef?: (element: HTMLDivElement) => void;\n  ariaHidden?: boolean;\n  className?: string;\n  styleType: TStyleType;\n}\n\ninterface State {\n  showVoteControl: boolean;\n  authUser: IUser | null;\n  upvotesCount: number;\n  downvotesCount: number;\n  voting: 'up' | 'down' | null;\n  votingAnimation: 'up' | 'down' | null;\n  myVoteId: string | null | undefined;\n  myVoteMode: 'up' | 'down' | null | undefined;\n  idea: IIdea | null;\n  participationContext: IProjectData | IPhaseData | null;\n  participationContextId: string | null;\n  participationContextType: IParticipationContextType | null;\n  loaded: boolean;\n}\n\nclass VoteControl extends PureComponent<\n  Props & InjectedIntlProps & WithRouterProps,\n  State\n> {\n  voting$: BehaviorSubject<'up' | 'down' | null>;\n  id$: BehaviorSubject<string | null>;\n  subscriptions: Subscription[];\n  upvoteElement: HTMLButtonElement | null;\n  downvoteElement: HTMLButtonElement | null;\n\n  static defaultProps = {\n    ariaHidden: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showVoteControl: false,\n      authUser: null,\n      upvotesCount: 0,\n      downvotesCount: 0,\n      voting: null,\n      votingAnimation: null,\n      myVoteId: undefined,\n      myVoteMode: undefined,\n      idea: null,\n      participationContext: null,\n      participationContextId: null,\n      participationContextType: null,\n      loaded: false,\n    };\n    this.voting$ = new BehaviorSubject(null);\n    this.id$ = new BehaviorSubject(null);\n    this.subscriptions = [];\n    this.upvoteElement = null;\n    this.downvoteElement = null;\n  }\n\n  componentDidMount() {\n    const authUser$ = authUserStream().observable;\n    const voting$ = this.voting$.pipe(distinctUntilChanged());\n    const id$ = this.id$.pipe(\n      filter((ideaId) => isString(ideaId)),\n      distinctUntilChanged()\n    ) as Observable<string>;\n\n    this.id$.next(this.props.ideaId);\n    this.upvoteElement?.addEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.downvoteElement?.addEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n\n    const idea$ = id$.pipe(\n      switchMap((ideaId: string) => {\n        const idea$ = ideaByIdStream(ideaId).observable;\n\n        return combineLatest(idea$, voting$);\n      }),\n      filter(([_idea, voting]) => {\n        return voting === null;\n      }),\n      map(([idea, _voting]) => {\n        return idea;\n      })\n    );\n\n    const myVote$ = combineLatest(authUser$, idea$).pipe(\n      switchMap(([authUser, idea]) => {\n        if (\n          authUser &&\n          idea &&\n          idea.data.relationships.user_vote &&\n          idea.data.relationships.user_vote.data !== null\n        ) {\n          const voteId = idea.data.relationships.user_vote.data.id;\n          const vote$ = voteStream(voteId).observable;\n\n          return combineLatest(vote$, voting$).pipe(\n            filter(([_vote, voting]) => {\n              return voting === null;\n            }),\n            map(([vote, _voting]) => {\n              return vote;\n            })\n          );\n        }\n\n        return of(null);\n      })\n    );\n\n    this.subscriptions = [\n      voting$.subscribe((voting) => {\n        this.setState((state) => ({\n          voting,\n          votingAnimation:\n            voting !== null && state.voting === null\n              ? voting\n              : state.votingAnimation,\n        }));\n      }),\n\n      idea$\n        .pipe(\n          switchMap((idea) => {\n            let project$: Observable<IProject | null> = of(null);\n            let phases$: Observable<IPhase[] | null> = of(null);\n            const hasPhases = !isEmpty(\n              get(idea.data.relationships.phases, 'data', null)\n            );\n\n            if (!hasPhases && idea.data.relationships.project.data) {\n              project$ = projectByIdStream(\n                idea.data.relationships.project.data.id\n              ).observable;\n            }\n\n            if (hasPhases && idea.data.relationships.phases.data.length > 0) {\n              phases$ = combineLatest(\n                idea.data.relationships.phases.data.map(\n                  (phase) => phaseStream(phase.id).observable\n                )\n              );\n            }\n\n            return combineLatest(project$, phases$, authUser$).pipe(\n              map(([project, phases, authUser]) => ({\n                idea,\n                project,\n                phases,\n                authUser,\n              }))\n            );\n          })\n        )\n        .subscribe(({ idea, project, phases, authUser }) => {\n          const isSignedIn = !isNilOrError(authUser);\n          const upvotesCount = idea.data.attributes.upvotes_count;\n          const downvotesCount = idea.data.attributes.downvotes_count;\n          const votingEnabled =\n            idea.data.attributes.action_descriptor.voting_idea.enabled;\n          const cancellingEnabled =\n            idea.data.attributes.action_descriptor.voting_idea\n              .cancelling_enabled;\n          const votingDisabledReason =\n            idea.data.attributes.action_descriptor.voting_idea.disabled_reason;\n          const votingFutureEnabled =\n            idea.data.attributes.action_descriptor.voting_idea.future_enabled;\n          const isContinuousProject =\n            project?.data.attributes.process_type === 'continuous';\n          const ideaPhaseIds = idea?.data?.relationships?.phases?.data?.map(\n            (item) => item.id\n          );\n          const ideaPhases = phases\n            ?.filter((phase) => includes(ideaPhaseIds, phase.data.id))\n            .map((phase) => phase.data);\n          const latestRelevantIdeaPhase = ideaPhases\n            ? getLatestRelevantPhase(ideaPhases)\n            : null;\n          const participationContextType = isContinuousProject\n            ? 'project'\n            : 'phase';\n          const participationContextId = isContinuousProject\n            ? project?.data.id || null\n            : latestRelevantIdeaPhase?.id || null;\n          const participationContext = isContinuousProject\n            ? project?.data || null\n            : latestRelevantIdeaPhase;\n          const isPBContext =\n            participationContext?.attributes.participation_method ===\n            'budgeting';\n          const shouldSignIn =\n            !votingEnabled &&\n            (votingDisabledReason === 'not_signed_in' ||\n              (votingDisabledReason === 'not_verified' && !isSignedIn));\n          const shouldVerify =\n            !votingEnabled &&\n            votingDisabledReason === 'not_verified' &&\n            isSignedIn;\n          const verifiedButNotPermitted =\n            !shouldVerify && votingDisabledReason === 'not_permitted';\n          const showVoteControl = !!(\n            !isPBContext &&\n            (votingEnabled ||\n              shouldSignIn ||\n              cancellingEnabled ||\n              votingFutureEnabled ||\n              upvotesCount > 0 ||\n              downvotesCount > 0 ||\n              shouldVerify ||\n              verifiedButNotPermitted)\n          );\n\n          this.setState({\n            idea,\n            participationContext,\n            participationContextId,\n            participationContextType,\n            showVoteControl,\n            upvotesCount,\n            downvotesCount,\n            authUser,\n            loaded: true,\n          });\n        }),\n\n      myVote$.subscribe((myVote) => {\n        this.setState({\n          myVoteId: myVote ? myVote.data.id : null,\n          myVoteMode: myVote ? myVote.data.attributes.mode : null,\n        });\n      }),\n    ];\n  }\n\n  async componentDidUpdate() {\n    this.id$.next(this.props.ideaId);\n  }\n\n  componentWillUnmount() {\n    this.upvoteElement?.removeEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.downvoteElement?.removeEventListener(\n      'animationend',\n      this.votingAnimationDone\n    );\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  votingAnimationDone = () => {\n    this.setState({ votingAnimation: null });\n  };\n\n  onClickUpvote = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.vote('up');\n  };\n\n  onClickDownvote = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.vote('down');\n  };\n\n  vote = async (voteMode: 'up' | 'down') => {\n    const {\n      authUser,\n      myVoteId,\n      myVoteMode,\n      voting,\n      idea,\n      participationContext,\n      participationContextId,\n      participationContextType,\n    } = this.state;\n    const { ideaId, disabledVoteClick } = this.props;\n    const votingEnabled =\n      idea?.data.attributes.action_descriptor.voting_idea.enabled;\n    const cancellingEnabled =\n      idea?.data.attributes.action_descriptor.voting_idea.cancelling_enabled;\n    const votingDisabledReason =\n      idea?.data.attributes.action_descriptor.voting_idea.disabled_reason;\n    const isSignedIn = !isNilOrError(authUser);\n    const isTryingToUndoVote = !!(myVoteMode && voteMode === myVoteMode);\n    const isVerified =\n      !isNilOrError(authUser) && authUser.data.attributes.verified;\n\n    if (!voting) {\n      if (\n        !isNilOrError(authUser) &&\n        (votingEnabled || (cancellingEnabled && isTryingToUndoVote))\n      ) {\n        try {\n          this.voting$.next(voteMode);\n\n          const refetchIdeas =\n            participationContext?.attributes?.voting_method === 'limited';\n\n          // Change vote (up -> down or down -> up)\n          if (myVoteId && myVoteMode && myVoteMode !== voteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up'\n                  ? state.upvotesCount + 1\n                  : state.upvotesCount - 1,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount + 1\n                  : state.downvotesCount - 1,\n              myVoteMode: voteMode,\n            }));\n            await deleteVote(ideaId, myVoteId, refetchIdeas);\n            await addVote(\n              ideaId,\n              { user_id: authUser.data.id, mode: voteMode },\n              refetchIdeas\n            );\n          }\n\n          // Cancel vote\n          if (myVoteId && myVoteMode && myVoteMode === voteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up' ? state.upvotesCount - 1 : state.upvotesCount,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount - 1\n                  : state.downvotesCount,\n              myVoteMode: null,\n            }));\n            await deleteVote(ideaId, myVoteId, refetchIdeas);\n          }\n\n          // Vote\n          if (!myVoteMode) {\n            this.setState((state) => ({\n              upvotesCount:\n                voteMode === 'up' ? state.upvotesCount + 1 : state.upvotesCount,\n              downvotesCount:\n                voteMode === 'down'\n                  ? state.downvotesCount + 1\n                  : state.downvotesCount,\n              myVoteMode: voteMode,\n            }));\n            await addVote(\n              ideaId,\n              { user_id: authUser.data.id, mode: voteMode },\n              refetchIdeas\n            );\n          }\n\n          await ideaByIdStream(ideaId).fetch();\n          this.voting$.next(null);\n\n          return 'success';\n        } catch (error) {\n          this.voting$.next(null);\n          await ideaByIdStream(ideaId).fetch();\n          throw 'error';\n        }\n      } else if (\n        isSignedIn &&\n        !isVerified &&\n        votingDisabledReason === 'not_verified'\n      ) {\n        openVerificationModal();\n      } else if (\n        !isSignedIn &&\n        (votingEnabled ||\n          votingDisabledReason === 'not_verified' ||\n          votingDisabledReason === 'not_signed_in' ||\n          votingDisabledReason === 'not_permitted')\n      ) {\n        openSignUpInModal({\n          verification: votingDisabledReason === 'not_verified',\n          verificationContext:\n            votingDisabledReason === 'not_verified' &&\n            participationContextId &&\n            participationContextType\n              ? {\n                  action: 'voting_idea',\n                  id: participationContextId,\n                  type: participationContextType,\n                }\n              : undefined,\n          action: () => this.vote(voteMode),\n        });\n      } else if (votingDisabledReason) {\n        disabledVoteClick?.(votingDisabledReason);\n      }\n    }\n\n    return;\n  };\n\n  setContainerRef = (element: HTMLDivElement) => {\n    this.props?.setRef?.(element);\n  };\n\n  setUpvoteRef = (element: HTMLButtonElement) => {\n    this.upvoteElement = element;\n  };\n\n  setDownvoteRef = (element: HTMLButtonElement) => {\n    this.downvoteElement = element;\n  };\n\n  removeFocus = (event: React.MouseEvent) => {\n    event.preventDefault();\n  };\n\n  render() {\n    const {\n      size,\n      className,\n      intl: { formatMessage },\n      ariaHidden,\n      styleType,\n    } = this.props;\n    const {\n      idea,\n      authUser,\n      showVoteControl,\n      myVoteMode,\n      votingAnimation,\n      upvotesCount,\n      downvotesCount,\n    } = this.state;\n    const votingDescriptor =\n      idea?.data.attributes.action_descriptor.voting_idea;\n    const votingEnabled = votingDescriptor?.enabled;\n    const cancellingEnabled = votingDescriptor?.cancelling_enabled;\n    const votingDisabledReason = votingDescriptor?.disabled_reason;\n    const isSignedIn = !isNilOrError(authUser);\n    const isVerified =\n      !isNilOrError(authUser) && authUser.data.attributes.verified;\n    const upvotingEnabled =\n      (myVoteMode !== 'up' && votingEnabled) ||\n      (myVoteMode === 'up' && cancellingEnabled) ||\n      (!isVerified && votingDisabledReason === 'not_verified') ||\n      (!isSignedIn && votingDisabledReason === 'not_signed_in');\n    const downvotingEnabled =\n      (myVoteMode !== 'down' && votingEnabled) ||\n      (myVoteMode === 'down' && cancellingEnabled) ||\n      (!isVerified && votingDisabledReason === 'not_verified') ||\n      (!isSignedIn && votingDisabledReason === 'not_signed_in');\n    // if a project is inactive (archived), downvoting_enabled is\n    // null, hence the boolean check\n    const showDownvote =\n      typeof votingDescriptor?.downvoting_enabled === 'boolean'\n        ? votingDescriptor?.downvoting_enabled\n        : true;\n\n    if (!showVoteControl) return null;\n\n    const screenreaderContent = (\n      <>\n        <ScreenReaderOnly>\n          <FormattedMessage\n            {...messages.a11y_upvotesDownvotes}\n            values={{ upvotesCount, downvotesCount }}\n          />\n        </ScreenReaderOnly>\n        <LiveMessage\n          message={formatMessage(messages.a11y_upvotesDownvotes, {\n            upvotesCount,\n            downvotesCount,\n          })}\n          aria-live=\"polite\"\n        />\n      </>\n    );\n\n    return (\n      <>\n        {screenreaderContent}\n        <Container\n          className={[\n            className,\n            'e2e-vote-controls',\n            myVoteMode === null ? 'neutral' : myVoteMode,\n          ]\n            .filter((item) => item)\n            .join(' ')}\n          aria-hidden={ariaHidden}\n          ref={this.setContainerRef}\n        >\n          <Upvote\n            active={myVoteMode === 'up'}\n            enabled={upvotingEnabled}\n            onMouseDown={this.removeFocus}\n            onClick={this.onClickUpvote}\n            ref={this.setUpvoteRef}\n            className={[\n              'e2e-ideacard-upvote-button',\n              votingAnimation === 'up' ? 'voteClick' : 'upvote',\n              upvotingEnabled ? 'enabled' : 'disabled',\n              myVoteMode === 'up' ? 'active' : '',\n            ].join(' ')}\n            tabIndex={ariaHidden ? -1 : 0}\n          >\n            <VoteIconContainer\n              styleType={styleType}\n              size={size}\n              votingEnabled={upvotingEnabled}\n            >\n              <VoteIcon name=\"upvote\" size={size} enabled={upvotingEnabled} />\n              <ScreenReaderOnly>\n                <FormattedMessage {...messages.upvote} />\n              </ScreenReaderOnly>\n            </VoteIconContainer>\n            <VoteCount\n              aria-hidden\n              className={[votingEnabled ? 'enabled' : ''].join(' ')}\n            >\n              {upvotesCount}\n            </VoteCount>\n          </Upvote>\n\n          {showDownvote && (\n            <Downvote\n              active={myVoteMode === 'down'}\n              enabled={downvotingEnabled}\n              onMouseDown={this.removeFocus}\n              onClick={this.onClickDownvote}\n              ref={this.setDownvoteRef}\n              className={[\n                'e2e-ideacard-downvote-button',\n                votingAnimation === 'down' ? 'voteClick' : 'downvote',\n                downvotingEnabled ? 'enabled' : 'disabled',\n              ].join(' ')}\n              tabIndex={ariaHidden ? -1 : 0}\n            >\n              <VoteIconContainer\n                styleType={styleType}\n                size={size}\n                votingEnabled={downvotingEnabled}\n              >\n                <VoteIcon\n                  name=\"downvote\"\n                  size={size}\n                  enabled={downvotingEnabled}\n                />\n                <ScreenReaderOnly>\n                  <FormattedMessage {...messages.downvote} />\n                </ScreenReaderOnly>\n              </VoteIconContainer>\n              <VoteCount aria-hidden className={votingEnabled ? 'enabled' : ''}>\n                {downvotesCount}\n              </VoteCount>\n            </Downvote>\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default withRouter<Props>(injectIntl(VoteControl));\n","import React from 'react';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\n\n// hooks\nimport useIdeaStatus from 'hooks/useIdeaStatus';\n\n// components\nimport StatusBadge from 'components/StatusBadge';\n\n// i18n\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface Props {\n  statusId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst Status = ({ statusId, compact, className }: Props) => {\n  const ideaStatus = useIdeaStatus({ statusId });\n\n  if (!isNilOrError(ideaStatus)) {\n    return (\n      <Item className={className || ''} compact={compact}>\n        <Header>\n          <FormattedMessage {...messages.currentStatus} />\n        </Header>\n        <StatusBadge id=\"e2e-idea-status-badge\" statusId={statusId} />\n      </Item>\n    );\n  }\n\n  return null;\n};\n\nexport default Status;\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { ideaByIdStream } from 'services/ideas';\nimport { ImageSizes } from 'typings';\n\nexport interface IIdeaImageData {\n  id: string;\n  type: string;\n  attributes: {\n    versions: ImageSizes;\n    ordering: number;\n    created_at: string;\n    updated_at: string;\n  };\n}\n\nexport interface IIdeaImage {\n  data: IIdeaImageData;\n}\n\nexport interface IIdeaImages {\n  data: IIdeaImageData[];\n}\n\nexport function ideaImageStream(ideaId: string, imageId: string) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images/${imageId}`;\n  return streams.get<IIdeaImage>({ apiEndpoint });\n}\n\nexport function ideaImagesStream(\n  ideaId: string,\n  streamParams: IStreamParams | null = null\n) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images`;\n  return streams.get<IIdeaImages>({ apiEndpoint, ...streamParams });\n}\n\nexport function deleteIdeaImage(ideaId: string, imageId: string) {\n  return streams.delete(\n    `${API_PATH}/ideas/${ideaId}/images/${imageId}`,\n    imageId\n  );\n}\n\nexport async function addIdeaImage(\n  ideaId: string,\n  base64: string,\n  ordering: number | null = null\n) {\n  const apiEndpoint = `${API_PATH}/ideas/${ideaId}/images`;\n  const bodyData = {\n    image: {\n      ordering,\n      image: base64,\n    },\n  };\n\n  const ideaImage = await streams.add<IIdeaImage>(apiEndpoint, bodyData);\n  await ideaByIdStream(ideaId).fetch();\n  return ideaImage;\n}\n","import React, { PureComponent } from 'react';\nimport styled, { withTheme } from 'styled-components';\nimport { fontSizes } from 'utils/styleUtils';\n\n// services\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\n// components\nimport { Icon, IconTooltip } from 'cl2-component-library';\nimport { StatusWrapper, StatusExplanation } from './SharedStyles';\nimport Button from 'components/UI/Button';\n\n// i18n\nimport T from 'components/T';\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\nconst Container = styled.div``;\n\nconst StatusIcon = styled(Icon)`\n  path {\n    fill: ${(props) => props.theme.colorText};\n  }\n  width: 40px;\n  height: 40px;\n  margin-bottom: 20px;\n`;\n\nconst VoteText = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n  margin-top: 20px;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: 20px;\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n  onVote: () => void;\n}\ninterface DataProps {}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass ThresholdReached extends PureComponent<Props & { theme: any }, State> {\n  handleOnVote = () => {\n    this.props.onVote();\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeSettings: { voting_threshold, threshold_reached_message },\n      initiativeStatus,\n      userVoted,\n    } = this.props;\n\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit = voting_threshold;\n\n    return (\n      <Container>\n        <StatusWrapper>\n          <T value={initiativeStatus.attributes.title_multiloc} />\n        </StatusWrapper>\n        <StatusIcon ariaHidden name=\"envelope-check\" />\n        <StatusExplanation>\n          <FormattedMessage\n            {...messages.thresholdReachedStatusExplanation}\n            values={{\n              thresholdReachedStatusExplanationBold: (\n                <b>\n                  <FormattedMessage\n                    {...messages.thresholdReachedStatusExplanationBold}\n                  />\n                </b>\n              ),\n            }}\n          />\n          {threshold_reached_message ? (\n            <IconTooltip\n              icon=\"info\"\n              iconColor={this.props.theme.colorText}\n              theme=\"light\"\n              placement=\"bottom\"\n              content={<T value={threshold_reached_message} supportHtml />}\n            />\n          ) : (\n            <></>\n          )}\n        </StatusExplanation>\n        <VoteText>\n          <FormattedMessage\n            {...messages.xVotesOfY}\n            values={{\n              votingThreshold: voteLimit,\n              xVotes: (\n                <b>\n                  <FormattedMessage\n                    {...messages.xVotes}\n                    values={{ count: voteCount }}\n                  />\n                </b>\n              ),\n            }}\n          />\n        </VoteText>\n        {!userVoted && (\n          <StyledButton icon=\"upvote\" onClick={this.handleOnVote}>\n            <FormattedMessage {...messages.vote} />\n          </StyledButton>\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(ThresholdReached);\n","import React from 'react';\nimport { isString } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { Subscription, BehaviorSubject, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  IInitiativeData,\n  initiativeByIdStream,\n  initiativeBySlugStream,\n} from 'services/initiatives';\n\ninterface InputProps {\n  id?: string | null;\n  slug?: string | null;\n  resetOnChange?: boolean;\n}\n\ntype children = (renderProps: GetInitiativeChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  initiative: IInitiativeData | undefined | null | Error;\n}\n\nexport type GetInitiativeChildProps =\n  | IInitiativeData\n  | undefined\n  | null\n  | Error;\n\nexport default class GetInitiative extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      initiative: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id, slug, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id, slug });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(() => resetOnChange && this.setState({ initiative: undefined })),\n          switchMap(({ id, slug }) => {\n            if (isString(id)) {\n              return initiativeByIdStream(id).observable;\n            } else if (isString(slug)) {\n              return initiativeBySlugStream(slug).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((initiative) => {\n          this.setState({\n            initiative: !isNilOrError(initiative)\n              ? initiative.data\n              : initiative,\n          });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id, slug } = this.props;\n    this.inputProps$.next({ id, slug });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiative } = this.state;\n    return (children as children)(initiative);\n  }\n}\n","import React, { PureComponent, lazy, Suspense } from 'react';\nimport { isUndefined, isString, includes } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\n\n// services\nimport { getInputTerm } from 'services/participationContexts';\nimport { getLatestRelevantPhase } from 'services/phases';\n\n// analytics\nimport { trackEvent } from 'utils/analytics';\nimport tracks from './tracks';\n\n// router\nimport { withRouter, WithRouterProps } from 'react-router';\n\n// components\nimport IdeaSharingButton from './Buttons/IdeaSharingButton';\nimport IdeaMeta from './IdeaMeta';\nimport Title from 'components/PostShowComponents/Title';\nimport IdeaProposedBudget from './IdeaProposedBudget';\nimport Body from 'components/PostShowComponents/Body';\nimport Image from 'components/PostShowComponents/Image';\nimport OfficialFeedback from 'components/PostShowComponents/OfficialFeedback';\nimport Modal from 'components/UI/Modal';\nimport AssignBudgetControl from 'components/AssignBudgetControl';\nimport SharingModalContent from 'components/PostShowComponents/SharingModalContent';\nimport FeatureFlag from 'components/FeatureFlag';\nimport IdeaMoreActions from './IdeaMoreActions';\nimport { Spinner } from 'cl2-component-library';\nimport GoBackButton from './GoBackButton';\nconst LazyComments = lazy(() =>\n  import('components/PostShowComponents/Comments')\n);\nimport LoadingComments from 'components/PostShowComponents/Comments/LoadingComments';\nimport MetaInformation from './MetaInformation';\nimport MobileSharingButtonComponent from './Buttons/MobileSharingButtonComponent';\nimport RightColumnDesktop from './RightColumnDesktop';\n\n// utils\nimport isFieldEnabled from './isFieldEnabled';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetIdeaImages, {\n  GetIdeaImagesChildProps,\n} from 'resources/GetIdeaImages';\nimport GetProject, { GetProjectChildProps } from 'resources/GetProject';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\nimport GetPhases, { GetPhasesChildProps } from 'resources/GetPhases';\nimport GetWindowSize, {\n  GetWindowSizeChildProps,\n} from 'resources/GetWindowSize';\nimport GetOfficialFeedbacks, {\n  GetOfficialFeedbacksChildProps,\n} from 'resources/GetOfficialFeedbacks';\nimport GetPermission, {\n  GetPermissionChildProps,\n} from 'resources/GetPermission';\nimport GetIdeaCustomFieldsSchemas, {\n  GetIdeaCustomFieldsSchemasChildProps,\n} from 'resources/GetIdeaCustomFieldsSchemas';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetComments, { GetCommentsChildProps } from 'resources/GetComments';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport messages from './messages';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\nimport { getInputTermMessage } from 'utils/i18n';\n\n// animations\nimport CSSTransition from 'react-transition-group/CSSTransition';\n\n// style\nimport styled from 'styled-components';\nimport { media, viewportWidths, isRtl } from 'utils/styleUtils';\nimport { columnsGapDesktop, pageContentMaxWidth } from './styleConstants';\nimport Outlet from 'components/Outlet';\n\nconst contentFadeInDuration = 250;\nconst contentFadeInEasing = 'cubic-bezier(0.19, 1, 0.22, 1)';\nconst contentFadeInDelay = 150;\n\nconst Container = styled.main`\n  width: 100%;\n  max-width: ${pageContentMaxWidth}px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  margin-left: auto;\n  margin-right: auto;\n  background: #fff;\n\n  &.loading {\n    flex: 1;\n    justify-content: center;\n  }\n\n  &.loaded {\n    opacity: 0;\n\n    &.content-enter {\n      opacity: 0;\n\n      &.content-enter-active {\n        opacity: 1;\n        transition: opacity ${contentFadeInDuration}ms ${contentFadeInEasing}\n          ${contentFadeInDelay}ms;\n      }\n    }\n\n    &.content-enter-done {\n      opacity: 1;\n    }\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n`;\n\nconst LeftColumn = styled.div`\n  flex: 1 1 100%;\n`;\n\nconst StyledRightColumnDesktop = styled(RightColumnDesktop)`\n  margin-left: ${columnsGapDesktop}px;\n`;\n\nconst IdeaHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: -5px;\n  margin-bottom: 25px;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n\n  ${media.smallerThanMaxTablet`\n    margin-top: 0px;\n  `}\n`;\n\nconst MobileIdeaMoreActions = styled(IdeaMoreActions)`\n  margin-left: 30px;\n`;\n\nconst TopBar = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledGoBackButton = styled(GoBackButton)`\n  margin-bottom: 40px;\n`;\n\nconst BodySectionTitle = styled.h2`\n  font-size: ${(props) => props.theme.fontSizes.large}px;\n  font-weight: 500;\n  line-height: 28px;\n  padding: 0;\n  margin: 0;\n  margin-bottom: 15px;\n`;\n\nconst StyledBody = styled(Body)`\n  margin-bottom: 40px;\n`;\n\nconst StyledIdeaProposedBudget = styled(IdeaProposedBudget)`\n  margin-bottom: 20px;\n`;\n\nconst MobileMetaInformation = styled(MetaInformation)`\n  margin-bottom: 30px;\n`;\n\nconst StyledAssignBudgetControl = styled(AssignBudgetControl)`\n  margin-top: 30px;\n  margin-bottom: 30px;\n`;\n\nconst MobileIdeaSharingButton = styled(IdeaSharingButton)``;\n\nconst StyledOfficialFeedback = styled(OfficialFeedback)`\n  margin-top: 80px;\n  margin-bottom: 80px;\n`;\n\nconst Comments = styled.div`\n  margin-bottom: 100px;\n`;\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n  locale: GetLocaleChildProps;\n  authUser: GetAuthUserChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n  ideaImages: GetIdeaImagesChildProps;\n  windowSize: GetWindowSizeChildProps;\n  officialFeedbacks: GetOfficialFeedbacksChildProps;\n  postOfficialFeedbackPermission: GetPermissionChildProps;\n  ideaCustomFieldsSchemas: GetIdeaCustomFieldsSchemasChildProps;\n  comments: GetCommentsChildProps;\n}\n\ninterface InputProps {\n  ideaId: string;\n  projectId: string;\n  insideModal: boolean;\n  setRef?: (element: HTMLDivElement) => void;\n  compact?: boolean;\n  className?: string;\n}\n\ninterface Props extends DataProps, InputProps {}\n\ninterface State {\n  loaded: boolean;\n  spamModalVisible: boolean;\n  ideaIdForSocialSharing: string | null;\n  translateButtonClicked: boolean;\n}\n\nexport class IdeasShow extends PureComponent<\n  Props & InjectedIntlProps & InjectedLocalized & WithRouterProps,\n  State\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      spamModalVisible: false,\n      ideaIdForSocialSharing: null,\n      translateButtonClicked: false,\n    };\n  }\n\n  componentDidMount() {\n    const newIdeaId = this.props.location.query?.['new_idea_id'];\n\n    this.setLoaded();\n\n    if (isString(newIdeaId)) {\n      setTimeout(() => {\n        this.setState({ ideaIdForSocialSharing: newIdeaId });\n      }, 1500);\n\n      window.history.replaceState(null, '', window.location.pathname);\n    }\n  }\n\n  componentDidUpdate() {\n    this.setLoaded();\n  }\n\n  setLoaded = () => {\n    const { loaded } = this.state;\n    const { idea, ideaImages, project, officialFeedbacks } = this.props;\n\n    if (\n      !loaded &&\n      !isNilOrError(idea) &&\n      !isUndefined(ideaImages) &&\n      !isNilOrError(project) &&\n      !isUndefined(officialFeedbacks.officialFeedbacksList)\n    ) {\n      this.setState({ loaded: true });\n    }\n  };\n\n  closeIdeaSocialSharingModal = () => {\n    this.setState({ ideaIdForSocialSharing: null });\n  };\n\n  onTranslateIdea = () => {\n    this.setState((prevState) => {\n      // analytics\n      if (prevState.translateButtonClicked === true) {\n        trackEvent(tracks.clickGoBackToOriginalIdeaCopyButton);\n      } else if (prevState.translateButtonClicked === false) {\n        trackEvent(tracks.clickTranslateIdeaButton);\n      }\n\n      return {\n        translateButtonClicked: !prevState.translateButtonClicked,\n      };\n    });\n  };\n\n  handleContainerRef = (element: HTMLDivElement) => {\n    this.props.setRef?.(element);\n  };\n\n  getLatestRelevantPhaseId = () => {\n    const { idea, phases } = this.props;\n\n    if (!isNilOrError(idea) && !isNilOrError(phases)) {\n      const ideaPhaseIds = idea?.relationships?.phases?.data?.map(\n        (item) => item.id\n      );\n      const ideaPhases = phases.filter((phase) =>\n        includes(ideaPhaseIds, phase.id)\n      );\n      return getLatestRelevantPhase(ideaPhases)?.id;\n    }\n\n    return undefined;\n  };\n\n  render() {\n    const {\n      locale,\n      idea,\n      localize,\n      ideaImages,\n      windowSize,\n      className,\n      postOfficialFeedbackPermission,\n      projectId,\n      ideaCustomFieldsSchemas,\n      insideModal,\n      project,\n      phases,\n      compact,\n    } = this.props;\n    const {\n      loaded,\n      ideaIdForSocialSharing,\n      translateButtonClicked,\n    } = this.state;\n    const { formatMessage } = this.props.intl;\n    let content: JSX.Element | null = null;\n\n    if (\n      !isNilOrError(project) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(ideaCustomFieldsSchemas) &&\n      loaded\n    ) {\n      // If the user deletes their profile, authorId can be null\n      const authorId = idea.relationships?.author?.data?.id || null;\n      const titleMultiloc = idea.attributes.title_multiloc;\n      const ideaTitle = localize(titleMultiloc);\n      const statusId = idea?.relationships?.idea_status?.data?.id;\n      const ideaImageLarge =\n        ideaImages?.[0]?.attributes?.versions?.large || null;\n      const ideaId = idea.id;\n      const proposedBudget = idea.attributes?.proposed_budget;\n      const ideaBody = localize(idea?.attributes?.body_multiloc);\n      const isCompactView =\n        compact === true ||\n        (windowSize ? windowSize <= viewportWidths.largeTablet : false);\n      const proposedBudgetEnabled = isFieldEnabled(\n        'proposed_budget',\n        ideaCustomFieldsSchemas,\n        locale\n      );\n\n      content = (\n        <>\n          <IdeaMeta ideaId={ideaId} />\n\n          {!isCompactView && (\n            <TopBar>\n              <StyledGoBackButton\n                projectId={projectId}\n                insideModal={insideModal}\n              />\n              <IdeaMoreActions idea={idea} projectId={projectId} />\n            </TopBar>\n          )}\n\n          <Content id=\"e2e-idea-show-page-content\">\n            <LeftColumn>\n              <IdeaHeader>\n                <Title\n                  postType=\"idea\"\n                  postId={ideaId}\n                  title={ideaTitle}\n                  locale={locale}\n                  translateButtonClicked={translateButtonClicked}\n                />\n                {isCompactView && (\n                  <MobileIdeaMoreActions idea={idea} projectId={projectId} />\n                )}\n              </IdeaHeader>\n\n              {ideaImageLarge && (\n                <Image src={ideaImageLarge} alt=\"\" id=\"e2e-idea-image\" />\n              )}\n\n              <Outlet\n                id=\"app.containers.IdeasShow.left\"\n                idea={idea}\n                locale={locale}\n                onClick={this.onTranslateIdea}\n                translateButtonClicked={translateButtonClicked}\n              />\n\n              {proposedBudgetEnabled && proposedBudget && (\n                <>\n                  <BodySectionTitle>\n                    <FormattedMessage {...messages.proposedBudgetTitle} />\n                  </BodySectionTitle>\n                  <StyledIdeaProposedBudget proposedBudget={proposedBudget} />\n                  <BodySectionTitle>\n                    <FormattedMessage {...messages.bodyTitle} />\n                  </BodySectionTitle>\n                </>\n              )}\n\n              <StyledBody\n                postType=\"idea\"\n                postId={ideaId}\n                locale={locale}\n                body={ideaBody}\n                translateButtonClicked={translateButtonClicked}\n              />\n\n              {isCompactView && (\n                <StyledAssignBudgetControl\n                  view=\"ideaPage\"\n                  ideaId={ideaId}\n                  projectId={projectId}\n                />\n              )}\n\n              {isCompactView && (\n                <MobileMetaInformation\n                  ideaId={ideaId}\n                  projectId={projectId}\n                  statusId={statusId}\n                  authorId={authorId}\n                  compact={isCompactView}\n                />\n              )}\n\n              {isCompactView && (\n                <MobileIdeaSharingButton\n                  ideaId={ideaId}\n                  buttonComponent={<MobileSharingButtonComponent />}\n                />\n              )}\n\n              <StyledOfficialFeedback\n                postId={ideaId}\n                postType=\"idea\"\n                permissionToPost={postOfficialFeedbackPermission}\n              />\n\n              <Comments>\n                <Suspense fallback={<LoadingComments />}>\n                  <LazyComments postId={ideaId} postType=\"idea\" />\n                </Suspense>\n              </Comments>\n            </LeftColumn>\n\n            {!isCompactView && projectId && (\n              <StyledRightColumnDesktop\n                ideaId={ideaId}\n                projectId={projectId}\n                statusId={statusId}\n                authorId={authorId}\n                insideModal={insideModal}\n              />\n            )}\n          </Content>\n        </>\n      );\n    }\n\n    if (!isNilOrError(project)) {\n      const inputTerm = getInputTerm(\n        project.attributes.process_type,\n        project,\n        phases\n      );\n\n      return (\n        <>\n          {!loaded && (\n            <Container className={`loading ${className || ''}`}>\n              <Spinner />\n            </Container>\n          )}\n          <CSSTransition\n            classNames=\"content\"\n            in={loaded}\n            timeout={{\n              enter: contentFadeInDuration + contentFadeInDelay,\n              exit: 0,\n            }}\n            enter={true}\n            exit={false}\n          >\n            <Container\n              id=\"e2e-idea-show\"\n              className={`loaded ${className || ''}`}\n              ref={this.handleContainerRef}\n            >\n              {content}\n            </Container>\n          </CSSTransition>\n\n          <FeatureFlag name=\"ideaflow_social_sharing\">\n            <Modal\n              opened={!!ideaIdForSocialSharing}\n              close={this.closeIdeaSocialSharingModal}\n              hasSkipButton={true}\n              skipText={<FormattedMessage {...messages.skipSharing} />}\n            >\n              {ideaIdForSocialSharing && (\n                <SharingModalContent\n                  postType=\"idea\"\n                  postId={ideaIdForSocialSharing}\n                  title={formatMessage(\n                    getInputTermMessage(inputTerm, {\n                      idea: messages.sharingModalTitle,\n                      option: messages.optionSharingModalTitle,\n                      project: messages.projectSharingModalTitle,\n                      question: messages.questionSharingModalTitle,\n                      issue: messages.issueSharingModalTitle,\n                      contribution: messages.contributionSharingModalTitle,\n                    })\n                  )}\n                  subtitle={formatMessage(messages.sharingModalSubtitle)}\n                />\n              )}\n            </Modal>\n          </FeatureFlag>\n        </>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst IdeasShowWithHOCs = injectLocalize<Props>(\n  injectIntl(withRouter(IdeasShow))\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  authUser: <GetAuthUser />,\n  windowSize: <GetWindowSize />,\n  idea: ({ ideaId, render }) => <GetIdea ideaId={ideaId}>{render}</GetIdea>,\n  ideaImages: ({ ideaId, render }) => (\n    <GetIdeaImages ideaId={ideaId}>{render}</GetIdeaImages>\n  ),\n  project: ({ projectId, render }) => (\n    <GetProject projectId={projectId}>{render}</GetProject>\n  ),\n  phases: ({ projectId, render }) => (\n    <GetPhases projectId={projectId}>{render}</GetPhases>\n  ),\n  officialFeedbacks: ({ ideaId, render }) => (\n    <GetOfficialFeedbacks postId={ideaId} postType=\"idea\">\n      {render}\n    </GetOfficialFeedbacks>\n  ),\n  postOfficialFeedbackPermission: ({ project, render }) => (\n    <GetPermission\n      item={!isNilOrError(project) ? project : null}\n      action=\"moderate\"\n    >\n      {render}\n    </GetPermission>\n  ),\n  ideaCustomFieldsSchemas: ({ projectId, render }) => (\n    <GetIdeaCustomFieldsSchemas projectId={projectId}>\n      {render}\n    </GetIdeaCustomFieldsSchemas>\n  ),\n  comments: ({ ideaId, render }) => (\n    <GetComments postId={ideaId} postType=\"idea\">\n      {render}\n    </GetComments>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <IdeasShowWithHOCs {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport SharingDropdownButton from 'components/Sharing/SharingDropdownButton';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { getInputTerm } from 'services/participationContexts';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\nimport { getInputTermMessage } from 'utils/i18n';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\nimport useLocalize from 'hooks/useLocalize';\nimport useAuthUser from 'hooks/useAuthUser';\nimport useProject from 'hooks/useProject';\nimport usePhases from 'hooks/usePhases';\n\ninterface Props {\n  className?: string;\n  ideaId: string;\n  buttonComponent: JSX.Element;\n}\n\nconst Component = ({\n  className,\n  ideaId,\n  buttonComponent,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  const idea = useIdea({ ideaId });\n  const projectId = !isNilOrError(idea)\n    ? idea.relationships.project.data.id\n    : null;\n  const project = useProject({ projectId });\n  const phases = usePhases(projectId);\n  const authUser = useAuthUser();\n  const localize = useLocalize();\n\n  if (!isNilOrError(idea) && !isNilOrError(project)) {\n    const postUrl = location.href;\n    const titleMultiloc = idea.attributes.title_multiloc;\n    const postTitle = localize(titleMultiloc);\n    const inputTerm = getInputTerm(\n      project.attributes.process_type,\n      project,\n      phases\n    );\n\n    const utmParams = !isNilOrError(authUser)\n      ? {\n          source: 'share_idea',\n          campaign: 'share_content',\n          content: authUser.id,\n        }\n      : {\n          source: 'share_idea',\n          campaign: 'share_content',\n        };\n\n    return (\n      <SharingDropdownButton\n        className={className}\n        url={postUrl}\n        whatsAppMessage={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaWhatsAppMessage,\n            option: messages.optionWhatsAppMessage,\n            project: messages.projectWhatsAppMessage,\n            question: messages.questionWhatsAppMessage,\n            issue: messages.issueWhatsAppMessage,\n            contribution: messages.contributionWhatsAppMessage,\n          }),\n          {\n            postTitle,\n          }\n        )}\n        twitterMessage={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaTwitterMessage,\n            option: messages.optionTwitterMessage,\n            project: messages.projectTwitterMessage,\n            question: messages.questionTwitterMessage,\n            issue: messages.issueTwitterMessage,\n            contribution: messages.contributionTwitterMessage,\n          }),\n          {\n            postTitle,\n          }\n        )}\n        emailSubject={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaEmailSharingSubject,\n            option: messages.optionEmailSharingSubject,\n            project: messages.projectEmailSharingSubject,\n            question: messages.questionEmailSharingSubject,\n            issue: messages.issueEmailSharingSubject,\n            contribution: messages.contributionEmailSharingSubject,\n          }),\n          {\n            ideaTitle: postTitle,\n          }\n        )}\n        emailBody={formatMessage(\n          getInputTermMessage(inputTerm, {\n            idea: messages.ideaEmailSharingBody,\n            option: messages.optionEmailSharingBody,\n            project: messages.projectEmailSharingBody,\n            question: messages.questionEmailSharingBody,\n            issue: messages.issueEmailSharingBody,\n            contribution: messages.contributionEmailSharingBody,\n          }),\n          {\n            ideaUrl: postUrl,\n            ideaTitle: postTitle,\n          }\n        )}\n        utmParams={utmParams}\n        buttonComponent={buttonComponent}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport default injectIntl(Component);\n","import React, { PureComponent } from 'react';\n\nimport styled, { keyframes, withTheme } from 'styled-components';\nimport { colors, fontSizes, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { darken } from 'polished';\n\nimport { getDaysRemainingUntil } from 'utils/dateUtils';\n\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\nimport { Icon } from 'cl2-component-library';\nimport ProgressBar from 'components/UI/ProgressBar';\n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst scaleIn = keyframes`\n  0% {\n    transform: scale(0);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n`;\n\nconst StyledIcon = styled(Icon)`\n  fill: ${colors.clGreenSuccess};\n  width: 63px;\n  height: 63px;\n  animation: ${scaleIn} 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;\n`;\n\nconst VotedTitle = styled.h4`\n  color: ${(props) => props.theme.colorText};\n  font-size: ${fontSizes.base}px;\n  font-weight: 600;\n  text-align: center;\n  margin: 0;\n  margin-top: 25px;\n  margin-bottom: 5px;\n  width: 100%;\n`;\n\nconst VotedText = styled.p`\n  color: ${(props) => props.theme.colorText};\n  font-size: ${fontSizes.base}px;\n  font-weight: 300;\n  line-height: 21px;\n  text-align: center;\n  margin: 0 0 20px 0;\n  width: 100%;\n`;\n\nconst UnvoteButton = styled.button`\n  color: ${(props) => props.theme.colorText};\n  font-size: ${fontSizes.base}px;\n  text-decoration: underline;\n\n  &:hover {\n    color: ${(props) => darken(0.12, props.theme.colorText)};\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nconst VoteCounter = styled.div`\n  margin-top: 15px;\n  width: 100%;\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst VoteText = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding-bottom: 4px;\n`;\n\nconst VoteTextLeft = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${colors.clGreyOnGreyBackground};\n`;\n\nconst VoteTextRight = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n`;\n\nconst StyledProgressBar = styled(ProgressBar)`\n  height: 12px;\n  width: 100%;\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n  onCancelVote: () => void;\n}\ninterface DataProps {}\n\ninterface Props extends InputProps, DataProps {}\n\nclass ProposedVoted extends PureComponent<Props & { theme: any }> {\n  handleOnCancelVote = () => {\n    this.props.onCancelVote();\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeSettings: { voting_threshold },\n      theme,\n    } = this.props;\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit = voting_threshold;\n    const daysLeft = getDaysRemainingUntil(initiative.attributes.expires_at);\n\n    return (\n      <Container>\n        <StyledIcon ariaHidden name=\"round-checkmark\" />\n        <VotedTitle>\n          <FormattedMessage {...messages.votedTitle} />\n        </VotedTitle>\n        <VotedText>\n          <FormattedMessage\n            {...messages.votedText}\n            values={{\n              x: daysLeft,\n              xDays: (\n                <b>\n                  <FormattedMessage\n                    {...messages.xDays}\n                    values={{ x: daysLeft }}\n                  />\n                </b>\n              ),\n            }}\n          />\n        </VotedText>\n        <UnvoteButton\n          id=\"e2e-initiative-cancel-upvote-button\"\n          onClick={this.handleOnCancelVote}\n        >\n          <FormattedMessage {...messages.unvoteLink} />\n        </UnvoteButton>\n        <VoteCounter>\n          <VoteText aria-hidden={true}>\n            <VoteTextLeft id=\"e2e-initiative-voted-vote-count\">\n              <FormattedMessage\n                {...messages.xVotes}\n                values={{ count: voteCount }}\n              />\n            </VoteTextLeft>\n            <VoteTextRight>{voteLimit}</VoteTextRight>\n          </VoteText>\n          <ScreenReaderOnly>\n            <FormattedMessage\n              {...messages.xVotesOfY}\n              values={{\n                xVotes: (\n                  <FormattedMessage\n                    {...messages.xVotes}\n                    values={{ count: voteCount }}\n                  />\n                ),\n                votingThreshold: voteLimit,\n              }}\n            />\n          </ScreenReaderOnly>\n          <StyledProgressBar\n            progress={voteCount / voteLimit}\n            color={theme.colorText}\n            bgColor={colors.lightGreyishBlue}\n          />\n        </VoteCounter>\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(ProposedVoted);\n","import React from 'react';\n\n// components\nimport MetaInformation from '../MetaInformation';\nimport Voting from 'containers/IdeasShow/CTABox/VotingCTABox/Voting';\nimport Buttons from 'containers/IdeasShow/CTABox/Buttons';\nimport AssignBudgetControl from 'components/AssignBudgetControl';\n\n// styling\nimport styled from 'styled-components';\nimport { rightColumnWidthDesktop } from '../styleConstants';\nimport { colors } from 'utils/styleUtils';\n\nconst Container = styled.div<{ insideModal: boolean }>`\n  flex: 0 0 ${rightColumnWidthDesktop}px;\n  width: ${rightColumnWidthDesktop}px;\n  position: sticky;\n  top: ${(props) => (props.insideModal ? '30px' : '110px')};\n  align-self: flex-start;\n`;\n\nconst InnerContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Box = styled.div`\n  padding: 20px;\n  border-radius: ${(props) => props.theme.borderRadius};\n  background: ${colors.backgroundLightGrey};\n  margin-bottom: 30px;\n`;\n\nconst StyledVoting = styled(Voting)`\n  padding-bottom: 23px;\n  margin-bottom: 23px;\n`;\n\nconst StyledAssignBudgetControl = styled(AssignBudgetControl)`\n  padding-bottom: 23px;\n  margin-bottom: 23px;\n  border-bottom: solid 1px #ccc;\n`;\n\nconst StyledMetaInformation = styled(MetaInformation)`\n  margin-bottom: 40px;\n`;\n\ninterface Props {\n  ideaId: string;\n  projectId: string;\n  statusId: string;\n  authorId: string | null;\n  insideModal: boolean;\n  className?: string;\n}\n\nconst RightColumnDesktop = ({\n  ideaId,\n  projectId,\n  statusId,\n  authorId,\n  insideModal,\n  className,\n}: Props) => {\n  return (\n    <Container insideModal={insideModal} className={className || ''}>\n      <InnerContainer>\n        <Box>\n          <StyledVoting ideaId={ideaId} projectId={projectId} />\n          <StyledAssignBudgetControl\n            view=\"ideaPage\"\n            ideaId={ideaId}\n            projectId={projectId}\n          />\n          <Buttons ideaId={ideaId} />\n        </Box>\n        <StyledMetaInformation\n          ideaId={ideaId}\n          projectId={projectId}\n          statusId={statusId}\n          authorId={authorId}\n        />\n      </InnerContainer>\n    </Container>\n  );\n};\n\nexport default RightColumnDesktop;\n","import React, { memo } from 'react';\nimport FormattedBudget from 'utils/currency/FormattedBudget';\n\n// styling\nimport styled from 'styled-components';\nimport { media } from 'utils/styleUtils';\n\nconst Container = styled.div`\n  color: ${(props) => props.theme.colorText};\n  font-size: ${(props) => props.theme.fontSizes.large}px;\n  line-height: 29px; // same line-height as Body's content\n  font-weight: 300;\n\n  ${media.smallerThanMinTablet`\n    font-size: ${(props) => props.theme.fontSizes.base}px;\n  `}\n`;\n\ninterface Props {\n  className?: string;\n  proposedBudget: number;\n}\n\nconst IdeaProposedBudget = memo<Props>(({ className, proposedBudget }) => {\n  return (\n    <Container className={className}>\n      <FormattedBudget value={proposedBudget} />\n    </Container>\n  );\n});\n\nexport default IdeaProposedBudget;\n","import React, { memo, useCallback } from 'react';\nimport IdeaCTAButton from './IdeaCTAButton';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\ninterface Props {\n  className?: string;\n}\n\nconst GoToCommentsButton = memo<Props & InjectedIntlProps>(\n  ({ className, intl: { formatMessage } }) => {\n    const onClick = useCallback(() => {\n      const commentInputElementAnchor = document.getElementById(\n        'submit-comment-anchor'\n      );\n      const commentInputElement = document.getElementById('submit-comment');\n\n      if (commentInputElementAnchor && commentInputElement) {\n        commentInputElement.focus({ preventScroll: true });\n        setTimeout(() => {\n          commentInputElementAnchor.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start',\n          });\n        }, 200);\n      }\n    }, []);\n\n    return (\n      <IdeaCTAButton\n        onClick={onClick}\n        className={className}\n        buttonText={formatMessage(messages.commentCTA)}\n        iconName=\"comments\"\n      />\n    );\n  }\n);\n\nexport default injectIntl(GoToCommentsButton);\n","import React from 'react';\nimport Button from 'components/UI/Button';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\ninterface Props {\n  onClick?: () => void;\n  ariaExpanded?: boolean;\n}\n\nconst MobileSharingButtonComponent = ({\n  onClick,\n  ariaExpanded,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  return (\n    <Button\n      buttonStyle=\"white\"\n      borderColor=\"#ccc\"\n      icon=\"share-arrow\"\n      onClick={onClick}\n      iconAriaHidden={true}\n      ariaExpanded={ariaExpanded}\n    >\n      {formatMessage(messages.share)}\n    </Button>\n  );\n};\n\nexport default injectIntl(MobileSharingButtonComponent);\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { colors, fontSizes, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\n\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\nimport { Icon } from 'cl2-component-library';\nimport { StatusWrapper, StatusExplanation } from './SharedStyles';\nimport ProgressBar from 'components/UI/ProgressBar';\nimport Button from 'components/UI/Button';\n\nimport T from 'components/T';\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\nconst Container = styled.div``;\n\nconst StatusIcon = styled(Icon)`\n  path {\n    fill: ${colors.clGreyOnGreyBackground};\n  }\n  width: 30px;\n  height: 30px;\n  margin-bottom: 20px;\n`;\n\nconst VoteCounter = styled.div`\n  margin-top: 15px;\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst VoteTexts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding-bottom: 4px;\n`;\n\nconst VoteText = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${colors.clGreyOnGreyBackground};\n`;\n\nconst StyledProgressBar = styled(ProgressBar)`\n  height: 12px;\n  width: 100%;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: 20px;\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n}\ninterface DataProps {}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass Expired extends PureComponent<Props, State> {\n  render() {\n    const {\n      initiative,\n      initiativeSettings: { voting_threshold },\n      initiativeStatus,\n      userVoted,\n    } = this.props;\n\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit = voting_threshold;\n\n    return (\n      <Container>\n        <StatusWrapper>\n          <T value={initiativeStatus.attributes.title_multiloc} />\n        </StatusWrapper>\n        <StatusIcon ariaHidden name=\"clock\" />\n        <StatusExplanation>\n          <FormattedMessage\n            {...messages.expiredStatusExplanation}\n            values={{\n              expiredStatusExplanationBold: (\n                <b>\n                  <FormattedMessage\n                    {...messages.expiredStatusExplanationBold}\n                    values={{ votingThreshold: voting_threshold }}\n                  />\n                </b>\n              ),\n            }}\n          />\n        </StatusExplanation>\n        <VoteCounter>\n          <VoteTexts aria-hidden={true}>\n            <VoteText>\n              <FormattedMessage\n                {...messages.xVotes}\n                values={{ count: voteCount }}\n              />\n            </VoteText>\n            <VoteText>{voteLimit}</VoteText>\n          </VoteTexts>\n          <ScreenReaderOnly>\n            <FormattedMessage\n              {...messages.xVotesOfY}\n              values={{\n                xVotes: (\n                  <FormattedMessage\n                    {...messages.xVotes}\n                    values={{ count: voteCount }}\n                  />\n                ),\n                votingThreshold: voteLimit,\n              }}\n            />\n          </ScreenReaderOnly>\n          <StyledProgressBar\n            progress={voteCount / voteLimit}\n            color=\"linear-gradient(270deg, #84939E 0%, #C8D0D6 100%)\"\n            bgColor={colors.lightGreyishBlue}\n            bgShaded\n          />\n        </VoteCounter>\n        <StyledButton icon=\"halt\" disabled>\n          {userVoted ? (\n            <FormattedMessage {...messages.cancelVote} />\n          ) : (\n            <FormattedMessage {...messages.vote} />\n          )}\n        </StyledButton>\n      </Container>\n    );\n  }\n}\n\nexport default Expired;\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4wLy9FTiIKCSJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgaGVpZ2h0PSIyMCIgd2lkdGg9IjIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzPgogICAgPHBhdHRlcm4gaGVpZ2h0PSIyMCIgaWQ9Indhcm5pbmctMSIgcGF0dGVybkNvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHdpZHRoPSIyMCI+CiAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCwxMCAwLDAgMTAsMCIgc3R5bGU9ImZpbGw6cmdiYSgwLDAsMCwwKTsiLz4KICAgICAgPHBvbHlnb24gcG9pbnRzPSIwLDIwIDIwLDAgMTAsMCAwLDEwIiBzdHlsZT0iZmlsbDpyZ2JhKDAsMCwwLDAuMSk7Ii8+CiAgICAgIDxwb2x5Z29uIHBvaW50cz0iMTAsMjAgMjAsMTAgMjAsMjAiIHN0eWxlPSJmaWxsOnJnYmEoMCwwLDAsMC4xKTsiLz4KICAgICAgPHBvbHlnb24gcG9pbnRzPSIwLDIwIDEwLDIwIDIwLDEwIDIwLDAiIHN0eWxlPSJmaWxsOnJnYmEoMCwwLDAsMCk7Ii8+CiAgICA8L3BhdHRlcm4+CiAgPC9kZWZzPgogIDxyZWN0IGZpbGw9InVybCgjd2FybmluZy0xKSIgaGVpZ2h0PSIyMCIgd2lkdGg9IjIwIiB4PSIwIiB5PSIwIi8+Cjwvc3ZnPgo=\"","import React, {\n  memo,\n  useMemo,\n  useState,\n  lazy,\n  Suspense,\n  useCallback,\n} from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Outlet from 'components/Outlet';\nconst LeafletMap = lazy(() => import('components/UI/LeafletMap'));\n\n// hooks\nimport useAppConfiguration from 'hooks/useAppConfiguration';\n\n// utils\nimport {\n  getCenter,\n  getZoomLevel,\n  getTileProvider,\n  getTileOptions,\n} from 'utils/map';\nimport { ILeafletMapConfig } from 'components/UI/LeafletMap/useLeaflet';\n\n// styling\nimport styled from 'styled-components';\nimport { media, defaultOutline, defaultCardStyle } from 'utils/styleUtils';\n\n// typings\nimport { LatLngTuple, Map as ILeafletMap } from 'leaflet';\n\nexport interface Point extends GeoJSON.Point {\n  data?: any;\n  id: string;\n  title?: string;\n}\n\nconst Container = styled.div`\n  ${defaultCardStyle};\n  background: transparent;\n  border: solid 1px #ccc;\n`;\n\nconst MapWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  position: relative;\n`;\n\nconst BoxContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  position: absolute;\n  top: 0;\n  z-index: 1001;\n  background: #fff;\n  width: 100%;\n  height: 80%;\n  max-height: 550px;\n`;\n\nconst CloseButton = styled.button`\n  width: 28px;\n  height: 28px;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 2;\n  border-radius: 50%;\n  border: solid 1px transparent;\n  background: #fff;\n  transition: all 100ms ease-out;\n  outline: none !important;\n\n  &:hover {\n    background: #ececec;\n  }\n\n  &.focus-visible {\n    ${defaultOutline};\n  }\n\n  ${media.smallerThanMinTablet`\n    top: 4px;\n    right: 4px;\n  `}\n`;\n\nconst CloseIcon = styled(Icon)`\n  width: 12px;\n  height: 12px;\n  fill: #000;\n`;\n\nexport interface IMapConfigProps {\n  centerLatLng?: LatLngTuple;\n  points?: Point[];\n  zoomLevel?: number;\n  areas?: GeoJSON.Polygon[];\n  mapHeight?: string;\n  noMarkerClustering?: boolean;\n  zoomControlPosition?: 'topleft' | 'topright' | 'bottomleft' | 'bottomright';\n  layersControlPosition?: 'topleft' | 'topright' | 'bottomleft' | 'bottomright';\n}\n\nexport interface IMapProps {\n  onInit?: (map: ILeafletMap) => void;\n  onBoxClose?: (event: React.FormEvent) => void;\n  className?: string;\n  projectId?: string | null;\n  hideLegend?: boolean;\n  boxContent?: JSX.Element | null;\n}\n\nconst Map = memo<IMapProps & IMapConfigProps>(\n  ({\n    projectId,\n    centerLatLng,\n    zoomLevel,\n    mapHeight,\n    points,\n    noMarkerClustering,\n    zoomControlPosition,\n    layersControlPosition,\n    boxContent,\n    onInit,\n    onBoxClose,\n    className,\n    hideLegend,\n  }) => {\n    const appConfig = useAppConfiguration();\n\n    const [\n      additionalLeafletConfig,\n      setAdditionalLeafletConfig,\n    ] = useState<ILeafletMapConfig | null>(null);\n\n    const center = useMemo(() => {\n      return getCenter(centerLatLng, appConfig);\n    }, [centerLatLng, appConfig]);\n\n    const zoom = useMemo(() => {\n      return getZoomLevel(zoomLevel, appConfig);\n    }, [zoomLevel, appConfig]);\n\n    const tileProvider = useMemo(() => {\n      return getTileProvider(appConfig);\n    }, [appConfig]);\n\n    const tileOptions = useMemo(() => {\n      return getTileOptions();\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tileProvider]);\n\n    const leafletConfig = useMemo(() => {\n      return {\n        points,\n        noMarkerClustering,\n        zoom,\n        center,\n        tileProvider,\n        tileOptions,\n        zoomControlPosition,\n        layersControlPosition,\n        ...additionalLeafletConfig,\n      };\n    }, [\n      points,\n      noMarkerClustering,\n      zoom,\n      center,\n      tileProvider,\n      tileOptions,\n      zoomControlPosition,\n      layersControlPosition,\n      additionalLeafletConfig,\n    ]);\n\n    const handleLeafletConfigChange = useCallback(\n      (leafletConfig: ILeafletMapConfig) => {\n        setAdditionalLeafletConfig(leafletConfig);\n      },\n      []\n    );\n\n    const handleBoxOnClose = (event: React.FormEvent) => {\n      event.preventDefault();\n      onBoxClose?.(event);\n    };\n\n    const handleOnInit = (map: L.Map) => {\n      onInit?.(map);\n    };\n\n    return (\n      <Container className={className || ''}>\n        <MapWrapper>\n          {!isNilOrError(boxContent) && (\n            <BoxContainer>\n              <CloseButton onClick={handleBoxOnClose}>\n                <CloseIcon name=\"close\" />\n              </CloseButton>\n\n              {boxContent}\n            </BoxContainer>\n          )}\n\n          <Suspense fallback={false}>\n            <LeafletMap\n              id=\"mapid\"\n              className=\"e2e-leafletmap\"\n              mapHeight={mapHeight}\n              onInit={handleOnInit}\n              {...leafletConfig}\n            />\n          </Suspense>\n          <Outlet\n            id=\"app.components.Map.leafletConfig\"\n            projectId={projectId}\n            onLeafletConfigChange={handleLeafletConfigChange}\n            centerLatLng={centerLatLng}\n            zoomLevel={zoomLevel}\n            points={points}\n          />\n        </MapWrapper>\n\n        {!hideLegend && (\n          <Outlet id=\"app.components.Map.Legend\" projectId={projectId} />\n        )}\n      </Container>\n    );\n  }\n);\n\nexport default Map;\n","import React, { memo } from 'react';\n\n// i18n\nimport localize, { InjectedLocalized } from 'utils/localize';\nimport { injectIntl, FormattedMessage, IMessageInfo } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Link from 'utils/cl-router/Link';\n\n// styles\nimport styled from 'styled-components';\nimport { fontSizes, colors, media } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\n// typings\nimport { Multiloc } from 'typings';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n`;\n\nconst HomeLink = styled(Link)`\n  width: 16px;\n`;\n\nconst HomeIcon = styled(Icon)`\n  flex: 0 0 14px;\n  height: 14px;\n  fill: ${colors.label};\n  margin-top: -3px;\n\n  &:hover {\n    fill: ${darken(0.25, colors.label)};\n  }\n`;\n\nconst Separator = styled.div`\n  margin: 0 15px;\n  font-size: ${fontSizes.large}px;\n  font-weight: 300;\n  line-height: normal;\n\n  ${media.smallerThanMaxTablet`\n    margin: 0 10px;\n  `}\n`;\n\nconst StyledLink = styled(Link)`\n  font-size: ${fontSizes.small}px;\n  color: ${colors.label};\n  text-decoration: none;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &:hover {\n    color: ${darken(0.2, colors.label)};\n    text-decoration: underline;\n  }\n`;\n\nconst LinkText = styled.span``;\n\ninterface ILink {\n  to: string;\n  text: Multiloc | IMessageInfo;\n}\n\nfunction isIMessageInfo(text: IMessageInfo | Multiloc): text is IMessageInfo {\n  return (text as IMessageInfo).message !== undefined;\n}\n\ninterface Props {\n  className?: string;\n  links: ILink[];\n  postType: 'idea' | 'initiative';\n}\n\nconst Breadcrumbs = memo(\n  ({\n    localize,\n    intl,\n    className,\n    links,\n    postType,\n  }: Props & InjectedLocalized & InjectedIntlProps) => {\n    return (\n      <Container className={className}>\n        <HomeLink id=\"e2e-home-page-link\" to=\"/\">\n          <HomeIcon\n            title={intl.formatMessage(messages.linkToHomePage)}\n            name=\"homeFilled\"\n          />\n        </HomeLink>\n        <Separator>/</Separator>\n        {links.map((link) => (\n          <StyledLink\n            key={link.to}\n            id={`e2e-${postType}-other-link`}\n            to={link.to}\n          >\n            <LinkText>\n              {isIMessageInfo(link.text) ? (\n                <FormattedMessage\n                  {...link.text.message}\n                  values={link.text.values}\n                />\n              ) : (\n                localize(link.text)\n              )}\n            </LinkText>\n          </StyledLink>\n        ))}\n      </Container>\n    );\n  }\n);\n\nexport default injectIntl(localize<Props & InjectedIntlProps>(Breadcrumbs));\n","import React, { PureComponent } from 'react';\nimport styled, { withTheme } from 'styled-components';\nimport { colors, fontSizes, media } from 'utils/styleUtils';\n\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\nimport { Icon, IconTooltip } from 'cl2-component-library';\nimport { StatusWrapper, StatusExplanation } from './SharedStyles';\n\nimport ProgressBar from 'components/UI/ProgressBar';\nimport Button from 'components/UI/Button';\n\nimport T from 'components/T';\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\nconst Container = styled.div``;\n\nconst StatusIcon = styled(Icon)`\n  path {\n    fill: ${colors.clGreyOnGreyBackground};\n  }\n  width: 30px;\n  height: 30px;\n  margin-bottom: 20px;\n`;\n\nconst VoteCounter = styled.div`\n  margin-top: 15px;\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst VoteTexts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding-bottom: 4px;\n`;\n\nconst VoteText = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${colors.clGreyOnGreyBackground};\n`;\n\nconst StyledProgressBar = styled(ProgressBar)`\n  height: 12px;\n  width: 100%;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: 20px;\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n  onScrollToOfficialFeedback: () => void;\n}\ninterface DataProps {}\n\ninterface Props extends InputProps, DataProps {\n  theme?: any;\n}\n\ninterface State {}\n\nclass Ineligible extends PureComponent<Props, State> {\n  handleOnReadAnswer = () => {\n    this.props.onScrollToOfficialFeedback();\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeSettings: { eligibility_criteria, voting_threshold },\n      initiativeStatus,\n    } = this.props;\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit = voting_threshold;\n\n    return (\n      <Container>\n        <StatusWrapper>\n          <T value={initiativeStatus.attributes.title_multiloc} />\n        </StatusWrapper>\n        <StatusIcon ariaHidden name=\"halt\" />\n        <StatusExplanation>\n          <FormattedMessage\n            {...messages.ineligibleStatusExplanation}\n            values={{\n              ineligibleStatusExplanationBold: (\n                <b>\n                  <FormattedMessage\n                    {...messages.ineligibleStatusExplanationBold}\n                  />\n                </b>\n              ),\n            }}\n          >\n            {(text) => (\n              <>\n                {text}\n                {eligibility_criteria && (\n                  <IconTooltip\n                    icon=\"info\"\n                    iconColor={this.props.theme.colorText}\n                    theme=\"light\"\n                    placement=\"bottom\"\n                    content={<T value={eligibility_criteria} supportHtml />}\n                  />\n                )}\n              </>\n            )}\n          </FormattedMessage>\n        </StatusExplanation>\n        <VoteCounter>\n          <VoteTexts>\n            <VoteText>\n              <FormattedMessage\n                {...messages.xVotes}\n                values={{ count: voteCount }}\n              />\n            </VoteText>\n            <VoteText>{voteLimit}</VoteText>\n          </VoteTexts>\n          <StyledProgressBar\n            progress={voteCount / voteLimit}\n            color=\"linear-gradient(270deg, #84939E 0%, #C8D0D6 100%)\"\n            bgColor={colors.lightGreyishBlue}\n          />\n        </VoteCounter>\n        <StyledButton onClick={this.handleOnReadAnswer}>\n          <FormattedMessage {...messages.readAnswer} />\n        </StyledButton>\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(Ineligible);\n","import React from 'react';\nimport IdeaCTAButton from './IdeaCTAButton';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from '../messages';\n\ninterface Props {\n  onClick?: () => void;\n  ariaExpanded?: boolean;\n}\n\nconst SharingButtonComponent = ({\n  intl: { formatMessage },\n  onClick,\n  ariaExpanded,\n}: Props & InjectedIntlProps) => {\n  return (\n    <IdeaCTAButton\n      iconName=\"share-arrow\"\n      buttonText={formatMessage(messages.share)}\n      onClick={onClick}\n      ariaExpanded={ariaExpanded}\n    />\n  );\n};\n\nexport default injectIntl(SharingButtonComponent);\n","import React, { memo, useState, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { darken } from 'polished';\nimport useIdea from 'hooks/useIdea';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { isNil } from 'lodash-es';\n\n// components\nimport { Icon, colors } from 'cl2-component-library';\nimport Modal from 'components/UI/Modal';\nimport Map, { Point } from 'components/Map';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\n\n// utils\nimport { getAddressOrFallbackDMS } from 'utils/map';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\n// styling\nimport { isRtl, fontSizes, media } from 'utils/styleUtils';\n\n// typings\nimport { LatLngTuple } from 'leaflet';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledIcon = styled(Icon)`\n  flex: 0 0 16px;\n  width: 16px;\n  fill: ${colors.label};\n  margin-right: 8px;\n\n  ${isRtl`\n    margin-right: 0;\n    margin-left: 8px;\n  `}\n`;\n\nconst OpenMapModalButton = styled.button`\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  line-height: 22px;\n  text-decoration: underline;\n  text-align: left;\n  margin: 0;\n  padding: 0;\n  border: none;\n  appearance: none;\n  cursor: pointer;\n\n  &:hover {\n    color: ${darken(0.2, colors.label)};\n  }\n`;\n\nconst Address = styled.div`\n  width: calc(100% - 35px);\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n`;\n\nconst MapContainer = styled.div`\n  padding: 30px;\n\n  ${media.smallerThanMinTablet`\n    padding: 20px;\n  `}\n`;\n\nexport interface Props {\n  projectId: string;\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst Location = memo<Props & InjectedIntlProps>(\n  ({ intl: { formatMessage }, projectId, ideaId, compact, className }) => {\n    const [isOpened, setIsOpened] = useState(false);\n    const idea = useIdea({ ideaId });\n\n    const point =\n      (!isNilOrError(idea) && idea.attributes?.location_point_geojson) || null;\n    const lat = point?.coordinates?.[1] || null;\n    const lng = point?.coordinates?.[0] || null;\n    const address = !isNilOrError(idea)\n      ? getAddressOrFallbackDMS(\n          idea.attributes.location_description,\n          idea.attributes.location_point_geojson\n        )\n      : null;\n\n    const points = useMemo(() => {\n      return point ? ([point] as Point[]) : undefined;\n    }, [point]);\n\n    const centerLatLng = useMemo(() => {\n      if (!isNil(lat) && !isNil(lng)) {\n        return [lat, lng] as LatLngTuple;\n      }\n      return;\n    }, [lat, lng]);\n\n    const closeModal = () => {\n      setIsOpened(false);\n    };\n\n    const openModal = () => {\n      setIsOpened(true);\n    };\n\n    if (address && points) {\n      return (\n        <Item className={className || ''} compact={compact}>\n          <Header>{formatMessage(messages.location)}</Header>\n          <Container>\n            <StyledIcon name=\"position\" ariaHidden />\n            <OpenMapModalButton id=\"e2e-map-popup\" onClick={openModal}>\n              {address}\n            </OpenMapModalButton>\n          </Container>\n          <Modal\n            opened={isOpened}\n            close={closeModal}\n            header={<Address>{address}</Address>}\n            width={1150}\n          >\n            <MapContainer>\n              <Map\n                projectId={projectId}\n                points={points}\n                centerLatLng={centerLatLng}\n                zoomLevel={15}\n              />\n            </MapContainer>\n          </Modal>\n        </Item>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(Location);\n","import React from 'react';\nimport tracks from '../tracks';\nimport { getUrlWithUtm, UtmParams, Medium } from '../utils';\n\n// style\nimport styled from 'styled-components';\nimport { fontSizes, colors, media } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport Facebook from '../buttons/Facebook';\nimport Twitter from '../buttons/Twitter';\nimport Messenger from '../buttons/Messenger';\nimport WhatsApp from '../buttons/WhatsApp';\nimport Email from '../buttons/Email';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  .sharingButton {\n    display: flex;\n    align-items: center;\n    padding: 10px 12px;\n    border-radius: ${(props: any) => props.theme.borderRadius};\n    cursor: pointer;\n    transition: all 100ms ease-out;\n    text-align: left;\n    color: ${colors.label};\n    font-size: ${fontSizes.base}px;\n\n    &:hover {\n      background-color: ${darken(0.06, 'white')};\n    }\n\n    &.messenger {\n      ${media.biggerThanMaxTablet`\n        display: none;\n      `}\n    }\n  }\n`;\n\nconst FacebookIcon = styled(Icon)`\n  width: 22px;\n  height: 18px;\n  margin-right: 10px;\n  fill: #3c5a99;\n`;\n\nconst MessengerIcon = styled(Icon)`\n  width: 22px;\n  height: 18px;\n  margin-right: 10px;\n  fill: rgba(0, 120, 255, 1);\n`;\n\nconst WhatsAppIcon = styled(Icon)`\n  width: 22px;\n  height: 22px;\n  fill: #23b43a;\n  margin-right: 10px;\n`;\n\nconst TwitterIcon = styled(Icon)`\n  width: 22px;\n  height: 17px;\n  fill: #1da1f2;\n  margin-right: 10px;\n`;\n\nconst EmailIcon = styled(Icon)`\n  margin-right: 10px;\n  width: 22px;\n  height: 17px;\n  fill: ${colors.secondaryText};\n`;\n\ninterface Props {\n  className?: string;\n  url: string;\n  twitterMessage: string;\n  whatsAppMessage: string;\n  emailSubject: string;\n  emailBody: string;\n  utmParams: UtmParams;\n  id?: string;\n}\n\nconst SharingDropdownContent = ({\n  id,\n  url,\n  className,\n  utmParams,\n  emailBody,\n  emailSubject,\n  twitterMessage,\n  whatsAppMessage,\n}: Props) => {\n  const getUrl = (medium: Medium) => {\n    return getUrlWithUtm(medium, url, utmParams);\n  };\n\n  const handleClick = (medium: Medium) => () => {\n    trackEventByName(tracks.shareButtonClicked.name, { network: medium });\n  };\n\n  const facebook = (\n    <Facebook\n      url={getUrl('facebook')}\n      className=\"sharingButton facebook\"\n      onClick={handleClick('facebook')}\n    >\n      {/*\n        For all sharing components, both children are aria-hidden.\n        The reasons are that (1) there's an aria-label for the text in all the components themselves\n        so we don't need to rely on the person who uses the component to think of adding text.\n        and (2) the icon needs to be hidden by default.\n      */}\n      <FacebookIcon ariaHidden name=\"facebook\" />\n      <span aria-hidden>{'Facebook'}</span>\n    </Facebook>\n  );\n\n  const messenger = (\n    <Messenger\n      className=\"sharingButton messenger\"\n      onClick={handleClick('messenger')}\n      url={getUrl('messenger')}\n    >\n      <MessengerIcon ariaHidden name=\"messenger\" />\n      <span aria-hidden>{'Messenger'}</span>\n    </Messenger>\n  );\n\n  const whatsapp = (\n    <WhatsApp\n      className=\"sharingButton whatsapp\"\n      onClick={handleClick('whatsapp')}\n      url={getUrl('whatsapp')}\n      whatsAppMessage={whatsAppMessage}\n    >\n      <WhatsAppIcon ariaHidden name=\"whatsapp\" />\n      <span aria-hidden>{'WhatsApp'}</span>\n    </WhatsApp>\n  );\n\n  const twitter = (\n    <Twitter\n      twitterMessage={twitterMessage}\n      url={getUrl('twitter')}\n      className={'sharingButton twitter'}\n      onClick={handleClick('twitter')}\n    >\n      <TwitterIcon ariaHidden name=\"twitter\" />\n      <span aria-hidden>{'Twitter'}</span>\n    </Twitter>\n  );\n\n  const email = (\n    <Email\n      className=\"sharingButton email\"\n      onClick={handleClick('email')}\n      emailBody={emailBody}\n      emailSubject={emailSubject}\n    >\n      <EmailIcon ariaHidden name=\"email\" />\n      <span aria-hidden>{'Email'}</span>\n    </Email>\n  );\n\n  return (\n    <Container id={id || ''} className={className || ''}>\n      {facebook}\n      {messenger}\n      {whatsapp}\n      {twitter}\n      {email}\n    </Container>\n  );\n};\n\nexport default SharingDropdownContent;\n","import React, { memo, useState } from 'react';\nimport clHistory from 'utils/cl-router/history';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport HasPermission from 'components/HasPermission';\nimport MoreActionsMenu from 'components/UI/MoreActionsMenu';\nimport Modal from 'components/UI/Modal';\nimport SpamReportForm from 'containers/SpamReport';\n\n// hooks\nimport useAuthUser from 'hooks/useAuthUser';\nimport useProject from 'hooks/useProject';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport { InjectedIntlProps } from 'react-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\n\n// services\nimport { deleteIdea, IIdeaData } from 'services/ideas';\nimport { ProcessType } from 'services/projects';\n\n// styling\nimport styled from 'styled-components';\n\nconst Container = styled.div``;\n\nconst MoreActionsMenuWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\ninterface Props {\n  idea: IIdeaData;\n  className?: string;\n  projectId: string;\n}\n\nconst IdeaMoreActions = memo(\n  ({\n    idea,\n    className,\n    projectId,\n    intl: { formatMessage },\n  }: Props & InjectedIntlProps) => {\n    const [isSpamModalVisible, setIsSpamModalVisible] = useState<boolean>(\n      false\n    );\n    const authUser = useAuthUser();\n    const project = useProject({ projectId });\n\n    const openSpamModal = () => {\n      setIsSpamModalVisible(true);\n    };\n\n    const closeSpamModal = () => {\n      setIsSpamModalVisible(false);\n    };\n\n    const onEditIdea = () => {\n      clHistory.push(`/ideas/edit/${idea.id}`);\n    };\n\n    const onDeleteIdea = (ideaId: string, processType: ProcessType) => () => {\n      const deleteConfirmationMessage = {\n        continuous: messages.deleteInputConfirmation,\n        timeline: messages.deleteInputInTimelineConfirmation,\n      }[processType];\n\n      if (window.confirm(formatMessage(deleteConfirmationMessage))) {\n        deleteIdea(ideaId);\n        clHistory.goBack();\n      }\n    };\n\n    if (\n      !isNilOrError(authUser) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(project)\n    ) {\n      const ideaId = idea.id;\n      const processType = project.attributes.process_type;\n\n      return (\n        <Container className={className}>\n          <MoreActionsMenuWrapper>\n            <HasPermission item={idea} action=\"edit\" context={idea}>\n              <MoreActionsMenu\n                ariaLabel={<FormattedMessage {...messages.moreOptions} />}\n                id=\"e2e-idea-more-actions\"\n                actions={[\n                  {\n                    label: <FormattedMessage {...messages.reportAsSpam} />,\n                    handler: openSpamModal,\n                  },\n                  {\n                    label: <FormattedMessage {...messages.editPost} />,\n                    handler: onEditIdea,\n                  },\n                  {\n                    label: <FormattedMessage {...messages.deletePost} />,\n                    handler: onDeleteIdea(ideaId, processType),\n                  },\n                ]}\n              />\n              <HasPermission.No>\n                <MoreActionsMenu\n                  id=\"e2e-idea-more-actions\"\n                  actions={[\n                    {\n                      label: <FormattedMessage {...messages.reportAsSpam} />,\n                      handler: openSpamModal,\n                    },\n                  ]}\n                  ariaLabel={<FormattedMessage {...messages.moreOptions} />}\n                />\n              </HasPermission.No>\n            </HasPermission>\n          </MoreActionsMenuWrapper>\n          <Modal\n            opened={isSpamModalVisible}\n            close={closeSpamModal}\n            header={<FormattedMessage {...messages.reportAsSpamModalTitle} />}\n          >\n            <SpamReportForm resourceId={idea.id} resourceType=\"ideas\" />\n          </Modal>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(IdeaMoreActions);\n","// libraries\nimport React, { memo } from 'react';\nimport { adopt } from 'react-adopt';\nimport { get } from 'lodash-es';\nimport { Helmet } from 'react-helmet';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetUser, { GetUserChildProps } from 'resources/GetUser';\nimport GetInitiativeImages, {\n  GetInitiativeImagesChildProps,\n} from 'resources/GetInitiativeImages';\n\n// i18n\nimport messages from './messages';\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\n// utils\nimport { stripHtml } from 'utils/textUtils';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { imageSizes } from 'utils/fileTools';\nimport getAlternateLinks from 'utils/cl-router/getAlternateLinks';\nimport getCanonicalLink from 'utils/cl-router/getCanonicalLink';\n\ninterface InputProps {\n  initiativeId: string;\n}\n\ninterface DataProps {\n  initiative: GetInitiativeChildProps;\n  author: GetUserChildProps;\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n  authUser: GetAuthUserChildProps;\n  initiativeImages: GetInitiativeImagesChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst InitiativeMeta = memo<Props & InjectedIntlProps & InjectedLocalized>(\n  ({\n    initiative,\n    locale,\n    tenant,\n    authUser,\n    initiativeImages,\n    author,\n    localize,\n    intl: { formatMessage },\n  }) => {\n    if (\n      !isNilOrError(locale) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(initiative)\n    ) {\n      const { title_multiloc, body_multiloc } = initiative.attributes;\n      const tenantLocales = tenant.attributes.settings.core.locales;\n      const localizedTitle = localize(title_multiloc, 50);\n      const initiativeTitle = formatMessage(messages.metaTitle, {\n        initiativeTitle: localizedTitle,\n      });\n      const initiativeDescription = stripHtml(localize(body_multiloc), 250);\n      const initiativeImage =\n        !isNilOrError(initiativeImages) && initiativeImages.length > 0\n          ? initiativeImages[0].attributes.versions.fb\n          : null;\n      const initiativeUrl = window.location.href;\n      const initiativeOgTitle = formatMessage(messages.metaOgTitle, {\n        initiativeTitle: localizedTitle,\n      });\n      const initiativeAuthorName = !isNilOrError(author)\n        ? `${author.attributes.first_name} ${author.attributes.last_name}`\n        : 'anonymous';\n\n      const articleJson = {\n        '@type': 'Article',\n        image: initiativeImage,\n        headline: initiativeTitle,\n        author: initiativeAuthorName,\n        mainEntityOfPage: {\n          '@type': 'WebPage',\n          '@id': initiativeUrl,\n        },\n        datePublished: initiative.attributes.published_at,\n      };\n\n      const json = {\n        '@context': 'http://schema.org',\n        '@type': 'BreadcrumbList',\n        itemListElement: [\n          {\n            '@type': 'ListItem',\n            position: 1,\n            item: {\n              '@id': tenant.attributes.host,\n              name: tenant.attributes.name,\n              image: tenant.attributes.logo\n                ? tenant.attributes.logo.large\n                : null,\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 4,\n            item: {\n              '@id': `${tenant.attributes.host}/initiatives`,\n              name: 'Initiatives',\n            },\n          },\n        ],\n      };\n\n      return (\n        <Helmet>\n          <title>\n            {`\n            ${\n              authUser && authUser.attributes.unread_notifications\n                ? `(${authUser.attributes.unread_notifications}) `\n                : ''\n            }\n            ${initiativeTitle}`}\n          </title>\n          {getCanonicalLink()}\n          {getAlternateLinks(tenantLocales)}\n          <meta name=\"title\" content={initiativeTitle} />\n          <meta name=\"description\" content={initiativeDescription} />\n\n          <meta property=\"og:type\" content=\"article\" />\n          <meta property=\"og:title\" content={initiativeOgTitle} />\n          <meta\n            property=\"og:description\"\n            content={formatMessage(messages.initiativeOgDescription)}\n          />\n          {initiativeImage && (\n            <meta property=\"og:image\" content={initiativeImage} />\n          )}\n          <meta\n            property=\"og:image:width\"\n            content={`${imageSizes.initiativeImg.fb[0]}`}\n          />\n          <meta\n            property=\"og:image:height\"\n            content={`${imageSizes.initiativeImg.fb[1]}`}\n          />\n\n          <meta name=\"twitter:title\" content={initiativeOgTitle} />\n          <meta\n            name=\"twitter:description\"\n            content={formatMessage(messages.initiativeOgDescription)}\n          />\n          {initiativeImage && (\n            <meta name=\"twitter:image\" content={initiativeImage} />\n          )}\n          <meta name=\"twitter:card\" content=\"summary_large_image\" />\n\n          {initiativeImage && (\n            <script type=\"application/ld+json\">\n              {JSON.stringify(articleJson)}\n            </script>\n          )}\n          <script type=\"application/ld+json\">{JSON.stringify(json)}</script>\n\n          <meta property=\"og:url\" content={initiativeUrl} />\n          <meta property=\"og:locale\" content={locale} />\n        </Helmet>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n  initiativeImages: ({ initiativeId, render }) => (\n    <GetInitiativeImages initiativeId={initiativeId}>\n      {render}\n    </GetInitiativeImages>\n  ),\n  author: ({ initiative, render }) => (\n    <GetUser id={get(initiative, 'relationships.author.data.id', null)}>\n      {render}\n    </GetUser>\n  ),\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n});\n\nconst InitiativeMetaWithHoc = injectIntl<Props>(\n  injectLocalize<Props & InjectedIntlProps>(InitiativeMeta)\n);\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <InitiativeMetaWithHoc {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React, { memo } from 'react';\nimport styled from 'styled-components';\nimport { IPhaseFileData } from 'services/phaseFiles';\nimport { IEventFileData } from 'services/eventFiles';\nimport { IIdeaFileData } from 'services/ideaFiles';\nimport { darken } from 'polished';\n\n// components\nimport { Icon, colors, media } from 'cl2-component-library';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst FileDownloadLink = styled.a`\n  color: ${colors.label};\n  display: inline-block;\n  margin-right: 10px;\n  hyphens: auto;\n  text-decoration: underline;\n\n  &:hover {\n    color: ${darken(0.2, colors.label)};\n    text-decoration: underline;\n  }\n\n  ${media.smallerThanMinTablet`\n    margin-right: 0;\n  `}\n`;\n\nconst PaperclipIcon = styled(Icon)`\n  width: 12px;\n  height: 20px;\n  fill: ${colors.label};\n  margin-right: 10px;\n`;\n\nexport interface Props {\n  className?: string;\n  file: IPhaseFileData | IIdeaFileData | IEventFileData;\n}\n\nconst Attachment = memo<Props>(({ className, file }) => {\n  return (\n    <Container className={className}>\n      <PaperclipIcon name=\"paperclip\" ariaHidden />\n      <FileDownloadLink\n        href={file.attributes.file.url}\n        download={file.attributes.name}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {file.attributes.name}\n      </FileDownloadLink>\n    </Container>\n  );\n});\n\nexport default Attachment;\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { media, defaultCardStyle } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport moment from 'moment';\nimport messages from './messages';\nimport {\n  InitiativeStatusCode,\n  IInitiativeStatusData,\n} from 'services/initiativeStatuses';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetInitiativeStatus, {\n  GetInitiativeStatusChildProps,\n} from 'resources/GetInitiativeStatus';\nimport { IInitiativeData } from 'services/initiatives';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport { addVote, deleteVote } from 'services/initiativeVotes';\nimport ProposedNotVoted from './ProposedNotVoted';\nimport ProposedVoted from './ProposedVoted';\nimport Expired from './Expired';\nimport ThresholdReached from './ThresholdReached';\nimport Answered from './Answered';\nimport Ineligible from './Ineligible';\nimport Custom from './Custom';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\nimport GetInitiativesPermissions, {\n  GetInitiativesPermissionsChildProps,\n} from 'resources/GetInitiativesPermissions';\nimport { IInitiativeDisabledReason } from 'hooks/useInitiativesPermissions';\nimport { trackEventByName } from 'utils/analytics';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\nconst Container = styled.div`\n  ${media.biggerThanMaxTablet`\n    margin-bottom: 45px;\n    padding: 35px;\n    border: 1px solid #e0e0e0;\n    ${defaultCardStyle};\n  `}\n\n  ${media.smallerThanMaxTablet`\n    padding: 15px;\n  `}\n`;\n\ninterface VoteControlComponentProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: IAppConfigurationSettings['initiatives'];\n  userVoted: boolean;\n  onVote?: () => void;\n  onCancelVote?: () => void;\n  onScrollToOfficialFeedback?: () => void;\n  disabledReason?: IInitiativeDisabledReason | null | undefined;\n}\n\ntype TComponentMap = {\n  [key in InitiativeStatusCode]: {\n    [key in 'voted' | 'notVoted']: React.ComponentType<\n      VoteControlComponentProps\n    >;\n  };\n};\n\n/** Maps the initiative status and whether the user voted or not to the right component to render */\nconst componentMap: TComponentMap = {\n  proposed: {\n    voted: ProposedVoted,\n    notVoted: ProposedNotVoted,\n  },\n  expired: {\n    voted: Expired,\n    notVoted: Expired,\n  },\n  threshold_reached: {\n    voted: ThresholdReached,\n    notVoted: ThresholdReached,\n  },\n  answered: {\n    voted: Answered,\n    notVoted: Answered,\n  },\n  ineligible: {\n    voted: Ineligible,\n    notVoted: Ineligible,\n  },\n  custom: {\n    voted: Custom,\n    notVoted: Custom,\n  },\n};\n\ninterface InputProps {\n  initiativeId: string;\n  className?: string;\n  onScrollToOfficialFeedback: () => void;\n  id?: string;\n}\n\ninterface DataProps {\n  tenant: GetAppConfigurationChildProps;\n  initiative: GetInitiativeChildProps;\n  initiativeStatus: GetInitiativeStatusChildProps;\n  authUser: GetAuthUserChildProps;\n  votingPermission: GetInitiativesPermissionsChildProps;\n}\n\ninterface State {}\n\ninterface Props extends InputProps, DataProps {}\n\nclass VoteControl extends PureComponent<Props, State> {\n  handleOnvote = () => {\n    const { votingPermission } = this.props;\n    const requiredAction = votingPermission?.action;\n    switch (requiredAction) {\n      case 'sign_in_up':\n        trackEventByName(\n          'Sign up/in modal opened in response to clicking vote initiative'\n        );\n        openSignUpInModal({\n          flow: 'signup',\n          verification: false,\n          verificationContext: undefined,\n          action: () => this.vote(),\n        });\n        break;\n      case 'sign_in_up_and_verify':\n        trackEventByName(\n          'Sign up/in modal opened in response to clicking vote initiative'\n        );\n        openSignUpInModal({\n          flow: 'signup',\n          verification: true,\n          verificationContext: {\n            type: 'initiative',\n            action: 'voting_initiative',\n          },\n          action: () => this.vote(),\n        });\n        break;\n      case 'verify':\n        trackEventByName(\n          'Verification modal opened in response to clicking vote initiative'\n        );\n        openVerificationModal({\n          context: {\n            action: 'voting_initiative',\n            type: 'initiative',\n          },\n        });\n        break;\n      default:\n        this.vote();\n    }\n  };\n\n  vote = () => {\n    const { initiative } = this.props;\n\n    if (!isNilOrError(initiative)) {\n      addVote(initiative.id, { mode: 'up' });\n    }\n  };\n\n  handleOnCancelVote = () => {\n    const { initiative } = this.props;\n\n    if (\n      !isNilOrError(initiative) &&\n      initiative.relationships?.user_vote?.data?.id\n    ) {\n      deleteVote(initiative.id, initiative.relationships.user_vote.data.id);\n    }\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeStatus,\n      tenant,\n      className,\n      onScrollToOfficialFeedback,\n      id,\n      votingPermission,\n    } = this.props;\n    if (\n      isNilOrError(initiative) ||\n      isNilOrError(initiativeStatus) ||\n      isNilOrError(tenant) ||\n      !tenant.attributes.settings.initiatives\n    ) {\n      return null;\n    }\n\n    const expiresAt = moment(\n      initiative.attributes.expires_at,\n      'YYYY-MM-DDThh:mm:ss.SSSZ'\n    );\n    const durationAsSeconds = moment\n      .duration(expiresAt.diff(moment()))\n      .asSeconds();\n    const isExpired = durationAsSeconds < 0;\n    const statusCode =\n      initiativeStatus.attributes.code === 'proposed' && isExpired\n        ? 'expired'\n        : initiativeStatus.attributes.code;\n    const userVoted = !!(\n      initiative.relationships.user_vote &&\n      initiative.relationships.user_vote.data\n    );\n    const StatusComponent =\n      componentMap[statusCode][userVoted ? 'voted' : 'notVoted'];\n    const initiativeSettings = tenant.attributes.settings.initiatives;\n\n    return (\n      <Container id={id || ''} className={className || ''} aria-live=\"polite\">\n        <ScreenReaderOnly>\n          <FormattedMessage tagName=\"h3\" {...messages.invisibleTitle} />\n        </ScreenReaderOnly>\n        <StatusComponent\n          initiative={initiative}\n          initiativeStatus={initiativeStatus}\n          initiativeSettings={initiativeSettings}\n          userVoted={userVoted}\n          onVote={this.handleOnvote}\n          onCancelVote={this.handleOnCancelVote}\n          onScrollToOfficialFeedback={onScrollToOfficialFeedback}\n          disabledReason={votingPermission?.disabledReason}\n        />\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n  initiativeStatus: ({ initiative, render }) => {\n    if (\n      !isNilOrError(initiative) &&\n      initiative.relationships.initiative_status &&\n      initiative.relationships.initiative_status.data\n    ) {\n      return (\n        <GetInitiativeStatus\n          id={initiative.relationships.initiative_status.data.id}\n        >\n          {render}\n        </GetInitiativeStatus>\n      );\n    }\n\n    return null;\n  },\n  votingPermission: <GetInitiativesPermissions action=\"voting_initiative\" />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <VoteControl {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React, { memo, useCallback, MouseEvent } from 'react';\nimport clHistory from 'utils/cl-router/history';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\nimport useProject from 'hooks/useProject';\nimport useAuthUser from 'hooks/useAuthUser';\n\n// components\nimport VoteControl from 'components/VoteControl';\nimport { Icon } from 'cl2-component-library';\n\n// utils\nimport eventEmitter from 'utils/eventEmitter';\nimport { openVerificationModal } from 'components/Verification/verificationModalEvents';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// styling\nimport styled from 'styled-components';\nimport { media, colors, fontSizes } from 'utils/styleUtils';\nimport { lighten } from 'polished';\n\n// typings\nimport { IdeaVotingDisabledReason } from 'services/ideas';\n\nconst Container = styled.div`\n  flex: 0 0 ${(props) => props.theme.mobileTopBarHeight}px;\n  height: ${(props) => props.theme.mobileTopBarHeight}px;\n  background-color: #fff;\n  border-bottom: solid 1px ${lighten(0.3, colors.label)};\n`;\n\nconst TopBarInner = styled.div`\n  height: 100%;\n  padding-left: 15px;\n  padding-right: 15px;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  ${media.biggerThanMinTablet`\n    padding-left: 30px;\n    padding-right: 30px;\n  `}\n`;\n\nconst Left = styled.div`\n  height: 48px;\n  align-items: center;\n  display: flex;\n`;\n\nconst Right = styled.div``;\n\nconst GoBackIcon = styled(Icon)`\n  height: 22px;\n  fill: ${colors.label};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: fill 100ms ease-out;\n`;\n\nconst GoBackButton = styled.button`\n  width: 45px;\n  height: 45px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  margin: 0;\n  margin-right: 6px;\n  margin-left: -2px;\n  cursor: pointer;\n  background: #fff;\n  border-radius: 50%;\n  transition: all 100ms ease-out;\n  border: solid 1px ${lighten(0.2, colors.label)};\n\n  &:hover {\n    border-color: #000;\n\n    ${GoBackIcon} {\n      fill: #000;\n    }\n  }\n`;\n\nconst GoBackLabel = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  transition: fill 100ms ease-out;\n\n  ${media.phone`\n    display: none;\n  `}\n`;\n\ninterface Props {\n  ideaId: string;\n  insideModal?: boolean;\n  goBackAction?: () => void;\n  className?: string;\n}\n\nconst IdeaShowPageTopBar = memo<Props>(\n  ({ ideaId, insideModal, goBackAction, className }) => {\n    const authUser = useAuthUser();\n    const idea = useIdea({ ideaId });\n    const project = useProject({\n      projectId: !isNilOrError(idea)\n        ? idea.relationships.project.data.id\n        : null,\n    });\n\n    const onGoBack = useCallback(\n      (event: MouseEvent<HTMLElement>) => {\n        event.preventDefault();\n\n        if (goBackAction) {\n          goBackAction?.();\n        } else if (insideModal) {\n          eventEmitter.emit('closeIdeaModal');\n        } else if (!isNilOrError(project)) {\n          clHistory.push(`/projects/${project.attributes.slug}`);\n        } else {\n          clHistory.push('/');\n        }\n      },\n      [insideModal, project, goBackAction]\n    );\n\n    const onDisabledVoteClick = useCallback(\n      (disabled_reason: IdeaVotingDisabledReason) => {\n        if (\n          !isNilOrError(authUser) &&\n          !isNilOrError(project) &&\n          disabled_reason === 'not_verified'\n        ) {\n          const pcType =\n            project.attributes.process_type === 'continuous'\n              ? 'project'\n              : 'phase';\n          const pcId =\n            project.relationships?.current_phase?.data?.id || project.id;\n\n          if (pcId && pcType) {\n            openVerificationModal({\n              context: {\n                action: 'voting_idea',\n                id: pcId,\n                type: pcType,\n              },\n            });\n          }\n        }\n      },\n      [authUser, project]\n    );\n\n    return (\n      <Container className={className || ''}>\n        <TopBarInner>\n          <Left>\n            <GoBackButton onClick={onGoBack}>\n              <GoBackIcon ariaHidden name=\"arrow-back\" />\n            </GoBackButton>\n            <GoBackLabel>\n              <FormattedMessage {...messages.goBack} />\n            </GoBackLabel>\n          </Left>\n          <Right>\n            <VoteControl\n              styleType=\"border\"\n              size=\"2\"\n              ideaId={ideaId}\n              disabledVoteClick={onDisabledVoteClick}\n            />\n          </Right>\n        </TopBarInner>\n      </Container>\n    );\n  }\n);\n\nexport default IdeaShowPageTopBar;\n","import { useState, useEffect } from 'react';\nimport {\n  ideaFormSchemaStream,\n  IIdeaFormSchemas,\n} from 'services/ideaCustomFieldsSchemas';\nimport { Observable, of } from 'rxjs';\n\ninterface Props {\n  projectId: string | null;\n}\n\nexport default function useIdeaCustomFieldsSchemas({ projectId }: Props) {\n  const [ideaCustomFieldsSchemas, setIdeaCustomFieldsSchemas] = useState<\n    IIdeaFormSchemas | undefined | null | Error\n  >(undefined);\n\n  useEffect(() => {\n    let observable: Observable<IIdeaFormSchemas | null> = of(null);\n\n    if (projectId) {\n      observable = ideaFormSchemaStream(projectId).observable;\n    }\n\n    const subscription = observable.subscribe((ideaCustomFieldsSchemas) => {\n      setIdeaCustomFieldsSchemas(ideaCustomFieldsSchemas);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [projectId]);\n\n  return ideaCustomFieldsSchemas;\n}\n","import React, { PureComponent } from 'react';\n\nimport styled, { withTheme } from 'styled-components';\nimport { colors, fontSizes, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { StatusExplanation } from './SharedStyles';\nimport { getDaysRemainingUntil } from 'utils/dateUtils';\n\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\nimport CountDown from './CountDown';\nimport { Icon, IconTooltip } from 'cl2-component-library';\n\nimport ProgressBar from 'components/UI/ProgressBar';\nimport Button from 'components/UI/Button';\n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport T from 'components/T';\nimport { IInitiativeDisabledReason } from 'hooks/useInitiativesPermissions';\nimport { darken } from 'polished';\nimport Tippy from '@tippyjs/react';\n\nconst Container = styled.div``;\n\nconst CountDownWrapper = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst StatusIcon = styled(Icon)`\n  path {\n    fill: ${(props) => props.theme.colorMain};\n  }\n  width: 31px;\n  height: 31px;\n  margin-bottom: 10px;\n`;\n\nconst VoteCounter = styled.div`\n  margin-top: 15px;\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst VoteText = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding-bottom: 4px;\n`;\n\nconst VoteTextLeft = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorMain};\n`;\n\nconst VoteTextRight = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n`;\n\nconst StyledProgressBar = styled(ProgressBar)`\n  height: 12px;\n  width: 100%;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: 20px;\n\n  svg {\n    margin-top: -2px;\n  }\n`;\n\nconst OnDesktop = styled.span`\n  display: inline;\n\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst OnMobile = styled.span`\n  display: inline;\n\n  ${media.biggerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst TooltipContent = styled.div<{ inMap?: boolean }>`\n  display: flex;\n  align-items: center;\n  padding: ${(props) => (props.inMap ? '0px' : '15px')};\n`;\n\nconst TooltipContentIcon = styled(Icon)`\n  flex: 0 0 25px;\n  width: 20px;\n  height: 25px;\n  margin-right: 1rem;\n`;\n\nconst TooltipContentText = styled.div`\n  flex: 1 1 auto;\n  color: ${colors.text};\n  font-size: ${fontSizes.base}px;\n  line-height: normal;\n  font-weight: 400;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n\n  a,\n  button {\n    color: ${colors.clBlueDark};\n    font-size: ${fontSizes.base}px;\n    line-height: normal;\n    font-weight: 400;\n    text-align: left;\n    text-decoration: underline;\n    white-space: normal;\n    overflow-wrap: break-word;\n    word-wrap: break-word;\n    word-break: break-all;\n    word-break: break-word;\n    hyphens: auto;\n    display: inline;\n    padding: 0px;\n    margin: 0px;\n    cursor: pointer;\n    transition: all 100ms ease-out;\n\n    &:hover {\n      color: ${darken(0.15, colors.clBlueDark)};\n      text-decoration: underline;\n    }\n  }\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n  onVote: () => void;\n  disabledReason: IInitiativeDisabledReason;\n}\n\ninterface Props extends InputProps {}\n\nconst disabledMessages: {\n  [key in IInitiativeDisabledReason]: ReactIntl.FormattedMessage.MessageDescriptor;\n} = {\n  notPermitted: messages.votingNotPermitted,\n};\n\nclass ProposedNotVoted extends PureComponent<Props & { theme: any }> {\n  handleOnVote = () => {\n    this.props.onVote();\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeSettings: { voting_threshold, threshold_reached_message },\n      theme,\n      disabledReason,\n    } = this.props;\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit = voting_threshold;\n    const daysLeft = getDaysRemainingUntil(initiative.attributes.expires_at);\n\n    const thresholdReachedTooltip = threshold_reached_message ? (\n      <IconTooltip\n        icon=\"info\"\n        iconColor={this.props.theme.colorText}\n        theme=\"light\"\n        placement=\"bottom\"\n        content={<T value={threshold_reached_message} supportHtml />}\n      />\n    ) : (\n      <></>\n    );\n\n    const tippyContent = disabledReason ? (\n      <TooltipContent id=\"tooltip-content\" className=\"e2e-disabled-tooltip\">\n        <TooltipContentIcon name=\"lock-outlined\" ariaHidden />\n        <TooltipContentText>\n          <FormattedMessage {...disabledMessages[disabledReason]} />\n        </TooltipContentText>\n      </TooltipContent>\n    ) : null;\n\n    return (\n      <Container>\n        <CountDownWrapper>\n          <CountDown targetTime={initiative.attributes.expires_at} />\n        </CountDownWrapper>\n        <StatusIcon ariaHidden name=\"bullseye\" />\n        <StatusExplanation>\n          <OnDesktop>\n            <FormattedMessage\n              {...messages.proposedStatusExplanation}\n              values={{\n                votingThreshold: voting_threshold,\n                proposedStatusExplanationBold: (\n                  <b>\n                    <FormattedMessage\n                      {...messages.proposedStatusExplanationBold}\n                    />\n                  </b>\n                ),\n              }}\n            />\n            {thresholdReachedTooltip}\n          </OnDesktop>\n          <OnMobile>\n            <FormattedMessage\n              {...messages.proposedStatusExplanationMobile}\n              values={{\n                daysLeft,\n                votingThreshold: voting_threshold,\n                proposedStatusExplanationMobileBold: (\n                  <b>\n                    <FormattedMessage\n                      {...messages.proposedStatusExplanationMobileBold}\n                    />\n                  </b>\n                ),\n              }}\n            />\n            {thresholdReachedTooltip}\n          </OnMobile>\n        </StatusExplanation>\n        <VoteCounter>\n          <VoteText aria-hidden={true}>\n            <VoteTextLeft id=\"e2e-initiative-not-voted-vote-count\">\n              <FormattedMessage\n                {...messages.xVotes}\n                values={{ count: voteCount }}\n              />\n            </VoteTextLeft>\n            <VoteTextRight>{voteLimit}</VoteTextRight>\n          </VoteText>\n          <ScreenReaderOnly>\n            <FormattedMessage\n              {...messages.xVotesOfY}\n              values={{\n                xVotes: (\n                  <FormattedMessage\n                    {...messages.xVotes}\n                    values={{ count: voteCount }}\n                  />\n                ),\n                votingThreshold: voteLimit,\n              }}\n            />\n          </ScreenReaderOnly>\n          <StyledProgressBar\n            progress={voteCount / voteLimit}\n            color={theme.colorMain}\n            bgColor={colors.lightGreyishBlue}\n          />\n        </VoteCounter>\n        <Tippy\n          disabled={!tippyContent}\n          interactive={true}\n          placement=\"bottom\"\n          content={tippyContent || <></>}\n          theme=\"light\"\n          hideOnClick={false}\n        >\n          <div\n            tabIndex={tippyContent ? 0 : -1}\n            className={`e2e-idea-button ${tippyContent ? 'disabled' : ''} ${\n              disabledReason ? disabledReason : ''\n            }`}\n          >\n            <StyledButton\n              icon=\"upvote\"\n              aria-describedby=\"tooltip-content\"\n              iconAriaHidden\n              disabled={!!tippyContent}\n              buttonStyle=\"primary\"\n              onClick={this.handleOnVote}\n              id=\"e2e-initiative-upvote-button\"\n              ariaDisabled={false}\n            >\n              <FormattedMessage {...messages.vote} />\n            </StyledButton>\n          </div>\n        </Tippy>\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(ProposedNotVoted);\n","import React, { memo, useCallback, useState, Suspense } from 'react';\n\n// components\nimport { Icon, IconNames } from 'cl2-component-library';\n\n// animations\nimport CSSTransition from 'react-transition-group/CSSTransition';\n\n// styling\nimport styled from 'styled-components';\nimport { colors, fontSizes, media } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\nconst timeout = 300;\n\nconst Container = styled.div`\n  background: #fff;\n  border: 1px solid ${colors.separation};\n  border-radius: ${(props: any) => props.theme.borderRadius};\n`;\n\nconst Title = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst TitleIcon = styled(Icon)`\n  flex: 0 0 16px;\n  width: 16px;\n  height: 23px;\n  fill: ${colors.label};\n  margin-right: 13px;\n\n  ${media.smallerThanMinTablet`\n    flex: 0 0 14px;\n    width: 14px;\n    height: 20px;\n  `}\n`;\n\nconst ContentLabel = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  margin-right: 6px;\n  text-align: left;\n  transition: all 100ms ease-out;\n`;\n\nconst ContentToggleButton = styled.button`\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  padding-left: 18px;\n  padding-right: 20px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.base}px;\n  line-height: 24px;\n  font-weight: 600;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n\n  &:hover {\n    ${ContentLabel} {\n      color: ${darken(0.2, colors.label)};\n    }\n  }\n`;\n\nconst ArrowIcon = styled(Icon)`\n  flex: 0 0 13px;\n  width: 13px;\n  height: 13px;\n  fill: ${colors.label};\n  transform: rotate(90deg);\n  transition: all 0.2s linear;\n\n  &.open {\n    transform: rotate(0deg);\n  }\n`;\n\nconst Wrapper = styled.div<{ contentBackgroundColor?: string }>`\n  position: relative;\n  overflow: hidden;\n  z-index: 2;\n  padding: 20px;\n  background-color: ${(props) => props.contentBackgroundColor || '#fff'};\n  margin-top: 1px;\n\n  ${media.largePhone`\n    padding: 30px 20px;\n  `}\n\n  &.content-enter {\n    height: 0;\n    opacity: 0;\n\n    &.content-enter-active {\n      height: 100%;\n      opacity: 1;\n      transition: all ${timeout}ms ease-out;\n    }\n  }\n\n  &.content-exit {\n    height: 100%;\n    opacity: 1;\n\n    &.content-exit-active {\n      height: 0;\n      opacity: 0;\n      transition: all ${timeout}ms ease-out;\n    }\n  }\n`;\n\nexport interface Props {\n  className?: string;\n  titleIconName?: IconNames;\n  title: string | JSX.Element;\n  contentBackgroundColor?: string;\n  e2eId?: string;\n  /* children should be lazy-loaded. Search code for examples */\n  children: React.ReactNode;\n}\n\nconst CollapsibleBox = memo<Props>((props) => {\n  const [showContent, setShowContent] = useState<boolean>(false);\n\n  const handleContentToggle = useCallback(() => {\n    setShowContent(!showContent);\n  }, [showContent]);\n\n  const {\n    className,\n    titleIconName,\n    title,\n    children,\n    contentBackgroundColor,\n    e2eId,\n  } = props;\n\n  return (\n    <Container className={className}>\n      <ContentToggleButton\n        id={e2eId || ''}\n        aria-expanded={showContent}\n        onClick={handleContentToggle}\n      >\n        <Title>\n          {titleIconName && <TitleIcon name={titleIconName} />}\n          <ContentLabel>{title}</ContentLabel>\n        </Title>\n        <ArrowIcon name=\"dropdown\" className={showContent ? 'open' : ''} />\n      </ContentToggleButton>\n      <CSSTransition\n        classNames=\"content\"\n        in={showContent}\n        timeout={timeout}\n        mountOnEnter={true}\n        unmountOnExit={true}\n        exit={true}\n      >\n        <Wrapper contentBackgroundColor={contentBackgroundColor}>\n          <Suspense fallback={null}>{children}</Suspense>\n        </Wrapper>\n      </CSSTransition>\n    </Container>\n  );\n});\n\nexport default CollapsibleBox;\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport Avatar from 'components/Avatar';\nimport UserName from 'components/UI/UserName';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\n\n// i18n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps, FormattedDate } from 'react-intl';\nimport messages from './messages';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\n\n// style\nimport styled from 'styled-components';\nimport { colors, fontSizes, isRtl } from 'utils/styleUtils';\n\nconst UserWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  color: ${colors.label};\n  font-size: ${fontSizes.small}px;\n  margin-top: -4px;\n  margin-bottom: -6px;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst StyledAvatar = styled(Avatar)`\n  margin-right: 5px;\n  margin-left: -4px;\n\n  ${isRtl`\n    margin-right: -4px;\n    margin-left: 5px;\n  `}\n`;\n\nexport interface Props {\n  authorId: string | null;\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst PostedBy = memo<Props & InjectedIntlProps>(\n  ({ authorId, ideaId, compact, className, intl: { formatMessage } }) => {\n    const idea = useIdea({ ideaId });\n\n    if (!isNilOrError(idea)) {\n      const ideaPublishedAtDate = idea.attributes.published_at;\n      const userName = (\n        <UserName\n          userId={authorId}\n          isLinkToProfile={true}\n          underline={true}\n          color={colors.label}\n          fontSize={fontSizes.small}\n        />\n      );\n      const date = (\n        <FormattedDate\n          value={ideaPublishedAtDate}\n          year=\"numeric\"\n          month=\"long\"\n          day=\"numeric\"\n        />\n      );\n\n      return (\n        <Item className={`first ${className || ''}`} compact={compact}>\n          <Header>{formatMessage(messages.postedBy)}</Header>\n          <UserWrapper className=\"e2e-idea-author\">\n            <StyledAvatar\n              userId={authorId}\n              size={30}\n              isLinkToProfile={!!authorId}\n            />\n            <FormattedMessage\n              {...messages.byUserOnDate}\n              values={{ userName, date }}\n            />\n          </UserWrapper>\n        </Item>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl(PostedBy);\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\nimport PopContainer from 'components/UI/PopContainer';\nimport VoteControl from 'components/VoteControl';\nimport VotingDisabled from 'components/VoteControl/VotingDisabled';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\n\nconst Container = styled.div``;\n\nconst VoteControlWrapper = styled.div`\n  &.error {\n    display: none;\n  }\n`;\n\ninterface InputProps {\n  className?: string;\n  ideaId?: string;\n  projectId: string;\n}\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {\n  error: 'votingDisabled' | null;\n  isContainerVisible: boolean;\n}\n\nclass VoteWrapper extends PureComponent<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isContainerVisible: false,\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const { ideaId } = this.props;\n    const prevIdeaId = prevProps.ideaId;\n\n    if (ideaId !== prevIdeaId) {\n      this.setState({ isContainerVisible: false, error: null });\n    }\n  }\n\n  disabledVoteClick = () => {\n    this.setState({ error: 'votingDisabled' });\n  };\n\n  setVoteControlRef = () => {\n    // we check the ref returned by VoteControl to determine if the VoteControl component actually mounted\n    // If it didn't mount (because showVoteContrle === false), we also shouldn't mount the Container in this component\n    this.setState({ isContainerVisible: true });\n  };\n\n  render() {\n    const { className, ideaId, projectId, idea } = this.props;\n    const { isContainerVisible, error } = this.state;\n\n    const votingDescriptor = isNilOrError(idea)\n      ? null\n      : idea.attributes.action_descriptor.voting_idea;\n\n    if (!ideaId || !votingDescriptor) return null;\n\n    const voteControlComponent = (\n      <VoteControl\n        styleType=\"shadow\"\n        ideaId={ideaId}\n        disabledVoteClick={this.disabledVoteClick}\n        setRef={this.setVoteControlRef}\n        size=\"4\"\n      />\n    );\n\n    return !isContainerVisible ? (\n      voteControlComponent\n    ) : (\n      <Container className={className || ''}>\n        <VoteControlWrapper className={error ? 'error' : ''}>\n          {voteControlComponent}\n        </VoteControlWrapper>\n        {error === 'votingDisabled' && (\n          <PopContainer icon=\"lock-outlined\">\n            <VotingDisabled\n              votingDescriptor={votingDescriptor}\n              projectId={projectId}\n            />\n          </PopContainer>\n        )}\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  idea: ({ ideaId, render }) => <GetIdea ideaId={ideaId}>{render}</GetIdea>,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <VoteWrapper {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  sharingModalTitle: {\n    id: 'app.containers.IdeasShow.sharingModalTitle',\n    defaultMessage: 'Thanks for submitting your idea!',\n  },\n  optionSharingModalTitle: {\n    id: 'app.containers.IdeasShow.optionSharingModalTitle',\n    defaultMessage: 'Your option has been successfully posted!',\n  },\n  projectSharingModalTitle: {\n    id: 'app.containers.IdeasShow.projectSharingModalTitle',\n    defaultMessage: 'Thanks for submitting your project!',\n  },\n  questionSharingModalTitle: {\n    id: 'app.containers.IdeasShow.questionSharingModalTitle',\n    defaultMessage: 'Your question has been successfully posted!',\n  },\n  issueSharingModalTitle: {\n    id: 'app.containers.IdeasShow.issueSharingModalTitle',\n    defaultMessage: 'Thanks for submitting your issue!',\n  },\n  contributionSharingModalTitle: {\n    id: 'app.containers.IdeasShow.contributionSharingModalTitle',\n    defaultMessage: 'Thanks for submitting your contribution!',\n  },\n\n  sharingModalSubtitle: {\n    id: 'app.containers.IdeasShow.sharingModalSubtitle',\n    defaultMessage: 'Reach more people and make your voice heard.',\n  },\n  deletedUser: {\n    id: 'app.containers.IdeasShow.deletedUser',\n    defaultMessage: 'deleted user',\n  },\n  currentStatus: {\n    id: 'app.containers.IdeasShow.currentStatus',\n    defaultMessage: 'Current status',\n  },\n  moreOptions: {\n    id: 'app.components.IdeasShow.moreOptions',\n    defaultMessage: 'More options',\n  },\n  reportAsSpam: {\n    id: 'app.components.IdeasShow.reportAsSpam',\n    defaultMessage: 'Report as spam',\n  },\n  editPost: {\n    id: 'app.components.IdeasShow.editPost',\n    defaultMessage: 'Edit',\n  },\n  deletePost: {\n    id: 'app.components.IdeasShow.deletePost',\n    defaultMessage: 'Delete',\n  },\n  deleteInputConfirmation: {\n    id: 'app.components.IdeasShow.deleteInputConfirmation',\n    defaultMessage:\n      'Are you sure you want to delete this input? This action cannot be undone.',\n  },\n  deleteInputInTimelineConfirmation: {\n    id: 'app.components.IdeasShow.deleteInputInTimelineConfirmation',\n    defaultMessage:\n      'Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered.',\n  },\n  goBack: {\n    id: 'app.components.IdeasShow.goBack',\n    defaultMessage: 'Go back',\n  },\n  send: {\n    id: 'app.components.IdeasShow.send',\n    defaultMessage: 'Send',\n  },\n  skipSharing: {\n    id: 'app.components.IdeasShow.skipSharing',\n    defaultMessage: \"Skip it, I'll do it later\",\n  },\n  reportAsSpamModalTitle: {\n    id: 'app.containers.IdeasShow.reportAsSpamModalTitle',\n    defaultMessage: 'Why do you want to report this as spam?',\n  },\n  byUserOnDate: {\n    id: 'app.components.IdeasShow.byUserOnDate',\n    defaultMessage: 'By {userName} on {date}',\n  },\n  createdTimeAgo: {\n    id: 'app.components.IdeasShow.createdTimeAgo',\n    defaultMessage: 'Created {timeAgo}',\n  },\n  or: {\n    id: 'app.components.IdeasShow.or',\n    defaultMessage: 'or',\n  },\n  proposedBudgetTitle: {\n    id: 'app.components.IdeasShow.proposedBudgetTitle',\n    defaultMessage: 'Proposed budget',\n  },\n  bodyTitle: {\n    id: 'app.components.IdeasShow.bodyTitle',\n    defaultMessage: 'Description',\n  },\n  ideaTwitterMessage: {\n    id: 'app.containers.IdeasShow.ideaTwitterMessage',\n    defaultMessage: 'Support this idea: {postTitle}',\n  },\n  optionTwitterMessage: {\n    id: 'app.containers.IdeasShow.optionTwitterMessage',\n    defaultMessage: 'Support this option: {postTitle}',\n  },\n  issueTwitterMessage: {\n    id: 'app.containers.IdeasShow.issueTwitterMessage',\n    defaultMessage: 'Support this issue: {postTitle}',\n  },\n  projectTwitterMessage: {\n    id: 'app.containers.IdeasShow.projectTwitterMessage',\n    defaultMessage: 'Support this project: {postTitle}',\n  },\n  questionTwitterMessage: {\n    id: 'app.containers.IdeasShow.questionTwitterMessage',\n    defaultMessage: 'Join the discussion: {postTitle}',\n  },\n  contributionTwitterMessage: {\n    id: 'app.containers.IdeasShow.contributionTwitterMessage',\n    defaultMessage: 'Support this contribution: {postTitle}',\n  },\n  ideaWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.ideaWhatsAppMessage',\n    defaultMessage: 'Support this idea: {postTitle}',\n  },\n  optionWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.optionWhatsAppMessage',\n    defaultMessage: 'Support this option: {postTitle}',\n  },\n  contributionWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.contributionWhatsAppMessage',\n    defaultMessage: 'Support this contribution: {postTitle}',\n  },\n  projectWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.projectWhatsAppMessage',\n    defaultMessage: 'Support this project: {postTitle}',\n  },\n  questionWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.questionWhatsAppMessage',\n    defaultMessage: 'Join the discussion: {postTitle}',\n  },\n  issueWhatsAppMessage: {\n    id: 'app.containers.IdeasShow.ideasWhatsAppMessage',\n    defaultMessage: 'Support this issue: {postTitle}',\n  },\n  ideaEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.ideaEmailSharingSubject',\n    defaultMessage: 'Support this idea: {ideaTitle}',\n  },\n  ideaEmailSharingBody: {\n    id: 'app.containers.IdeasShow.ideaEmailSharingBody',\n    defaultMessage: \"Support this idea '{ideaTitle}' at {ideaUrl}!\",\n  },\n  optionEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.optionEmailSharingSubject',\n    defaultMessage: 'Support this option: {ideaTitle}',\n  },\n  optionEmailSharingBody: {\n    id: 'app.containers.IdeasShow.optionEmailSharingBody',\n    defaultMessage: \"Support this option '{ideaTitle}' at {ideaUrl}!\",\n  },\n  contributionEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.contributionEmailSharingSubject',\n    defaultMessage: 'Support this contribution: {ideaTitle}',\n  },\n  contributionEmailSharingBody: {\n    id: 'app.containers.IdeasShow.contributionEmailSharingBody',\n    defaultMessage: \"Support this contribution '{ideaTitle}' at {ideaUrl}!\",\n  },\n  questionEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.questionEmailSharingSubject',\n    defaultMessage: 'Join the discussion: {ideaTitle}',\n  },\n  questionEmailSharingBody: {\n    id: 'app.containers.IdeasShow.questionEmailSharingBody',\n    defaultMessage:\n      \"Join the discussion about this question '{ideaTitle}' at {ideaUrl}!\",\n  },\n  issueEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.issueEmailSharingSubject',\n    defaultMessage: 'Support this issue: {ideaTitle}',\n  },\n  issueEmailSharingBody: {\n    id: 'app.containers.IdeasShow.issueEmailSharingBody',\n    defaultMessage: \"Support this issue '{ideaTitle}' at {ideaUrl}!\",\n  },\n  projectEmailSharingSubject: {\n    id: 'app.containers.IdeasShow.projectEmailSharingSubject',\n    defaultMessage: 'Support this project: {ideaTitle}',\n  },\n  projectEmailSharingBody: {\n    id: 'app.containers.IdeasShow.projectEmailSharingBody',\n    defaultMessage: \"Support this project '{ideaTitle}' at {ideaUrl}!\",\n  },\n  share: {\n    id: 'app.containers.IdeasShow.share',\n    defaultMessage: 'Share',\n  },\n  commentCTA: {\n    id: 'app.containers.IdeasShow.commentCTA',\n    defaultMessage: 'Add a comment',\n  },\n});\n","import React, { memo } from 'react';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// hooks\nimport useTopics from 'hooks/useTopics';\n\n// i18n\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\n// styling\nimport styled from 'styled-components';\nimport { fontSizes, isRtl } from 'utils/styleUtils';\nimport { transparentize } from 'polished';\n\n// typings\nimport { ITopicData } from 'services/topics';\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  ${isRtl`\n    flex-direction: row-reverse;\n  `}\n`;\n\nconst Topic = styled.div`\n  color: ${({ theme }) => theme.colorSecondary};\n  font-size: ${fontSizes.small}px;\n  font-weight: 400;\n  padding: 6px 12px;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  border: 1px solid ${({ theme }) => transparentize(0.7, theme.colorSecondary)};\n  border-radius: ${(props: any) => props.theme.borderRadius};\n\n  ${isRtl`\n    margin-right: 0;\n    margin-left: 5px;\n  `}\n`;\n\ninterface Props {\n  topicIds: string[];\n  className?: string;\n  postType: 'idea' | 'initiative';\n}\n\nconst Topics = memo<Props & InjectedLocalized>(\n  ({ topicIds, className, postType, localize }) => {\n    const topics = useTopics({ topicIds });\n\n    if (!isNilOrError(topics) && topics.length > 0) {\n      return (\n        <Container id={`e2e-${postType}-topics`} className={className}>\n          {topics\n            .filter((topic) => !isNilOrError(topic))\n            .map((topic: ITopicData) => {\n              return (\n                <Topic key={topic.id} className={`e2e-${postType}-topic`}>\n                  {localize(topic.attributes.title_multiloc)}\n                </Topic>\n              );\n            })}\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst TopicsWithHoCs = injectLocalize<Props>(Topics);\n\nexport default TopicsWithHoCs;\n","import { API_PATH } from 'containers/App/constants';\nimport streams from 'utils/streams';\nimport { Multiloc } from 'typings';\n\nexport type InitiativeStatusCode =\n  | 'proposed'\n  | 'expired'\n  | 'threshold_reached'\n  | 'answered'\n  | 'ineligible'\n  | 'custom';\n\nexport interface IInitiativeStatusData {\n  id: string;\n  type: string;\n  attributes: {\n    title_multiloc: Multiloc;\n    color: string;\n    code: InitiativeStatusCode;\n    ordering: number;\n    description_multiloc: Multiloc;\n    transition_type: 'manual' | 'automatic';\n  };\n}\n\nexport interface IInitiativeStatuses {\n  data: IInitiativeStatusData[];\n}\n\nexport interface IInitiativeStatus {\n  data: IInitiativeStatusData;\n}\n\nexport function initiativeStatusStream(initiativeId: string) {\n  return streams.get<IInitiativeStatus>({\n    apiEndpoint: `${API_PATH}/initiative_statuses/${initiativeId}`,\n  });\n}\n\nexport function initiativeStatusesStream() {\n  return streams.get<IInitiativeStatuses>({\n    apiEndpoint: `${API_PATH}/initiative_statuses`,\n  });\n}\n","import React, { memo } from 'react';\n\n// components\nimport CollapsibleBox from 'components/UI/CollapsibleBox';\nconst Map = React.lazy(() => import('./Map'));\n\nexport interface Props {\n  address: string;\n  position: GeoJSON.Point;\n  className?: string;\n  projectId?: string | null;\n}\n\nconst DropdownMap = memo<Props>(\n  ({ address, position, className, projectId }) => {\n    return (\n      <CollapsibleBox\n        e2eId=\"e2e-map-toggle\"\n        className={className}\n        titleIconName=\"position\"\n        title={address}\n      >\n        <Map position={position} projectId={projectId} />\n      </CollapsibleBox>\n    );\n  }\n);\n\nexport default DropdownMap;\n","import React from 'react';\nimport Button from 'components/UI/Button';\nimport { IconNames } from 'cl2-component-library';\n\ninterface Props {\n  className?: string;\n  buttonText: string;\n  iconName?: IconNames;\n  onClick?: () => void;\n  ariaExpanded?: boolean;\n}\n\nconst IdeaCTAButton = ({\n  className,\n  buttonText,\n  iconName,\n  onClick,\n  ariaExpanded,\n}: Props) => {\n  return (\n    <Button\n      className={className}\n      icon={iconName}\n      iconAriaHidden={true}\n      buttonStyle=\"white\"\n      fontWeight=\"500\"\n      onClick={onClick}\n      ariaExpanded={ariaExpanded}\n    >\n      {buttonText}\n    </Button>\n  );\n};\n\nexport default IdeaCTAButton;\n","import React, { memo, Suspense, lazy } from 'react';\n\n// components\nimport LoadingComments from './Comments/LoadingComments';\nconst LazyComments = lazy(() => import('./Comments'));\n\n// styling\nimport styled from 'styled-components';\nimport { media } from 'utils/styleUtils';\nimport {\n  columnsGapDesktop,\n  rightColumnWidthDesktop,\n  columnsGapTablet,\n  rightColumnWidthTablet,\n  postPageContentMaxWidth,\n} from './styleConstants';\n\nconst Container = styled.div`\n  flex: 1 1 auto;\n  width: 100%;\n`;\n\nconst Content = styled.div`\n  width: 100%;\n  max-width: ${postPageContentMaxWidth}px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 50px;\n  padding-left: 60px;\n  padding-right: 60px;\n  padding-bottom: 80px;\n\n  ${media.smallerThanMinTablet`\n    margin-top: 30px;\n    padding-left: 15px;\n    padding-right: 15px;\n    padding-bottom: 30px;\n  `}\n`;\n\nconst ContentInner = styled.div`\n  padding-right: ${rightColumnWidthDesktop + columnsGapDesktop}px;\n\n  ${media.tablet`\n    padding-right: ${rightColumnWidthTablet + columnsGapTablet}px;\n  `}\n\n  ${media.smallerThanMaxTablet`\n    padding-right: 0px;\n  `}\n`;\n\ninterface Props {\n  className?: string;\n  postId: string;\n  postType: 'idea' | 'initiative';\n}\n\nconst Footer = memo<Props>(({ postId, postType, className }) => {\n  return (\n    <Container className={className || ''}>\n      <Content>\n        <ContentInner>\n          <Suspense fallback={<LoadingComments />}>\n            <LazyComments postId={postId} postType={postType} />\n          </Suspense>\n        </ContentInner>\n      </Content>\n    </Container>\n  );\n});\n\nexport default Footer;\n","// libraries\nimport React, { memo } from 'react';\nimport { adopt } from 'react-adopt';\nimport { get } from 'lodash-es';\nimport { Helmet } from 'react-helmet';\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetIdea, { GetIdeaChildProps } from 'resources/GetIdea';\nimport GetProject, { GetProjectChildProps } from 'resources/GetProject';\nimport GetUser, { GetUserChildProps } from 'resources/GetUser';\nimport GetIdeaImages, {\n  GetIdeaImagesChildProps,\n} from 'resources/GetIdeaImages';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\n// utils\nimport { stripHtml } from 'utils/textUtils';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { imageSizes } from 'utils/fileTools';\nimport getAlternateLinks from 'utils/cl-router/getAlternateLinks';\nimport getCanonicalLink from 'utils/cl-router/getCanonicalLink';\n\ninterface InputProps {\n  ideaId: string;\n}\n\ninterface DataProps {\n  idea: GetIdeaChildProps;\n  project: GetProjectChildProps;\n  author: GetUserChildProps;\n  locale: GetLocaleChildProps;\n  tenant: GetAppConfigurationChildProps;\n  authUser: GetAuthUserChildProps;\n  ideaImages: GetIdeaImagesChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst IdeaMeta = memo<Props & InjectedIntlProps & InjectedLocalized>(\n  ({\n    idea,\n    locale,\n    tenant,\n    authUser,\n    ideaImages,\n    author,\n    project,\n    localize,\n  }) => {\n    if (!isNilOrError(locale) && !isNilOrError(tenant) && !isNilOrError(idea)) {\n      const { title_multiloc, body_multiloc } = idea.attributes;\n      const tenantLocales = tenant.attributes.settings.core.locales;\n      const localizedTitle = localize(title_multiloc, 50);\n      const ideaDescription = stripHtml(localize(body_multiloc), 250);\n      const ideaImage =\n        !isNilOrError(ideaImages) && ideaImages.length > 0\n          ? ideaImages[0].attributes.versions.fb\n          : null;\n      const ideaUrl = window.location.href;\n      const projectTitle =\n        !isNilOrError(project) &&\n        localize(project.attributes.title_multiloc, 20);\n      const projectSlug = !isNilOrError(project) && project.attributes.slug;\n      const ideaAuthorName = !isNilOrError(author)\n        ? `${author.attributes.first_name} ${author.attributes.last_name}`\n        : 'anonymous';\n\n      const articleJson = {\n        '@type': 'Article',\n        image: ideaImage,\n        headline: localizedTitle,\n        author: ideaAuthorName,\n        mainEntityOfPage: {\n          '@type': 'WebPage',\n          '@id': ideaUrl,\n        },\n        datePublished: idea.attributes.published_at,\n      };\n\n      const json = {\n        '@context': 'http://schema.org',\n        '@type': 'BreadcrumbList',\n        itemListElement: [\n          {\n            '@type': 'ListItem',\n            position: 1,\n            item: {\n              '@id': tenant.attributes.host,\n              name: tenant.attributes.name,\n              image: tenant.attributes.logo\n                ? tenant.attributes.logo.large\n                : null,\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 2,\n            item: {\n              '@id': `${tenant.attributes.host}/projects`,\n              name: 'Projects',\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 2,\n            item: {\n              '@id': `${tenant.attributes.host}/projects/${projectSlug}`,\n              name: projectTitle,\n            },\n          },\n          {\n            '@type': 'ListItem',\n            position: 4,\n            item: {\n              '@id': `${tenant.attributes.host}/ideas`,\n              name: 'Ideas',\n            },\n          },\n        ],\n      };\n\n      return (\n        <Helmet>\n          <title>\n            {`\n            ${\n              authUser && authUser.attributes.unread_notifications\n                ? `(${authUser.attributes.unread_notifications}) `\n                : ''\n            }\n            ${localizedTitle}`}\n          </title>\n          {getCanonicalLink()}\n          {getAlternateLinks(tenantLocales)}\n          <meta name=\"title\" content={localizedTitle} />\n          <meta name=\"description\" content={ideaDescription} />\n\n          <meta property=\"og:type\" content=\"article\" />\n          <meta property=\"og:title\" content={localizedTitle} />\n          <meta property=\"ideaOgDescription\" content={ideaDescription} />\n          {ideaImage && <meta property=\"og:image\" content={ideaImage} />}\n          <meta\n            property=\"og:image:width\"\n            content={`${imageSizes.ideaImg.fb[0]}`}\n          />\n          <meta\n            property=\"og:image:height\"\n            content={`${imageSizes.ideaImg.fb[1]}`}\n          />\n\n          <meta name=\"twitter:title\" content={localizedTitle} />\n          <meta name=\"twitter:description\" content={ideaDescription} />\n          {ideaImage && <meta name=\"twitter:image\" content={ideaImage} />}\n          <meta name=\"twitter:card\" content=\"summary_large_image\" />\n\n          {ideaImage && (\n            <script type=\"application/ld+json\">\n              {JSON.stringify(articleJson)}\n            </script>\n          )}\n          <script type=\"application/ld+json\">{JSON.stringify(json)}</script>\n\n          <meta property=\"og:url\" content={ideaUrl} />\n          <meta property=\"og:locale\" content={locale} />\n        </Helmet>\n      );\n    }\n\n    return null;\n  }\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  idea: ({ ideaId, render }) => <GetIdea ideaId={ideaId}>{render}</GetIdea>,\n  ideaImages: ({ ideaId, render }) => (\n    <GetIdeaImages ideaId={ideaId}>{render}</GetIdeaImages>\n  ),\n  project: ({ idea, render }) =>\n    !isNilOrError(idea) ? (\n      <GetProject projectId={idea.relationships.project.data.id}>\n        {render}\n      </GetProject>\n    ) : null,\n  author: ({ idea, render }) => (\n    <GetUser id={get(idea, 'relationships.author.data.id', null)}>\n      {render}\n    </GetUser>\n  ),\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n});\n\nconst IdeaMetaWithHoc = injectLocalize<Props>(IdeaMeta);\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <IdeaMetaWithHoc {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap, filter } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  IInitiativeStatusData,\n  initiativeStatusStream,\n} from 'services/initiativeStatuses';\nimport { isString } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  id: string | null;\n}\n\ntype children = (\n  renderProps: GetInitiativeStatusChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  initiativeStatus: IInitiativeStatusData | undefined | null;\n}\n\nexport type GetInitiativeStatusChildProps =\n  | IInitiativeStatusData\n  | undefined\n  | null;\n\nexport default class GetInitiativeStatus extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      initiativeStatus: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { id } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ id });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          filter(({ id }) => isString(id)),\n          switchMap(({ id }: { id: string }) => {\n            if (isString(id)) {\n              return initiativeStatusStream(id).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((initiativeStatus) =>\n          this.setState({\n            initiativeStatus: !isNilOrError(initiativeStatus)\n              ? initiativeStatus.data\n              : null,\n          })\n        ),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { id } = this.props;\n    this.inputProps$.next({ id });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiativeStatus } = this.state;\n    return (children as children)(initiativeStatus);\n  }\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  twitterMessage: {\n    id: 'app.components.PostComponents.SharingModalContent.twitterMessage',\n    defaultMessage: 'Vote for {postTitle} on',\n  },\n  ideaEmailSharingSubjectText: {\n    id:\n      'app.components.PostComponents.SharingModalContent.ideaEmailSharingSubjectText',\n    defaultMessage: 'Support my idea: {postTitle}',\n  },\n  optionEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.optionEmailSharingSubject',\n    defaultMessage: 'Support my proposed option: {postTitle}.',\n  },\n  issueEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.issueEmailSharingSubject',\n    defaultMessage: 'I just posted an issue: {postTitle}.',\n  },\n  questionEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.questionEmailSharingSubject',\n    defaultMessage: 'Join the discussion: {postTitle}.',\n  },\n  contributionEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.contributionEmailSharingSubject',\n    defaultMessage: 'Support my contribution: {postTitle}.',\n  },\n  projectEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.projectEmailSharingSubject',\n    defaultMessage: 'Support my project: {postTitle}.',\n  },\n  initiativeEmailSharingSubject: {\n    id:\n      'app.components.PostComponents.SharingModalContent.initiativeEmailSharingSubject',\n    defaultMessage: 'Support my initiative: {postTitle}.',\n  },\n  ideaEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.ideaEmailSharingBody',\n    defaultMessage: \"Support my idea '{postTitle}' at {postUrl}!\",\n  },\n  issueEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.issueEmailSharingBody',\n    defaultMessage: \"I posted an issue '{postTitle}' at {postUrl}!\",\n  },\n  optionEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.optionEmailSharingBody',\n    defaultMessage: \"Support my proposed option '{postTitle}' at {postUrl}!\",\n  },\n  contributionEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.contributionEmailSharingBody',\n    defaultMessage: \"Support my contribution '{postTitle}' at {postUrl}!\",\n  },\n  questionEmailSharingModalContentBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.questionEmailSharingModalContentBody',\n    defaultMessage:\n      \"Join the discussion about this question '{postTitle}' at {postUrl}!\",\n  },\n  projectEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.projectEmailSharingBody',\n    defaultMessage: \"Support my project '{postTitle}' at {postUrl}!\",\n  },\n  initiativeEmailSharingBody: {\n    id:\n      'app.components.PostComponents.SharingModalContent.initiativeEmailSharingBody',\n    defaultMessage:\n      'What do you think of this initiative? Vote on it and share the discussion at {postUrl} to make your voice heard!',\n  },\n  ideaWhatsAppMessage: {\n    id: 'app.components.PostComponents.SharingModalContent.ideaWhatsAppMessage',\n    defaultMessage: 'Support my idea: {postTitle}.',\n  },\n  optionWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.optionWhatsAppMessage',\n    defaultMessage: 'Support my option: {postTitle}.',\n  },\n  questionWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.questionWhatsAppMessage',\n    defaultMessage: 'Join the discussion: {postTitle}.',\n  },\n  contributionWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.contributionWhatsAppMessage',\n    defaultMessage: 'Support my contribution: {postTitle}.',\n  },\n  projectWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.projectWhatsAppMessage',\n    defaultMessage: 'Support my project: {postTitle}.',\n  },\n  issueWhatsAppMessage: {\n    id:\n      'app.components.PostComponents.SharingModalContent.issueWhatsAppMessage',\n    defaultMessage: 'I just posted an issue: {postTitle}.',\n  },\n  whatsAppMessageProposal: {\n    id:\n      'app.components.PostComponents.SharingModalContent.whatsAppMessageProposal',\n    defaultMessage: 'I just posted a proposal for {orgName}: {postTitle}',\n  },\n});\n","export default {\n  sharingModalOpened: {\n    name: 'initiativeflow social sharing modal opened',\n  },\n};\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  IInitiativeImageData,\n  initiativeImagesStream,\n} from 'services/initiativeImages';\nimport { isString } from 'lodash-es';\n\ninterface InputProps {\n  initiativeId: string | null;\n}\n\ntype children = (\n  renderProps: GetInitiativeImagesChildProps\n) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  initiativeImages: IInitiativeImageData[] | undefined | null;\n}\n\nexport type GetInitiativeImagesChildProps =\n  | IInitiativeImageData[]\n  | undefined\n  | null;\n\nexport default class GetInitiativeImages extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      initiativeImages: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { initiativeId } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ initiativeId });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ initiativeId }) => {\n            if (isString(initiativeId)) {\n              return initiativeImagesStream(initiativeId).observable;\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((initiativeImages) => {\n          this.setState({\n            initiativeImages: initiativeImages ? initiativeImages.data : null,\n          });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { initiativeId } = this.props;\n    this.inputProps$.next({ initiativeId });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { initiativeImages } = this.state;\n    return (children as children)(initiativeImages);\n  }\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  linkToHomePage: {\n    id: 'app.components.PostComponents.linkToHomePage',\n    defaultMessage: 'Home page',\n  },\n  readMore: {\n    id: 'app.components.PostComponents.readMore',\n    defaultMessage: 'Read more...',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  votingDisabledProjectInactive: {\n    id: 'app.components.VoteControl.votingDisabledProjectInactive',\n    defaultMessage: 'You can no longer vote on ideas in {projectName}',\n  },\n  votingDisabledPhaseOver: {\n    id: 'app.components.VoteControl.votingDisabledPhaseOver',\n    defaultMessage: \"It's no longer possible to vote in this phase\",\n  },\n  votingDisabledFutureEnabled: {\n    id: 'app.components.VoteControl.votingDisabledFutureEnabled',\n    defaultMessage: 'Voting will be enabled once this phase starts',\n  },\n  votingPossibleLater: {\n    id: 'app.components.VoteControl.votingPossibleLater',\n    defaultMessage: 'Voting will start on {enabledFromDate}',\n  },\n  votingNotEnabled: {\n    id: 'app.components.VoteControl.votingNotEnabled',\n    defaultMessage: 'Voting is currently not enabled for this project',\n  },\n  votingDisabledMaxReached: {\n    id: 'app.components.VoteControl.votingDisabledMaxReached',\n    defaultMessage:\n      \"You've reached your maximum number of votes in {projectName}\",\n  },\n  votingNotPermitted: {\n    id: 'app.components.VoteControl.votingNotPermitted',\n    defaultMessage: 'Voting is only enabled for certain groups',\n  },\n  votingNotVerified: {\n    id: 'app.components.VoteControl.votingNotVerified',\n    defaultMessage: '{linkToVerification} in order to vote.',\n  },\n  linkToVerificationText: {\n    id: 'app.components.VoteControl.linkToVerificationText',\n    defaultMessage: 'Verify your identity',\n  },\n  upvote: {\n    id: 'app.components.VoteControl.upvote',\n    defaultMessage: 'Upvote',\n  },\n  downvote: {\n    id: 'app.components.VoteControl.downvote',\n    defaultMessage: 'Downvote',\n  },\n  a11y_upvotesDownvotes: {\n    id: 'app.containers.VoteControl.a11y_upvotesDownvotes',\n    defaultMessage:\n      'Total upvotes: {upvotesCount}, total downvotes: {downvotesCount}',\n  },\n  voteSuccessTitle: {\n    id: 'app.containers.VoteControl.voteSuccessTitle',\n    defaultMessage: 'Your vote was successfully registered!',\n  },\n  voteErrorTitle: {\n    id: 'app.containers.VoteControl.voteErrorTitle',\n    defaultMessage: 'Something went wrong',\n  },\n  voteErrorSubTitle: {\n    id: 'app.containers.VoteControl.voteErrorSubTitle',\n    defaultMessage:\n      'Due to an error your vote could not being registered. Please try again in a few minutes.',\n  },\n  close: {\n    id: 'app.containers.VoteControl.close',\n    defaultMessage: 'Close',\n  },\n});\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { clamp } from 'lodash-es';\nimport Observer from '@researchgate/react-intersection-observer';\nimport warningPattern from './warning_pattern.svg';\n\nconst Container = styled.div``;\n\nconst ProgressBarOuter = styled.div<{ background: string }>`\n  width: 100%;\n  height: 100%;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  background: ${(props) => props.background};\n`;\n\nconst ProgressBarInner: any = styled.div<{ progress: number; color: string }>`\n  width: 0px;\n  height: 100%;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  background: ${(props) => props.color};\n  transition: width 1000ms cubic-bezier(0.19, 1, 0.22, 1);\n  will-change: width;\n\n  &.visible {\n    width: ${(props) => props.progress * 100}%;\n  }\n`;\n\ninterface Props {\n  /** Number between 0 and 1 */\n  progress: number;\n  color: string;\n  bgColor: string;\n  /** Whether the background has a diagonal stripes pattern, defaults to false */\n  bgShaded?: boolean;\n  className?: string;\n}\n\ninterface State {\n  visible: boolean;\n}\n\nclass ProgressBar extends PureComponent<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n    };\n  }\n\n  handleIntersection = (\n    event: IntersectionObserverEntry,\n    unobserve: () => void\n  ) => {\n    if (event.isIntersecting) {\n      this.setState({ visible: true });\n      unobserve();\n    }\n  };\n\n  render() {\n    const { progress, color, bgColor, className, bgShaded } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <Container className={className} aria-hidden>\n        <Observer onChange={this.handleIntersection}>\n          <ProgressBarOuter\n            background={\n              bgShaded === true ? `url(\"${warningPattern}\")` : bgColor\n            }\n          >\n            <ProgressBarInner\n              progress={clamp(progress, 0, 1)}\n              className={visible ? 'visible' : ''}\n              color={color}\n            />\n          </ProgressBarOuter>\n        </Observer>\n      </Container>\n    );\n  }\n}\n\nexport default ProgressBar;\n","export default {\n  clickTranslateInitiativeButton: {\n    name: 'Clicked button to translate initiative title/description',\n  },\n  clickGoBackToOriginalInitiativeCopyButton: {\n    name:\n      'Clicked button to go back to original, non-translated initiative title/description',\n  },\n};\n","import { useState, useEffect } from 'react';\nimport {\n  getInitiativeActionDescriptors,\n  IInitiativeAction,\n} from 'services/initiatives';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { ActionPermission } from 'services/actionTakingRules';\nimport { currentAppConfigurationStream } from 'services/appConfiguration';\nimport { authUserStream } from 'services/auth';\nimport { combineLatest } from 'rxjs';\n\nexport type IInitiativeDisabledReason = 'notPermitted';\n\nexport type IPreliminaryAction =\n  | 'sign_in_up'\n  | 'verify'\n  | 'sign_in_up_and_verify';\n\nexport default function useInitiativesPermissions(action: IInitiativeAction) {\n  const [actionPermission, setActionPermission] = useState<\n    ActionPermission<IInitiativeDisabledReason> | null | undefined\n  >(undefined);\n\n  useEffect(() => {\n    const subscription = combineLatest(\n      getInitiativeActionDescriptors().observable,\n      currentAppConfigurationStream().observable,\n      authUserStream().observable\n    ).subscribe(([actionDescriptors, tenant, authUser]) => {\n      if (!isNilOrError(tenant) && !isNilOrError(actionDescriptors)) {\n        const actionDescriptor = actionDescriptors[action];\n\n        if (actionDescriptor.enabled) {\n          setActionPermission({\n            show: true,\n            enabled: true,\n            disabledReason: null,\n            action: null,\n          });\n        } else {\n          switch (actionDescriptor.disabled_reason) {\n            case 'not_verified':\n              if (isNilOrError(authUser)) {\n                setActionPermission({\n                  show: true,\n                  enabled: 'maybe',\n                  disabledReason: null,\n                  action: 'sign_in_up_and_verify',\n                });\n              } else {\n                setActionPermission({\n                  show: true,\n                  enabled: 'maybe',\n                  disabledReason: null,\n                  action: 'verify',\n                });\n              }\n              break;\n            case 'not_signed_in':\n              setActionPermission({\n                show: true,\n                enabled: 'maybe',\n                disabledReason: null,\n                action: 'sign_in_up',\n              });\n              break;\n            default:\n              setActionPermission({\n                show: true,\n                enabled: false,\n                disabledReason: 'notPermitted',\n                action: null,\n              });\n          }\n        }\n      }\n    });\n\n    return () => subscription.unsubscribe();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return actionPermission as ActionPermission<IInitiativeDisabledReason>;\n}\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { IRelationship, Multiloc, ImageSizes, ILinks } from 'typings';\nimport { first } from 'rxjs/operators';\nimport { get } from 'lodash-es';\n\nexport type InitiativePublicationStatus =\n  | 'draft'\n  | 'published'\n  | 'archived'\n  | 'spam';\n\nexport type IInitiativeAction =\n  | 'posting_initiative'\n  | 'commenting_initiative'\n  | 'voting_initiative'\n  | 'comment_voting_initiative';\n\nexport interface IInitiativeData {\n  id: string;\n  type: 'initiatives';\n  attributes: {\n    title_multiloc: Multiloc;\n    body_multiloc: Multiloc;\n    author_name: string;\n    slug: string;\n    publication_status: InitiativePublicationStatus;\n    upvotes_count: number;\n    comments_count: number;\n    location_point_geojson: GeoJSON.Point;\n    location_description: string;\n    budget: number | null;\n    created_at: string;\n    updated_at: string;\n    published_at: string;\n    header_bg: ImageSizes;\n    expires_at: string;\n  };\n  relationships: {\n    topics: {\n      data: IRelationship[];\n    };\n    initiative_images: {\n      data: IRelationship[];\n    };\n    author: {\n      data: IRelationship | null;\n    };\n    assignee: {\n      data: IRelationship | null;\n    };\n    initiative_status?: {\n      data: IRelationship | null;\n    };\n    user_vote?: {\n      data: IRelationship | null;\n    };\n  };\n}\n\nexport interface IInitiative {\n  data: IInitiativeData;\n}\n\nexport interface IInitiatives {\n  data: IInitiativeData[];\n  links: ILinks;\n}\n\nexport interface IInitiativeAdd {\n  author_id?: string | null;\n  assignee_id?: string | null;\n  initiative_status_id?: string | null;\n  publication_status?: InitiativePublicationStatus;\n  title_multiloc?: Multiloc;\n  body_multiloc?: Multiloc;\n  topic_ids?: string[] | null;\n  area_ids?: string[] | null;\n  phase_ids?: string[] | null;\n  location_point_geojson?: GeoJSON.Point | null;\n  location_description?: string | null;\n}\nexport interface IInitiativesCount {\n  count: number;\n}\n\nexport interface IInitiativesFilterCounts {\n  initiative_status_id: {\n    [key: string]: number;\n  };\n  area_id: {\n    [key: string]: number;\n  };\n  topic_id: {\n    [key: string]: number;\n  };\n  total: number;\n}\n\nexport interface IGeotaggedInitiativeData {\n  id: string;\n  type: string;\n  attributes: {\n    title_multiloc: Multiloc;\n    location_point_geojson: GeoJSON.Point;\n    location_description: string;\n  };\n}\n\nexport interface IInitiativeLinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface InitiativeActivity {\n  id: string;\n  type: 'activity';\n  attributes: {\n    action: string;\n    acted_at: string;\n    change: string[] | { [key: string]: string }[] | null;\n  };\n  relationships: {\n    user: { data: IRelationship };\n  };\n}\n\nexport type InitiativeDisabledReason =\n  | 'not_permitted'\n  | 'not_verified'\n  | 'not_signed_in';\n\nexport function initiativeByIdStream(initiativeId: string) {\n  return streams.get<IInitiative>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}`,\n  });\n}\n\nexport function initiativeBySlugStream(initiativeSlug: string) {\n  return streams.get<IInitiative>({\n    apiEndpoint: `${API_PATH}/initiatives/by_slug/${initiativeSlug}`,\n  });\n}\n\nexport function initiativesStream(streamParams: IStreamParams | null = null) {\n  return streams.get<IInitiatives>({\n    apiEndpoint: `${API_PATH}/initiatives`,\n    ...streamParams,\n  });\n}\n\nexport function initiativesFilterCountsStream(\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IInitiativesFilterCounts>({\n    apiEndpoint: `${API_PATH}/initiatives/filter_counts`,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n\nexport function initiativesMarkersStream(\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<{\n    data: IGeotaggedInitiativeData[];\n    links: IInitiativeLinks;\n  }>({\n    apiEndpoint: `${API_PATH}/initiatives/as_markers`,\n    ...streamParams,\n    cacheStream: false,\n  });\n}\n\nexport async function addInitiative(object: IInitiativeAdd) {\n  const response = await streams.add<IInitiative>(`${API_PATH}/initiatives`, {\n    initiative: object,\n  });\n  return response;\n}\n\nexport async function updateInitiative(\n  initiativeId: string,\n  object: Partial<IInitiativeAdd>\n) {\n  const response = await streams.update<IInitiative>(\n    `${API_PATH}/initiatives/${initiativeId}`,\n    initiativeId,\n    { initiative: object }\n  );\n  streams.fetchAllWith({\n    apiEndpoint: [\n      `${API_PATH}/stats/initiatives_count`,\n      `${API_PATH}/initiatives`,\n      `${API_PATH}/initiatives/${initiativeId}/activities`,\n    ],\n  });\n  return response;\n}\n\nexport async function deleteInitiative(initiativeId: string) {\n  const [initiative, response] = await Promise.all([\n    initiativeByIdStream(initiativeId).observable.pipe(first()).toPromise(),\n    streams.delete(`${API_PATH}/initiatives/${initiativeId}`, initiativeId),\n  ]);\n\n  const authorId = get(initiative, 'relationships.author.data.id', false);\n\n  streams.fetchAllWith({\n    apiEndpoint: authorId\n      ? [`${API_PATH}/users/${authorId}/initiatives_count`]\n      : [],\n  });\n\n  return response;\n}\n\nexport interface IInitiativeAllowedTransitions {\n  [key: string]: {\n    feedback_needed: boolean;\n  };\n}\n\nexport function initiativeAllowedTransitionsStream(initiativeId: string) {\n  return streams.get<IInitiativeAllowedTransitions>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}/allowed_transitions`,\n  });\n}\n\nexport interface IInitiativesFilterCounts {\n  initiative_status_id: {\n    [key: string]: number;\n  };\n  area_id: {\n    [key: string]: number;\n  };\n  topic_id: {\n    [key: string]: number;\n  };\n  total: number;\n}\n\nexport function initiativeActivities(initiativeId: string) {\n  return streams.get<{ data: InitiativeActivity[] }>({\n    apiEndpoint: `${API_PATH}/initiatives/${initiativeId}/activities`,\n  });\n}\n\nexport type IInitiativeActionDescriptors = {\n  [key in IInitiativeAction]: {\n    enabled: boolean;\n    disabled_reason: InitiativeDisabledReason | null;\n  };\n};\n\nexport function getInitiativeActionDescriptors() {\n  return streams.get<IInitiativeActionDescriptors>({\n    apiEndpoint: `${API_PATH}/action_descriptors/initiatives`,\n  });\n}\n","import React, { PureComponent } from 'react';\n\nimport styled, { withTheme } from 'styled-components';\nimport { colors, fontSizes, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport { StatusExplanation } from './SharedStyles';\n\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\nimport CountDown from './CountDown';\nimport ProgressBar from 'components/UI/ProgressBar';\nimport Button from 'components/UI/Button';\n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport T from 'components/T';\n\nconst Container = styled.div``;\n\nconst CountDownWrapper = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst VoteCounter = styled.div`\n  margin-top: 15px;\n`;\n\nconst VoteText = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding-bottom: 4px;\n`;\n\nconst VoteTextLeft = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorMain};\n`;\n\nconst VoteTextRight = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n`;\n\nconst StyledProgressBar = styled(ProgressBar)`\n  height: 12px;\n  width: 100%;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: 20px;\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n  onVote: () => void;\n}\ninterface DataProps {}\n\ninterface Props extends InputProps, DataProps {}\n\nclass Custom extends PureComponent<Props & { theme: any }> {\n  handleOnVote = () => {\n    this.props.onVote();\n  };\n\n  render() {\n    const {\n      initiative,\n      initiativeStatus,\n      initiativeSettings: { voting_threshold },\n      theme,\n      userVoted,\n    } = this.props;\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit = voting_threshold;\n\n    return (\n      <Container>\n        <CountDownWrapper>\n          <CountDown targetTime={initiative.attributes.expires_at} />\n        </CountDownWrapper>\n        <StatusExplanation>\n          <T value={initiativeStatus.attributes.description_multiloc} />\n        </StatusExplanation>\n        <VoteCounter>\n          <VoteText aria-hidden={true}>\n            <VoteTextLeft>\n              <FormattedMessage\n                {...messages.xVotes}\n                values={{ count: voteCount }}\n              />\n            </VoteTextLeft>\n            <VoteTextRight>{voteLimit}</VoteTextRight>\n          </VoteText>\n          <ScreenReaderOnly>\n            <FormattedMessage\n              {...messages.xVotesOfY}\n              values={{\n                xVotes: (\n                  <FormattedMessage\n                    {...messages.xVotes}\n                    values={{ count: voteCount }}\n                  />\n                ),\n                votingThreshold: voteLimit,\n              }}\n            />\n          </ScreenReaderOnly>\n          <StyledProgressBar\n            progress={voteCount / voteLimit}\n            color={theme.colorMain}\n            bgColor={colors.lightGreyishBlue}\n          />\n        </VoteCounter>\n        {!userVoted && (\n          <StyledButton\n            icon=\"upvote\"\n            buttonStyle=\"primary\"\n            onClick={this.handleOnVote}\n          >\n            <FormattedMessage {...messages.vote} />\n          </StyledButton>\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default withTheme(Custom);\n","import React, { memo, useCallback, MouseEvent } from 'react';\nimport clHistory from 'utils/cl-router/history';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport VoteIndicator from 'components/InitiativeCard/VoteIndicator';\n\n// utils\nimport eventEmitter from 'utils/eventEmitter';\n\n// i18n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\n// styling\nimport styled from 'styled-components';\nimport { media, colors, fontSizes } from 'utils/styleUtils';\nimport { lighten } from 'polished';\n\nconst Container = styled.div`\n  height: ${(props) => props.theme.mobileTopBarHeight}px;\n  background: #fff;\n  border-bottom: solid 1px ${lighten(0.4, colors.label)};\n\n  ${media.biggerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst TopBarInner = styled.div`\n  height: 100%;\n  padding-left: 15px;\n  padding-right: 15px;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  ${media.biggerThanMinTablet`\n    padding-left: 30px;\n    padding-right: 30px;\n  `}\n`;\n\nconst Left = styled.div`\n  height: 48px;\n  align-items: center;\n  display: none;\n\n  ${media.smallerThanMaxTablet`\n    display: flex;\n  `}\n`;\n\nconst Right = styled.div``;\n\nconst GoBackIcon = styled(Icon)`\n  height: 22px;\n  fill: ${colors.label};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: fill 100ms ease-out;\n`;\n\nconst GoBackButton = styled.button`\n  width: 45px;\n  height: 45px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  margin: 0;\n  margin-right: 6px;\n  margin-left: -2px;\n  cursor: pointer;\n  background: #fff;\n  border-radius: 50%;\n  border: solid 1px ${lighten(0.2, colors.label)};\n  transition: all 100ms ease-out;\n\n  &:hover {\n    border-color: #000;\n\n    ${GoBackIcon} {\n      fill: #000;\n    }\n  }\n`;\n\nconst GoBackLabel = styled.div`\n  color: ${colors.label};\n  font-size: ${fontSizes.base}px;\n  font-weight: 400;\n  transition: fill 100ms ease-out;\n\n  ${media.phone`\n    display: none;\n  `}\n`;\n\ninterface Props {\n  initiativeId: string;\n  insideModal?: boolean;\n  className?: string;\n}\n\nconst InitiativeShowPageTopBar = memo<Props>(\n  ({ initiativeId, insideModal, className }) => {\n    const onGoBack = useCallback((event: MouseEvent<HTMLElement>) => {\n      event.preventDefault();\n\n      if (insideModal) {\n        eventEmitter.emit('closeIdeaModal');\n      } else {\n        clHistory.push('/');\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n      <Container className={className || ''}>\n        <TopBarInner>\n          <Left>\n            <GoBackButton onClick={onGoBack}>\n              <GoBackIcon name=\"arrow-back\" />\n            </GoBackButton>\n            <GoBackLabel>\n              <FormattedMessage {...messages.goBack} />\n            </GoBackLabel>\n          </Left>\n          <Right>\n            <VoteIndicator initiativeId={initiativeId} />\n          </Right>\n        </TopBarInner>\n      </Container>\n    );\n  }\n);\n\nexport default InitiativeShowPageTopBar;\n","import React, { memo } from 'react';\n\n// components\nimport UserName from 'components/UI/UserName';\n\n// styling\nimport styled from 'styled-components';\nimport { fontSizes } from 'utils/styleUtils';\n\n// i18n\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 7px;\n  margin-bottom: 25px;\n`;\n\nconst PostedByText = styled.span`\n  color: white;\n  font-size: ${fontSizes.base}px;\n  margin-bottom: 3px;\n`;\n\ninterface Props {\n  authorId: string | null | undefined;\n  className?: string;\n}\n\nconst PostedBy = memo<Props>(({ authorId, className }) => {\n  if (authorId) {\n    const authorName = (\n      <UserName\n        userId={authorId}\n        fontWeight={500}\n        isLinkToProfile\n        hideLastName\n        color=\"white\"\n      />\n    );\n\n    return (\n      <Container className={`e2e-idea-author ${className || ''}`}>\n        <PostedByText>\n          <FormattedMessage\n            {...messages.postedByShort}\n            values={{ authorName }}\n          />\n        </PostedByText>\n      </Container>\n    );\n  }\n\n  return null;\n});\n\nexport default PostedBy;\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { initiativeByIdStream } from 'services/initiatives';\nimport { ImageSizes } from 'typings';\n\nexport interface IInitiativeImageData {\n  id: string;\n  type: string;\n  attributes: {\n    versions: ImageSizes;\n    ordering: number;\n    created_at: string;\n    updated_at: string;\n  };\n}\n\nexport interface IInitiativeImage {\n  data: IInitiativeImageData;\n}\n\nexport interface IInitiativeImages {\n  data: IInitiativeImageData[];\n}\n\nexport function initiativeImageStream(initiativeId: string, imageId: string) {\n  const apiEndpoint = `${API_PATH}/initiatives/${initiativeId}/images/${imageId}`;\n  return streams.get<IInitiativeImage>({ apiEndpoint });\n}\n\nexport function initiativeImagesStream(\n  initiativeId: string,\n  streamParams: IStreamParams | null = null\n) {\n  const apiEndpoint = `${API_PATH}/initiatives/${initiativeId}/images`;\n  return streams.get<IInitiativeImages>({ apiEndpoint, ...streamParams });\n}\n\nexport function deleteInitiativeImage(initiativeId: string, imageId: string) {\n  return streams.delete(\n    `${API_PATH}/initiatives/${initiativeId}/images/${imageId}`,\n    imageId\n  );\n}\n\nexport async function addInitiativeImage(\n  initiativeId: string,\n  base64: string,\n  ordering: number | null = null\n) {\n  const apiEndpoint = `${API_PATH}/initiatives/${initiativeId}/images`;\n  const bodyData = {\n    image: {\n      ordering,\n      image: base64,\n    },\n  };\n\n  const initiativeImage = await streams.add<IInitiativeImage>(\n    apiEndpoint,\n    bodyData\n  );\n  await initiativeByIdStream(initiativeId).fetch();\n  return initiativeImage;\n}\n","import React, { PureComponent } from 'react';\nimport styled, { withTheme } from 'styled-components';\n\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetInitiativeStatus, {\n  GetInitiativeStatusChildProps,\n} from 'resources/GetInitiativeStatus';\n\nimport { Icon } from 'cl2-component-library';\nimport ProgressBar from 'components/UI/ProgressBar';\n\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\n\nimport { fontSizes, colors } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\n\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\n\nimport T from 'components/T';\nimport { get } from 'lodash-es';\n\nconst Container = styled.div``;\n\nconst StatusBadge = styled.div<{ color: string }>`\n  font-size: ${fontSizes.small}px;\n  line-height: 18px;\n  border-radius: ${(props: any) => props.theme.borderRadius};\n  padding: 8px 12px;\n  font-weight: 400;\n  background-color: ${(props) => props.color};\n  display: flex;\n  align-items: center;\n`;\n\nconst BadgeLabel = styled.div`\n  &:first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst AnsweredBadgeIcon = styled(Icon)`\n  width: 1.6em;\n  height: 1.6em;\n  fill: ${colors.clGreenSuccess};\n  padding-right: 7px;\n`;\n\nconst AnsweredStatusBadge = styled(StatusBadge)`\n  background-color: ${colors.clGreenSuccessBackground};\n  color: ${colors.clGreenSuccess};\n`;\n\nconst IneligibleBadgeIcon = styled(Icon)`\n  width: 1.6em;\n  height: 1.6em;\n  fill: ${colors.clGreyOnGreyBackground};\n  padding-right: 7px;\n`;\n\nconst IneligibleStatusBadge = styled(StatusBadge)`\n  background-color: ${colors.lightGreyishBlue};\n  color: ${colors.clGreyOnGreyBackground};\n`;\n\nconst CustomStatusBadge = styled(StatusBadge)`\n  color: ${colors.clGreyOnGreyBackground};\n`;\n\nconst StyledProgressBar = styled(ProgressBar)`\n  height: 9px;\n  width: 120px;\n`;\n\nconst VoteCounter = styled.div`\n  display: flex;\n  align-items: center;\n  padding-bottom: 5px;\n`;\n\nconst VoteText = styled.div`\n  color: ${colors.mediumGrey};\n  font-size: ${fontSizes.small}px;\n\n  b {\n    font-weight: 600;\n    color: ${({ theme }) => theme.colorMain};\n  }\n\n  span.division-bar {\n    padding: 0 4px;\n  }\n`;\n\nconst VoteIcon = styled(Icon)`\n  fill: ${colors.label};\n  width: 16px;\n  height: 16px;\n  margin-top: -4px;\n  margin-right: 10px;\n`;\n\nconst ExpiredText = styled.div`\n  display: flex;\n  align-items: center;\n  font-size: ${fontSizes.small}px;\n  text-transform: capitalize;\n  padding-bottom: 5px;\n  color: ${colors.label};\n`;\n\nconst ExpiredIcon = styled(Icon)`\n  path {\n    fill: ${colors.clGreyOnGreyBackground};\n  }\n  width: 14px;\n  height: 14px;\n  margin: 0 4px 2px 0;\n`;\n\ninterface InputProps {\n  initiativeId: string;\n}\n\ninterface DataProps {\n  tenant: GetAppConfigurationChildProps;\n  initiative: GetInitiativeChildProps;\n  initiativeStatus: GetInitiativeStatusChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nclass VoteIndicator extends PureComponent<Props & { theme: any }> {\n  render() {\n    const { initiative, initiativeStatus, theme, tenant } = this.props;\n    if (isNilOrError(initiative) || isNilOrError(initiativeStatus)) return null;\n\n    const statusCode = initiativeStatus.attributes.code;\n    const voteCount = initiative.attributes.upvotes_count;\n    const voteLimit: number = get(\n      tenant,\n      'attributes.settings.initiatives.voting_threshold',\n      1\n    );\n\n    return (\n      <Container className=\"e2e-initiative-card-vote-indicator\">\n        {statusCode === 'proposed' && (\n          <div>\n            <VoteCounter>\n              <VoteIcon name=\"upvote\" ariaHidden />\n              <VoteText aria-hidden>\n                <b className=\"e2e-initiative-card-vote-count\">{voteCount}</b>\n                <span className=\"division-bar\">/</span>\n                {voteLimit}\n              </VoteText>\n            </VoteCounter>\n            <StyledProgressBar\n              progress={voteCount / voteLimit}\n              color=\"linear-gradient(270deg, #DE7756 -30.07%, #FF672F 100%)\"\n              bgColor={colors.lightGreyishBlue}\n              bgShaded={false}\n            />\n            <ScreenReaderOnly>\n              <FormattedMessage\n                {...messages.xVotesOfY}\n                values={{ xVotes: voteCount, votingThreshold: voteLimit }}\n              />\n            </ScreenReaderOnly>\n          </div>\n        )}\n\n        {statusCode === 'expired' && (\n          <div>\n            <ExpiredText>\n              <ExpiredIcon name=\"clock\" ariaHidden />\n              <T value={initiativeStatus.attributes.title_multiloc} />\n            </ExpiredText>\n            <StyledProgressBar\n              progress={voteCount / voteLimit}\n              color={colors.label}\n              bgColor={colors.lightGreyishBlue}\n              bgShaded={true}\n            />\n          </div>\n        )}\n\n        {statusCode === 'threshold_reached' && (\n          <div>\n            <VoteCounter>\n              <VoteIcon name=\"upvote\" ariaHidden />\n              <VoteText aria-hidden>\n                <b>{voteCount}</b>\n                <span className=\"division-bar\">/</span>\n                {voteLimit}\n              </VoteText>\n              <ScreenReaderOnly>\n                <FormattedMessage\n                  {...messages.xVotesOfY}\n                  values={{ xVotes: voteCount, votingThreshold: voteLimit }}\n                />\n              </ScreenReaderOnly>\n            </VoteCounter>\n            <StyledProgressBar\n              progress={voteCount / voteLimit}\n              color={theme.colorMain}\n              bgColor={colors.lightGreyishBlue}\n              bgShaded={false}\n            />\n          </div>\n        )}\n\n        {statusCode === 'answered' && (\n          <AnsweredStatusBadge color={initiativeStatus.attributes.color}>\n            <AnsweredBadgeIcon name=\"round-checkmark\" ariaHidden />\n            <BadgeLabel>\n              <T value={initiativeStatus.attributes.title_multiloc} />\n            </BadgeLabel>\n          </AnsweredStatusBadge>\n        )}\n\n        {statusCode === 'ineligible' && (\n          <IneligibleStatusBadge color={initiativeStatus.attributes.color}>\n            <IneligibleBadgeIcon name=\"halt\" ariaHidden />\n            <BadgeLabel>\n              <T value={initiativeStatus.attributes.title_multiloc} />\n            </BadgeLabel>\n          </IneligibleStatusBadge>\n        )}\n\n        {statusCode === 'custom' && (\n          <CustomStatusBadge color={initiativeStatus.attributes.color}>\n            <BadgeLabel>\n              <T value={initiativeStatus.attributes.title_multiloc} />\n            </BadgeLabel>\n          </CustomStatusBadge>\n        )}\n      </Container>\n    );\n  }\n}\n\nconst Data = adopt<DataProps, InputProps>({\n  tenant: <GetAppConfiguration />,\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n  initiativeStatus: ({ initiative, render }) => (\n    <GetInitiativeStatus\n      id={get(initiative, 'relationships.initiative_status.data.id')}\n    >\n      {render}\n    </GetInitiativeStatus>\n  ),\n});\n\nconst VoteIndicatorWithHOCs = withTheme(VoteIndicator);\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <VoteIndicatorWithHOCs {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport GoToCommentsButton from '../../Buttons/GoToCommentsButton';\nimport IdeaSharingButton from '../../Buttons/IdeaSharingButton';\nimport SharingButtonComponent from '../../Buttons/SharingButtonComponent';\nimport { isNilOrError } from 'utils/helperUtils';\nimport useIdea from 'hooks/useIdea';\n\nconst Container = styled.div``;\n\nconst StyledGoToCommentsButton = styled(GoToCommentsButton)`\n  margin-bottom: 10px;\n`;\n\ninterface Props {\n  ideaId: string;\n  border?: string;\n  className?: string;\n}\n\nconst IdeaCTAButtons = ({ ideaId, className }: Props) => {\n  const idea = useIdea({ ideaId });\n\n  if (!isNilOrError(idea)) {\n    const commentingEnabled =\n      idea.attributes.action_descriptor.commenting_idea.enabled;\n\n    return (\n      <Container className={className || ''}>\n        {commentingEnabled && <StyledGoToCommentsButton />}\n        <IdeaSharingButton\n          ideaId={ideaId}\n          buttonComponent={<SharingButtonComponent />}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n};\n\nexport default IdeaCTAButtons;\n","import React, { FormEvent, memo, useState } from 'react';\nimport { includes, isUndefined } from 'lodash-es';\nimport {\n  isNilOrError,\n  isUndefinedOrError,\n  capitalizeParticipationContextType,\n} from 'utils/helperUtils';\n\n// components\nimport Button from 'components/UI/Button';\n\n// services\nimport { IProjectData } from 'services/projects';\nimport {\n  getCurrentPhase,\n  getLatestRelevantPhase,\n  IPhaseData,\n} from 'services/phases';\nimport { addBasket, updateBasket } from 'services/baskets';\n\n// resources\nimport { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport { GetAppConfigurationChildProps } from 'resources/GetAppConfiguration';\nimport { GetLocaleChildProps } from 'resources/GetLocale';\nimport { GetIdeaChildProps } from 'resources/GetIdea';\nimport { GetProjectChildProps } from 'resources/GetProject';\nimport { GetPhasesChildProps } from 'resources/GetPhases';\n\n// hooks\nimport useAuthUser from 'hooks/useAuthUser';\nimport useAppConfiguration from 'hooks/useAppConfiguration';\nimport useLocale from 'hooks/useLocale';\nimport useIdea from 'hooks/useIdea';\nimport useBasket from 'hooks/useBasket';\nimport useProject from 'hooks/useProject';\nimport usePhases from 'hooks/usePhases';\n\n// tracking\nimport { trackEventByName } from 'utils/analytics';\nimport tracks from 'containers/ProjectsShowPage/shared/pb/tracks';\n\n// utils\nimport streams from 'utils/streams';\nimport { openSignUpInModal } from 'components/SignUpIn/events';\n\n// i18n\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\nimport FormattedBudget from 'utils/currency/FormattedBudget';\n\n// styles\nimport styled from 'styled-components';\nimport { fontSizes, colors, defaultCardStyle, media } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport PBExpenses from 'containers/ProjectsShowPage/shared/pb/PBExpenses';\n\n// typings\nimport { IParticipationContextType } from 'typings';\n\nconst IdeaCardContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst IdeaPageContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n\n  ${media.smallerThanMaxTablet`\n    padding: 20px;\n    background: ${colors.backgroundLightGrey};\n  `}\n`;\n\nconst BudgetWithButtonWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: center;\n`;\n\nconst Budget = styled.div`\n  width: 100%;\n  height: 90px;\n  color: ${(props: any) => props.theme.colorText};\n  font-size: ${fontSizes.medium}px;\n  font-weight: 600;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 3px;\n  ${defaultCardStyle};\n`;\n\nconst StyledPBExpenses = styled(PBExpenses)`\n  margin-top: 25px;\n  padding: 20px;\n`;\n\ninterface OuterProps {\n  view: 'ideaCard' | 'ideaPage';\n  projectId: string;\n  ideaId: string;\n  className?: string;\n}\n\ninterface InnerProps extends OuterProps {\n  authUser: GetAuthUserChildProps;\n  tenant: GetAppConfigurationChildProps;\n  locale: GetLocaleChildProps;\n  idea: GetIdeaChildProps;\n  project: GetProjectChildProps;\n  phases: GetPhasesChildProps;\n  participationContext: IProjectData | IPhaseData;\n  participationContextId: string;\n  participationContextType: IParticipationContextType;\n}\n\nconst AssignBudgetControl = memo<InnerProps & InjectedIntlProps>(\n  ({\n    view,\n    ideaId,\n    authUser,\n    tenant,\n    locale,\n    idea,\n    phases,\n    participationContext,\n    participationContextId,\n    participationContextType,\n    intl,\n    className,\n  }) => {\n    const basket = useBasket(\n      participationContext?.relationships?.user_basket?.data?.id\n    );\n\n    const [processing, setProcessing] = useState(false);\n\n    const handleAddRemoveButtonClick = (event?: FormEvent) => {\n      event?.preventDefault();\n      assignBudget();\n    };\n\n    const assignBudget = async () => {\n      const timeout = (ms: number) =>\n        new Promise((resolve) => setTimeout(resolve, ms));\n      const done = async () => {\n        await timeout(200);\n        setProcessing(false);\n      };\n\n      if (!isNilOrError(idea)) {\n        const isBudgetingEnabled =\n          idea.attributes.action_descriptor.budgeting?.enabled;\n        const basketIdeaIds = !isNilOrError(basket)\n          ? basket.relationships.ideas.data.map((idea) => idea.id)\n          : [];\n        const isInBasket = includes(basketIdeaIds, ideaId);\n        const budgetingDisabledReason =\n          idea.attributes.action_descriptor.budgeting?.disabled_reason;\n\n        if (\n          isNilOrError(authUser) ||\n          budgetingDisabledReason === 'not_verified'\n        ) {\n          openSignUpInModal({\n            verification: budgetingDisabledReason === 'not_verified',\n            verificationContext:\n              budgetingDisabledReason === 'not_verified'\n                ? {\n                    action: 'budgeting',\n                    id: participationContextId,\n                    type: participationContextType,\n                  }\n                : undefined,\n          });\n        } else if (!isNilOrError(authUser) && isBudgetingEnabled) {\n          setProcessing(true);\n\n          if (!isNilOrError(basket)) {\n            let newIdeas: string[] = [];\n\n            if (isInBasket) {\n              newIdeas = basket.relationships.ideas.data\n                .filter((basketIdea) => basketIdea.id !== idea.id)\n                .map((basketIdea) => basketIdea.id);\n            } else {\n              newIdeas = [\n                ...basket.relationships.ideas.data.map(\n                  (basketIdea) => basketIdea.id\n                ),\n                idea.id,\n              ];\n            }\n\n            try {\n              await updateBasket(basket.id, {\n                user_id: authUser.id,\n                participation_context_id: participationContextId,\n                participation_context_type: capitalizeParticipationContextType(\n                  participationContextType\n                ),\n                idea_ids: newIdeas,\n                submitted_at: null,\n              });\n              done();\n              trackEventByName(tracks.ideaAddedToBasket);\n            } catch (error) {\n              done();\n              streams.fetchAllWith({ dataId: [basket.id] });\n            }\n          } else {\n            try {\n              await addBasket({\n                user_id: authUser.id,\n                participation_context_id: participationContextId,\n                participation_context_type: capitalizeParticipationContextType(\n                  participationContextType\n                ),\n                idea_ids: [idea.id],\n              });\n              done();\n              trackEventByName(tracks.basketCreated);\n            } catch (error) {\n              done();\n            }\n          }\n        }\n      }\n    };\n\n    if (\n      !isUndefined(authUser) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(idea) &&\n      !isUndefined(basket) &&\n      idea.attributes.budget\n    ) {\n      const basketIdeaIds = !isNilOrError(basket)\n        ? basket.relationships.ideas.data.map((idea) => idea.id)\n        : [];\n      const isInBasket = includes(basketIdeaIds, ideaId);\n      const isBudgetingEnabled =\n        idea.attributes.action_descriptor.budgeting?.enabled;\n      const isSignedIn = !!authUser;\n      const budgetingDisabledReason =\n        idea.attributes.action_descriptor.budgeting?.disabled_reason;\n      const isPermitted = budgetingDisabledReason !== 'not_permitted';\n      const hasBudgetingDisabledReason = !!idea.attributes.action_descriptor\n        .budgeting?.disabled_reason;\n      const isPBContext =\n        participationContext?.attributes?.participation_method === 'budgeting';\n      const isCurrentPhase =\n        getCurrentPhase(phases)?.id === participationContext?.id;\n      const isCurrent =\n        (participationContextType === 'project' &&\n          (participationContext as IProjectData).attributes\n            .publication_status !== 'archived') ||\n        isCurrentPhase;\n\n      if (isPBContext) {\n        const addRemoveButton =\n          isCurrent && isPermitted ? (\n            <Button\n              onClick={handleAddRemoveButtonClick}\n              disabled={\n                isSignedIn && !isBudgetingEnabled && !hasBudgetingDisabledReason\n              }\n              processing={processing}\n              bgColor={isInBasket ? colors.clRedError : colors.clGreen}\n              iconSize=\"18px\"\n              icon={!isInBasket ? 'basket-plus' : 'basket-minus'}\n              className={`e2e-assign-budget-button ${\n                isInBasket ? 'in-basket' : 'not-in-basket'\n              }`}\n              ariaLabel={intl.formatMessage(\n                !isInBasket\n                  ? messages.addToMyBasket\n                  : messages.removeFromMyBasket\n              )}\n            >\n              <FormattedMessage\n                {...(!isInBasket\n                  ? view === 'ideaCard'\n                    ? messages.add\n                    : messages.addToMyBasket\n                  : view === 'ideaCard'\n                  ? messages.remove\n                  : messages.removeFromMyBasket)}\n              />\n            </Button>\n          ) : null;\n\n        if (view === 'ideaCard') {\n          return (\n            <IdeaCardContainer\n              className={`e2e-assign-budget ${className || ''}`}\n              aria-live=\"polite\"\n            >\n              {addRemoveButton}\n            </IdeaCardContainer>\n          );\n        }\n\n        if (view === 'ideaPage') {\n          return (\n            <IdeaPageContainer\n              className={`pbAssignBudgetControlContainer e2e-assign-budget ${\n                className || ''\n              }`}\n              aria-live=\"polite\"\n            >\n              <BudgetWithButtonWrapper>\n                <Budget>\n                  <ScreenReaderOnly>\n                    <FormattedMessage {...messages.a11y_price} />\n                  </ScreenReaderOnly>\n                  <FormattedBudget value={idea.attributes.budget} />\n                </Budget>\n                {addRemoveButton}\n              </BudgetWithButtonWrapper>\n              {isPermitted && (\n                <StyledPBExpenses\n                  participationContextId={participationContextId}\n                  participationContextType={participationContextType}\n                  viewMode=\"column\"\n                />\n              )}\n            </IdeaPageContainer>\n          );\n        }\n      }\n    }\n\n    return null;\n  }\n);\n\n// Contains the logic to determine the participationContext (= the project or most relevant phase the idea belongs to at the moment it's being loaded)\n// It's important to get the proper participationContext both here and in VoteControl to be able to determine which control (if any) should be shown, as\n// the same idea can be present in multiple phases (e.g. a voting and a PB phase) and can therefore have a different control based on the participationContext that's been determined.\n// Similar logic can be found in the VoteControl component. The important thing here is to figure out if the idea belongs to multiple phases, and if that's the case determine\n// the most relevant current phase via the 'getLatestRelevantPhase()' function.\n// This logic used to be all over the place, but now it should be present only in this component and VoteControl. Try to keep it that way :).\nconst AssignBudgetControlWrapper = memo<OuterProps & InjectedIntlProps>(\n  ({ view, projectId, ideaId, className, intl }) => {\n    const authUser = useAuthUser();\n    const tenant = useAppConfiguration();\n    const locale = useLocale();\n    const idea = useIdea({ ideaId });\n    const project = useProject({ projectId });\n    const phases = usePhases(projectId);\n\n    const isContinuousProject =\n      project?.attributes.process_type === 'continuous';\n    const ideaPhaseIds = !isNilOrError(idea)\n      ? idea?.relationships?.phases?.data?.map((item) => item.id)\n      : null;\n    const ideaPhases = !isNilOrError(phases)\n      ? phases?.filter((phase) => includes(ideaPhaseIds, phase.id))\n      : null;\n    const latestRelevantIdeaPhase = ideaPhases\n      ? getLatestRelevantPhase(ideaPhases)\n      : null;\n    const participationContext = isContinuousProject\n      ? project\n      : latestRelevantIdeaPhase;\n    const participationContextType = isContinuousProject ? 'project' : 'phase';\n    const participationContextId = participationContext?.id || null;\n\n    if (\n      !isUndefinedOrError(authUser) &&\n      !isNilOrError(tenant) &&\n      !isNilOrError(locale) &&\n      !isNilOrError(idea) &&\n      !isNilOrError(project) &&\n      !isUndefinedOrError(phases) &&\n      participationContext &&\n      participationContextId\n    ) {\n      return (\n        <AssignBudgetControl\n          view={view}\n          projectId={projectId}\n          ideaId={ideaId}\n          authUser={authUser}\n          tenant={tenant.data}\n          locale={locale}\n          idea={idea}\n          project={project}\n          phases={phases}\n          participationContext={participationContext}\n          participationContextType={participationContextType}\n          participationContextId={participationContextId}\n          intl={intl}\n          className={className}\n        />\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default injectIntl<OuterProps>(AssignBudgetControlWrapper);\n","const columnsGapDesktop = 100;\nconst rightColumnWidthDesktop = 360;\nconst columnsGapTablet = 60;\nconst rightColumnWidthTablet = 300;\nconst postPageContentMaxWidth = 1210;\n\nexport {\n  columnsGapDesktop,\n  rightColumnWidthDesktop,\n  columnsGapTablet,\n  rightColumnWidthTablet,\n  postPageContentMaxWidth,\n};\n","import { API_PATH } from 'containers/App/constants';\nimport streams, { IStreamParams } from 'utils/streams';\nimport { uuidRegExp } from 'utils/helperUtils';\n\nexport interface IIdeaVoteData {\n  id: string;\n  type: 'vote';\n  attributes: {\n    mode: 'up' | 'down';\n  };\n  relationships: {\n    votable: {\n      data: {\n        id: string;\n        type: 'votable';\n      };\n    };\n    user: {\n      data: {\n        id: string;\n        type: 'user';\n      };\n    };\n  };\n}\n\ninterface ILinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface IIdeaVotes {\n  data: IIdeaVoteData[];\n  links: ILinks;\n}\n\nexport interface IIdeaVote {\n  data: IIdeaVoteData;\n}\n\nexport interface INewVoteProperties {\n  user_id?: string;\n  mode: 'up' | 'down';\n}\n\nexport function voteStream(\n  voteId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IIdeaVote>({\n    apiEndpoint: `${API_PATH}/votes/${voteId}`,\n    ...streamParams,\n  });\n}\n\nexport function votesStream(\n  ideaId: string,\n  streamParams: IStreamParams | null = null\n) {\n  return streams.get<IIdeaVotes>({\n    apiEndpoint: `${API_PATH}/ideas/${ideaId}/votes`,\n    ...streamParams,\n  });\n}\n\nexport async function addVote(\n  ideaId: string,\n  object: INewVoteProperties,\n  refetchAllActiveIdeas = false\n) {\n  const response = await streams.add<IIdeaVote>(\n    `${API_PATH}/ideas/${ideaId}/votes`,\n    { vote: object }\n  );\n\n  if (refetchAllActiveIdeas) {\n    const ideaEndpointRegexp = new RegExp(`/ideas/${uuidRegExp}$`);\n    streams.fetchAllWith({\n      regexApiEndpoint: [ideaEndpointRegexp],\n      onlyFetchActiveStreams: true,\n    });\n  }\n\n  return response;\n}\n\nexport async function deleteVote(\n  _ideaId,\n  voteId: string,\n  refetchAllActiveIdeas = false\n) {\n  const response = await streams.delete(`${API_PATH}/votes/${voteId}`, voteId);\n\n  if (refetchAllActiveIdeas) {\n    const ideaEndpointRegexp = new RegExp(`/ideas/${uuidRegExp}$`);\n    streams.fetchAllWith({\n      regexApiEndpoint: [ideaEndpointRegexp],\n      onlyFetchActiveStreams: true,\n    });\n  }\n\n  return response;\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  noResultsFound: {\n    id: 'app.components.IdeasShowPage.noResultsFound',\n    defaultMessage: 'No results found.',\n  },\n  goBack: {\n    id: 'app.components.IdeasShowPage.goBack',\n    defaultMessage: 'Go back',\n  },\n  goBackToList: {\n    id: 'app.components.IdeasShowPage.goBackToList',\n    defaultMessage: 'Go back to the list',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  invisibleTitle: {\n    id: 'app.containers.InitiativesShow.VoteControl.invisibleTitle',\n    defaultMessage: 'Status and votes',\n  },\n  moreInfo: {\n    id: 'app.containers.InitiativesShow.VoteControl.moreInfo',\n    defaultMessage: 'More info',\n  },\n  days: {\n    id: 'app.containers.InitiativesShow.VoteControl.days',\n    defaultMessage: 'days',\n  },\n  hours: {\n    id: 'app.containers.InitiativesShow.VoteControl.hours',\n    defaultMessage: 'hours',\n  },\n  minutes: {\n    id: 'app.containers.InitiativesShow.VoteControl.minutes',\n    defaultMessage: 'mins',\n  },\n  proposedStatusExplanation: {\n    id: 'app.containers.InitiativesShow.VoteControl.proposedStatusExplanation',\n    defaultMessage:\n      '{votingThreshold} votes needed to get this initiative {proposedStatusExplanationBold}',\n  },\n  proposedStatusExplanationBold: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.proposedStatusExplanationBold',\n    defaultMessage: 'considered by {orgName}',\n  },\n  proposedStatusExplanationMobile: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.proposedStatusExplanationMobile',\n    defaultMessage:\n      '{votingThreshold} votes needed within {daysLeft, plural, =0 {less than a day} one {one day} other {# days}} to get this initiative {proposedStatusExplanationMobileBold}',\n  },\n  proposedStatusExplanationMobileBold: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.proposedStatusExplanationMobileBold',\n    defaultMessage: 'considered by {orgName}',\n  },\n  ineligibleStatusExplanation: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.ineligibleStatusExplanation',\n    defaultMessage:\n      \"This initiative doesn't meet the criteria {ineligibleStatusExplanationBold}\",\n  },\n  ineligibleStatusExplanationBold: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.ineligibleStatusExplanationBold',\n    defaultMessage: 'to be eligible',\n  },\n  expiredStatusExplanation: {\n    id: 'app.containers.InitiativesShow.VoteControl.expiredStatusExplanation',\n    defaultMessage:\n      'This initiative expired as it {expiredStatusExplanationBold}.',\n  },\n  expiredStatusExplanationBold: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.expiredStatusExplanationBold',\n    defaultMessage: \"didn't reach {votingThreshold} votes in time\",\n  },\n  thresholdReachedStatusExplanation: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.thresholdReachedStatusExplanation',\n    defaultMessage:\n      '{thresholdReachedStatusExplanationBold}. {orgName} got notified and will provide an answer. Voting remains open.',\n  },\n  thresholdReachedStatusExplanationBold: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.thresholdReachedStatusExplanationBold',\n    defaultMessage: 'The threshold has been reached',\n  },\n  answeredStatusExplanation: {\n    id: 'app.containers.InitiativesShow.VoteControl.answeredStatusExplanation',\n    defaultMessage: '{answeredStatusExplanationBold} Voting remains open.',\n  },\n  answeredStatusExplanationBold: {\n    id:\n      'app.containers.InitiativesShow.VoteControl.answeredStatusExplanationBold',\n    defaultMessage:\n      '{orgName} received the initiative and gave an official answer.',\n  },\n  xVotes: {\n    id: 'app.containers.InitiativesShow.VoteControl.xVotes',\n    defaultMessage:\n      '{count, plural, =0 {no votes} one {1 vote} other {# votes}}',\n  },\n  vote: {\n    id: 'app.containers.InitiativesShow.VoteControl.vote',\n    defaultMessage: 'Vote',\n  },\n  cancelVote: {\n    id: 'app.containers.InitiativesShow.VoteControl.cancelVote',\n    defaultMessage: 'Cancel vote',\n  },\n  readAnswer: {\n    id: 'app.containers.InitiativesShow.VoteControl.readAnswer',\n    defaultMessage: 'Read answer',\n  },\n  votedTitle: {\n    id: 'app.containers.InitiativesShow.VoteControl.votedTitle',\n    defaultMessage: 'Your vote has been submitted!',\n  },\n  votedText: {\n    id: 'app.containers.InitiativesShow.VoteControl.votedText',\n    defaultMessage:\n      \"You'll get notified when this initiative goes to the next step. {x, plural, =0 {There's {xDays} left.} one {There's {xDays} left.} other {There are {xDays} left.}}\",\n  },\n  xDays: {\n    id: 'app.containers.InitiativesShow.VoteControl.xDays',\n    defaultMessage:\n      '{x, plural, =0 {less than a day} one {one day} other {# days}}',\n  },\n  unvoteLink: {\n    id: 'app.containers.InitiativesShow.VoteControl.unvoteLink',\n    defaultMessage: 'Cancel my vote',\n  },\n  xVotesOfY: {\n    id: 'app.containers.InitiativesShow.VoteControl.xVotesOfY',\n    defaultMessage: '{xVotes} out of {votingThreshold}',\n  },\n  xPeopleVoted: {\n    id: 'app.containers.InitiativesShow.VoteControl.xPeopleVoted',\n    defaultMessage: '{xPeople} voted for this initiative',\n  },\n  xPeople: {\n    id: 'app.containers.InitiativesShow.VoteControl.xPeople',\n    defaultMessage:\n      '{count, plural, =0 {No one} one {One person} other {# people}}',\n  },\n  or: {\n    id: 'app.containers.InitiativesShow.VoteControl.or',\n    defaultMessage: 'or',\n  },\n  votingNotPermitted: {\n    id: 'app.containers.InitiativesShow.VoteControl.votingNotPermitted',\n    defaultMessage: \"You don't have the rights to vote on this proposal.\",\n  },\n});\n","import React, { memo } from 'react';\n\n// styles\nimport styled from 'styled-components';\nimport { colors, media } from 'utils/styleUtils';\nimport { postPageContentMaxWidth } from './styleConstants';\nimport { GetLocaleChildProps } from 'resources/GetLocale';\nimport { GetInitiativeChildProps } from 'resources/GetInitiative';\n\nimport Outlet from 'components/Outlet';\n\nconst Container = styled.div`\n  width: 100%;\n  height: 50px;\n  color: ${colors.label};\n  background: rgba(132, 147, 158, 0.06);\n  border-bottom: 1px solid ${colors.adminSeparation};\n`;\n\nconst Inner = styled.div`\n  max-width: ${postPageContentMaxWidth}px;\n  height: 100%;\n  margin: 0 auto;\n  padding-left: 60px;\n  padding-right: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  ${media.smallerThanMaxTablet`\n    max-width: 100vw;\n  `}\n\n  ${media.smallerThanMinTablet`\n    width: 100%;\n    max-width: 100vw;\n    padding-left: 15px;\n    padding-right: 15px;\n  `}\n`;\n\nconst Left = styled.div`\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  align-items: center;\n  margin-right: 20px;\n`;\n\nconst Right = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\ninterface Props {\n  rightContent: JSX.Element | null;\n  leftContent: JSX.Element | null;\n  translateButtonClicked: boolean;\n  onTranslate: () => void;\n  locale: GetLocaleChildProps;\n  initiative: GetInitiativeChildProps;\n}\n\nexport default memo<Props>(\n  ({\n    rightContent,\n    leftContent,\n    translateButtonClicked,\n    onTranslate,\n    initiative,\n    locale,\n  }) => {\n    return (\n      <Container>\n        <Inner>\n          <Left>{leftContent}</Left>\n          <Right>\n            <Outlet\n              id=\"app.components.PostShowComponents.ActionBar.right\"\n              translateButtonClicked={translateButtonClicked}\n              onClick={onTranslate}\n              initiative={initiative}\n              locale={locale}\n            />\n            {rightContent}\n          </Right>\n        </Inner>\n      </Container>\n    );\n  }\n);\n","import React, { memo, useCallback, useMemo } from 'react';\n\n// components\nimport FullscreenModal from 'components/UI/FullscreenModal';\nimport IdeasShow from 'containers/IdeasShow';\nimport IdeaShowPageTopBar from 'containers/IdeasShowPage/IdeaShowPageTopBar';\nimport InitiativesShow from 'containers/InitiativesShow';\nimport InitiativeShowPageTopBar from 'containers/InitiativesShowPage/InitiativeShowPageTopBar';\nimport PlatformFooter from 'containers/PlatformFooter';\n\n// hooks\nimport useIdea from 'hooks/useIdea';\nimport useWindowSize from 'hooks/useWindowSize';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\n// style\nimport styled from 'styled-components';\nimport { media, viewportWidths } from 'utils/styleUtils';\n\n// note: StyledIdeasShow styles defined here should match that in IdeasShowPage!\nconst StyledIdeasShow = styled(IdeasShow)`\n  min-height: calc(\n    100vh - ${(props) => props.theme.menuHeight + props.theme.footerHeight}px\n  );\n  padding-top: 40px;\n  padding-left: 60px;\n  padding-right: 60px;\n\n  ${media.smallerThanMaxTablet`\n    min-height: calc(100vh - ${({\n      theme: { mobileMenuHeight, mobileTopBarHeight },\n    }) => mobileMenuHeight + mobileTopBarHeight}px);\n    padding-top: 35px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    padding-top: 25px;\n    padding-left: 15px;\n    padding-right: 15px;\n  `}\n`;\n\ninterface Props {\n  type: 'idea' | 'initiative' | null;\n  postId: string | null;\n  slug: string | null;\n  navbarRef?: HTMLElement | null;\n  mobileNavbarRef?: HTMLElement | null;\n  close: () => void;\n}\n\nconst PostPageFullscreenModal = memo<Props>(\n  ({ postId, slug, type, navbarRef, mobileNavbarRef, close }) => {\n    const { windowWidth } = useWindowSize();\n    const smallerThanMaxTablet = windowWidth <= viewportWidths.largeTablet;\n\n    // Far from ideal to always try to load the idea, but\n    // has to happen for hooks to work.\n    // It shows that we're putting 2 components in 1\n    const idea = useIdea({ ideaId: postId });\n\n    const topBar = useMemo(() => {\n      if (postId && type === 'idea' && smallerThanMaxTablet) {\n        return <IdeaShowPageTopBar ideaId={postId} insideModal />;\n      }\n\n      if (postId && type === 'initiative') {\n        return <InitiativeShowPageTopBar initiativeId={postId} insideModal />;\n      }\n\n      return null;\n    }, [postId, type, smallerThanMaxTablet]);\n\n    const content = useMemo(() => {\n      if (postId) {\n        if (type === 'idea' && !isNilOrError(idea)) {\n          const projectId = idea.relationships.project.data.id;\n\n          return (\n            <>\n              <StyledIdeasShow\n                ideaId={postId}\n                projectId={projectId}\n                insideModal={true}\n              />\n              <PlatformFooter insideModal />\n            </>\n          );\n        }\n\n        if (type === 'initiative') {\n          return (\n            <>\n              <InitiativesShow initiativeId={postId} />\n              <PlatformFooter insideModal />\n            </>\n          );\n        }\n      }\n\n      return null;\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [postId, idea]);\n\n    const onClose = useCallback(() => {\n      close();\n    }, [close]);\n\n    return (\n      <FullscreenModal\n        opened={!!(postId && slug && type)}\n        close={onClose}\n        url={slug ? `/${type}s/${slug}` : null}\n        topBar={topBar}\n        navbarRef={navbarRef}\n        mobileNavbarRef={mobileNavbarRef}\n      >\n        {content}\n      </FullscreenModal>\n    );\n  }\n);\n\nexport default PostPageFullscreenModal;\n","import styled from 'styled-components';\nimport { fontSizes, colors, media } from 'utils/styleUtils';\nimport { Icon } from 'cl2-component-library';\n\nexport const StatusWrapper = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  font-size: ${fontSizes.small};\n  text-transform: uppercase;\n  color: ${colors.clGreyOnGreyBackground};\n\n  &.answered {\n    color: ${colors.clGreen};\n  }\n\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nexport const StatusExplanation = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n  line-height: 23px;\n\n  .tooltip-icon {\n    margin-left: 3px;\n    display: inline-block;\n  }\n\n  b {\n    font-weight: 600;\n    background-color: rgba(255, 197, 47, 0.16);\n  }\n`;\n\nexport const TooltipWrapper = styled.div`\n  padding: 15px;\n  min-width: 150px;\n  max-width: 300px;\n  font-size: ${fontSizes.small}px;\n  color: ${({ theme }) => theme.colorText};\n  font-weight: 400;\n  line-height: 16px;\n  text-align: left;\n`;\n\nexport const HelpIcon = styled(Icon)`\n  width: 12px;\n  height: 12px;\n`;\n","export default {\n  clickUpvote: {\n    name: 'Idea upvote clicked',\n  },\n  clickDownvote: {\n    name: 'Idea downvote clicked',\n  },\n  sharingModalOpened: {\n    name: 'ideaflow social sharing modal opened',\n  },\n  clickTranslateIdeaButton: {\n    name: 'Clicked button to translate idea title/description',\n  },\n  clickGoBackToOriginalIdeaCopyButton: {\n    name:\n      'Clicked button to go back to original, non-translated idea title/description',\n  },\n};\n","import React from 'react';\nimport { BehaviorSubject, Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { TPermissionItem, hasPermission } from 'services/permissions';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  item: TPermissionItem | null;\n  action: string;\n  context?: any;\n}\n\ntype children = (renderProps: GetPermissionChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  permission: boolean | undefined;\n}\n\nexport type GetPermissionChildProps = boolean | undefined;\n\nexport default class GetPermission extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      permission: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { item, action, context } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ item, action, context });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ item, action, context }) => {\n            if (!isNilOrError(item)) {\n              return hasPermission({ item, action, context });\n            }\n\n            return of(false);\n          })\n        )\n        .subscribe((permission) => this.setState({ permission })),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { item, action, context } = this.props;\n    this.inputProps$.next({ item, action, context });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { permission } = this.state;\n    return (children as children)(permission);\n  }\n}\n","const columnsGapDesktop = 90;\nconst rightColumnWidthDesktop = 350;\nconst columnsGapTablet = 60;\nconst rightColumnWidthTablet = 300;\nconst pageContentMaxWidth = 1210;\n\nexport {\n  columnsGapDesktop,\n  rightColumnWidthDesktop,\n  columnsGapTablet,\n  rightColumnWidthTablet,\n  pageContentMaxWidth,\n};\n","import React, { memo } from 'react';\nimport { adopt } from 'react-adopt';\n\n// components\nimport BreadCrumbs from 'components/PostShowComponents/Breadcrumbs';\nimport ActionBarLayout from 'components/PostShowComponents/ActionBar';\nimport InitiativeMoreActions from './InitiativeMoreActions';\n\n// resource\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\n\nimport messages from '../messages';\n\n// utils\nimport { isNilOrError } from 'utils/helperUtils';\n\n// styling\nimport styled from 'styled-components';\n\nconst StyledInitiativeMoreActions = styled(InitiativeMoreActions)``;\n\ninterface InputProps {\n  initiativeId: string;\n  onTranslateInitiative: () => void;\n  translateButtonClicked: boolean;\n}\n\ninterface DataProps {\n  initiative: GetInitiativeChildProps;\n  locale: GetLocaleChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\nconst ActionBar = memo<Props>(\n  ({ onTranslateInitiative, translateButtonClicked, initiative, locale }) => {\n    return (\n      <ActionBarLayout\n        leftContent={\n          <BreadCrumbs\n            postType=\"initiative\"\n            links={[\n              {\n                text: {\n                  message: messages.allInitiatives,\n                },\n                to: '/initiatives',\n              },\n            ]}\n          />\n        }\n        rightContent={\n          isNilOrError(initiative) ? null : (\n            <StyledInitiativeMoreActions\n              id=\"e2e-initiative-more-actions-desktop\"\n              initiative={initiative}\n            />\n          )\n        }\n        initiative={initiative}\n        locale={locale}\n        onTranslate={onTranslateInitiative}\n        translateButtonClicked={translateButtonClicked}\n      />\n    );\n  }\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <ActionBar {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  metaTitle: {\n    id: 'app.containers.InitiativesShow.metaTitle',\n    defaultMessage: 'Initiative: {initiativeTitle}',\n  },\n  invisibleTitleContent: {\n    id: 'app.containers.InitiativesShow.invisibleTitleContent',\n    defaultMessage: 'What is this initiative about?',\n  },\n  metaOgTitle: {\n    id: 'app.containers.InitiativesShow.metaOgTitle',\n    defaultMessage: 'Support this initiative: {initiativeTitle}',\n  },\n  initiativeOgDescription: {\n    id: 'app.containers.InitiativesShow.initiativeOgDescription',\n    defaultMessage:\n      'What do you think of this initiative? Join the discussion and vote to make your voice heard.',\n  },\n  learnMore: {\n    id: 'app.containers.InitiativesShow.learnMore',\n    defaultMessage: 'Learn more about initiatives',\n  },\n  postedBy: {\n    id: 'app.containers.InitiativesShow.postedBy',\n    defaultMessage: 'Initiative posted by {authorName}',\n  },\n  postedByShort: {\n    id: 'app.containers.InitiativesShow.postedByShort',\n    defaultMessage: 'Posted by {authorName}',\n  },\n  twitterMessage: {\n    id: 'app.containers.InitiativesShow.twitterMessage',\n    defaultMessage: 'Vote for {initiativeTitle} on',\n  },\n  whatsAppMessage: {\n    id: 'app.containers.InitiativesShow.whatsAppMessage',\n    defaultMessage:\n      '{initiativeTitle} | from the participation platform of {orgName}',\n  },\n  emailSharingSubject: {\n    id: 'app.containers.InitiativesShow.emailSharingSubject',\n    defaultMessage: 'Support my initiative: {initiativeTitle}.',\n  },\n  emailSharingBody: {\n    id: 'app.containers.InitiativesShow.emailSharingBody',\n    defaultMessage:\n      'What do you think of this initiative? Vote on it and share the discussion at {initiativeUrl} to make your voice heard!',\n  },\n  allInitiatives: {\n    id: 'app.containers.InitiativesShow.allInitiatives',\n    defaultMessage: 'All Initiatves',\n  },\n  moreOptions: {\n    id: 'app.components.InitiativesShow.moreOptions',\n    defaultMessage: 'More options',\n  },\n  reportAsSpam: {\n    id: 'app.components.InitiativesShow.reportAsSpam',\n    defaultMessage: 'Report as spam',\n  },\n  editInitiative: {\n    id: 'app.components.InitiativesShow.editInitiative',\n    defaultMessage: 'Edit initiative',\n  },\n  deleteInitiative: {\n    id: 'app.components.InitiativesShow.deleteInitiative',\n    defaultMessage: 'Delete initiative',\n  },\n  deleteInitiativeConfirmation: {\n    id: 'app.components.InitiativesShow.deleteInitiativeConfirmation',\n    defaultMessage: 'Are you sure you want to delete this initiative?',\n  },\n  reportAsSpamModalTitle: {\n    id: 'app.containers.InitiativesShow.reportAsSpamModalTitle',\n    defaultMessage: 'Why do you want to report this as spam?',\n  },\n  skipSharing: {\n    id: 'app.components.InitiativesShow.skipSharing',\n    defaultMessage: \"Skip it, I'll do it later\",\n  },\n  shareTitle: {\n    id: 'app.components.InitiativesShow.shareTitle',\n    defaultMessage: 'Congratulations, your initiative was successfully posted!',\n  },\n  shareSubtitle: {\n    id: 'app.components.InitiativesShow.shareSubtitle',\n    defaultMessage:\n      'Share your initiative to reach {votingThreshold} votes in {daysLimit} days.',\n  },\n  a11y_voteControl: {\n    id: 'app.containers.InitiativesShow.a11y_voteControl',\n    defaultMessage: 'Voting and status',\n  },\n});\n","import React, { memo } from 'react';\n\n// components\nimport { Icon } from 'cl2-component-library';\nimport UserName from 'components/UI/UserName';\nimport Link from 'utils/cl-router/Link';\n\n// styling\nimport styled from 'styled-components';\nimport { fontSizes, colors } from 'utils/styleUtils';\nimport { darken } from 'polished';\n\n// i18n\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 25px;\n`;\n\nconst InitiativesIcon = styled(Icon)`\n  width: 42px;\n  height: 42px;\n  background-color: rgba(4, 77, 108, 0.06);\n  fill: ${colors.adminTextColor};\n  border-radius: 50%;\n  padding: 10px;\n  margin-right: 17px;\n`;\n\nconst PostedByWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PostedByText = styled.div`\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.base}px;\n  margin-bottom: 3px;\n`;\n\nconst AboutInitiativesLink = styled(Link)`\n  font-size: ${fontSizes.small}px;\n  color: ${colors.clGreyOnGreyBackground};\n  text-decoration: underline;\n\n  &:hover {\n    color: ${darken(0.2, colors.clGreyOnGreyBackground)};\n    text-decoration: underline;\n  }\n`;\n\ninterface Props {\n  authorId: string | null | undefined;\n  className?: string;\n  showAboutInitiatives: boolean;\n}\n\nconst PostedBy = memo<Props>(\n  ({ authorId, className, showAboutInitiatives }) => {\n    if (authorId) {\n      const authorName = (\n        <UserName\n          userId={authorId}\n          fontWeight={500}\n          isLinkToProfile={true}\n          hideLastName={true}\n        />\n      );\n\n      return (\n        <Container id=\"e2e-initiative-posted-by\" className={className || ''}>\n          <InitiativesIcon name=\"initiatives\" />\n          <PostedByWrapper>\n            <PostedByText>\n              <FormattedMessage\n                {...messages.postedBy}\n                values={{ authorName }}\n              />\n            </PostedByText>\n            {showAboutInitiatives && (\n              <AboutInitiativesLink to=\"/pages/initiatives\">\n                <FormattedMessage {...messages.learnMore} />\n              </AboutInitiativesLink>\n            )}\n          </PostedByWrapper>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n);\n\nexport default PostedBy;\n","import React, { PureComponent, createRef } from 'react';\nimport { isUndefined, isString } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { adopt } from 'react-adopt';\n\n// analytics\nimport { trackEvent } from 'utils/analytics';\nimport tracks from './tracks';\n\n// router\nimport { withRouter, WithRouterProps } from 'react-router';\n\n// components\nimport Modal from 'components/UI/Modal';\nimport FileAttachments from 'components/UI/FileAttachments';\nimport { Spinner } from 'cl2-component-library';\nimport SharingButtons from 'components/Sharing/SharingButtons';\nimport FeatureFlag from 'components/FeatureFlag';\nimport SharingModalContent from 'components/PostShowComponents/SharingModalContent';\n\nimport Topics from 'components/PostShowComponents/Topics';\nimport Title from 'components/PostShowComponents/Title';\nimport DropdownMap from 'components/PostShowComponents/DropdownMap';\nimport Body from 'components/PostShowComponents/Body';\nimport Image from 'components/PostShowComponents/Image';\nimport Footer from 'components/PostShowComponents/Footer';\nimport OfficialFeedback from 'components/PostShowComponents/OfficialFeedback';\nimport InitiativeMeta from './InitiativeMeta';\nimport PostedBy from './PostedBy';\nimport PostedByMobile from './PostedByMobile';\nimport ActionBar from './ActionBar';\nimport VoteControl from './VoteControl';\nimport InitiativeMoreActions from './ActionBar/InitiativeMoreActions';\n\n// resources\nimport GetResourceFiles, {\n  GetResourceFilesChildProps,\n} from 'resources/GetResourceFiles';\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetInitiativeImages, {\n  GetInitiativeImagesChildProps,\n} from 'resources/GetInitiativeImages';\nimport GetInitiative, {\n  GetInitiativeChildProps,\n} from 'resources/GetInitiative';\nimport GetAuthUser, { GetAuthUserChildProps } from 'resources/GetAuthUser';\nimport GetWindowSize, {\n  GetWindowSizeChildProps,\n} from 'resources/GetWindowSize';\nimport GetOfficialFeedbacks, {\n  GetOfficialFeedbacksChildProps,\n} from 'resources/GetOfficialFeedbacks';\nimport GetPermission, {\n  GetPermissionChildProps,\n} from 'resources/GetPermission';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\n\n// utils\nimport { getAddressOrFallbackDMS } from 'utils/map';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport injectIntl from 'utils/cl-intl/injectIntl';\nimport messages from './messages';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\n// animations\nimport CSSTransition from 'react-transition-group/CSSTransition';\n\n// style\nimport styled from 'styled-components';\nimport { media, viewportWidths } from 'utils/styleUtils';\nimport { ScreenReaderOnly } from 'utils/a11y';\nimport {\n  columnsGapDesktop,\n  rightColumnWidthDesktop,\n  columnsGapTablet,\n  rightColumnWidthTablet,\n  pageContentMaxWidth,\n} from './styleConstants';\n\nimport Outlet from 'components/Outlet';\n\nconst contentFadeInDuration = 250;\nconst contentFadeInEasing = 'cubic-bezier(0.19, 1, 0.22, 1)';\nconst contentFadeInDelay = 150;\n\nconst Loading = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Container = styled.main`\n  display: flex;\n  flex-direction: column;\n  min-height: calc(\n    100vh - ${(props) => props.theme.menuHeight + props.theme.footerHeight}px\n  );\n\n  ${media.smallerThanMaxTablet`\n    min-height: calc(100vh - ${(props) => props.theme.mobileMenuHeight}px - ${(\n    props\n  ) => props.theme.mobileTopBarHeight}px);\n  `}\n\n  &.content-enter {\n    opacity: 0;\n\n    &.content-enter-active {\n      opacity: 1;\n      transition: opacity ${contentFadeInDuration}ms ${contentFadeInEasing}\n        ${contentFadeInDelay}ms;\n    }\n  }\n\n  &.content-enter-done {\n    opacity: 1;\n  }\n`;\n\nconst InitiativeContainer = styled.div`\n  width: 100%;\n  max-width: ${pageContentMaxWidth}px;\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  margin-left: auto;\n  margin-right: auto;\n  padding: 0;\n  padding-top: 60px;\n  padding-left: 60px;\n  padding-right: 60px;\n  position: relative;\n\n  ${media.smallerThanMaxTablet`\n    padding-top: 35px;\n  `}\n\n  ${media.smallerThanMinTablet`\n    padding-top: 25px;\n    padding-left: 15px;\n    padding-right: 15px;\n  `}\n`;\n\nconst Content = styled.div`\n  width: 100%;\n  display: flex;\n\n  ${media.smallerThanMaxTablet`\n    display: block;\n  `}\n`;\n\nconst LeftColumn = styled.div`\n  flex: 2;\n  margin: 0;\n  padding: 0;\n  padding-right: ${columnsGapDesktop}px;\n\n  ${media.tablet`\n    padding-right: ${columnsGapTablet}px;\n  `}\n\n  ${media.smallerThanMaxTablet`\n    padding: 0;\n  `}\n`;\n\nconst StyledTopics = styled(Topics)`\n  margin-bottom: 30px;\n\n  ${media.smallerThanMaxTablet`\n    margin-bottom: 5px;\n  `}\n`;\n\nconst InitiativeHeader = styled.div`\n  margin-top: -5px;\n  margin-bottom: 28px;\n\n  ${media.smallerThanMaxTablet`\n    margin-top: 0px;\n    margin-bottom: 45px;\n  `}\n`;\n\nconst InitiativeBannerContainer = styled.div`\n  width: 100%;\n  height: 163px;\n  display: flex;\n  align-items: stretch;\n  position: relative;\n  background: ${({ theme }) => theme.colorMain};\n\n  ${media.smallerThanMinTablet`\n    min-height: 200px;\n  `}\n`;\n\nconst InitiativeBannerImage = styled.div<{ src: string }>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n  background-image: url(${(props) => props.src});\n`;\n\nconst InitiativeHeaderOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(\n      0deg,\n      rgba(0, 0, 0, 0.5) 0%,\n      rgba(0, 0, 0, 0) 100%\n    ),\n    linear-gradient(0deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3));\n`;\n\nconst InitiativeBannerContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding-left: 20px;\n  padding-right: 20px;\n  padding-top: 40px;\n  padding-bottom: 40px;\n  z-index: 1;\n`;\n\nconst MobileMoreActionContainer = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\n\nconst StyledDropdownMap = styled(DropdownMap)`\n  margin-bottom: 40px;\n\n  ${media.smallerThanMaxTablet`\n    margin-bottom: 20px;\n  `}\n`;\n\nconst RightColumn = styled.div`\n  flex: 1;\n  margin: 0;\n  padding: 0;\n`;\n\nconst RightColumnDesktop = styled(RightColumn)`\n  flex: 0 0 ${rightColumnWidthDesktop}px;\n  width: ${rightColumnWidthDesktop}px;\n\n  ${media.tablet`\n    flex: 0 0 ${rightColumnWidthTablet}px;\n    width: ${rightColumnWidthTablet}px;\n  `}\n\n  ${media.smallerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst MetaContent = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SharingWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SharingButtonsMobile = styled(SharingButtons)`\n  padding: 0;\n  margin: 0;\n  margin-top: 40px;\n\n  ${media.biggerThanMaxTablet`\n    display: none;\n  `}\n`;\n\nconst StyledOfficialFeedback = styled(OfficialFeedback)`\n  margin-top: 80px;\n`;\n\nconst StyledVoteControl = styled(VoteControl)`\n  box-shadow: 1px 0px 15px rgba(0, 0, 0, 0.06);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  padding: 25px;\n`;\n\ninterface DataProps {\n  initiative: GetInitiativeChildProps;\n  locale: GetLocaleChildProps;\n  initiativeImages: GetInitiativeImagesChildProps;\n  initiativeFiles: GetResourceFilesChildProps;\n  authUser: GetAuthUserChildProps;\n  windowSize: GetWindowSizeChildProps;\n  officialFeedbacks: GetOfficialFeedbacksChildProps;\n  postOfficialFeedbackPermission: GetPermissionChildProps;\n  tenant: GetAppConfigurationChildProps;\n}\n\ninterface InputProps {\n  initiativeId: string | null;\n  className?: string;\n}\n\ninterface Props extends DataProps, InputProps {}\n\ninterface State {\n  loaded: boolean;\n  spamModalVisible: boolean;\n  initiativeIdForSocialSharing: string | null;\n  translateButtonClicked: boolean;\n  a11y_pronounceLatestOfficialFeedbackPost: boolean;\n}\n\nexport class InitiativesShow extends PureComponent<\n  Props & InjectedIntlProps & InjectedLocalized & WithRouterProps,\n  State\n> {\n  officialFeedbackElement = createRef<HTMLDivElement>();\n  timeoutRef: NodeJS.Timeout;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      spamModalVisible: false,\n      initiativeIdForSocialSharing: null,\n      translateButtonClicked: false,\n      a11y_pronounceLatestOfficialFeedbackPost: false,\n    };\n  }\n\n  componentDidMount() {\n    const newInitiativeId = this.props.location.query?.['new_initiative_id'];\n\n    this.setLoaded();\n\n    if (isString(newInitiativeId)) {\n      setTimeout(() => {\n        this.setState({ initiativeIdForSocialSharing: newInitiativeId });\n      }, 1500);\n\n      window.history.replaceState(null, '', window.location.pathname);\n    }\n  }\n\n  componentDidUpdate() {\n    this.setLoaded();\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeoutRef);\n  }\n\n  setLoaded = () => {\n    const { loaded } = this.state;\n    const { initiative, initiativeImages, officialFeedbacks } = this.props;\n\n    if (\n      !loaded &&\n      !isNilOrError(initiative) &&\n      !isUndefined(initiativeImages) &&\n      !isUndefined(officialFeedbacks.officialFeedbacksList)\n    ) {\n      this.setState({ loaded: true });\n    }\n  };\n\n  closeInitiativeSocialSharingModal = () => {\n    this.setState({ initiativeIdForSocialSharing: null });\n  };\n\n  onTranslateInitiative = () => {\n    this.setState((prevState) => {\n      // analytics\n      if (prevState.translateButtonClicked === true) {\n        trackEvent(tracks.clickGoBackToOriginalInitiativeCopyButton);\n      } else if (prevState.translateButtonClicked === false) {\n        trackEvent(tracks.clickTranslateInitiativeButton);\n      }\n\n      return {\n        translateButtonClicked: !prevState.translateButtonClicked,\n      };\n    });\n  };\n\n  onScrollToOfficialFeedback = () => {\n    if (this.officialFeedbackElement.current) {\n      this.officialFeedbackElement.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center',\n        inline: 'center',\n      });\n    }\n\n    this.setState({ a11y_pronounceLatestOfficialFeedbackPost: true });\n    this.timeoutRef = setTimeout(\n      () => this.setState({ a11y_pronounceLatestOfficialFeedbackPost: false }),\n      2000\n    );\n  };\n\n  render() {\n    const {\n      initiativeFiles,\n      locale,\n      initiative,\n      localize,\n      initiativeImages,\n      authUser,\n      windowSize,\n      className,\n      postOfficialFeedbackPermission,\n      tenant,\n    } = this.props;\n    const {\n      loaded,\n      initiativeIdForSocialSharing,\n      translateButtonClicked,\n      a11y_pronounceLatestOfficialFeedbackPost,\n    } = this.state;\n    const { formatMessage } = this.props.intl;\n    const initiativeSettings = !isNilOrError(tenant)\n      ? tenant.attributes.settings.initiatives\n      : null;\n    const votingThreshold = initiativeSettings\n      ? initiativeSettings.voting_threshold\n      : null;\n    const daysLimit = initiativeSettings ? initiativeSettings.days_limit : null;\n    let content: JSX.Element | null = null;\n\n    if (\n      initiativeSettings &&\n      !isNilOrError(initiative) &&\n      !isNilOrError(locale) &&\n      loaded\n    ) {\n      const initiativeHeaderImageLarge =\n        initiative?.attributes?.header_bg?.large;\n      const authorId = initiative?.relationships?.author?.data?.id;\n      const initiativeTitle = localize(initiative?.attributes?.title_multiloc);\n      const initiativeImageLarge =\n        initiativeImages?.[0]?.attributes?.versions?.large;\n      const initiativeGeoPosition =\n        initiative?.attributes?.location_point_geojson;\n      const initiativeAddress = getAddressOrFallbackDMS(\n        initiative?.attributes?.location_description,\n        initiative?.attributes?.location_point_geojson\n      );\n      const topicIds =\n        initiative?.relationships?.topics?.data?.map((item) => item.id) || [];\n      const initiativeUrl = location.href;\n      const initiativeId = initiative?.id;\n      const initiativeBody = localize(initiative?.attributes?.body_multiloc);\n      const isDesktop = windowSize\n        ? windowSize > viewportWidths.largeTablet\n        : true;\n      const isNotDesktop = windowSize\n        ? windowSize <= viewportWidths.largeTablet\n        : false;\n      const utmParams = !isNilOrError(authUser)\n        ? {\n            source: 'share_initiative',\n            campaign: 'share_content',\n            content: authUser.id,\n          }\n        : {\n            source: 'share_initiative',\n            campaign: 'share_content',\n          };\n\n      content = (\n        <>\n          <InitiativeMeta initiativeId={initiativeId} />\n\n          {isDesktop && initiativeHeaderImageLarge && (\n            <InitiativeBannerContainer>\n              {initiativeHeaderImageLarge && (\n                <InitiativeBannerImage src={initiativeHeaderImageLarge} />\n              )}\n            </InitiativeBannerContainer>\n          )}\n\n          {isNotDesktop && (\n            <InitiativeBannerContainer>\n              {initiativeHeaderImageLarge && (\n                <>\n                  <InitiativeBannerImage src={initiativeHeaderImageLarge} />\n                  <InitiativeHeaderOverlay />\n                </>\n              )}\n              <InitiativeBannerContent>\n                <MobileMoreActionContainer>\n                  <InitiativeMoreActions\n                    initiative={initiative}\n                    id=\"e2e-initiative-more-actions-mobile\"\n                    color=\"white\"\n                  />\n                </MobileMoreActionContainer>\n                <Title\n                  postId={initiativeId}\n                  postType=\"initiative\"\n                  title={initiativeTitle}\n                  locale={locale}\n                  translateButtonClicked={translateButtonClicked}\n                  color=\"white\"\n                  align=\"left\"\n                />\n                <PostedByMobile authorId={authorId} />\n              </InitiativeBannerContent>\n            </InitiativeBannerContainer>\n          )}\n\n          {isDesktop && (\n            <ActionBar\n              initiativeId={initiativeId}\n              translateButtonClicked={translateButtonClicked}\n              onTranslateInitiative={this.onTranslateInitiative}\n            />\n          )}\n\n          {isNotDesktop && (\n            <StyledVoteControl\n              initiativeId={initiativeId}\n              onScrollToOfficialFeedback={this.onScrollToOfficialFeedback}\n            />\n          )}\n\n          <InitiativeContainer>\n            <Content>\n              <LeftColumn>\n                <StyledTopics postType=\"initiative\" topicIds={topicIds} />\n\n                {isDesktop && (\n                  <InitiativeHeader>\n                    <Title\n                      postType=\"initiative\"\n                      postId={initiativeId}\n                      title={initiativeTitle}\n                      locale={locale}\n                      translateButtonClicked={translateButtonClicked}\n                    />\n                  </InitiativeHeader>\n                )}\n\n                {isDesktop && (\n                  <PostedBy authorId={authorId} showAboutInitiatives />\n                )}\n\n                {initiativeImageLarge && (\n                  <Image\n                    src={initiativeImageLarge}\n                    alt=\"\"\n                    id=\"e2e-initiative-image\"\n                  />\n                )}\n\n                <Outlet\n                  id=\"app.containers.InitiativesShow.left\"\n                  windowSize={windowSize}\n                  translateButtonClicked={translateButtonClicked}\n                  onClick={this.onTranslateInitiative}\n                  initiative={initiative}\n                  locale={locale}\n                />\n\n                {initiativeGeoPosition && initiativeAddress && (\n                  <StyledDropdownMap\n                    address={initiativeAddress}\n                    position={initiativeGeoPosition}\n                  />\n                )}\n\n                <ScreenReaderOnly>\n                  <FormattedMessage\n                    tagName=\"h2\"\n                    {...messages.invisibleTitleContent}\n                  />\n                </ScreenReaderOnly>\n\n                <Body\n                  postId={initiativeId}\n                  postType=\"initiative\"\n                  locale={locale}\n                  body={initiativeBody}\n                  translateButtonClicked={translateButtonClicked}\n                />\n\n                {!isNilOrError(initiativeFiles) &&\n                  initiativeFiles.length > 0 && (\n                    <FileAttachments files={initiativeFiles} />\n                  )}\n\n                <div ref={this.officialFeedbackElement}>\n                  <StyledOfficialFeedback\n                    postId={initiativeId}\n                    postType=\"initiative\"\n                    permissionToPost={postOfficialFeedbackPermission}\n                    a11y_pronounceLatestOfficialFeedbackPost={\n                      a11y_pronounceLatestOfficialFeedbackPost\n                    }\n                  />\n                </div>\n\n                {isNotDesktop && (\n                  <SharingButtonsMobile\n                    context=\"initiative\"\n                    url={initiativeUrl}\n                    twitterMessage={formatMessage(messages.twitterMessage, {\n                      initiativeTitle,\n                    })}\n                    whatsAppMessage={formatMessage(messages.whatsAppMessage, {\n                      initiativeTitle,\n                    })}\n                    emailSubject={formatMessage(messages.emailSharingSubject, {\n                      initiativeTitle,\n                    })}\n                    emailBody={formatMessage(messages.emailSharingBody, {\n                      initiativeUrl,\n                      initiativeTitle,\n                    })}\n                    utmParams={utmParams}\n                  />\n                )}\n              </LeftColumn>\n\n              {isDesktop && (\n                <RightColumnDesktop>\n                  <MetaContent>\n                    <ScreenReaderOnly>\n                      <FormattedMessage\n                        tagName=\"h2\"\n                        {...messages.a11y_voteControl}\n                      />\n                    </ScreenReaderOnly>\n                    <VoteControl\n                      initiativeId={initiative.id}\n                      onScrollToOfficialFeedback={\n                        this.onScrollToOfficialFeedback\n                      }\n                      id=\"e2e-initiative-vote-control\"\n                    />\n                    <SharingWrapper>\n                      <SharingButtons\n                        id=\"e2e-initiative-sharing-component\"\n                        context=\"initiative\"\n                        url={initiativeUrl}\n                        twitterMessage={formatMessage(messages.twitterMessage, {\n                          initiativeTitle,\n                        })}\n                        whatsAppMessage={formatMessage(\n                          messages.whatsAppMessage,\n                          {\n                            initiativeTitle,\n                          }\n                        )}\n                        emailSubject={formatMessage(\n                          messages.emailSharingSubject,\n                          { initiativeTitle }\n                        )}\n                        emailBody={formatMessage(messages.emailSharingBody, {\n                          initiativeUrl,\n                          initiativeTitle,\n                        })}\n                        utmParams={utmParams}\n                      />\n                    </SharingWrapper>\n                  </MetaContent>\n                </RightColumnDesktop>\n              )}\n            </Content>\n          </InitiativeContainer>\n\n          {loaded && <Footer postId={initiativeId} postType=\"initiative\" />}\n        </>\n      );\n    }\n\n    return (\n      <>\n        {!loaded && (\n          <Loading>\n            <Spinner />\n          </Loading>\n        )}\n\n        <CSSTransition\n          classNames=\"content\"\n          in={loaded}\n          timeout={{\n            enter: contentFadeInDuration + contentFadeInDelay,\n            exit: 0,\n          }}\n          enter={true}\n          exit={false}\n        >\n          <Container id=\"e2e-initiative-show\" className={className}>\n            {content}\n          </Container>\n        </CSSTransition>\n\n        <FeatureFlag name=\"initiativeflow_social_sharing\">\n          <Modal\n            opened={!!initiativeIdForSocialSharing}\n            close={this.closeInitiativeSocialSharingModal}\n            hasSkipButton={true}\n            skipText={<FormattedMessage {...messages.skipSharing} />}\n          >\n            {initiativeIdForSocialSharing && (\n              <SharingModalContent\n                postType=\"initiative\"\n                postId={initiativeIdForSocialSharing}\n                title={formatMessage(messages.shareTitle)}\n                subtitle={formatMessage(messages.shareSubtitle, {\n                  votingThreshold,\n                  daysLimit,\n                })}\n              />\n            )}\n          </Modal>\n        </FeatureFlag>\n      </>\n    );\n  }\n}\n\nconst InitiativesShowWithHOCs = injectLocalize<Props>(\n  injectIntl(withRouter(InitiativesShow))\n);\n\nconst Data = adopt<DataProps, InputProps>({\n  locale: <GetLocale />,\n  tenant: <GetAppConfiguration />,\n  authUser: <GetAuthUser />,\n  windowSize: <GetWindowSize />,\n  initiative: ({ initiativeId, render }) => (\n    <GetInitiative id={initiativeId}>{render}</GetInitiative>\n  ),\n  initiativeImages: ({ initiativeId, render }) => (\n    <GetInitiativeImages initiativeId={initiativeId}>\n      {render}\n    </GetInitiativeImages>\n  ),\n  initiativeFiles: ({ initiativeId, render }) => (\n    <GetResourceFiles resourceId={initiativeId} resourceType=\"initiative\">\n      {render}\n    </GetResourceFiles>\n  ),\n  officialFeedbacks: ({ initiativeId, render }) => (\n    <GetOfficialFeedbacks postId={initiativeId} postType=\"initiative\">\n      {render}\n    </GetOfficialFeedbacks>\n  ),\n  postOfficialFeedbackPermission: ({ initiative, render }) => (\n    <GetPermission\n      item={!isNilOrError(initiative) ? initiative : null}\n      action=\"moderate\"\n    >\n      {render}\n    </GetPermission>\n  ),\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <InitiativesShowWithHOCs {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React, { PureComponent } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Subscription, fromEvent } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { adopt } from 'react-adopt';\nimport { isNilOrError } from 'utils/helperUtils';\nimport { isFunction, compact } from 'lodash-es';\nimport clHistory from 'utils/cl-router/history';\nimport CSSTransition from 'react-transition-group/CSSTransition';\nimport { removeLocale } from 'utils/cl-router/updateLocationDescriptor';\nimport { FocusOn } from 'react-focus-on';\nimport eventEmitter from 'utils/eventEmitter';\n\n// resource\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\n\n// tracking\nimport { trackPage } from 'utils/analytics';\n\n// styling\nimport styled from 'styled-components';\nimport { media } from 'utils/styleUtils';\n\nconst slideInOutTimeout = 500;\nconst slideInOutEasing = 'cubic-bezier(0.19, 1, 0.22, 1)';\n\nconst Container = styled.div<{ windowHeight: string }>`\n  width: 100vw;\n  height: ${(props) =>\n    `calc(${props.windowHeight} - ${props.theme.menuHeight}px)`};\n  position: fixed;\n  top: ${({ theme }) => theme.menuHeight}px;\n  left: 0;\n  display: flex;\n  overflow: hidden;\n  background: #fff;\n  z-index: 1003;\n\n  &.modal-enter {\n    transform: translateY(100vh);\n\n    &.modal-enter-active {\n      transform: translateY(0px);\n      transition: all ${slideInOutTimeout}ms ${slideInOutEasing};\n    }\n  }\n\n  &.modal-exit {\n    transform: translateY(0px);\n\n    &.modal-exit-active {\n      transform: translateY(100vh);\n      transition: all ${slideInOutTimeout}ms ${slideInOutEasing};\n    }\n  }\n\n  ${media.smallerThanMaxTablet`\n    height: ${(props) =>\n      `calc(${props.windowHeight} - ${props.theme.mobileMenuHeight}px)`};\n    top: 0;\n    bottom: ${(props) => props.theme.mobileMenuHeight}px;\n    z-index: 1005; /* there is no top navbar at this screen size, so okay that it is higher than the z-index of NavBar here */\n\n    &.hasBottomBar {\n      height: ${(props) => props.windowHeight};\n      bottom: 0;\n    }\n  `}\n`;\n\nconst StyledFocusOn = styled(FocusOn)`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nconst Content = styled.div`\n  flex: 1;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n  transform: translate3d(0, 0, 0);\n`;\n\ninterface InputProps {\n  opened: boolean;\n  close: () => void;\n  url?: string | null;\n  goBackUrl?: string | null;\n  topBar?: JSX.Element | null;\n  bottomBar?: JSX.Element | null;\n  animateInOut?: boolean;\n  navbarRef?: HTMLElement | null;\n  mobileNavbarRef?: HTMLElement | null;\n  children: JSX.Element | null | undefined;\n}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {\n  windowHeight: string;\n}\n\nconst useCapture = false;\n\nclass FullscreenModal extends PureComponent<Props, State> {\n  subscription: Subscription | null = null;\n  unlisten: { (): void } | null = null;\n  url: string | null | undefined = null;\n  goBackUrl: string | null | undefined = null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      windowHeight: `${window.innerHeight}px`,\n    };\n  }\n\n  componentDidMount() {\n    this.subscription = fromEvent(window, 'resize')\n      .pipe(debounceTime(50), distinctUntilChanged())\n      .subscribe((event) => {\n        if (event.target) {\n          const height = event.target['innerHeight'] as number;\n          this.setState({ windowHeight: `${height}px` });\n        }\n      });\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.opened && this.props.opened) {\n      this.openModal();\n    } else if (prevProps.opened && !this.props.opened) {\n      this.cleanup();\n    }\n  }\n\n  componentWillUnmount() {\n    this.subscription?.unsubscribe();\n    this.cleanup();\n  }\n\n  openModal = () => {\n    const { locale, url, goBackUrl } = this.props;\n\n    if (!isNilOrError(locale) && url) {\n      const { pathname } = removeLocale(url);\n      this.url = `${window.location.origin}/${locale}${pathname}`;\n      this.goBackUrl = `${window.location.origin}/${locale}${\n        removeLocale(goBackUrl || window.location.pathname).pathname\n      }`;\n      window.history.pushState({ path: this.url }, '', this.url);\n      window.addEventListener('popstate', this.handlePopstateEvent, useCapture);\n      window.addEventListener('keydown', this.handleKeypress, useCapture);\n      this.unlisten = clHistory.listen(() => this.props.close());\n\n      trackPage(this.url, { modal: true });\n    }\n  };\n\n  handleKeypress = (event) => {\n    if (event.type === 'keydown' && event.key === 'Escape') {\n      event.preventDefault();\n      this.props.close();\n    }\n  };\n\n  handlePopstateEvent = () => {\n    this.props.close();\n  };\n\n  cleanup = () => {\n    if (this.goBackUrl) {\n      window.removeEventListener(\n        'popstate',\n        this.handlePopstateEvent,\n        useCapture\n      );\n      window.removeEventListener('keydown', this.handleKeypress, useCapture);\n\n      if (window.location.href === this.url) {\n        window.history.pushState({ path: this.goBackUrl }, '', this.goBackUrl);\n      }\n    }\n\n    this.url = null;\n    this.goBackUrl = null;\n\n    if (isFunction(this.unlisten)) {\n      this.unlisten();\n      this.unlisten = null;\n    }\n\n    eventEmitter.emit('fullscreenModalClosed');\n  };\n\n  render() {\n    const { windowHeight } = this.state;\n    const {\n      children,\n      opened,\n      topBar,\n      bottomBar,\n      animateInOut,\n      navbarRef,\n      mobileNavbarRef,\n    } = this.props;\n    const shards = compact([navbarRef, mobileNavbarRef]);\n    const modalPortalElement = document?.getElementById('modal-portal');\n    let modalContent: React.ReactChild | null = null;\n\n    if (animateInOut || (!animateInOut && opened)) {\n      modalContent = (\n        <Container\n          id=\"e2e-fullscreenmodal-content\"\n          className={bottomBar ? 'hasBottomBar' : ''}\n          windowHeight={windowHeight}\n        >\n          <StyledFocusOn autoFocus={false} shards={shards}>\n            {topBar}\n            <Content className=\"fullscreenmodal-scrollcontainer\">\n              {children}\n            </Content>\n            {bottomBar}\n          </StyledFocusOn>\n        </Container>\n      );\n    }\n\n    if (animateInOut) {\n      return createPortal(\n        <CSSTransition\n          classNames=\"modal\"\n          in={opened}\n          timeout={{\n            enter: slideInOutTimeout,\n            exit: slideInOutTimeout,\n          }}\n          mountOnEnter={true}\n          unmountOnExit={true}\n          enter={true}\n          exit={true}\n        >\n          {modalContent}\n        </CSSTransition>,\n        document.getElementById('modal-portal') as HTMLElement\n      );\n    }\n\n    if (!animateInOut && opened && modalPortalElement) {\n      return createPortal(modalContent, modalPortalElement);\n    }\n\n    return null;\n  }\n}\n\nconst Data = adopt<DataProps>({\n  locale: <GetLocale />,\n});\n\nexport default (inputProps: InputProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <FullscreenModal {...inputProps} {...dataProps} />}\n  </Data>\n);\n","import React, { PureComponent } from 'react';\nimport moment from 'moment';\nimport styled from 'styled-components';\nimport { colors, fontSizes } from 'utils/styleUtils';\nimport { FormattedMessage } from 'utils/cl-intl';\nimport messages from './messages';\nimport { convertSecondsToDDHHMM } from 'utils/dateUtils';\n\nconst Container = styled.div`\n  display: flex;\n`;\n\nconst TimeComponent = styled.div`\n  margin: 0 5px 0 0;\n`;\n\nconst Count = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 30px;\n  border-radius: 5px;\n  background-color: ${colors.lightGreyishBlue};\n  font-size: ${fontSizes.large}px;\n  font-weight: 500;\n  color: ${(props) => props.theme.colorText};\n`;\n\nconst Unit = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 5px 0 0 0;\n  color: ${(props) => props.theme.colorText};\n  font-size: ${fontSizes.small}px;\n`;\n\ninterface Props {\n  targetTime: string;\n  className?: string;\n}\n\ninterface State {\n  refresh: number;\n}\n\nclass CountDown extends PureComponent<Props, State> {\n  interval: NodeJS.Timeout;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      refresh: Date.now(),\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.setState({ refresh: Date.now() });\n    }, 60 * 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    const start = moment();\n    const end = moment(this.props.targetTime, 'YYYY-MM-DDThh:mm:ss.SSSZ');\n    const durationAsSeconds = moment.duration(end.diff(start)).asSeconds();\n    const formattedDuration = convertSecondsToDDHHMM(durationAsSeconds).split(\n      ':'\n    );\n    const daysLeft = formattedDuration[0];\n    const hoursLeft = formattedDuration[1];\n    const minutesLeft = formattedDuration[2];\n\n    return (\n      <Container className={this.props.className}>\n        <TimeComponent>\n          <Count>{daysLeft}</Count>\n          <Unit>\n            <FormattedMessage {...messages.days} />\n          </Unit>\n        </TimeComponent>\n        <TimeComponent>\n          <Count>{hoursLeft}</Count>\n          <Unit>\n            <FormattedMessage {...messages.hours} />\n          </Unit>\n        </TimeComponent>\n        <TimeComponent>\n          <Count>{minutesLeft}</Count>\n          <Unit>\n            <FormattedMessage {...messages.minutes} />\n          </Unit>\n        </TimeComponent>\n      </Container>\n    );\n  }\n}\n\nexport default CountDown;\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport { fontSizes } from 'utils/styleUtils';\n\nimport { IInitiativeData } from 'services/initiatives';\nimport { IInitiativeStatusData } from 'services/initiativeStatuses';\nimport { IAppConfigurationSettings } from 'services/appConfiguration';\n\nimport { Icon } from 'cl2-component-library';\nimport { StatusWrapper, StatusExplanation } from './SharedStyles';\nimport Button from 'components/UI/Button';\n\nimport T from 'components/T';\nimport messages from './messages';\nimport { FormattedMessage } from 'utils/cl-intl';\n\nconst Container = styled.div``;\n\nconst StatusIcon = styled(Icon)`\n  path {\n    fill: ${(props) => props.theme.colorText};\n  }\n  width: 40px;\n  height: 40px;\n  margin-bottom: 20px;\n`;\n\nconst VoteText = styled.div`\n  font-size: ${fontSizes.base}px;\n  color: ${(props) => props.theme.colorText};\n  margin-top: 20px;\n`;\n\nconst Buttons = styled.div`\n  margin-top: 20px;\n  display: flex;\n  margin: 20px -3px 0 -3px;\n  & > * {\n    flex: 1;\n    margin: 3px;\n  }\n`;\n\ninterface InputProps {\n  initiative: IInitiativeData;\n  initiativeStatus: IInitiativeStatusData;\n  initiativeSettings: NonNullable<IAppConfigurationSettings['initiatives']>;\n  userVoted: boolean;\n  onVote: () => void;\n  onScrollToOfficialFeedback: () => void;\n}\ninterface DataProps {}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass Answered extends PureComponent<Props, State> {\n  handleOnVote = () => {\n    this.props.onVote();\n  };\n\n  handleOnReadAnswer = () => {\n    this.props.onScrollToOfficialFeedback();\n  };\n\n  render() {\n    const { initiative, initiativeStatus, userVoted } = this.props;\n\n    const voteCount = initiative.attributes.upvotes_count;\n\n    return (\n      <Container>\n        <StatusWrapper>\n          <T value={initiativeStatus.attributes.title_multiloc} />\n        </StatusWrapper>\n        <StatusIcon name=\"envelope-check\" />\n        <StatusExplanation>\n          <FormattedMessage\n            {...messages.answeredStatusExplanation}\n            values={{\n              answeredStatusExplanationBold: (\n                <b>\n                  <FormattedMessage\n                    {...messages.answeredStatusExplanationBold}\n                  />\n                </b>\n              ),\n            }}\n          />\n        </StatusExplanation>\n        <VoteText>\n          <FormattedMessage\n            {...messages.xPeopleVoted}\n            values={{\n              xPeople: (\n                <b>\n                  <FormattedMessage\n                    {...messages.xPeople}\n                    values={{ count: voteCount }}\n                  />\n                </b>\n              ),\n            }}\n          />\n        </VoteText>\n        <Buttons>\n          <Button onClick={this.handleOnReadAnswer}>\n            <FormattedMessage {...messages.readAnswer} />\n          </Button>\n          {!userVoted && (\n            <Button buttonStyle=\"primary-outlined\" onClick={this.handleOnVote}>\n              <FormattedMessage {...messages.vote} />\n            </Button>\n          )}\n        </Buttons>\n      </Container>\n    );\n  }\n}\n\nexport default Answered;\n","import { API_PATH } from 'containers/App/constants';\nimport streams from 'utils/streams';\n\nexport interface IInitiativeVoteData {\n  id: string;\n  type: 'vote';\n  attributes: {\n    mode: 'up' | 'down';\n  };\n  relationships: {\n    votable: {\n      data: {\n        id: string;\n        type: 'votable';\n      };\n    };\n    user: {\n      data: {\n        id: string;\n        type: 'user';\n      };\n    };\n  };\n}\n\ninterface ILinks {\n  self: string;\n  first: string;\n  prev: string;\n  next: string;\n  last: string;\n}\n\nexport interface IInitiativeVotes {\n  data: IInitiativeVoteData[];\n  links: ILinks;\n}\n\nexport interface IInitiativeVote {\n  data: IInitiativeVoteData;\n}\n\nexport interface INewVoteProperties {\n  user_id?: string;\n  mode: 'up' | 'down';\n}\n\nexport async function addVote(\n  initiativeId: string,\n  object: INewVoteProperties\n) {\n  const response = await streams.add<IInitiativeVote>(\n    `${API_PATH}/initiatives/${initiativeId}/votes`,\n    { vote: object }\n  );\n  await streams.fetchAllWith({\n    apiEndpoint: [\n      `${API_PATH}/initiatives/${initiativeId}`,\n      `${API_PATH}/initiative_statuses/${initiativeId}`,\n    ],\n  });\n  return response;\n}\n\nexport async function deleteVote(initiativeId: string, voteId: string) {\n  const response = await streams.delete(`${API_PATH}/votes/${voteId}`, voteId);\n  await streams.fetchAllWith({\n    apiEndpoint: [`${API_PATH}/initiatives/${initiativeId}`],\n  });\n  return response;\n}\n","import useIdeaCustomFieldsSchemas from 'hooks/useIdeaCustomFieldsSchemas';\nimport { IIdeaFormSchemas } from 'services/ideaCustomFieldsSchemas';\n\nexport type GetIdeaCustomFieldsSchemasChildProps =\n  | IIdeaFormSchemas\n  | undefined\n  | null\n  | Error;\n\ntype children = (\n  renderProps: GetIdeaCustomFieldsSchemasChildProps\n) => JSX.Element | null;\n\ninterface Props {\n  projectId: string | null;\n  children?: children;\n}\n\nexport default (props: Props) => {\n  const ideaCustomFieldsSchema = useIdeaCustomFieldsSchemas({\n    projectId: props.projectId,\n  });\n  return (props.children as children)(ideaCustomFieldsSchema);\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { isNilOrError } from 'utils/helperUtils';\nimport isFieldEnabled from '../isFieldEnabled';\n\n// components\nimport Status from './Status';\nimport Location from './Location';\nimport Attachments from './Attachments';\nimport IdeaTopics from './IdeaTopics';\nimport PostedBy from './PostedBy';\n\n// hooks\nimport useLocale from 'hooks/useLocale';\nimport useIdeaCustomFieldsSchemas from 'hooks/useIdeaCustomFieldsSchemas';\nimport Outlet from 'components/Outlet';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  border-top: solid 1px #ccc;\n  border-bottom: solid 1px #ccc;\n`;\n\ninterface Props {\n  ideaId: string;\n  authorId: string | null;\n  projectId: string;\n  statusId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst MetaInformation = ({\n  ideaId,\n  projectId,\n  statusId,\n  authorId,\n  compact,\n  className,\n}: Props) => {\n  const locale = useLocale();\n  const ideaCustomFieldsSchemas = useIdeaCustomFieldsSchemas({ projectId });\n  if (!isNilOrError(locale) && !isNilOrError(ideaCustomFieldsSchemas)) {\n    const topicsEnabled = isFieldEnabled(\n      'topic_ids',\n      ideaCustomFieldsSchemas,\n      locale\n    );\n    const locationEnabled = isFieldEnabled(\n      'location',\n      ideaCustomFieldsSchemas,\n      locale\n    );\n    const attachmentsEnabled = isFieldEnabled(\n      'attachments',\n      ideaCustomFieldsSchemas,\n      locale\n    );\n\n    return (\n      <Container className={`${className || ''} ${compact ? 'compact' : ''}`}>\n        <PostedBy authorId={authorId} ideaId={ideaId} compact={compact} />\n        <Status statusId={statusId} compact={compact} />\n        {topicsEnabled && <IdeaTopics ideaId={ideaId} compact={compact} />}\n        {locationEnabled && (\n          <Location projectId={projectId} ideaId={ideaId} compact={compact} />\n        )}\n        {attachmentsEnabled && (\n          <Attachments ideaId={ideaId} compact={compact} />\n        )}\n        <Outlet\n          id=\"app.containers.IdeasShow.MetaInformation\"\n          ideaId={ideaId}\n          compact={compact}\n        />\n      </Container>\n    );\n  }\n\n  return null;\n};\n\nexport default MetaInformation;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  noInitiativeFoundHere: {\n    id: 'app.components.InitiativesShowPage.noInitiativeFoundHere',\n    defaultMessage: 'No initiative was found here.',\n  },\n  goBack: {\n    id: 'app.components.InitiativesShowPage.goBack',\n    defaultMessage: 'Go back',\n  },\n  goBackToList: {\n    id: 'app.components.InitiativesShowPage.goBackToList',\n    defaultMessage: 'Go back to the list',\n  },\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport Attachment from './Attachment';\nimport useResourceFiles from 'hooks/useResourceFiles';\nimport { Header, Item } from 'components/IdeasShowComponents/MetaInfoStyles';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// i18n\nimport { injectIntl } from 'utils/cl-intl';\nimport { InjectedIntlProps } from 'react-intl';\nimport messages from './messages';\n\nconst Container = styled.div``;\nconst StyledAttachment = styled(Attachment)<{ isLastItem: boolean }>`\n  margin-bottom: ${({ isLastItem }) => (!isLastItem ? '10px' : '0')};\n`;\n\ninterface Props {\n  ideaId: string;\n  compact?: boolean;\n  className?: string;\n}\n\nconst Attachments = ({\n  ideaId,\n  compact,\n  className,\n  intl: { formatMessage },\n}: Props & InjectedIntlProps) => {\n  const files = useResourceFiles({ resourceType: 'idea', resourceId: ideaId });\n\n  if (!isNilOrError(files) && files.length > 0) {\n    return (\n      <Item className={className || ''} compact={compact}>\n        <Header>{formatMessage(messages.attachments)}</Header>\n        <Container className={className}>\n          {Array.isArray(files) &&\n            files.map((file, index) => (\n              <StyledAttachment\n                isLastItem={index === files.length - 1}\n                file={file}\n                key={file.id}\n              />\n            ))}\n        </Container>\n      </Item>\n    );\n  }\n\n  return null;\n};\n\nexport default injectIntl(Attachments);\n","import React, { memo, FormEvent } from 'react';\nimport clHistory from 'utils/cl-router/history';\nimport { Button } from 'cl2-component-library';\nimport useProject from 'hooks/useProject';\nimport useLocale from 'hooks/useLocale';\nimport useLocalize from 'hooks/useLocalize';\nimport { isNilOrError } from 'utils/helperUtils';\nimport eventEmitter from 'utils/eventEmitter';\n\ninterface Props {\n  projectId: string;\n  className?: string;\n  insideModal: boolean;\n}\n\nconst GoBackButton = memo(({ projectId, className, insideModal }: Props) => {\n  const project = useProject({ projectId });\n  const locale = useLocale();\n  const localize = useLocalize();\n\n  const onGoBack = (event: FormEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n\n    if (insideModal) {\n      eventEmitter.emit('closeIdeaModal');\n    } else if (!isNilOrError(project)) {\n      clHistory.push(`/projects/${project.attributes.slug}`);\n    } else {\n      clHistory.push('/');\n    }\n  };\n\n  if (!isNilOrError(project) && !isNilOrError(locale)) {\n    return (\n      <Button\n        className={className}\n        id=\"e2e-idea-other-link\"\n        locale={locale}\n        icon=\"circle-arrow-left\"\n        onClick={onGoBack}\n        buttonStyle=\"text\"\n        iconSize=\"26px\"\n        padding=\"0\"\n        textDecorationHover=\"underline\"\n      >\n        {localize(project.attributes.title_multiloc)}\n      </Button>\n    );\n  }\n\n  return null;\n});\n\nexport default GoBackButton;\n","import {\n  IIdeaFormSchemas,\n  CustomFieldCodes,\n} from 'services/ideaCustomFieldsSchemas';\nimport { Locale } from 'typings';\n\nexport default function isFieldEnabled(\n  fieldCode: CustomFieldCodes,\n  ideaCustomFieldsSchemas: IIdeaFormSchemas,\n  locale: Locale\n) {\n  return (\n    ideaCustomFieldsSchemas.ui_schema_multiloc[locale][fieldCode][\n      'ui:widget'\n    ] !== 'hidden'\n  );\n}\n","import React from 'react';\nimport { BehaviorSubject, Subscription, combineLatest } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  mergeScan,\n  map,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\nimport {\n  ICommentData,\n  commentsForIdeaStream,\n  commentsForInitiativeStream,\n  CommentsSort,\n} from 'services/comments';\nimport { unionBy, isString, get } from 'lodash-es';\nimport { isNilOrError } from 'utils/helperUtils';\n\ntype children = (renderProps: GetCommentsChildProps) => JSX.Element | null;\n\ninterface Props {\n  postId: string;\n  children?: children;\n  postType: 'idea' | 'initiative';\n}\n\ninterface State {\n  commentsList: ICommentData[] | undefined | null | Error;\n  loadingInital: boolean;\n  loadingMore: boolean;\n  hasMore: boolean;\n}\n\ninterface IQueryParameters {\n  pageNumber: number;\n  pageSize: number;\n  sort: CommentsSort;\n}\n\nexport interface GetCommentsChildProps extends State {\n  onLoadMore: () => void;\n  onChangeSort: (sort: CommentsSort) => void;\n}\n\nexport default class GetComments extends React.Component<Props, State> {\n  private postId$: BehaviorSubject<string>;\n  private postType$: BehaviorSubject<string>;\n  private sort$: BehaviorSubject<CommentsSort>;\n  private loadMore$: BehaviorSubject<null>;\n  private subscription: Subscription;\n  private initialQueryParameters: IQueryParameters = {\n    pageNumber: 0,\n    pageSize: 15,\n    sort: '-new',\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      commentsList: undefined,\n      loadingInital: false,\n      loadingMore: false,\n      hasMore: true,\n    };\n  }\n\n  componentDidMount() {\n    this.postId$ = new BehaviorSubject(this.props.postId);\n    this.postType$ = new BehaviorSubject(this.props.postType);\n    this.sort$ = new BehaviorSubject(this.initialQueryParameters.sort);\n    this.loadMore$ = new BehaviorSubject(null);\n\n    this.subscription = combineLatest(\n      this.postId$.pipe(distinctUntilChanged()),\n      this.postType$.pipe(distinctUntilChanged()),\n      this.sort$.pipe(distinctUntilChanged())\n    )\n      .pipe(\n        switchMap(([postId, postType, sort]) => {\n          let commentsList:\n            | ICommentData[]\n            | undefined\n            | null\n            | Error = undefined;\n          let pageNumber = this.initialQueryParameters.pageNumber;\n          const pageSize = this.initialQueryParameters.pageSize;\n          let hasMore = true;\n\n          return this.loadMore$.pipe(\n            tap(() =>\n              this.setState({\n                loadingInital: pageNumber === 0,\n                loadingMore: pageNumber > 0,\n              })\n            ),\n            mergeScan(() => {\n              pageNumber = pageNumber + 1;\n\n              const commentsStream =\n                postType === 'idea'\n                  ? commentsForIdeaStream\n                  : commentsForInitiativeStream;\n\n              return commentsStream(postId, {\n                queryParameters: {\n                  sort,\n                  'page[number]': pageNumber,\n                  'page[size]': pageSize,\n                },\n              }).observable.pipe(\n                map((comments) => {\n                  const selfLink = get(comments, 'links.self');\n                  const lastLink = get(comments, 'links.last');\n                  hasMore =\n                    isString(selfLink) &&\n                    isString(lastLink) &&\n                    selfLink !== lastLink;\n                  commentsList = !isNilOrError(commentsList)\n                    ? unionBy(commentsList, comments.data, 'id')\n                    : comments.data;\n                  return null;\n                })\n              );\n            }, null),\n            map(() => ({ pageNumber, commentsList, hasMore }))\n          );\n        })\n      )\n      .subscribe(({ commentsList, hasMore }) => {\n        this.setState({\n          commentsList,\n          hasMore,\n          loadingInital: false,\n          loadingMore: false,\n        });\n      });\n  }\n\n  componentDidUpdate() {\n    this.postId$.next(this.props.postId);\n  }\n\n  componentWillUnmount() {\n    this.subscription.unsubscribe();\n  }\n\n  loadMore = () => {\n    if (this.state.hasMore) {\n      this.loadMore$.next(null);\n    }\n  };\n\n  changeSort = (sort: CommentsSort) => {\n    this.sort$.next(sort);\n  };\n\n  render() {\n    const { children } = this.props;\n    return (children as children)({\n      ...this.state,\n      onLoadMore: this.loadMore,\n      onChangeSort: this.changeSort,\n    });\n  }\n}\n"],"sourceRoot":""}