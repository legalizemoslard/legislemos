(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"6yyz":function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("lwsE")),l=n(a("W8MJ")),r=n(a("PJYZ")),c=n(a("7W2i")),s=n(a("a1gu")),f=n(a("Nsbk")),u=n(a("lSNA")),d=n(a("VkAN"));a("yWo2"),a("2B1R"),a("sMBO");var p,m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=i?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(n,l,r):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),h=a("iP56"),b=n(a("8QT5")),g=n(a("vOnD")),y=a("96Cm"),v=a("ufqH");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var k=g.default.div.withConfig({displayName:"MoreActionsMenu__Container",componentId:"sc-17qgzcj-0"})(["position:relative;display:inline-block;"]),w=(0,g.default)(h.Icon).withConfig({displayName:"MoreActionsMenu__MoreOptionsIcon",componentId:"sc-17qgzcj-1"})(["width:20px;height:6px;fill:",";transition:all 100ms ease-out;"],(function(e){return e.color||y.colors.label})),M=g.default.div.withConfig({displayName:"MoreActionsMenu__MoreOptionsLabel",componentId:"sc-17qgzcj-2"})(["color:",";font-size:","px;line-height:normal;font-weight:400;white-space:nowrap;margin-left:10px;transition:all 100ms ease-out;",""],y.colors.label,y.fontSizes.small,y.media.smallerThanMaxTablet(p||(p=(0,d.default)(["\n    display: none;\n  "])))),F=g.default.button.withConfig({displayName:"MoreActionsMenu__MoreOptionsButton",componentId:"sc-17qgzcj-3"})(["min-width:25px;min-height:20px;display:flex;align-items:center;justify-content:center;padding:0;margin:0;border:none;background:transparent;cursor:pointer;&:hover,&:focus{","{fill:#000;}","{color:#000;}}"],w,M),_=g.default.div.withConfig({displayName:"MoreActionsMenu__List",componentId:"sc-17qgzcj-4"})(["display:flex;flex-direction:column;align-items:stretch;margin-top:3px;margin-bottom:3px;"]),x=g.default.button.withConfig({displayName:"MoreActionsMenu__ListItem",componentId:"sc-17qgzcj-5"})(["flex:1 1 auto;display:flex;align-items:center;justify-content:space-between;color:",";font-size:","px;font-weight:400;white-space:nowrap;padding:10px;border-radius:",";cursor:pointer;white-space:nowrap;transition:all 100ms ease-out;& > span{margin-right:5px;}&:hover,&:focus{color:white;background:",";}"],y.colors.adminLightText,y.fontSizes.small,(function(e){return e.theme.borderRadius}),(0,v.lighten)(.12,y.colors.adminMenuBackground)),E=(0,g.default)(h.Icon).withConfig({displayName:"MoreActionsMenu__StyledIcon",componentId:"sc-17qgzcj-6"})(["width:20px;height:20px;"]),S=function(e){(0,c.default)(a,e);var t=P(a);function a(e){var n;return(0,i.default)(this,a),n=t.call(this,e),(0,u.default)((0,r.default)(n),"hideMenu",(function(e){e.preventDefault(),n.setState({visible:!1})})),(0,u.default)((0,r.default)(n),"removeFocus",(function(e){e.preventDefault()})),(0,u.default)((0,r.default)(n),"toggleMenu",(function(e){e.preventDefault(),n.setState((function(e){return{visible:!e.visible}}))})),(0,u.default)((0,r.default)(n),"handleListItemOnClick",(function(e){return function(t){t.preventDefault(),n.setState({visible:!1}),e()}})),n.state={visible:!1},n}return(0,l.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.actions,n=t.ariaLabel,o=t.color,i=t.label,l=t.className,r=t.id,c=this.state.visible;return a&&0!==a.length?m.default.createElement(k,{className:l||""},m.default.createElement(b.default,{placement:"bottom",interactive:!0,trigger:"click",duration:[200,0],content:m.default.createElement(_,{className:"e2e-more-actions-list"},a.map((function(t,a){var n=t.handler,o=t.label,i=t.icon,l=t.name;return m.default.createElement(x,{key:a,onMouseDown:e.removeFocus,onClick:e.handleListItemOnClick(n),className:l?"e2e-action-".concat(l):void 0},o,i&&m.default.createElement(E,{name:i}))})))},m.default.createElement(F,{onMouseDown:this.removeFocus,onClick:this.toggleMenu,"aria-expanded":c,id:r,className:"e2e-more-actions"},m.default.createElement(w,{title:i||n,name:"more-options",color:o,ariaHidden:!!i}),i&&m.default.createElement(M,null,i)))):null}}]),a}(m.PureComponent);t.default=S},V7x7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={officialFeedbackGiven:"Official feedback was given."}},XiW1:function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OfficialFeedbackPost=void 0,a("rB9j"),a("UxlC");var i,l,r,c,s,f,u,d,p,m,h=n(a("pVnL")),b=n(a("lwsE")),g=n(a("W8MJ")),y=n(a("PJYZ")),v=n(a("7W2i")),O=n(a("a1gu")),P=n(a("Nsbk")),k=n(a("lSNA")),w=n(a("VkAN")),M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=W(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=i?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(n,l,r):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),F=a("ifvJ"),_=a("KLnl"),x=n(a("dLOG")),E=n(a("6yyz")),S=n(a("3A/8")),C=n(a("3+OT")),I=a("96Cm"),j=a("+9pX"),T=n(a("vOnD")),A=a("ufqH"),N=n(a("Z+yM")),D=a("Rw3A"),R=a("JRPe"),B=a("9FT3"),L=a("lcvl"),q=n(a("yiTP")),z=n(a("phbu"));function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(W=function(e){return e?a:t})(e)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,P.default)(e);if(t){var o=(0,P.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,O.default)(this,a)}}var V=T.default.div.withConfig({displayName:"OfficialFeedbackPost__Container",componentId:"sc-1a2bq8d-0"})(["display:flex;flex-direction:column;border-radius:",";color:",";font-size:","px;font-weight:300;padding:30px;padding-top:35px;margin-bottom:15px;",""],(function(e){return e.theme.borderRadius}),(function(e){return e.theme.colorText}),I.fontSizes.base,I.media.smallerThanMinTablet(i||(i=(0,w.default)(["\n    padding: 20px;\n    padding-top: 25px;\n  "])))),H=(0,T.default)(V).withConfig({displayName:"OfficialFeedbackPost__PostContainer",componentId:"sc-1a2bq8d-1"})(["white-space:pre-line;background:",";position:relative;"],(0,A.transparentize)(.94,I.colors.clRedError)),$=(0,T.default)(V).withConfig({displayName:"OfficialFeedbackPost__EditFormContainer",componentId:"sc-1a2bq8d-2"})(["background:",";"],I.colors.background),J=T.default.div.withConfig({displayName:"OfficialFeedbackPost__Body",componentId:"sc-1a2bq8d-3"})(["margin-bottom:30px;a{color:",";&:hover{color:",";}}"],I.colors.clBlueDarker,I.colors.clBlueDarker),Z=T.default.div.withConfig({displayName:"OfficialFeedbackPost__Footer",componentId:"sc-1a2bq8d-4"})(["display:flex;flex-direction:column;"]),K=T.default.span.withConfig({displayName:"OfficialFeedbackPost__Author",componentId:"sc-1a2bq8d-5"})(["color:",";font-size:","px;font-weight:600;",""],I.colors.text,I.fontSizes.base,(0,I.isRtl)(l||(l=(0,w.default)(["\n    text-align: left;\n  "])))),G=T.default.span.withConfig({displayName:"OfficialFeedbackPost__DatesPostedEdited",componentId:"sc-1a2bq8d-6"})(["color:",";font-size:","px;font-weight:400;display:flex;align-items:center;"," ",""],I.colors.text,I.fontSizes.base,I.media.smallerThanMinTablet(r||(r=(0,w.default)(["\n    flex-direction: column;\n    align-items: flex-start;\n  "]))),(0,I.isRtl)(c||(c=(0,w.default)(["\n    justify-content: flex-end;\n    ","\n "])),I.media.smallerThanMinTablet(s||(s=(0,w.default)(["\n        align-items: flex-end;\n    "]))))),Y=T.default.span.withConfig({displayName:"OfficialFeedbackPost__DatePosted",componentId:"sc-1a2bq8d-7"})([""]),Q=T.default.span.withConfig({displayName:"OfficialFeedbackPost__DatesSpacer",componentId:"sc-1a2bq8d-8"})(["margin-left:4px;margin-right:4px;",""],I.media.smallerThanMinTablet(f||(f=(0,w.default)(["\n    display: none;\n  "])))),X=T.default.span.withConfig({displayName:"OfficialFeedbackPost__DateEdited",componentId:"sc-1a2bq8d-9"})(["",""],I.media.smallerThanMinTablet(u||(u=(0,w.default)(["\n    font-style: italic;\n  "])))),ee=(0,T.default)(E.default).withConfig({displayName:"OfficialFeedbackPost__StyledMoreActionsMenu",componentId:"sc-1a2bq8d-10"})(["position:absolute;top:12px;right:15px;"," ",""],I.media.smallerThanMinTablet(d||(d=(0,w.default)(["\n    top: 5px;\n    right: 5px;\n  "]))),(0,I.isRtl)(p||(p=(0,w.default)(["\n    right: auto;\n    left: 15px;\n\n    ","\n"])),I.media.smallerThanMinTablet(m||(m=(0,w.default)(["\n        left: 5px;\n    "]))))),te=function(e){(0,v.default)(a,e);var t=U(a);function a(e){var n;return(0,b.default)(this,a),n=t.call(this,e),(0,k.default)((0,y.default)(n),"showEditForm",(function(){n.setState({showEditForm:!0})})),(0,k.default)((0,y.default)(n),"closeEditForm",(function(){n.setState({showEditForm:!1})})),(0,k.default)((0,y.default)(n),"deletePost",(function(e){return function(){var t=n.props.postType;if(window.confirm(n.props.intl.formatMessage(N.default.deletionConfirmation)))switch(t){case"idea":(0,L.deleteOfficialFeedbackFromIdea)(e);case"initiative":(0,L.deleteOfficialFeedbackFromInitiative)(e)}}})),(0,k.default)((0,y.default)(n),"getActions",(function(e){return[{label:M.default.createElement(D.FormattedMessage,N.default.editOfficialFeedbackPost),handler:n.showEditForm,name:"edit"},{label:M.default.createElement(D.FormattedMessage,N.default.deleteOfficialFeedbackPost),handler:n.deletePost(e),name:"delete"}]})),(0,k.default)((0,y.default)(n),"getPostBodyText",(function(e,t,a){return(0,B.getLocalized)(e,t,a).replace(/<span\sclass="cl-mention-user"[\S\s]*?data-user-id="([\S\s]*?)"[\S\s]*?data-user-slug="([\S\s]*?)"[\S\s]*?>([\S\s]*?)<\/span>/gi,'<a class="mention" data-link="/profile/$2" href="/profile/$2">$3</a>')})),n.state={showEditForm:!1},n}return(0,g.default)(a,[{key:"render",value:function(){var e=this.props,t=e.editingAllowed,a=e.officialFeedbackPost,n=e.locale,o=e.tenantLocales,i=e.className,l=e.a11y_pronounceLatestOfficialFeedbackPost,r=this.state.showEditForm,c=a.attributes,s=c.body_multiloc,f=c.author_multiloc,u=c.created_at,d=c.updated_at;if(r&&!(0,_.isNilOrError)(n)&&!(0,_.isNilOrError)(o))return M.default.createElement($,{key:a.id},M.default.createElement(x.default,{locale:n,tenantLocales:o,formType:"edit",feedback:a,onClose:this.closeEditForm}));if(!(0,_.isNilOrError)(n)&&!(0,_.isNilOrError)(o)){var p=M.default.createElement(R.FormattedDate,{value:u,year:"numeric",month:"long",day:"numeric"}),m=M.default.createElement(R.FormattedDate,{value:d,year:"numeric",month:"long",day:"numeric"});return M.default.createElement(H,{key:a.id,className:"e2e-official-feedback-post ".concat(i||"")},t&&M.default.createElement(ee,{ariaLabel:this.props.intl.formatMessage(N.default.showMoreActions),actions:this.getActions(a.id)}),M.default.createElement(j.ScreenReaderOnly,{"aria-live":"polite"},l&&this.getPostBodyText(s,n,o)),M.default.createElement(C.default,{fontWeight:400},M.default.createElement(J,{className:"e2e-official-feedback-post-body"},M.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.getPostBodyText(s,n,o)}})),M.default.createElement(Z,null,M.default.createElement(K,{className:"e2e-official-feedback-post-author"},M.default.createElement(S.default,{value:f})),M.default.createElement(G,null,M.default.createElement(Y,null,M.default.createElement(D.FormattedMessage,(0,h.default)({},N.default.postedOn,{values:{date:p}}))),d&&d!==u&&M.default.createElement(M.default.Fragment,null,M.default.createElement(Q,null,"-"),M.default.createElement(X,null,M.default.createElement(D.FormattedMessage,(0,h.default)({},N.default.lastEdition,{values:{date:m}}))))))))}return null}}]),a}(M.PureComponent);t.OfficialFeedbackPost=te;var ae=(0,F.adopt)({locale:M.default.createElement(q.default,null),tenantLocales:M.default.createElement(z.default,null)}),ne=(0,D.injectIntl)(te);t.default=function(e){return M.default.createElement(ae,null,(function(t){return M.default.createElement(ne,(0,h.default)({},e,t))}))}},"Z+yM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({addOfficalUpdate:{id:"app.components.PostComponents.OfficialFeedback.addOfficalUpdate",defaultMessage:"Add an official update"},officialUpdates:{id:"app.components.PostComponents.OfficialFeedback.officialUpdates",defaultMessage:"Official updates"},lastUpdate:{id:"app.components.PostComponents.OfficialFeedback.lastUpdate",defaultMessage:"Last update: {lastUpdateDate}"},editOfficialFeedbackPost:{id:"app.components.PostComponents.OfficialFeedback.editOfficialFeedbackPost",defaultMessage:"Edit"},deleteOfficialFeedbackPost:{id:"app.components.PostComponents.OfficialFeedback.deleteOfficialFeedbackPost",defaultMessage:"Delete"},deletionConfirmation:{id:"app.components.PostComponents.OfficialFeedback.deletionConfirmation",defaultMessage:"Are you sure you want to delete this official update?"},showPreviousUpdates:{id:"app.components.PostComponents.OfficialFeedback.showPreviousUpdates",defaultMessage:"Show previous updates"},officialNamePlaceholder:{id:"app.components.PostComponents.OfficialFeedback.officialNamePlaceholder",defaultMessage:"Choose how people see your name"},textAreaPlaceholder:{id:"app.components.PostComponents.OfficialFeedback.textAreaPlaceholder",defaultMessage:"Give an update..."},publishButtonText:{id:"app.components.PostComponents.OfficialFeedback.publishButtonText",defaultMessage:"Publish"},updateButtonSaveEditForm:{id:"app.components.PostComponents.OfficialFeedback.updateButtonSaveEditForm",defaultMessage:"Update message"},updateButtonError:{id:"app.components.PostComponents.OfficialFeedback.updateButtonError",defaultMessage:"Sorry, there was a problem"},updateMessageSuccess:{id:"app.components.PostComponents.OfficialFeedback.updateMessageSuccess",defaultMessage:"Your update was published successfully!"},cancel:{id:"app.components.PostComponents.OfficialFeedback.cancel",defaultMessage:"Cancel"},official:{id:"app.components.PostComponents.OfficialFeedback.official",defaultMessage:"Official"},showMoreActions:{id:"app.components.PostComponents.OfficialFeedback.showMoreActions",defaultMessage:"Show more actions"},postedOn:{id:"app.components.PostComponents.OfficialFeedback.postedOn",defaultMessage:"Posted on {date}"},lastEdition:{id:"app.components.PostComponents.OfficialFeedback.lastEdition",defaultMessage:"Last edited on {date}"},officialUpdateBody:{id:"app.components.PostComponents.OfficialFeedback.officialUpdateBody",defaultMessage:"Official update body text"},officialUpdateAuthor:{id:"app.components.PostComponents.OfficialFeedback.officialUpdateAuthor",defaultMessage:"Official update author name"}});t.default=n},dLOG:function(e,t,a){"use strict";a("SuFq"),a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("27RR"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("o0o1"));a("FZtP"),a("rB9j"),a("UxlC");var l=n(a("yXPU")),r=n(a("lwsE")),c=n(a("W8MJ")),s=n(a("PJYZ")),f=n(a("7W2i")),u=n(a("a1gu")),d=n(a("Nsbk")),p=n(a("lSNA")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=i?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(n,l,r):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),h=a("T89o"),b=a("iP56"),g=n(a("bo6E")),y=a("Loij"),v=n(a("Zc1O")),O=n(a("2fl8")),P=a("lcvl"),k=a("KLnl"),w=a("Rw3A"),M=n(a("Z+yM")),F=a("KuRP"),_=n(a("V7x7")),x=a("96Cm"),E=n(a("vOnD"));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(S=function(e){return e?a:t})(e)}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var T=E.default.div.withConfig({displayName:"OfficialFeedbackForm__Container",componentId:"sc-1hty0oh-0"})([""]),A=E.default.div.withConfig({displayName:"OfficialFeedbackForm__FormLabel",componentId:"sc-1hty0oh-1"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;"]),N=E.default.h2.withConfig({displayName:"OfficialFeedbackForm__AddOfficialUpdateTitle",componentId:"sc-1hty0oh-2"})(["color:",";font-size:","px;line-height:normal;font-weight:600;padding:0;margin:0;"],(function(e){return e.theme.colorText}),x.fontSizes.medium),D=(0,E.default)(b.LocaleSwitcher).withConfig({displayName:"OfficialFeedbackForm__StyledLocaleSwitcher",componentId:"sc-1hty0oh-3"})(["width:auto;flex:1;"]),R=(0,E.default)(g.default).withConfig({displayName:"OfficialFeedbackForm__StyledMentionsTextArea",componentId:"sc-1hty0oh-4"})(["margin-bottom:12px;"]),B=(0,E.default)(b.Input).withConfig({displayName:"OfficialFeedbackForm__StyledInput",componentId:"sc-1hty0oh-5"})(["margin-bottom:12px;"]),L=(0,E.default)(v.default).withConfig({displayName:"OfficialFeedbackForm__StyledError",componentId:"sc-1hty0oh-6"})(["margin-bottom:12px;"]),q=E.default.div.withConfig({displayName:"OfficialFeedbackForm__SuccessMessage",componentId:"sc-1hty0oh-7"})(["font-size:","px;color:",";font-weight:400;line-height:normal;margin-left:14px;"],x.fontSizes.base,x.colors.clGreenSuccess),z=E.default.div.withConfig({displayName:"OfficialFeedbackForm__ButtonContainer",componentId:"sc-1hty0oh-8"})(["display:flex;"]),W=(0,E.default)(O.default).withConfig({displayName:"OfficialFeedbackForm__SubmitButton",componentId:"sc-1hty0oh-9"})([""]),U=(0,E.default)(O.default).withConfig({displayName:"OfficialFeedbackForm__CancelButton",componentId:"sc-1hty0oh-10"})(["margin-left:10px;"]),V=function(e){(0,f.default)(a,e);var t=j(a);function a(e){var n;return(0,r.default)(this,a),n=t.call(this,e),(0,p.default)((0,s.default)(n),"getEmptyFormValues",(function(){var e={bodyMultiloc:{},authorMultiloc:{}};return n.props.tenantLocales.forEach((function(t){e.bodyMultiloc[t]="",e.authorMultiloc[t]=""})),e})),(0,p.default)((0,s.default)(n),"getPreviouslySavedFormValues",(function(){var e=n.props.feedback,t={authorMultiloc:e.attributes.author_multiloc,bodyMultiloc:{}};return(0,h.forOwn)(e.attributes.body_multiloc,(function(e,a){t.bodyMultiloc[a]=(e||"").replace(/<span\sclass="cl-mention-user"[\S\s]*?data-user-id="([\S\s]*?)"[\S\s]*?data-user-slug="([\S\s]*?)"[\S\s]*?>@([\S\s]*?)<\/span>/gi,"@[$3]($2)")})),t})),(0,p.default)((0,s.default)(n),"handleOnLocaleChange",(function(e){n.setState({selectedLocale:e})})),(0,p.default)((0,s.default)(n),"handleBodyOnChange",(function(e,t){t&&n.setState((function(a){return{error:!1,success:!1,formValues:I(I({},a.formValues),{},{bodyMultiloc:I(I({},a.formValues.bodyMultiloc),{},(0,p.default)({},t,e))})}}))})),(0,p.default)((0,s.default)(n),"handleAuthorOnChange",(function(e,t){t&&n.setState((function(a){return{error:!1,success:!1,formValues:I(I({},a.formValues),{},{authorMultiloc:I(I({},a.formValues.authorMultiloc),{},(0,p.default)({},t,e))})}}))})),(0,p.default)((0,s.default)(n),"validate",(function(){var e=n.props.tenantLocales,t=n.state.formValues,a=!1;return e.forEach((function(e){(0,h.isEmpty)(t.authorMultiloc[e])||(0,h.isEmpty)(t.bodyMultiloc[e])||(a=!0)})),e.forEach((function(e){(!(0,h.isEmpty)(t.authorMultiloc[e])&&(0,h.isEmpty)(t.bodyMultiloc[e])||(0,h.isEmpty)(t.authorMultiloc[e])&&!(0,h.isEmpty)(t.bodyMultiloc[e]))&&(a=!1)})),a})),(0,p.default)((0,s.default)(n),"handleOnSubmit",function(){var e=(0,l.default)(i.default.mark((function e(t){var a,o,l,r,c,s,f,u,d,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,o=a.postId,l=a.postType,r=a.formType,c=a.feedback,s=a.onClose,f=n.state,u=f.formValues,d=f.processing,t.preventDefault(),d||!n.validate()){e.next=27;break}if(n.setState({processing:!0,error:!1,success:!1}),p={author_multiloc:u.authorMultiloc,body_multiloc:{}},(0,h.forOwn)(u.bodyMultiloc,(function(e,t){p.body_multiloc[t]=(e||"").replace(/@\[(.*?)\]\((.*?)\)/gi,"@$2")})),e.prev=7,"new"!==r||!o||"idea"!==l){e.next=12;break}return e.next=11,(0,P.addOfficialFeedbackToIdea)(o,p);case 11:(0,F.trackEventByName)(_.default.officialFeedbackGiven,{location:(0,k.isPage)("admin",location.pathname)?"Admin/idea manager":"Citizen/idea page"});case 12:if("new"!==r||!o||"initiative"!==l){e.next=16;break}return e.next=15,(0,P.addOfficialFeedbackToInitiative)(o,p);case 15:(0,F.trackEventByName)(_.default.officialFeedbackGiven,{location:(0,k.isPage)("admin",location.pathname)?"Admin/initiative manager":"Citizen/initiative page"});case 16:if("edit"!==r||(0,k.isNilOrError)(c)||!s){e.next=20;break}return e.next=19,(0,P.updateOfficialFeedback)(c.id,p);case 19:s();case 20:n.setState({formValues:n.getEmptyFormValues(),processing:!1,success:!0}),setTimeout((function(){return n.setState({success:!1})}),6e3),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),n.setState({processing:!1,error:!0,success:!1});case 27:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(t){return e.apply(this,arguments)}}()),n.state={selectedLocale:null,formValues:{authorMultiloc:{},bodyMultiloc:{}},processing:!1,error:!1,success:!1},n}return(0,c.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.locale,a=e.formType;this.setState({selectedLocale:t,formValues:"new"===a?this.getEmptyFormValues():this.getPreviouslySavedFormValues()})}},{key:"render",value:function(){var e,t,a=this.props,n=a.formType,o=a.onClose,i=a.className,l=a.tenantLocales,r=a.intl.formatMessage,c=this.state,s=c.selectedLocale,f=c.formValues,u=c.processing,d=c.error,p=c.success,h=d?r(M.default.updateButtonError):null,b=p?r(M.default.updateMessageSuccess):null;return s?m.default.createElement(T,{className:i||""},m.default.createElement(y.Section,{id:"official-feedback-form"},m.default.createElement(A,null,"new"===n&&m.default.createElement(N,null,m.default.createElement(w.FormattedMessage,M.default.addOfficalUpdate)),m.default.createElement(D,{locales:l,selectedLocale:s,onSelectedLocaleChange:this.handleOnLocaleChange,values:f})),m.default.createElement(R,{name:"official-feedback-form-mentions-textarea",locale:s,ariaLabel:r(M.default.officialUpdateBody),value:(null===(e=f.bodyMultiloc)||void 0===e?void 0:e[s])||"",onChange:this.handleBodyOnChange,placeholder:r(M.default.textAreaPlaceholder),rows:8,padding:"12px",fontSize:"".concat(x.fontSizes.base,"px"),background:"#fff"}),m.default.createElement(B,{type:"text",locale:s,value:(null===(t=f.authorMultiloc)||void 0===t?void 0:t[s])||"",onChange:this.handleAuthorOnChange,placeholder:r(M.default.officialNamePlaceholder),ariaLabel:r(M.default.officialUpdateAuthor)})),m.default.createElement(L,{text:h,marginTop:"0px"}),m.default.createElement(z,null,m.default.createElement(W,{className:"e2e-official-feedback-form-submit-button",bgColor:"edit"===n?x.colors.adminTextColor:x.colors.clRed,icon:"pen",textColor:"white",fullWidth:"new"===n,onClick:this.handleOnSubmit,disabled:!this.validate(),processing:u},"edit"===n?m.default.createElement(w.FormattedMessage,M.default.updateButtonSaveEditForm):m.default.createElement(w.FormattedMessage,M.default.publishButtonText)),b&&m.default.createElement(q,null,b),o&&m.default.createElement(U,{buttonStyle:"secondary",onClick:o,textColor:"edit"===n?x.colors.adminTextColor:x.colors.clRed},m.default.createElement(w.FormattedMessage,M.default.cancel)))):null}}]),a}(m.PureComponent),H=(0,w.injectIntl)(V);t.default=H},lcvl:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.officialFeedbackStream=function(e){return c.default.get({apiEndpoint:"".concat(r.API_PATH,"/official_feedback/").concat(e)})},t.updateOfficialFeedback=function(e,t){return c.default.update("".concat(r.API_PATH,"/official_feedback/").concat(e),e,{official_feedback:t})},t.officialFeedbacksForIdeaStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return c.default.get(f({apiEndpoint:"".concat(r.API_PATH,"/ideas/").concat(e,"/official_feedback")},t))},t.addOfficialFeedbackToIdea=function(e,t){return u.apply(this,arguments)},t.deleteOfficialFeedbackFromIdea=function(e){return d.apply(this,arguments)},t.officialFeedbacksForInitiativeStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return c.default.get(f({apiEndpoint:"".concat(r.API_PATH,"/initiatives/").concat(e,"/official_feedback")},t))},t.addOfficialFeedbackToInitiative=function(e,t){return p.apply(this,arguments)},t.deleteOfficialFeedbackFromInitiative=function(e){return m.apply(this,arguments)};var o=n(a("o0o1")),i=n(a("yXPU")),l=n(a("lSNA"));a("ma9I");var r=a("p0gT"),c=n(a("1Kqg"));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(){return(u=(0,i.default)(o.default.mark((function e(t,a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.add("".concat(r.API_PATH,"/ideas/").concat(t,"/official_feedback"),{official_feedback:a});case 2:return n=e.sent,e.next=5,c.default.fetchAllWith({apiEndpoint:["".concat(r.API_PATH,"/stats/ideas_count")]});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,i.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.delete("".concat(r.API_PATH,"/official_feedback/").concat(t),t);case 2:return a=e.sent,e.next=5,c.default.fetchAllWith({apiEndpoint:["".concat(r.API_PATH,"/ideas/").concat(t,"/official_feedback"),"".concat(r.API_PATH,"/stats/ideas_count")]});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,i.default)(o.default.mark((function e(t,a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.add("".concat(r.API_PATH,"/initiatives/").concat(t,"/official_feedback"),{official_feedback:a});case 2:return n=e.sent,e.next=5,c.default.fetchAllWith({apiEndpoint:["".concat(r.API_PATH,"/stats/initiatives_count")]});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,i.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.delete("".concat(r.API_PATH,"/official_feedback/").concat(t),t);case 2:return a=e.sent,e.next=5,c.default.fetchAllWith({apiEndpoint:["".concat(r.API_PATH,"/initiatives/").concat(t,"/official_feedback"),"".concat(r.API_PATH,"/stats/initiatives_count")]});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},mjsl:function(e,t,a){"use strict";a("TeQF"),a("SuFq"),a("tkto"),a("pNMO"),a("5DmW"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("FZtP");var o=n(a("lwsE")),i=n(a("W8MJ")),l=n(a("PJYZ")),r=n(a("7W2i")),c=n(a("a1gu")),s=n(a("Nsbk")),f=n(a("lSNA")),u=n(a("q1tI")),d=a("T89o"),p=a("KLnl"),m=a("DtyJ"),h=a("ahDk"),b=a("lcvl");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){(0,r.default)(a,e);var t=v(a);function a(e){var n;(0,o.default)(this,a),n=t.call(this,e),(0,f.default)((0,l.default)(n),"initialState",void 0),(0,f.default)((0,l.default)(n),"postId$",void 0),(0,f.default)((0,l.default)(n),"pageSize$",void 0),(0,f.default)((0,l.default)(n),"subscriptions",void 0),(0,f.default)((0,l.default)(n),"loadMore",(function(){if(!n.state.loadingMore&&n.state.hasMore){var e=n.pageSize$.getValue();n.pageSize$.next(e+10)}}));var i={officialFeedbacksList:void 0,hasMore:!1,querying:!0,loadingMore:!1};return n.initialState=i,n.state=i,n.postId$=new m.BehaviorSubject(e.postId),n.pageSize$=new m.BehaviorSubject(1),n.subscriptions=[],n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.postType;this.subscriptions=[this.postId$.pipe((0,h.distinctUntilChanged)(),(0,h.filter)((function(e){return(0,d.isString)(e)})),(0,h.tap)((function(){return e.setState(e.initialState)})),(0,h.switchMap)((function(a){return e.pageSize$.pipe((0,h.distinctUntilChanged)(),(0,h.switchMap)((function(n){var o=1!==n,i={"page[number]":1,"page[size]":n};switch(e.setState({querying:!o,loadingMore:o}),t){case"idea":return(0,b.officialFeedbacksForIdeaStream)(a,{queryParameters:i}).observable;case"initiative":return(0,b.officialFeedbacksForInitiativeStream)(a,{queryParameters:i}).observable}})))}))).subscribe((function(t){var a=(0,d.get)(t,"links.self"),n=(0,d.get)(t,"links.last"),o=(0,d.isString)(a)&&(0,d.isString)(n)&&a!==n;e.setState({hasMore:o,officialFeedbacksList:(0,p.isNilOrError)(t)?null:t,querying:!1,loadingMore:!1})}))]}},{key:"componentDidUpdate",value:function(e){this.props.postId!==e.postId&&(this.pageSize$.next(1),this.postId$.next(this.props.postId))}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(y(y({},this.state),{},{onLoadMore:this.loadMore}))}}]),a}(u.default.Component);t.default=O}}]);
//# sourceMappingURL=3.b8d0cc5c802948368f2d.chunk.js.map