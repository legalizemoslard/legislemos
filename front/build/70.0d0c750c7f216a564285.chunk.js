(window.webpackJsonp=window.webpackJsonp||[]).push([[70,188],{"+wgy":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("ITo9")),r=n(a("NHb+")),l=function(e){var t=e.className,a=e.url,n=e.twitterMessage,l=e.whatsAppMessage,d=e.emailSubject,u=e.emailBody,s=e.utmParams,c=e.buttonComponent;return o.default.createElement(i.default,{className:t,buttonComponent:c,dropdownContent:o.default.createElement(r.default,{url:a,twitterMessage:n,whatsAppMessage:l,emailSubject:d,emailBody:u,utmParams:s})})};t.default=l},"/92W":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=a("Rw3A"),r=n(a("cRzy")),l=n(a("vOnD")),d=a("96Cm"),u=l.default.div.withConfig({displayName:"LoadingComments__Container",componentId:"sc-19iey05-0"})(["width:100%;display:flex;align-items:center;justify-content:center;"]),s=l.default.div.withConfig({displayName:"LoadingComments__LoadingMessage",componentId:"sc-19iey05-1"})(["color:",";font-size:","px;font-weight:400;"],d.colors.label,d.fontSizes.medium);t.default=function(e){return o.default.createElement(u,{className:e.className},o.default.createElement(s,null,o.default.createElement(i.FormattedMessage,r.default.loadingComments)))}},"/R6m":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("pVnL"));a("yWo2");var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),l=a("KLnl"),d=n(a("jWBj")),u=n(a("x3zm")),s=n(a("uN1B")),c=n(a("dcoO")),f=n(a("3A/8")),p=a("JRPe"),m=a("Rw3A"),g=a("iH/W"),h=n(a("vOnD")),v=a("96Cm"),b=a("ufqH");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}var w=h.default.div.withConfig({displayName:"VotingDisabled__Container",componentId:"qrl9tc-0"})(["width:100%;color:",";font-size:","px;font-weight:300;line-height:20px;> span{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;hyphens:auto;}"],v.colors.label,v.fontSizes.small),M=(0,h.default)(d.default).withConfig({displayName:"VotingDisabled__StyledLink",componentId:"qrl9tc-1"})(["color:",";text-decoration:underline;&:hover{color:",";text-decoration:underline;}"],v.colors.clBlueDark,(0,b.darken)(.15,v.colors.clBlueDark)),I=h.default.button.withConfig({displayName:"VotingDisabled__StyledButton",componentId:"qrl9tc-2"})(["color:",";text-decoration:underline;transition:all 80ms ease-out;display:inline-block;margin:0;padding:0;cursor:pointer;&:hover{color:",";text-decoration:underline;}"],v.colors.clBlueDark,(0,b.darken)(.15,v.colors.clBlueDark)),E=(0,r.memo)((function(e){var t,a,n,o=e.projectId,d=e.votingDescriptor,h=(0,u.default)({projectId:o}),v=(0,s.default)(),b=function(e){e.stopPropagation()};if(!(0,l.isNilOrError)(h)){var y,E,S,_=(a=d.disabled_reason,n=d.future_enabled,"project_inactive"===a?n?c.default.votingPossibleLater:c.default.votingDisabledProjectInactive:"voting_disabled"===a&&n?c.default.votingPossibleLater:"voting_limited_max_reached"===a?c.default.votingDisabledMaxReached:"idea_not_in_current_phase"===a?n?c.default.votingDisabledFutureEnabled:c.default.votingDisabledPhaseOver:"not_permitted"===a?c.default.votingNotPermitted:v&&"not_verified"===a?c.default.votingNotVerified:c.default.votingNotEnabled),P=d.future_enabled?r.default.createElement(p.FormattedDate,{value:d.future_enabled,year:"numeric",month:"long",day:"numeric"}):null,j=(t=h.attributes.title_multiloc,r.default.createElement(M,{to:"/projects/".concat(h.attributes.slug),onClick:b},r.default.createElement(f.default,{value:t}))),O="continuous"===h.attributes.process_type?"project":"phase",x="project"===O?h.id:null===(y=h.relationships)||void 0===y||null===(E=y.current_phase)||void 0===E||null===(S=E.data)||void 0===S?void 0:S.id,C=r.default.createElement(I,{className:"e2e-verify-button",onClick:function(e,t){return function(a){a.stopPropagation(),a.preventDefault(),t&&e&&(0,g.openVerificationModal)({context:{action:"voting_idea",id:t,type:e}})}}(O,x),onMouseDown:function(e){e.preventDefault()}},r.default.createElement(m.FormattedMessage,c.default.linkToVerificationText));return r.default.createElement(w,{"data-testid":"votingDisabled_Container"},r.default.createElement(m.FormattedMessage,(0,i.default)({},_,{values:{enabledFromDate:P,projectName:j,verificationLink:C}})))}return null}));t.default=E},"/VeQ":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.statusId,a=(0,i.useState)(null),n=(0,o.default)(a,2),l=n[0],d=n[1];return(0,i.useEffect)((function(){var e=(0,r.ideaStatusStream)(t).observable.subscribe((function(e){d(e.data)}));return function(){return e.unsubscribe()}}),[t]),l};var o=n(a("J4zp")),i=a("q1tI"),r=a("X7fv")},"0Pyc":function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ma9I"),a("sMBO");var i,r,l,d=n(a("pVnL")),u=n(a("lwsE")),s=n(a("W8MJ")),c=n(a("PJYZ")),f=n(a("7W2i")),p=n(a("a1gu")),m=n(a("Nsbk")),g=n(a("lSNA")),h=n(a("VkAN")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=q(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),b=a("KLnl"),y=a("ifvJ"),w=a("DbO4"),M=n(a("T5Cy")),I=a("iP56"),E=n(a("yiTP")),S=n(a("yYlr")),_=n(a("YLV/")),P=n(a("OL75")),j=n(a("FSVo")),O=n(a("M7uY")),x=n(a("M8tl")),C=n(a("sL4G")),k=n(a("V3HD")),T=n(a("aJX8")),N=a("9FT3"),D=a("KuRP"),B=n(a("bPnU")),A=n(a("vOnD")),R=a("96Cm"),W=n(a("5hLL"));function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(q=function(e){return e?a:t})(e)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var F=A.default.div.withConfig({displayName:"SharingModalContent__Loading",componentId:"tkeccj-0"})(["width:100%;height:460px;display:flex;align-items:center;justify-content:center;"]),V=A.default.div.withConfig({displayName:"SharingModalContent__Container",componentId:"tkeccj-1"})(["width:100%;display:flex;flex-direction:column;align-items:center;"]),z=A.default.img.withConfig({displayName:"SharingModalContent__Rocket",componentId:"tkeccj-2"})(["width:40px;height:40px;",""],R.media.smallerThanMaxTablet(i||(i=(0,h.default)(["\n    width: 35px;\n    height: 35px;\n  "])))),U=A.default.h1.withConfig({displayName:"SharingModalContent__Title",componentId:"tkeccj-3"})(["flex-shrink:0;width:100%;color:",";font-size:","px;line-height:40px;font-weight:500;text-align:center;margin:0;margin-top:20px;margin-bottom:10px;padding:0;",""],(function(e){return e.theme.colorText}),R.fontSizes.xxxxl,R.media.smallerThanMaxTablet(r||(r=(0,h.default)(["\n    max-width: auto;\n    font-size: ","px;\n    line-height: 36px;\n  "])),R.fontSizes.xxxl)),J=A.default.p.withConfig({displayName:"SharingModalContent__Description",componentId:"tkeccj-4"})(["flex-shrink:0;width:100%;max-width:500px;color:",";font-size:","px;line-height:25px;font-weight:300;text-align:center;margin:0;margin-top:10px;margin-bottom:50px;padding:0;",""],(function(e){return e.theme.colorText}),R.fontSizes.large,R.media.smallerThanMaxTablet(l||(l=(0,h.default)(["\n    font-size: ","px;\n    line-height: 21px;\n  "])),R.fontSizes.base)),H=A.default.div.withConfig({displayName:"SharingModalContent__SharingWrapper",componentId:"tkeccj-5"})(["flex-shrink:0;width:100%;max-width:300px;display:flex;flex-direction:column;"]),K=function(e){(0,f.default)(a,e);var t=L(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,g.default)((0,c.default)(e),"getPostValues",(function(){var t=e.props,a=t.postType,n=t.idea,o=t.initiative,i=t.localize,r=t.locale,l=null,d=null;return"idea"!==a||(0,b.isNilOrError)(n)||(l=i(n.attributes.title_multiloc),d="".concat(location.origin,"/").concat(r,"/").concat(a,"s/").concat(n.attributes.slug)),"initiative"!==a||(0,b.isNilOrError)(o)||(l=i(o.attributes.title_multiloc),d="".concat(location.origin,"/").concat(r,"/").concat(a,"s/").concat(o.attributes.slug)),{postTitle:l,postUrl:d}})),(0,g.default)((0,c.default)(e),"getIdeaMessages",(function(){var t=e.props,a=t.project,n=t.phases,o=null,i=null,r=null;if(!(0,b.isNilOrError)(a)){var l=(0,w.getInputTerm)(a.attributes.process_type,a,n);o=(0,N.getInputTermMessage)(l,{idea:T.default.ideaEmailSharingSubjectText,option:T.default.optionEmailSharingSubject,project:T.default.projectEmailSharingSubject,question:T.default.questionEmailSharingSubject,issue:T.default.issueEmailSharingSubject,contribution:T.default.contributionEmailSharingSubject}),i=(0,N.getInputTermMessage)(l,{idea:T.default.ideaEmailSharingBody,option:T.default.optionEmailSharingBody,project:T.default.projectEmailSharingBody,question:T.default.questionEmailSharingModalContentBody,issue:T.default.issueEmailSharingBody,contribution:T.default.contributionEmailSharingBody}),r=(0,N.getInputTermMessage)(l,{idea:T.default.ideaWhatsAppMessage,option:T.default.optionWhatsAppMessage,project:T.default.projectWhatsAppMessage,question:T.default.questionWhatsAppMessage,issue:T.default.issueWhatsAppMessage,contribution:T.default.contributionWhatsAppMessage})}return{emailSharingSubject:o,emailSharingBody:i,whatsAppMessage:r}})),(0,g.default)((0,c.default)(e),"getInitiativeMessages",(function(){return{emailSharingSubject:T.default.initiativeEmailSharingSubject,emailSharingBody:T.default.initiativeEmailSharingBody,whatsAppMessage:T.default.whatsAppMessageProposal}})),(0,g.default)((0,c.default)(e),"getMessages",(function(){return"idea"===e.props.postType?e.getIdeaMessages():e.getInitiativeMessages()})),e}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.postId,a=e.postType;(0,D.trackEventByName)(B.default.sharingModalOpened.name,{postId:t,postType:a})}},{key:"render",value:function(){var e=this.props,t=e.postType,a=e.authUser,n=e.className,o=e.title,i=e.subtitle,r=this.props.intl.formatMessage,l=this.getPostValues(),d=l.postTitle,u=l.postUrl,s=this.getMessages(),c=s.emailSharingBody,f=s.emailSharingSubject,p=s.whatsAppMessage;return!(0,b.isNilOrError)(a)&&u&&c&&f&&p?v.default.createElement(V,{className:n},v.default.createElement(z,{src:W.default,alt:"rocket"}),v.default.createElement(U,{className:"e2e-".concat(t,"-social-sharing-modal-title")},o),v.default.createElement(J,null,i),v.default.createElement(H,null,v.default.createElement(M.default,{context:t,isInModal:!0,url:u,twitterMessage:r(T.default.twitterMessage,{postTitle:d}),whatsAppMessage:r(p,{postTitle:d}),emailSubject:r(f,{postTitle:d}),emailBody:r(c,{postTitle:d,postUrl:u}),utmParams:{source:"share_".concat(t),campaign:"".concat(t,"flow"),content:a.id}}))):v.default.createElement(F,null,v.default.createElement(I.Spinner,null))}}]),a}(v.PureComponent),Z=(0,C.default)((0,k.default)(K)),Y=(0,y.adopt)({locale:v.default.createElement(E.default,null),tenant:v.default.createElement(S.default,null),authUser:v.default.createElement(_.default,null),idea:function(e){var t=e.postId,a=e.postType,n=e.render;return v.default.createElement(P.default,{ideaId:t&&"idea"===a?t:null},n)},initiative:function(e){var t=e.postId,a=e.postType,n=e.render;return v.default.createElement(j.default,{id:t&&"initiative"===a?t:null},n)},project:function(e){var t=e.idea,a=e.render;return v.default.createElement(O.default,{projectId:(0,b.isNilOrError)(t)?null:t.relationships.project.data.id},a)},phases:function(e){var t=e.idea,a=e.render;return v.default.createElement(x.default,{projectId:(0,b.isNilOrError)(t)?null:t.relationships.project.data.id},a)}});t.default=function(e){return v.default.createElement(Y,e,(function(t){return v.default.createElement(Z,(0,d.default)({},e,t))}))}},"1Zvv":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("q1tI")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("vOnD")),l=a("iP56"),d=a("96Cm");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}var s=(0,r.keyframes)(["0%{transform:scale(1,0);opacity:0;}5%{transform:scale(1,0.17942745647835484);}10%{transform:scale(1,0.5453767165955569);}15%{transform:scale(1,0.894404964443162);}20%{transform:scale(1,1.1203760160160154);}25%{transform:scale(1,1.2051533263082377);}30%{transform:scale(1,1.1848074616294655);}35%{transform:scale(1,1.1134007773010595);}40%{transform:scale(1,1.037247338664745);}45%{transform:scale(1,0.9833121263387835);}50%{transform:scale(1,0.9591514931191875);opacity:1;}55%{transform:scale(1,0.9592070055589312);}60%{transform:scale(1,0.9725345308087797);}65%{transform:scale(1,0.9888015967917715);}70%{transform:scale(1,1.0013794350134355);}75%{transform:scale(1,1.0078326552211365);}80%{transform:scale(1,1.008821093113004);}85%{transform:scale(1,1.0064881982177143);}90%{transform:scale(1,1.0030929569279976);}95%{transform:scale(1,1.00022141474777);}100%{transform:scale(1,1);}"]),c=r.default.div.withConfig({displayName:"PopContainer__Container",componentId:"cx52ay-0"})(["background-color:#fff;position:relative;border-radius:",";border:solid 1px ",";margin-top:0px;padding:15px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff;animation:",";transform-origin:center center;"],(function(e){return e.theme.borderRadius}),d.colors.separation,(0,r.css)([""," 450ms linear"],s)),f=r.default.div.withConfig({displayName:"PopContainer__IconWrapper",componentId:"cx52ay-1"})(["width:42px;height:42px;display:flex;justify-content:center;align-items:center;border-radius:50%;background:#f0f0f0;margin-bottom:15px;"]),p=(0,r.default)(l.Icon).withConfig({displayName:"PopContainer__StyledIcon",componentId:"cx52ay-2"})(["height:20px;fill:#333;"]),m=function(e){var t=e.icon,a=e.children;return i.default.createElement(c,null,t&&i.default.createElement(f,null,i.default.createElement(p,{name:t})),a)};t.default=m},"4sB7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({remove:{id:"app.components.AssignBudgetControl.remove",defaultMessage:"Remove"},removeFromMyBasket:{id:"app.components.AssignBudgetControl.removeFromMyBasket",defaultMessage:"Remove from my basket"},add:{id:"app.components.AssignBudgetControl.add",defaultMessage:"Add"},addToMyBasket:{id:"app.components.AssignBudgetControl.addToMyBasket",defaultMessage:"Add to my basket"},budgetingNotPossible:{id:"app.components.VoteControl.budgetingNotPossible",defaultMessage:"Making changes to your budget is not possible at this time."},budgetingFutureEnabled:{id:"app.components.VoteControl.budgetingFutureEnabled",defaultMessage:"You can allocate your budget starting from {enabledFromDate}."},budgetingNotPermitted:{id:"app.components.VoteControl.budgetingNotPermitted",defaultMessage:"Participatory budgeting is only enabled for certain groups."},budgetingNotVerified:{id:"app.components.VoteControl.budgetingNotVerified",defaultMessage:"Please {verifyAccountLink} to continue."},verifyAccountLinkText:{id:"app.components.AssignBudgetControl.verifyAccountLinkText",defaultMessage:"verify your account"},a11y_price:{id:"app.components.AssignBudgetControl.a11y_price",defaultMessage:"Price: "},backToOverview:{id:"app.components.AssignBudgetControl.backToOverview",defaultMessage:"Back to overview"}});t.default=n},"5hLL":function(e,t,a){"use strict";a.r(t),t.default=a.p+"aaae759b408aa34fd8afbcefb716a1ab.png"},"5y+3":function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ideaFormSchemaStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(i.API_PATH,"/projects/").concat(e,"/custom_fields/schema");return r.default.get(d({apiEndpoint:a},t))};var o=n(a("lSNA"));a("ma9I");var i=a("p0gT"),r=n(a("1Kqg"));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"72sj":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=n(a("vOnD")),l=a("96Cm");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}var u=r.default.img.withConfig({displayName:"Image",componentId:"sc-3ry5gv-0"})(["width:100%;margin-bottom:25px;border-radius:",";border:1px solid ",";"],(function(e){return e.theme.borderRadius}),l.colors.separation),s=(0,i.memo)((function(e){var t=e.src,a=e.alt,n=e.id;return i.default.createElement(u,{src:t,alt:a,id:n})}));t.default=s},"9Y8i":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=a("KLnl"),l=n(a("/VeQ")),d=n(a("3A/8")),u=n(a("vOnD")),s=a("ufqH"),c=a("96Cm");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}var p=u.default.div.withConfig({displayName:"StatusBadge__Container",componentId:"sc-1cz6lfu-0"})(["color:",";font-size:","px;font-weight:600;text-transform:uppercase;text-align:center;line-height:normal;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;hyphens:auto;padding:5px 8px;display:inline-block;border-radius:",";border:1px solid ",";"],(function(e){return e.color}),c.fontSizes.xs,(function(e){return e.theme.borderRadius}),(function(e){var t=e.color;return(0,s.transparentize)(.7,t)})),m=(0,i.memo)((function(e){var t=e.statusId,a=e.id,n=e.className,o=(0,l.default)({statusId:t});if(!(0,r.isNilOrError)(o)){var u,s=(null==o||null===(u=o.attributes)||void 0===u?void 0:u.color)||"#bbb";return i.default.createElement(p,{id:a||"",className:n||"",color:s},i.default.createElement(d.default,{value:o.attributes.title_multiloc}))}return null}));t.default=m},AJij:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({postedBy:{id:"app.containers.IdeasShow.MetaInformation.postedBy",defaultMessage:"Posted by"},currentStatus:{id:"app.containers.IdeasShow.MetaInformation.currentStatus",defaultMessage:"Current status"},topics:{id:"app.containers.IdeasShow.MetaInformation.topics",defaultMessage:"Topics"},location:{id:"app.containers.IdeasShow.MetaInformation.location",defaultMessage:"Location"},attachments:{id:"app.containers.IdeasShow.MetaInformation.attachments",defaultMessage:"Attachments"},byUserOnDate:{id:"app.containers.IdeasShow.MetaInformation.byUserOnDate",defaultMessage:"{userName} on {date}"}});t.default=n},AM3C:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2B1R");var o=n(a("q1tI")),i=a("akep"),r=n(a("Uj4o")),l=n(a("38aM")),d=a("KLnl"),u=a("Rw3A"),s=n(a("AJij")),c=(0,u.injectIntl)((function(e){var t=e.ideaId,a=e.compact,n=e.className,u=e.intl.formatMessage,c=(0,l.default)({ideaId:t});if(!(0,d.isNilOrError)(c)){var f,p=(null===(f=c.relationships.topics)||void 0===f?void 0:f.data.map((function(e){return e.id})))||[];if(p.length>0)return o.default.createElement(i.Item,{className:n||"",compact:a},o.default.createElement(i.Header,null,u(s.default.topics)),o.default.createElement(r.default,{postType:"idea",topicIds:p}))}return null}));t.default=c},"CA+D":function(e,t,a){"use strict";a("SuFq");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("FZtP");var o=n(a("lwsE")),i=n(a("W8MJ")),r=n(a("PJYZ")),l=n(a("7W2i")),d=n(a("a1gu")),u=n(a("Nsbk")),s=n(a("lSNA")),c=n(a("q1tI")),f=a("DtyJ"),p=a("ahDk"),m=n(a("aTp4")),g=a("EP0W"),h=a("T89o");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var b=function(e){(0,l.default)(a,e);var t=v(a);function a(e){var n;return(0,o.default)(this,a),n=t.call(this,e),(0,s.default)((0,r.default)(n),"inputProps$",void 0),(0,s.default)((0,r.default)(n),"subscriptions",void 0),n.state={ideaImages:void 0},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.ideaId;this.inputProps$=new f.BehaviorSubject({ideaId:t}),this.subscriptions=[this.inputProps$.pipe((0,p.distinctUntilChanged)((function(e,t){return(0,m.default)(e,t)})),(0,p.switchMap)((function(e){var t=e.ideaId;return(0,h.isString)(t)?(0,g.ideaImagesStream)(t).observable:(0,f.of)(null)}))).subscribe((function(t){e.setState({ideaImages:t?t.data:null})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props.ideaId;this.inputProps$.next({ideaId:e})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.ideaImages)}}]),a}(c.default.Component);t.default=b},CmRk:function(e,t,a){"use strict";a("yq1k"),a("JTJg"),a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("o0o1"));a("ma9I"),a("2B1R"),a("TeQF"),a("FZtP"),a("oVuX");var r,l,d,u=n(a("pVnL")),s=n(a("J4zp")),c=n(a("yXPU")),f=n(a("lwsE")),p=n(a("W8MJ")),m=n(a("PJYZ")),g=n(a("7W2i")),h=n(a("a1gu")),v=n(a("Nsbk")),b=n(a("lSNA")),y=n(a("VkAN")),w=V(a("q1tI")),M=a("T89o"),I=a("DtyJ"),E=a("ahDk"),S=a("KLnl"),_=a("dtw8"),P=a("Rw3A"),j=n(a("dcoO")),O=a("P92B"),x=a("iP56"),C=a("x303"),k=a("ngE2"),T=a("lq1v"),N=a("uZm3"),D=a("MfpC"),B=a("+9pX"),A=a("q3BX"),R=a("iH/W"),W=V(a("vOnD")),q=a("96Cm"),L=a("ufqH");function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(F=function(e){return e?a:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,h.default)(this,a)}}var U=(0,W.keyframes)(["from{transform:scale3d(1,1,1);}40%{transform:scale3d(1.25,1.25,1.25);}to{transform:scale3d(1,1,1);}"]),J=W.default.div.withConfig({displayName:"VoteControl__Container",componentId:"h9cg2l-0"})(["display:flex;align-items:center;"," *{user-select:none;}"],(0,q.isRtl)(r||(r=(0,y.default)(["\n    flex-direction: row-reverse;\n  "])))),H=W.default.div.withConfig({displayName:"VoteControl__VoteIconContainer",componentId:"h9cg2l-1"})(["display:flex;align-items:center;justify-content:center;margin-right:1px;border-radius:50%;transition:all 60ms ease-out;background-color:white;"," "," ",""],(function(e){return"border"===e.styleType&&(0,W.css)(["border:solid 1px ",";"],(0,L.lighten)(.2,q.colors.label))}),(function(e){var t=e.styleType,a=e.votingEnabled;return"shadow"===t&&a&&(0,W.css)(["box-shadow:",";&:hover{box-shadow:",";}"],q.defaultStyles.boxShadow,q.defaultStyles.boxShadowHoverSmall)}),(function(e){var t=e.votingEnabled,a=e.size;if(t){if("1"===a)return(0,W.css)(["width:35px;height:35px;"]);if("2"===a)return(0,W.css)(["width:45px;height:45px;"]);if("3"===a)return(0,W.css)(["width:48px;height:48px;"]);if("4"===a)return(0,W.css)(["width:50px;height:50px;"])}return(0,W.css)(["margin-left:5px;"])})),K=(0,W.default)(x.Icon).withConfig({displayName:"VoteControl__VoteIcon",componentId:"h9cg2l-2"})(["width:19px;height:19px;fill:",";transition:all 100ms ease-out;"," "," "," ",""],q.colors.label,(function(e){return"1"===e.size?(0,W.css)(["width:17px;height:17px;"]):(0,W.css)([""])}),(function(e){return"2"===e.size?(0,W.css)(["width:18px;height:18px;"]):(0,W.css)([""])}),(function(e){return"3"===e.size?(0,W.css)(["width:20px;height:20px;"]):(0,W.css)([""])}),(function(e){return"4"===e.size?(0,W.css)(["width:21px;height:21px;"]):(0,W.css)([""])})),Z=W.default.div.withConfig({displayName:"VoteControl__VoteCount",componentId:"h9cg2l-3"})(["color:",";font-size:","px;font-weight:400;display:flex;align-items:center;justify-content:flex-start;margin-left:5px;transition:all 100ms ease-out;&:not(.enabled){margin-left:3px;}"],q.colors.label,q.fontSizes.base),Y=W.default.button.withConfig({displayName:"VoteControl__Vote",componentId:"h9cg2l-4"})(["display:flex;align-items:center;padding:0;margin:0;cursor:pointer;border:none;"," &.voteClick ","{animation:",";}&:not(.enabled){","{width:auto;border:none;background:none;}","{margin-right:4px;}}"],(0,q.isRtl)(l||(l=(0,y.default)(["\n    flex-direction: row-reverse;\n  "]))),H,(0,W.css)([""," 350ms"],U),H,K),$=(0,W.default)(Y).withConfig({displayName:"VoteControl__Upvote",componentId:"h9cg2l-5"})(["margin-right:8px;&:not(.enabled){","{","}}","{","}","{margin-bottom:4px;",";}","{min-width:20px;margin-right:5px;","}&:hover.enabled{","{","}","{","}","{","}}"],Z,(0,q.isRtl)(d||(d=(0,y.default)(["\n        margin-right: 5px;\n      "]))),H,(function(e){return e.active&&"border-color: ".concat(q.colors.clGreen,"; background: ").concat(q.colors.clGreen,";")}),K,(function(e){var t=e.active,a=e.enabled;return t&&a?(0,W.css)(["fill:#fff;"]):t&&!a?(0,W.css)(["fill:",";"],q.colors.clGreen):void 0}),Z,(function(e){return e.active&&"color: ".concat(q.colors.clGreen,";")}),H,(function(e){return!e.active&&"border: 1px solid ".concat(q.colors.clGreen,";")}),K,(function(e){return!e.active&&"fill: ".concat(q.colors.clGreen,";")}),Z,(function(e){return!e.active&&"color: ".concat(q.colors.clGreen,";")})),G=(0,W.default)(Y).withConfig({displayName:"VoteControl__Downvote",componentId:"h9cg2l-6"})(["","{","}","{margin-top:4px;",";}","{","}&:hover.enabled{","{","}","{","}","{","}}"],H,(function(e){return e.active&&"border-color: ".concat(q.colors.clRed,"; background: ").concat(q.colors.clRed,";")}),K,(function(e){var t=e.active,a=e.enabled;return t&&a?(0,W.css)(["fill:#fff;"]):t&&!a?(0,W.css)(["fill:",";"],q.colors.clRed):void 0}),Z,(function(e){return e.active&&"color: ".concat(q.colors.clRed,";")}),H,(function(e){return!e.active&&"border: 1px solid ".concat(q.colors.clRed,";")}),K,(function(e){return!e.active&&"fill: ".concat(q.colors.clRed,";")}),Z,(function(e){return!e.active&&"color: ".concat(q.colors.clRed,";")})),Q=function(e){(0,g.default)(n,e);var t,a=z(n);function n(e){var t;return(0,f.default)(this,n),t=a.call(this,e),(0,b.default)((0,m.default)(t),"voting$",void 0),(0,b.default)((0,m.default)(t),"id$",void 0),(0,b.default)((0,m.default)(t),"subscriptions",void 0),(0,b.default)((0,m.default)(t),"upvoteElement",void 0),(0,b.default)((0,m.default)(t),"downvoteElement",void 0),(0,b.default)((0,m.default)(t),"votingAnimationDone",(function(){t.setState({votingAnimation:null})})),(0,b.default)((0,m.default)(t),"onClickUpvote",(function(e){e.preventDefault(),e.stopPropagation(),t.vote("up")})),(0,b.default)((0,m.default)(t),"onClickDownvote",(function(e){e.preventDefault(),e.stopPropagation(),t.vote("down")})),(0,b.default)((0,m.default)(t),"vote",function(){var e=(0,c.default)(i.default.mark((function e(a){var n,o,r,l,d,u,s,c,f,p,m,g,h,v,b,y,w,M,I,E;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,o=n.authUser,r=n.myVoteId,l=n.myVoteMode,d=n.voting,u=n.idea,s=n.participationContext,c=n.participationContextId,f=n.participationContextType,p=t.props,m=p.ideaId,g=p.disabledVoteClick,h=null==u?void 0:u.data.attributes.action_descriptor.voting_idea.enabled,v=null==u?void 0:u.data.attributes.action_descriptor.voting_idea.cancelling_enabled,b=null==u?void 0:u.data.attributes.action_descriptor.voting_idea.disabled_reason,y=!(0,S.isNilOrError)(o),w=!(!l||a!==l),M=!(0,S.isNilOrError)(o)&&o.data.attributes.verified,d){e.next=42;break}if((0,S.isNilOrError)(o)||!(h||v&&w)){e.next=41;break}if(e.prev=10,t.voting$.next(a),E="limited"===(null==s||null===(I=s.attributes)||void 0===I?void 0:I.voting_method),!r||!l||l===a){e.next=19;break}return t.setState((function(e){return{upvotesCount:"up"===a?e.upvotesCount+1:e.upvotesCount-1,downvotesCount:"down"===a?e.downvotesCount+1:e.downvotesCount-1,myVoteMode:a}})),e.next=17,(0,T.deleteVote)(m,r,E);case 17:return e.next=19,(0,T.addVote)(m,{user_id:o.data.id,mode:a},E);case 19:if(!r||!l||l!==a){e.next=23;break}return t.setState((function(e){return{upvotesCount:"up"===a?e.upvotesCount-1:e.upvotesCount,downvotesCount:"down"===a?e.downvotesCount-1:e.downvotesCount,myVoteMode:null}})),e.next=23,(0,T.deleteVote)(m,r,E);case 23:if(l){e.next=27;break}return t.setState((function(e){return{upvotesCount:"up"===a?e.upvotesCount+1:e.upvotesCount,downvotesCount:"down"===a?e.downvotesCount+1:e.downvotesCount,myVoteMode:a}})),e.next=27,(0,T.addVote)(m,{user_id:o.data.id,mode:a},E);case 27:return e.next=29,(0,k.ideaByIdStream)(m).fetch();case 29:return t.voting$.next(null),e.abrupt("return","success");case 33:return e.prev=33,e.t0=e.catch(10),t.voting$.next(null),e.next=38,(0,k.ideaByIdStream)(m).fetch();case 38:throw"error";case 39:e.next=42;break;case 41:y&&!M&&"not_verified"===b?(0,R.openVerificationModal)():y||!h&&"not_verified"!==b&&"not_signed_in"!==b&&"not_permitted"!==b?b&&(null==g||g(b)):(0,A.openSignUpInModal)({verification:"not_verified"===b,verificationContext:"not_verified"===b&&c&&f?{action:"voting_idea",id:c,type:f}:void 0,action:function(){return t.vote(a)}});case 42:return e.abrupt("return");case 43:case"end":return e.stop()}}),e,null,[[10,33]])})));return function(t){return e.apply(this,arguments)}}()),(0,b.default)((0,m.default)(t),"setContainerRef",(function(e){var a,n;null===(a=t.props)||void 0===a||null===(n=a.setRef)||void 0===n||n.call(a,e)})),(0,b.default)((0,m.default)(t),"setUpvoteRef",(function(e){t.upvoteElement=e})),(0,b.default)((0,m.default)(t),"setDownvoteRef",(function(e){t.downvoteElement=e})),(0,b.default)((0,m.default)(t),"removeFocus",(function(e){e.preventDefault()})),t.state={showVoteControl:!1,authUser:null,upvotesCount:0,downvotesCount:0,voting:null,votingAnimation:null,myVoteId:void 0,myVoteMode:void 0,idea:null,participationContext:null,participationContextId:null,participationContextType:null,loaded:!1},t.voting$=new I.BehaviorSubject(null),t.id$=new I.BehaviorSubject(null),t.subscriptions=[],t.upvoteElement=null,t.downvoteElement=null,t}return(0,p.default)(n,[{key:"componentDidMount",value:function(){var e,t,a=this,n=(0,C.authUserStream)().observable,o=this.voting$.pipe((0,E.distinctUntilChanged)()),i=this.id$.pipe((0,E.filter)((function(e){return(0,M.isString)(e)})),(0,E.distinctUntilChanged)());this.id$.next(this.props.ideaId),null===(e=this.upvoteElement)||void 0===e||e.addEventListener("animationend",this.votingAnimationDone),null===(t=this.downvoteElement)||void 0===t||t.addEventListener("animationend",this.votingAnimationDone);var r=i.pipe((0,E.switchMap)((function(e){var t=(0,k.ideaByIdStream)(e).observable;return(0,I.combineLatest)(t,o)})),(0,E.filter)((function(e){var t=(0,s.default)(e,2);t[0];return null===t[1]})),(0,E.map)((function(e){var t=(0,s.default)(e,2),a=t[0];t[1];return a}))),l=(0,I.combineLatest)(n,r).pipe((0,E.switchMap)((function(e){var t=(0,s.default)(e,2),a=t[0],n=t[1];if(a&&n&&n.data.relationships.user_vote&&null!==n.data.relationships.user_vote.data){var i=n.data.relationships.user_vote.data.id,r=(0,T.voteStream)(i).observable;return(0,I.combineLatest)(r,o).pipe((0,E.filter)((function(e){var t=(0,s.default)(e,2);t[0];return null===t[1]})),(0,E.map)((function(e){var t=(0,s.default)(e,2),a=t[0];t[1];return a})))}return(0,I.of)(null)})));this.subscriptions=[o.subscribe((function(e){a.setState((function(t){return{voting:e,votingAnimation:null!==e&&null===t.voting?e:t.votingAnimation}}))})),r.pipe((0,E.switchMap)((function(e){var t=(0,I.of)(null),a=(0,I.of)(null),o=!(0,M.isEmpty)((0,M.get)(e.data.relationships.phases,"data",null));return!o&&e.data.relationships.project.data&&(t=(0,N.projectByIdStream)(e.data.relationships.project.data.id).observable),o&&e.data.relationships.phases.data.length>0&&(a=(0,I.combineLatest)(e.data.relationships.phases.data.map((function(e){return(0,D.phaseStream)(e.id).observable})))),(0,I.combineLatest)(t,a,n).pipe((0,E.map)((function(t){var a=(0,s.default)(t,3),n=a[0],o=a[1],i=a[2];return{idea:e,project:n,phases:o,authUser:i}})))}))).subscribe((function(e){var t,n,o,i,r=e.idea,l=e.project,d=e.phases,u=e.authUser,s=!(0,S.isNilOrError)(u),c=r.data.attributes.upvotes_count,f=r.data.attributes.downvotes_count,p=r.data.attributes.action_descriptor.voting_idea.enabled,m=r.data.attributes.action_descriptor.voting_idea.cancelling_enabled,g=r.data.attributes.action_descriptor.voting_idea.disabled_reason,h=r.data.attributes.action_descriptor.voting_idea.future_enabled,v="continuous"===(null==l?void 0:l.data.attributes.process_type),b=null==r||null===(t=r.data)||void 0===t||null===(n=t.relationships)||void 0===n||null===(o=n.phases)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((function(e){return e.id})),y=null==d?void 0:d.filter((function(e){return(0,M.includes)(b,e.data.id)})).map((function(e){return e.data})),w=y?(0,D.getLatestRelevantPhase)(y):null,I=v?"project":"phase",E=v?(null==l?void 0:l.data.id)||null:(null==w?void 0:w.id)||null,_=v?(null==l?void 0:l.data)||null:w,P=!p&&"not_verified"===g&&s,j=!("budgeting"===(null==_?void 0:_.attributes.participation_method)||!(p||!p&&("not_signed_in"===g||"not_verified"===g&&!s)||m||h||c>0||f>0||P||!P&&"not_permitted"===g));a.setState({idea:r,participationContext:_,participationContextId:E,participationContextType:I,showVoteControl:j,upvotesCount:c,downvotesCount:f,authUser:u,loaded:!0})})),l.subscribe((function(e){a.setState({myVoteId:e?e.data.id:null,myVoteMode:e?e.data.attributes.mode:null})}))]}},{key:"componentDidUpdate",value:(t=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.id$.next(this.props.ideaId);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.upvoteElement)||void 0===e||e.removeEventListener("animationend",this.votingAnimationDone),null===(t=this.downvoteElement)||void 0===t||t.removeEventListener("animationend",this.votingAnimationDone),this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){var e=this.props,t=e.size,a=e.className,n=e.intl.formatMessage,o=e.ariaHidden,i=e.styleType,r=this.state,l=r.idea,d=r.authUser,s=r.showVoteControl,c=r.myVoteMode,f=r.votingAnimation,p=r.upvotesCount,m=r.downvotesCount,g=null==l?void 0:l.data.attributes.action_descriptor.voting_idea,h=null==g?void 0:g.enabled,v=null==g?void 0:g.cancelling_enabled,b=null==g?void 0:g.disabled_reason,y=!(0,S.isNilOrError)(d),M=!(0,S.isNilOrError)(d)&&d.data.attributes.verified,I="up"!==c&&h||"up"===c&&v||!M&&"not_verified"===b||!y&&"not_signed_in"===b,E="down"!==c&&h||"down"===c&&v||!M&&"not_verified"===b||!y&&"not_signed_in"===b,_="boolean"!=typeof(null==g?void 0:g.downvoting_enabled)||(null==g?void 0:g.downvoting_enabled);if(!s)return null;var x=w.default.createElement(w.default.Fragment,null,w.default.createElement(B.ScreenReaderOnly,null,w.default.createElement(P.FormattedMessage,(0,u.default)({},j.default.a11y_upvotesDownvotes,{values:{upvotesCount:p,downvotesCount:m}}))),w.default.createElement(O.LiveMessage,{message:n(j.default.a11y_upvotesDownvotes,{upvotesCount:p,downvotesCount:m}),"aria-live":"polite"}));return w.default.createElement(w.default.Fragment,null,x,w.default.createElement(J,{className:[a,"e2e-vote-controls",null===c?"neutral":c].filter((function(e){return e})).join(" "),"aria-hidden":o,ref:this.setContainerRef},w.default.createElement($,{active:"up"===c,enabled:I,onMouseDown:this.removeFocus,onClick:this.onClickUpvote,ref:this.setUpvoteRef,className:["e2e-ideacard-upvote-button","up"===f?"voteClick":"upvote",I?"enabled":"disabled","up"===c?"active":""].join(" "),tabIndex:o?-1:0},w.default.createElement(H,{styleType:i,size:t,votingEnabled:I},w.default.createElement(K,{name:"upvote",size:t,enabled:I}),w.default.createElement(B.ScreenReaderOnly,null,w.default.createElement(P.FormattedMessage,j.default.upvote))),w.default.createElement(Z,{"aria-hidden":!0,className:[h?"enabled":""].join(" ")},p)),_&&w.default.createElement(G,{active:"down"===c,enabled:E,onMouseDown:this.removeFocus,onClick:this.onClickDownvote,ref:this.setDownvoteRef,className:["e2e-ideacard-downvote-button","down"===f?"voteClick":"downvote",E?"enabled":"disabled"].join(" "),tabIndex:o?-1:0},w.default.createElement(H,{styleType:i,size:t,votingEnabled:E},w.default.createElement(K,{name:"downvote",size:t,enabled:E}),w.default.createElement(B.ScreenReaderOnly,null,w.default.createElement(P.FormattedMessage,j.default.downvote))),w.default.createElement(Z,{"aria-hidden":!0,className:h?"enabled":""},m))))}}]),n}(w.PureComponent);(0,b.default)(Q,"defaultProps",{ariaHidden:!1});var X=(0,_.withRouter)((0,P.injectIntl)(Q));t.default=X},D51O:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=a("akep"),r=n(a("/VeQ")),l=n(a("9Y8i")),d=n(a("AJij")),u=a("Rw3A"),s=a("KLnl"),c=function(e){var t=e.statusId,a=e.compact,n=e.className,c=(0,r.default)({statusId:t});return(0,s.isNilOrError)(c)?null:o.default.createElement(i.Item,{className:n||"",compact:a},o.default.createElement(i.Header,null,o.default.createElement(u.FormattedMessage,d.default.currentStatus)),o.default.createElement(l.default,{id:"e2e-idea-status-badge",statusId:t}))};t.default=c},EP0W:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ideaImageStream=function(e,t){var a="".concat(l.API_PATH,"/ideas/").concat(e,"/images/").concat(t);return d.default.get({apiEndpoint:a})},t.ideaImagesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(l.API_PATH,"/ideas/").concat(e,"/images");return d.default.get(c({apiEndpoint:a},t))},t.deleteIdeaImage=function(e,t){return d.default.delete("".concat(l.API_PATH,"/ideas/").concat(e,"/images/").concat(t),t)},t.addIdeaImage=function(e,t){return f.apply(this,arguments)};var o=n(a("o0o1")),i=n(a("yXPU")),r=n(a("lSNA"));a("ma9I");var l=a("p0gT"),d=n(a("1Kqg")),u=a("ngE2");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(){return(f=(0,i.default)(o.default.mark((function e(t,a){var n,i,r,s,c=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:null,i="".concat(l.API_PATH,"/ideas/").concat(t,"/images"),r={image:{ordering:n,image:a}},e.next=5,d.default.add(i,r);case 5:return s=e.sent,e.next=8,(0,u.ideaByIdStream)(t).fetch();case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},FSVo:function(e,t,a){"use strict";a("SuFq");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("FZtP");var o=n(a("lwsE")),i=n(a("W8MJ")),r=n(a("PJYZ")),l=n(a("7W2i")),d=n(a("a1gu")),u=n(a("Nsbk")),s=n(a("lSNA")),c=n(a("q1tI")),f=a("T89o"),p=a("KLnl"),m=a("DtyJ"),g=a("ahDk"),h=n(a("aTp4")),v=a("fM+I");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var y=function(e){(0,l.default)(a,e);var t=b(a);function a(e){var n;return(0,o.default)(this,a),n=t.call(this,e),(0,s.default)((0,r.default)(n),"inputProps$",void 0),(0,s.default)((0,r.default)(n),"subscriptions",void 0),n.state={initiative:void 0},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.id,n=t.slug,o=t.resetOnChange;this.inputProps$=new m.BehaviorSubject({id:a,slug:n}),this.subscriptions=[this.inputProps$.pipe((0,g.distinctUntilChanged)((function(e,t){return(0,h.default)(e,t)})),(0,g.tap)((function(){return o&&e.setState({initiative:void 0})})),(0,g.switchMap)((function(e){var t=e.id,a=e.slug;return(0,f.isString)(t)?(0,v.initiativeByIdStream)(t).observable:(0,f.isString)(a)?(0,v.initiativeBySlugStream)(a).observable:(0,m.of)(null)}))).subscribe((function(t){e.setState({initiative:(0,p.isNilOrError)(t)?t:t.data})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.id,a=e.slug;this.inputProps$.next({id:t,slug:a})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.initiative)}}]),a}(c.default.Component);t.default=y,(0,s.default)(y,"defaultProps",{resetOnChange:!0})},GpY6:function(e,t,a){"use strict";a("yq1k"),a("JTJg"),a("SuFq"),a("ENF9"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IdeasShow=void 0;var i=n(a("pVnL")),r=n(a("lwsE")),l=n(a("W8MJ")),d=n(a("PJYZ")),u=n(a("7W2i")),s=n(a("a1gu")),c=n(a("Nsbk")),f=n(a("lSNA")),p=n(a("VkAN"));a("4mDm"),a("07d7"),a("5s+n"),a("PKPk"),a("3bBZ"),a("2B1R"),a("TeQF");var m,g,h,v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=fe(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),b=a("T89o"),y=a("KLnl"),w=a("ifvJ"),M=a("DbO4"),I=a("MfpC"),E=a("KuRP"),S=n(a("oHY+")),_=a("dtw8"),P=n(a("IEAL")),j=n(a("YOT+")),O=n(a("zJWc")),x=n(a("K5Dz")),C=n(a("Mh2d")),k=n(a("72sj")),T=n(a("/Eug")),N=n(a("1hFV")),D=n(a("kemx")),B=n(a("0Pyc")),A=n(a("UjkJ")),R=n(a("NSTN")),W=a("iP56"),q=n(a("xksB")),L=n(a("/92W")),F=n(a("w6e4")),V=n(a("L2JE")),z=n(a("JBro")),U=n(a("zFVC")),J=n(a("yiTP")),H=n(a("CA+D")),K=n(a("M7uY")),Z=n(a("OL75")),Y=n(a("M8tl")),$=n(a("17nk")),G=n(a("mjsl")),Q=n(a("oRVF")),X=n(a("vztX")),ee=n(a("YLV/")),te=n(a("zIn5")),ae=a("Rw3A"),ne=n(a("sL4G")),oe=n(a("UQTo")),ie=n(a("V3HD")),re=a("9FT3"),le=n(a("pQ8y")),de=n(a("vOnD")),ue=a("96Cm"),se=a("qGqp"),ce=n(a("Yjdl"));function fe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(fe=function(e){return e?a:t})(e)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var me=(0,v.lazy)((function(){return Promise.all([a.e(6),a.e(167)]).then(a.t.bind(null,"LtqC",7))})),ge=de.default.main.withConfig({displayName:"IdeasShow__Container",componentId:"sc-10cplty-0"})(["width:100%;max-width:","px;position:relative;display:flex;flex-direction:column;align-items:stretch;margin-left:auto;margin-right:auto;background:#fff;&.loading{flex:1;justify-content:center;}&.loaded{opacity:0;&.content-enter{opacity:0;&.content-enter-active{opacity:1;transition:opacity ","ms "," ","ms;}}&.content-enter-done{opacity:1;}}"],se.pageContentMaxWidth,250,"cubic-bezier(0.19, 1, 0.22, 1)",150),he=de.default.div.withConfig({displayName:"IdeasShow__Content",componentId:"sc-10cplty-1"})(["display:flex;"]),ve=de.default.div.withConfig({displayName:"IdeasShow__LeftColumn",componentId:"sc-10cplty-2"})(["flex:1 1 100%;"]),be=(0,de.default)(z.default).withConfig({displayName:"IdeasShow__StyledRightColumnDesktop",componentId:"sc-10cplty-3"})(["margin-left:","px;"],se.columnsGapDesktop),ye=de.default.div.withConfig({displayName:"IdeasShow__IdeaHeader",componentId:"sc-10cplty-4"})(["display:flex;align-items:center;justify-content:space-between;margin-top:-5px;margin-bottom:25px;"," ",""],(0,ue.isRtl)(m||(m=(0,p.default)(["\n    flex-direction: row-reverse;\n  "]))),ue.media.smallerThanMaxTablet(g||(g=(0,p.default)(["\n    margin-top: 0px;\n  "])))),we=(0,de.default)(R.default).withConfig({displayName:"IdeasShow__MobileIdeaMoreActions",componentId:"sc-10cplty-5"})(["margin-left:30px;"]),Me=de.default.div.withConfig({displayName:"IdeasShow__TopBar",componentId:"sc-10cplty-6"})(["display:flex;justify-content:space-between;align-items:center;",""],(0,ue.isRtl)(h||(h=(0,p.default)(["\n    flex-direction: row-reverse;\n  "])))),Ie=(0,de.default)(q.default).withConfig({displayName:"IdeasShow__StyledGoBackButton",componentId:"sc-10cplty-7"})(["margin-bottom:40px;"]),Ee=de.default.h2.withConfig({displayName:"IdeasShow__BodySectionTitle",componentId:"sc-10cplty-8"})(["font-size:","px;font-weight:500;line-height:28px;padding:0;margin:0;margin-bottom:15px;"],(function(e){return e.theme.fontSizes.large})),Se=(0,de.default)(C.default).withConfig({displayName:"IdeasShow__StyledBody",componentId:"sc-10cplty-9"})(["margin-bottom:40px;"]),_e=(0,de.default)(x.default).withConfig({displayName:"IdeasShow__StyledIdeaProposedBudget",componentId:"sc-10cplty-10"})(["margin-bottom:20px;"]),Pe=(0,de.default)(F.default).withConfig({displayName:"IdeasShow__MobileMetaInformation",componentId:"sc-10cplty-11"})(["margin-bottom:30px;"]),je=(0,de.default)(D.default).withConfig({displayName:"IdeasShow__StyledAssignBudgetControl",componentId:"sc-10cplty-12"})(["margin-top:30px;margin-bottom:30px;"]),Oe=(0,de.default)(P.default).withConfig({displayName:"IdeasShow__MobileIdeaSharingButton",componentId:"sc-10cplty-13"})([""]),xe=(0,de.default)(T.default).withConfig({displayName:"IdeasShow__StyledOfficialFeedback",componentId:"sc-10cplty-14"})(["margin-top:80px;margin-bottom:80px;"]),Ce=de.default.div.withConfig({displayName:"IdeasShow__Comments",componentId:"sc-10cplty-15"})(["margin-bottom:100px;"]),ke=function(e){(0,u.default)(a,e);var t=pe(a);function a(e){var n;return(0,r.default)(this,a),n=t.call(this,e),(0,f.default)((0,d.default)(n),"setLoaded",(function(){var e=n.state.loaded,t=n.props,a=t.idea,o=t.ideaImages,i=t.project,r=t.officialFeedbacks;e||(0,y.isNilOrError)(a)||(0,b.isUndefined)(o)||(0,y.isNilOrError)(i)||(0,b.isUndefined)(r.officialFeedbacksList)||n.setState({loaded:!0})})),(0,f.default)((0,d.default)(n),"closeIdeaSocialSharingModal",(function(){n.setState({ideaIdForSocialSharing:null})})),(0,f.default)((0,d.default)(n),"onTranslateIdea",(function(){n.setState((function(e){return!0===e.translateButtonClicked?(0,E.trackEvent)(S.default.clickGoBackToOriginalIdeaCopyButton):!1===e.translateButtonClicked&&(0,E.trackEvent)(S.default.clickTranslateIdeaButton),{translateButtonClicked:!e.translateButtonClicked}}))})),(0,f.default)((0,d.default)(n),"handleContainerRef",(function(e){var t,a;null===(t=(a=n.props).setRef)||void 0===t||t.call(a,e)})),(0,f.default)((0,d.default)(n),"getLatestRelevantPhaseId",(function(){var e=n.props,t=e.idea,a=e.phases;if(!(0,y.isNilOrError)(t)&&!(0,y.isNilOrError)(a)){var o,i,r,l,d=null==t||null===(o=t.relationships)||void 0===o||null===(i=o.phases)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.map((function(e){return e.id})),u=a.filter((function(e){return(0,b.includes)(d,e.id)}));return null===(l=(0,I.getLatestRelevantPhase)(u))||void 0===l?void 0:l.id}})),n.state={loaded:!1,spamModalVisible:!1,ideaIdForSocialSharing:null,translateButtonClicked:!1},n}return(0,l.default)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=null===(e=this.props.location.query)||void 0===e?void 0:e.new_idea_id;this.setLoaded(),(0,b.isString)(a)&&(setTimeout((function(){t.setState({ideaIdForSocialSharing:a})}),1500),window.history.replaceState(null,"",window.location.pathname))}},{key:"componentDidUpdate",value:function(){this.setLoaded()}},{key:"render",value:function(){var e=this.props,t=e.locale,a=e.idea,n=e.localize,o=e.ideaImages,i=e.windowSize,r=e.className,l=e.postOfficialFeedbackPermission,d=e.projectId,u=e.ideaCustomFieldsSchemas,s=e.insideModal,c=e.project,f=e.phases,p=e.compact,m=this.state,g=m.loaded,h=m.ideaIdForSocialSharing,b=m.translateButtonClicked,w=this.props.intl.formatMessage,I=null;if(!(0,y.isNilOrError)(c)&&!(0,y.isNilOrError)(a)&&!(0,y.isNilOrError)(t)&&!(0,y.isNilOrError)(u)&&g){var E,S,_,P,x,C,T,D,q,F,z,J=(null===(E=a.relationships)||void 0===E||null===(S=E.author)||void 0===S||null===(_=S.data)||void 0===_?void 0:_.id)||null,H=n(a.attributes.title_multiloc),K=null==a||null===(P=a.relationships)||void 0===P||null===(x=P.idea_status)||void 0===x||null===(C=x.data)||void 0===C?void 0:C.id,Z=(null==o||null===(T=o[0])||void 0===T||null===(D=T.attributes)||void 0===D||null===(q=D.versions)||void 0===q?void 0:q.large)||null,Y=a.id,$=null===(F=a.attributes)||void 0===F?void 0:F.proposed_budget,G=n(null==a||null===(z=a.attributes)||void 0===z?void 0:z.body_multiloc),Q=!0===p||!!i&&i<=ue.viewportWidths.largeTablet,X=(0,U.default)("proposed_budget",u,t);I=v.default.createElement(v.default.Fragment,null,v.default.createElement(j.default,{ideaId:Y}),!Q&&v.default.createElement(Me,null,v.default.createElement(Ie,{projectId:d,insideModal:s}),v.default.createElement(R.default,{idea:a,projectId:d})),v.default.createElement(he,{id:"e2e-idea-show-page-content"},v.default.createElement(ve,null,v.default.createElement(ye,null,v.default.createElement(O.default,{postType:"idea",postId:Y,title:H,locale:t,translateButtonClicked:b}),Q&&v.default.createElement(we,{idea:a,projectId:d})),Z&&v.default.createElement(k.default,{src:Z,alt:"",id:"e2e-idea-image"}),v.default.createElement(ce.default,{id:"app.containers.IdeasShow.left",idea:a,locale:t,onClick:this.onTranslateIdea,translateButtonClicked:b}),X&&$&&v.default.createElement(v.default.Fragment,null,v.default.createElement(Ee,null,v.default.createElement(ae.FormattedMessage,oe.default.proposedBudgetTitle)),v.default.createElement(_e,{proposedBudget:$}),v.default.createElement(Ee,null,v.default.createElement(ae.FormattedMessage,oe.default.bodyTitle))),v.default.createElement(Se,{postType:"idea",postId:Y,locale:t,body:G,translateButtonClicked:b}),Q&&v.default.createElement(je,{view:"ideaPage",ideaId:Y,projectId:d}),Q&&v.default.createElement(Pe,{ideaId:Y,projectId:d,statusId:K,authorId:J,compact:Q}),Q&&v.default.createElement(Oe,{ideaId:Y,buttonComponent:v.default.createElement(V.default,null)}),v.default.createElement(xe,{postId:Y,postType:"idea",permissionToPost:l}),v.default.createElement(Ce,null,v.default.createElement(v.Suspense,{fallback:v.default.createElement(L.default,null)},v.default.createElement(me,{postId:Y,postType:"idea"})))),!Q&&d&&v.default.createElement(be,{ideaId:Y,projectId:d,statusId:K,authorId:J,insideModal:s})))}if(!(0,y.isNilOrError)(c)){var ee=(0,M.getInputTerm)(c.attributes.process_type,c,f);return v.default.createElement(v.default.Fragment,null,!g&&v.default.createElement(ge,{className:"loading ".concat(r||"")},v.default.createElement(W.Spinner,null)),v.default.createElement(le.default,{classNames:"content",in:g,timeout:{enter:400,exit:0},enter:!0,exit:!1},v.default.createElement(ge,{id:"e2e-idea-show",className:"loaded ".concat(r||""),ref:this.handleContainerRef},I)),v.default.createElement(A.default,{name:"ideaflow_social_sharing"},v.default.createElement(N.default,{opened:!!h,close:this.closeIdeaSocialSharingModal,hasSkipButton:!0,skipText:v.default.createElement(ae.FormattedMessage,oe.default.skipSharing)},h&&v.default.createElement(B.default,{postType:"idea",postId:h,title:w((0,re.getInputTermMessage)(ee,{idea:oe.default.sharingModalTitle,option:oe.default.optionSharingModalTitle,project:oe.default.projectSharingModalTitle,question:oe.default.questionSharingModalTitle,issue:oe.default.issueSharingModalTitle,contribution:oe.default.contributionSharingModalTitle})),subtitle:w(oe.default.sharingModalSubtitle)}))))}return null}}]),a}(v.PureComponent);t.IdeasShow=ke;var Te=(0,ie.default)((0,ne.default)((0,_.withRouter)(ke))),Ne=(0,w.adopt)({locale:v.default.createElement(J.default,null),authUser:v.default.createElement(ee.default,null),windowSize:v.default.createElement($.default,null),idea:function(e){var t=e.ideaId,a=e.render;return v.default.createElement(Z.default,{ideaId:t},a)},ideaImages:function(e){var t=e.ideaId,a=e.render;return v.default.createElement(H.default,{ideaId:t},a)},project:function(e){var t=e.projectId,a=e.render;return v.default.createElement(K.default,{projectId:t},a)},phases:function(e){var t=e.projectId,a=e.render;return v.default.createElement(Y.default,{projectId:t},a)},officialFeedbacks:function(e){var t=e.ideaId,a=e.render;return v.default.createElement(G.default,{postId:t,postType:"idea"},a)},postOfficialFeedbackPermission:function(e){var t=e.project,a=e.render;return v.default.createElement(Q.default,{item:(0,y.isNilOrError)(t)?null:t,action:"moderate"},a)},ideaCustomFieldsSchemas:function(e){var t=e.projectId,a=e.render;return v.default.createElement(X.default,{projectId:t},a)},comments:function(e){var t=e.ideaId,a=e.render;return v.default.createElement(te.default,{postId:t,postType:"idea"},a)}});t.default=function(e){return v.default.createElement(Ne,e,(function(t){return v.default.createElement(Te,(0,i.default)({},e,t))}))}},IEAL:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("+wgy")),r=a("KLnl"),l=a("DbO4"),d=a("Rw3A"),u=n(a("UQTo")),s=a("9FT3"),c=n(a("38aM")),f=n(a("PagR")),p=n(a("uN1B")),m=n(a("x3zm")),g=n(a("dpb+")),h=(0,d.injectIntl)((function(e){var t=e.className,a=e.ideaId,n=e.buttonComponent,d=e.intl.formatMessage,h=(0,c.default)({ideaId:a}),v=(0,r.isNilOrError)(h)?null:h.relationships.project.data.id,b=(0,m.default)({projectId:v}),y=(0,g.default)(v),w=(0,p.default)(),M=(0,f.default)();if(!(0,r.isNilOrError)(h)&&!(0,r.isNilOrError)(b)){var I=location.href,E=M(h.attributes.title_multiloc),S=(0,l.getInputTerm)(b.attributes.process_type,b,y),_=(0,r.isNilOrError)(w)?{source:"share_idea",campaign:"share_content"}:{source:"share_idea",campaign:"share_content",content:w.id};return o.default.createElement(i.default,{className:t,url:I,whatsAppMessage:d((0,s.getInputTermMessage)(S,{idea:u.default.ideaWhatsAppMessage,option:u.default.optionWhatsAppMessage,project:u.default.projectWhatsAppMessage,question:u.default.questionWhatsAppMessage,issue:u.default.issueWhatsAppMessage,contribution:u.default.contributionWhatsAppMessage}),{postTitle:E}),twitterMessage:d((0,s.getInputTermMessage)(S,{idea:u.default.ideaTwitterMessage,option:u.default.optionTwitterMessage,project:u.default.projectTwitterMessage,question:u.default.questionTwitterMessage,issue:u.default.issueTwitterMessage,contribution:u.default.contributionTwitterMessage}),{postTitle:E}),emailSubject:d((0,s.getInputTermMessage)(S,{idea:u.default.ideaEmailSharingSubject,option:u.default.optionEmailSharingSubject,project:u.default.projectEmailSharingSubject,question:u.default.questionEmailSharingSubject,issue:u.default.issueEmailSharingSubject,contribution:u.default.contributionEmailSharingSubject}),{ideaTitle:E}),emailBody:d((0,s.getInputTermMessage)(S,{idea:u.default.ideaEmailSharingBody,option:u.default.optionEmailSharingBody,project:u.default.projectEmailSharingBody,question:u.default.questionEmailSharingBody,issue:u.default.issueEmailSharingBody,contribution:u.default.contributionEmailSharingBody}),{ideaUrl:I,ideaTitle:E}),utmParams:_,buttonComponent:n})}return null}));t.default=h},JBro:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("w6e4")),r=n(a("T8eC")),l=n(a("jxG7")),d=n(a("kemx")),u=n(a("vOnD")),s=a("qGqp"),c=a("96Cm"),f=u.default.div.withConfig({displayName:"RightColumnDesktop__Container",componentId:"teggtx-0"})(["flex:0 0 ","px;width:","px;position:sticky;top:",";align-self:flex-start;"],s.rightColumnWidthDesktop,s.rightColumnWidthDesktop,(function(e){return e.insideModal?"30px":"110px"})),p=u.default.div.withConfig({displayName:"RightColumnDesktop__InnerContainer",componentId:"teggtx-1"})(["display:flex;flex-direction:column;"]),m=u.default.div.withConfig({displayName:"RightColumnDesktop__Box",componentId:"teggtx-2"})(["padding:20px;border-radius:",";background:",";margin-bottom:30px;"],(function(e){return e.theme.borderRadius}),c.colors.backgroundLightGrey),g=(0,u.default)(r.default).withConfig({displayName:"RightColumnDesktop__StyledVoting",componentId:"teggtx-3"})(["padding-bottom:23px;margin-bottom:23px;"]),h=(0,u.default)(d.default).withConfig({displayName:"RightColumnDesktop__StyledAssignBudgetControl",componentId:"teggtx-4"})(["padding-bottom:23px;margin-bottom:23px;border-bottom:solid 1px #ccc;"]),v=(0,u.default)(i.default).withConfig({displayName:"RightColumnDesktop__StyledMetaInformation",componentId:"teggtx-5"})(["margin-bottom:40px;"]),b=function(e){var t=e.ideaId,a=e.projectId,n=e.statusId,i=e.authorId,r=e.insideModal,d=e.className;return o.default.createElement(f,{insideModal:r,className:d||""},o.default.createElement(p,null,o.default.createElement(m,null,o.default.createElement(g,{ideaId:t,projectId:a}),o.default.createElement(h,{view:"ideaPage",ideaId:t,projectId:a}),o.default.createElement(l.default,{ideaId:t})),o.default.createElement(v,{ideaId:t,projectId:a,statusId:n,authorId:i})))};t.default=b},K5Dz:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a("VkAN")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),d=n(a("6L1S")),u=n(a("vOnD")),s=a("96Cm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}var f=u.default.div.withConfig({displayName:"IdeaProposedBudget__Container",componentId:"yjz91s-0"})(["color:",";font-size:","px;line-height:29px;font-weight:300;",""],(function(e){return e.theme.colorText}),(function(e){return e.theme.fontSizes.large}),s.media.smallerThanMinTablet(i||(i=(0,r.default)(["\n    font-size: ","px;\n  "])),(function(e){return e.theme.fontSizes.base}))),p=(0,l.memo)((function(e){var t=e.className,a=e.proposedBudget;return l.default.createElement(f,{className:t},l.default.createElement(d.default,{value:a}))}));t.default=p},"L0i+":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=n(a("XgTl")),l=a("Rw3A"),d=n(a("UQTo"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}var s=(0,i.memo)((function(e){var t=e.className,a=e.intl.formatMessage,n=(0,i.useCallback)((function(){var e=document.getElementById("submit-comment-anchor"),t=document.getElementById("submit-comment");e&&t&&(t.focus({preventScroll:!0}),setTimeout((function(){e.scrollIntoView({behavior:"smooth",block:"start"})}),200))}),[]);return i.default.createElement(r.default,{onClick:n,className:t,buttonText:a(d.default.commentCTA),iconName:"comments"})})),c=(0,l.injectIntl)(s);t.default=c},L2JE:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("2fl8")),r=a("Rw3A"),l=n(a("UQTo")),d=(0,r.injectIntl)((function(e){var t=e.onClick,a=e.ariaExpanded,n=e.intl.formatMessage;return o.default.createElement(i.default,{buttonStyle:"white",borderColor:"#ccc",icon:"share-arrow",onClick:t,iconAriaHidden:!0,ariaExpanded:a},n(l.default.share))}));t.default=d},Lj9J:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR"),a("ENF9");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("pVnL")),r=n(a("lSNA")),l=n(a("J4zp")),d=n(a("VkAN"));a("4mDm"),a("07d7"),a("5s+n"),a("PKPk"),a("3bBZ");var u,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),c=a("KLnl"),f=a("iP56"),p=n(a("Yjdl")),m=n(a("I9mC")),g=a("04NW"),h=n(a("vOnD")),v=a("96Cm");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var w=(0,s.lazy)((function(){return Promise.all([a.e(12),a.e(115),a.e(97)]).then(a.t.bind(null,"YkGb",7))})),M=h.default.div.withConfig({displayName:"Map__Container",componentId:"sc-1a1d6xp-0"})(["",";background:transparent;border:solid 1px #ccc;"],v.defaultCardStyle),I=h.default.div.withConfig({displayName:"Map__MapWrapper",componentId:"sc-1a1d6xp-1"})(["flex:1;display:flex;position:relative;"]),E=h.default.div.withConfig({displayName:"Map__BoxContainer",componentId:"sc-1a1d6xp-2"})(["display:flex;flex-direction:column;align-items:stretch;position:absolute;top:0;z-index:1001;background:#fff;width:100%;height:80%;max-height:550px;"]),S=h.default.button.withConfig({displayName:"Map__CloseButton",componentId:"sc-1a1d6xp-3"})(["width:28px;height:28px;position:absolute;top:10px;right:10px;cursor:pointer;margin:0;padding:0;display:flex;justify-content:center;align-items:center;z-index:2;border-radius:50%;border:solid 1px transparent;background:#fff;transition:all 100ms ease-out;outline:none !important;&:hover{background:#ececec;}&.focus-visible{",";}",""],v.defaultOutline,v.media.smallerThanMinTablet(u||(u=(0,d.default)(["\n    top: 4px;\n    right: 4px;\n  "])))),_=(0,h.default)(f.Icon).withConfig({displayName:"Map__CloseIcon",componentId:"sc-1a1d6xp-4"})(["width:12px;height:12px;fill:#000;"]),P=(0,s.memo)((function(e){var t=e.projectId,a=e.centerLatLng,n=e.zoomLevel,o=e.mapHeight,d=e.points,u=e.noMarkerClustering,f=e.zoomControlPosition,h=e.layersControlPosition,v=e.boxContent,b=e.onInit,P=e.onBoxClose,j=e.className,O=e.hideLegend,x=(0,m.default)(),C=(0,s.useState)(null),k=(0,l.default)(C,2),T=k[0],N=k[1],D=(0,s.useMemo)((function(){return(0,g.getCenter)(a,x)}),[a,x]),B=(0,s.useMemo)((function(){return(0,g.getZoomLevel)(n,x)}),[n,x]),A=(0,s.useMemo)((function(){return(0,g.getTileProvider)(x)}),[x]),R=(0,s.useMemo)((function(){return(0,g.getTileOptions)()}),[A]),W=(0,s.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({points:d,noMarkerClustering:u,zoom:B,center:D,tileProvider:A,tileOptions:R,zoomControlPosition:f,layersControlPosition:h},T)}),[d,u,B,D,A,R,f,h,T]),q=(0,s.useCallback)((function(e){N(e)}),[]);return s.default.createElement(M,{className:j||""},s.default.createElement(I,null,!(0,c.isNilOrError)(v)&&s.default.createElement(E,null,s.default.createElement(S,{onClick:function(e){e.preventDefault(),null==P||P(e)}},s.default.createElement(_,{name:"close"})),v),s.default.createElement(s.Suspense,{fallback:!1},s.default.createElement(w,(0,i.default)({id:"mapid",className:"e2e-leafletmap",mapHeight:o,onInit:function(e){null==b||b(e)}},W))),s.default.createElement(p.default,{id:"app.components.Map.leafletConfig",projectId:t,onLeafletConfigChange:q,centerLatLng:a,zoomLevel:n,points:d})),!O&&s.default.createElement(p.default,{id:"app.components.Map.Legend",projectId:t}))}));t.default=P},MqdI:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("XgTl")),r=a("Rw3A"),l=n(a("UQTo")),d=(0,r.injectIntl)((function(e){var t=e.intl.formatMessage,a=e.onClick,n=e.ariaExpanded;return o.default.createElement(i.default,{iconName:"share-arrow",buttonText:t(l.default.share),onClick:a,ariaExpanded:n})}));t.default=d},N6Fc:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("yWo2");var i,r,l,d=n(a("J4zp")),u=n(a("VkAN")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),c=n(a("vOnD")),f=a("ufqH"),p=n(a("38aM")),m=a("KLnl"),g=a("T89o"),h=a("iP56"),v=n(a("1hFV")),b=n(a("Lj9J")),y=a("akep"),w=a("04NW"),M=a("Rw3A"),I=n(a("AJij")),E=a("96Cm");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(S=function(e){return e?a:t})(e)}var _=c.default.div.withConfig({displayName:"Location__Container",componentId:"sc-1hw9j5c-0"})(["display:flex;align-items:center;",""],(0,E.isRtl)(i||(i=(0,u.default)(["\n    flex-direction: row-reverse;\n  "])))),P=(0,c.default)(h.Icon).withConfig({displayName:"Location__StyledIcon",componentId:"sc-1hw9j5c-1"})(["flex:0 0 16px;width:16px;fill:",";margin-right:8px;",""],h.colors.label,(0,E.isRtl)(r||(r=(0,u.default)(["\n    margin-right: 0;\n    margin-left: 8px;\n  "])))),j=c.default.button.withConfig({displayName:"Location__OpenMapModalButton",componentId:"sc-1hw9j5c-2"})(["color:",";font-size:","px;line-height:22px;text-decoration:underline;text-align:left;margin:0;padding:0;border:none;appearance:none;cursor:pointer;&:hover{color:",";}"],h.colors.label,E.fontSizes.small,(0,f.darken)(.2,h.colors.label)),O=c.default.div.withConfig({displayName:"Location__Address",componentId:"sc-1hw9j5c-3"})(["width:calc(100% - 35px);overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;"]),x=c.default.div.withConfig({displayName:"Location__MapContainer",componentId:"sc-1hw9j5c-4"})(["padding:30px;",""],E.media.smallerThanMinTablet(l||(l=(0,u.default)(["\n    padding: 20px;\n  "])))),C=(0,s.memo)((function(e){var t,a,n,o=e.intl.formatMessage,i=e.projectId,r=e.ideaId,l=e.compact,u=e.className,c=(0,s.useState)(!1),f=(0,d.default)(c,2),h=f[0],M=f[1],E=(0,p.default)({ideaId:r}),S=!(0,m.isNilOrError)(E)&&(null===(t=E.attributes)||void 0===t?void 0:t.location_point_geojson)||null,C=(null==S||null===(a=S.coordinates)||void 0===a?void 0:a[1])||null,k=(null==S||null===(n=S.coordinates)||void 0===n?void 0:n[0])||null,T=(0,m.isNilOrError)(E)?null:(0,w.getAddressOrFallbackDMS)(E.attributes.location_description,E.attributes.location_point_geojson),N=(0,s.useMemo)((function(){return S?[S]:void 0}),[S]),D=(0,s.useMemo)((function(){if(!(0,g.isNil)(C)&&!(0,g.isNil)(k))return[C,k]}),[C,k]);return T&&N?s.default.createElement(y.Item,{className:u||"",compact:l},s.default.createElement(y.Header,null,o(I.default.location)),s.default.createElement(_,null,s.default.createElement(P,{name:"position",ariaHidden:!0}),s.default.createElement(j,{id:"e2e-map-popup",onClick:function(){M(!0)}},T)),s.default.createElement(v.default,{opened:h,close:function(){M(!1)},header:s.default.createElement(O,null,T),width:1150},s.default.createElement(x,null,s.default.createElement(b.default,{projectId:i,points:N,centerLatLng:D,zoomLevel:15})))):null})),k=(0,M.injectIntl)(C);t.default=k},"NHb+":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("sMBO");var o,i=n(a("VkAN")),r=n(a("q1tI")),l=n(a("Awes")),d=a("kb9m"),u=n(a("vOnD")),s=a("96Cm"),c=a("ufqH"),f=a("iP56"),p=n(a("54aW")),m=n(a("Vc6n")),g=n(a("aWpN")),h=n(a("8cOi")),v=n(a("ea/E")),b=a("KuRP"),y=u.default.div.withConfig({displayName:"SharingDropdownContent__Container",componentId:"sc-1vpdjs7-0"})(["display:flex;flex-direction:column;.sharingButton{display:flex;align-items:center;padding:10px 12px;border-radius:",";cursor:pointer;transition:all 100ms ease-out;text-align:left;color:",";font-size:","px;&:hover{background-color:",";}&.messenger{","}}"],(function(e){return e.theme.borderRadius}),s.colors.label,s.fontSizes.base,(0,c.darken)(.06,"white"),s.media.biggerThanMaxTablet(o||(o=(0,i.default)(["\n        display: none;\n      "])))),w=(0,u.default)(f.Icon).withConfig({displayName:"SharingDropdownContent__FacebookIcon",componentId:"sc-1vpdjs7-1"})(["width:22px;height:18px;margin-right:10px;fill:#3c5a99;"]),M=(0,u.default)(f.Icon).withConfig({displayName:"SharingDropdownContent__MessengerIcon",componentId:"sc-1vpdjs7-2"})(["width:22px;height:18px;margin-right:10px;fill:rgba(0,120,255,1);"]),I=(0,u.default)(f.Icon).withConfig({displayName:"SharingDropdownContent__WhatsAppIcon",componentId:"sc-1vpdjs7-3"})(["width:22px;height:22px;fill:#23b43a;margin-right:10px;"]),E=(0,u.default)(f.Icon).withConfig({displayName:"SharingDropdownContent__TwitterIcon",componentId:"sc-1vpdjs7-4"})(["width:22px;height:17px;fill:#1da1f2;margin-right:10px;"]),S=(0,u.default)(f.Icon).withConfig({displayName:"SharingDropdownContent__EmailIcon",componentId:"sc-1vpdjs7-5"})(["margin-right:10px;width:22px;height:17px;fill:",";"],s.colors.secondaryText),_=function(e){var t=e.id,a=e.url,n=e.className,o=e.utmParams,i=e.emailBody,u=e.emailSubject,s=e.twitterMessage,c=e.whatsAppMessage,f=function(e){return(0,d.getUrlWithUtm)(e,a,o)},_=function(e){return function(){(0,b.trackEventByName)(l.default.shareButtonClicked.name,{network:e})}},P=r.default.createElement(p.default,{url:f("facebook"),className:"sharingButton facebook",onClick:_("facebook")},r.default.createElement(w,{ariaHidden:!0,name:"facebook"}),r.default.createElement("span",{"aria-hidden":!0},"Facebook")),j=r.default.createElement(g.default,{className:"sharingButton messenger",onClick:_("messenger"),url:f("messenger")},r.default.createElement(M,{ariaHidden:!0,name:"messenger"}),r.default.createElement("span",{"aria-hidden":!0},"Messenger")),O=r.default.createElement(h.default,{className:"sharingButton whatsapp",onClick:_("whatsapp"),url:f("whatsapp"),whatsAppMessage:c},r.default.createElement(I,{ariaHidden:!0,name:"whatsapp"}),r.default.createElement("span",{"aria-hidden":!0},"WhatsApp")),x=r.default.createElement(m.default,{twitterMessage:s,url:f("twitter"),className:"sharingButton twitter",onClick:_("twitter")},r.default.createElement(E,{ariaHidden:!0,name:"twitter"}),r.default.createElement("span",{"aria-hidden":!0},"Twitter")),C=r.default.createElement(v.default,{className:"sharingButton email",onClick:_("email"),emailBody:i,emailSubject:u},r.default.createElement(S,{ariaHidden:!0,name:"email"}),r.default.createElement("span",{"aria-hidden":!0},"Email"));return r.default.createElement(y,{id:t||"",className:n||""},P,j,O,x,C)};t.default=_},NSTN:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),l=n(a("JUYq")),d=a("KLnl"),u=n(a("N4mL")),s=n(a("6yyz")),c=n(a("1hFV")),f=n(a("baeH")),p=n(a("uN1B")),m=n(a("x3zm")),g=a("Rw3A"),h=n(a("UQTo")),v=n(a("sL4G")),b=a("ngE2"),y=n(a("vOnD"));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}var M=y.default.div.withConfig({displayName:"IdeaMoreActions__Container",componentId:"ow1q2t-0"})([""]),I=y.default.div.withConfig({displayName:"IdeaMoreActions__MoreActionsMenuWrapper",componentId:"ow1q2t-1"})(["display:flex;align-items:center;"]),E=(0,r.memo)((function(e){var t=e.idea,a=e.className,n=e.projectId,o=e.intl.formatMessage,v=(0,r.useState)(!1),y=(0,i.default)(v,2),w=y[0],E=y[1],S=(0,p.default)(),_=(0,m.default)({projectId:n}),P=function(){E(!0)};if(!(0,d.isNilOrError)(S)&&!(0,d.isNilOrError)(t)&&!(0,d.isNilOrError)(_)){var j=t.id,O=_.attributes.process_type;return r.default.createElement(M,{className:a},r.default.createElement(I,null,r.default.createElement(u.default,{item:t,action:"edit",context:t},r.default.createElement(s.default,{ariaLabel:r.default.createElement(g.FormattedMessage,h.default.moreOptions),id:"e2e-idea-more-actions",actions:[{label:r.default.createElement(g.FormattedMessage,h.default.reportAsSpam),handler:P},{label:r.default.createElement(g.FormattedMessage,h.default.editPost),handler:function(){l.default.push("/ideas/edit/".concat(t.id))}},{label:r.default.createElement(g.FormattedMessage,h.default.deletePost),handler:function(e,t){return function(){var a={continuous:h.default.deleteInputConfirmation,timeline:h.default.deleteInputInTimelineConfirmation}[t];window.confirm(o(a))&&((0,b.deleteIdea)(e),l.default.goBack())}}(j,O)}]}),r.default.createElement(u.default.No,null,r.default.createElement(s.default,{id:"e2e-idea-more-actions",actions:[{label:r.default.createElement(g.FormattedMessage,h.default.reportAsSpam),handler:P}],ariaLabel:r.default.createElement(g.FormattedMessage,h.default.moreOptions)})))),r.default.createElement(c.default,{opened:w,close:function(){E(!1)},header:r.default.createElement(g.FormattedMessage,h.default.reportAsSpamModalTitle)},r.default.createElement(f.default,{resourceId:t.id,resourceType:"ideas"})))}return null})),S=(0,v.default)(E);t.default=S},OjWy:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("sMBO");var i,r=n(a("VkAN")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),d=n(a("vOnD")),u=a("ufqH"),s=a("iP56");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}var f=d.default.div.withConfig({displayName:"Attachment__Container",componentId:"sc-14m5gdd-0"})(["display:flex;align-items:center;"]),p=d.default.a.withConfig({displayName:"Attachment__FileDownloadLink",componentId:"sc-14m5gdd-1"})(["color:",";display:inline-block;margin-right:10px;hyphens:auto;text-decoration:underline;&:hover{color:",";text-decoration:underline;}",""],s.colors.label,(0,u.darken)(.2,s.colors.label),s.media.smallerThanMinTablet(i||(i=(0,r.default)(["\n    margin-right: 0;\n  "])))),m=(0,d.default)(s.Icon).withConfig({displayName:"Attachment__PaperclipIcon",componentId:"sc-14m5gdd-2"})(["width:12px;height:20px;fill:",";margin-right:10px;"],s.colors.label),g=(0,l.memo)((function(e){var t=e.className,a=e.file;return l.default.createElement(f,{className:t},l.default.createElement(m,{name:"paperclip",ariaHidden:!0}),l.default.createElement(p,{href:a.attributes.file.url,download:a.attributes.name,target:"_blank",rel:"noopener noreferrer"},a.attributes.name))}));t.default=g},OsxD:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,l=n(a("VkAN")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),u=n(a("JUYq")),s=a("KLnl"),c=n(a("38aM")),f=n(a("x3zm")),p=n(a("uN1B")),m=n(a("CmRk")),g=a("iP56"),h=n(a("IAnr")),v=a("iH/W"),b=a("Rw3A"),y=n(a("mWLo")),w=n(a("vOnD")),M=a("96Cm"),I=a("ufqH");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}var S=w.default.div.withConfig({displayName:"IdeaShowPageTopBar__Container",componentId:"sc-1mokc9a-0"})(["flex:0 0 ","px;height:","px;background-color:#fff;border-bottom:solid 1px ",";"],(function(e){return e.theme.mobileTopBarHeight}),(function(e){return e.theme.mobileTopBarHeight}),(0,I.lighten)(.3,M.colors.label)),_=w.default.div.withConfig({displayName:"IdeaShowPageTopBar__TopBarInner",componentId:"sc-1mokc9a-1"})(["height:100%;padding-left:15px;padding-right:15px;position:relative;display:flex;align-items:center;justify-content:space-between;",""],M.media.biggerThanMinTablet(i||(i=(0,l.default)(["\n    padding-left: 30px;\n    padding-right: 30px;\n  "])))),P=w.default.div.withConfig({displayName:"IdeaShowPageTopBar__Left",componentId:"sc-1mokc9a-2"})(["height:48px;align-items:center;display:flex;"]),j=w.default.div.withConfig({displayName:"IdeaShowPageTopBar__Right",componentId:"sc-1mokc9a-3"})([""]),O=(0,w.default)(g.Icon).withConfig({displayName:"IdeaShowPageTopBar__GoBackIcon",componentId:"sc-1mokc9a-4"})(["height:22px;fill:",";display:flex;align-items:center;justify-content:center;transition:fill 100ms ease-out;"],M.colors.label),x=w.default.button.withConfig({displayName:"IdeaShowPageTopBar__GoBackButton",componentId:"sc-1mokc9a-5"})(["width:45px;height:45px;display:flex;align-items:center;justify-content:center;padding:0;margin:0;margin-right:6px;margin-left:-2px;cursor:pointer;background:#fff;border-radius:50%;transition:all 100ms ease-out;border:solid 1px ",";&:hover{border-color:#000;","{fill:#000;}}"],(0,I.lighten)(.2,M.colors.label),O),C=w.default.div.withConfig({displayName:"IdeaShowPageTopBar__GoBackLabel",componentId:"sc-1mokc9a-6"})(["color:",";font-size:","px;font-weight:400;transition:fill 100ms ease-out;",""],M.colors.label,M.fontSizes.base,M.media.phone(r||(r=(0,l.default)(["\n    display: none;\n  "])))),k=(0,d.memo)((function(e){var t=e.ideaId,a=e.insideModal,n=e.goBackAction,o=e.className,i=(0,p.default)(),r=(0,c.default)({ideaId:t}),l=(0,f.default)({projectId:(0,s.isNilOrError)(r)?null:r.relationships.project.data.id}),g=(0,d.useCallback)((function(e){e.preventDefault(),n?null==n||n():a?h.default.emit("closeIdeaModal"):(0,s.isNilOrError)(l)?u.default.push("/"):u.default.push("/projects/".concat(l.attributes.slug))}),[a,l,n]),w=(0,d.useCallback)((function(e){if(!(0,s.isNilOrError)(i)&&!(0,s.isNilOrError)(l)&&"not_verified"===e){var t,a,n,o="continuous"===l.attributes.process_type?"project":"phase",r=(null===(t=l.relationships)||void 0===t||null===(a=t.current_phase)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.id)||l.id;r&&o&&(0,v.openVerificationModal)({context:{action:"voting_idea",id:r,type:o}})}}),[i,l]);return d.default.createElement(S,{className:o||""},d.default.createElement(_,null,d.default.createElement(P,null,d.default.createElement(x,{onClick:g},d.default.createElement(O,{ariaHidden:!0,name:"arrow-back"})),d.default.createElement(C,null,d.default.createElement(b.FormattedMessage,y.default.goBack))),d.default.createElement(j,null,d.default.createElement(m.default,{styleType:"border",size:"2",ideaId:t,disabledVoteClick:w}))))}));t.default=k},"PGV/":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.projectId,a=(0,i.useState)(void 0),n=(0,o.default)(a,2),d=n[0],u=n[1];return(0,i.useEffect)((function(){var e=(0,l.of)(null);t&&(e=(0,r.ideaFormSchemaStream)(t).observable);var a=e.subscribe((function(e){u(e)}));return function(){return a.unsubscribe()}}),[t]),d};var o=n(a("J4zp")),i=a("q1tI"),r=a("5y+3"),l=a("DtyJ")},"R+1c":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("pVnL")),r=n(a("VkAN"));a("yWo2");var l,d,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),s=a("KLnl"),c=n(a("Qs0S")),f=n(a("FrK0")),p=a("akep"),m=a("Rw3A"),g=a("JRPe"),h=n(a("AJij")),v=n(a("38aM")),b=n(a("vOnD")),y=a("96Cm");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}var M=b.default.div.withConfig({displayName:"PostedBy__UserWrapper",componentId:"sc-13oghdd-0"})(["display:flex;align-items:center;color:",";font-size:","px;margin-top:-4px;margin-bottom:-6px;",""],y.colors.label,y.fontSizes.small,(0,y.isRtl)(l||(l=(0,r.default)(["\n    flex-direction: row-reverse;\n  "])))),I=(0,b.default)(c.default).withConfig({displayName:"PostedBy__StyledAvatar",componentId:"sc-13oghdd-1"})(["margin-right:5px;margin-left:-4px;",""],(0,y.isRtl)(d||(d=(0,r.default)(["\n    margin-right: -4px;\n    margin-left: 5px;\n  "])))),E=(0,u.memo)((function(e){var t=e.authorId,a=e.ideaId,n=e.compact,o=e.className,r=e.intl.formatMessage,l=(0,v.default)({ideaId:a});if(!(0,s.isNilOrError)(l)){var d=l.attributes.published_at,c=u.default.createElement(f.default,{userId:t,isLinkToProfile:!0,underline:!0,color:y.colors.label,fontSize:y.fontSizes.small}),b=u.default.createElement(g.FormattedDate,{value:d,year:"numeric",month:"long",day:"numeric"});return u.default.createElement(p.Item,{className:"first ".concat(o||""),compact:n},u.default.createElement(p.Header,null,r(h.default.postedBy)),u.default.createElement(M,{className:"e2e-idea-author"},u.default.createElement(I,{userId:t,size:30,isLinkToProfile:!!t}),u.default.createElement(m.FormattedMessage,(0,i.default)({},h.default.byUserOnDate,{values:{userName:c,date:b}}))))}return null})),S=(0,m.injectIntl)(E);t.default=S},T8eC:function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("pVnL")),r=n(a("lwsE")),l=n(a("W8MJ")),d=n(a("PJYZ")),u=n(a("7W2i")),s=n(a("a1gu")),c=n(a("Nsbk")),f=n(a("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),m=n(a("vOnD")),g=a("ifvJ"),h=a("KLnl"),v=n(a("1Zvv")),b=n(a("CmRk")),y=n(a("/R6m")),w=n(a("OL75"));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(M=function(e){return e?a:t})(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var E=m.default.div.withConfig({displayName:"Voting__Container",componentId:"sc-1f8x4xn-0"})([""]),S=m.default.div.withConfig({displayName:"Voting__VoteControlWrapper",componentId:"sc-1f8x4xn-1"})(["&.error{display:none;}"]),_=function(e){(0,u.default)(a,e);var t=I(a);function a(e){var n;return(0,r.default)(this,a),n=t.call(this,e),(0,f.default)((0,d.default)(n),"disabledVoteClick",(function(){n.setState({error:"votingDisabled"})})),(0,f.default)((0,d.default)(n),"setVoteControlRef",(function(){n.setState({isContainerVisible:!0})})),n.state={error:null,isContainerVisible:!1},n}return(0,l.default)(a,[{key:"componentDidUpdate",value:function(e){this.props.ideaId!==e.ideaId&&this.setState({isContainerVisible:!1,error:null})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.ideaId,n=e.projectId,o=e.idea,i=this.state,r=i.isContainerVisible,l=i.error,d=(0,h.isNilOrError)(o)?null:o.attributes.action_descriptor.voting_idea;if(!a||!d)return null;var u=p.default.createElement(b.default,{styleType:"shadow",ideaId:a,disabledVoteClick:this.disabledVoteClick,setRef:this.setVoteControlRef,size:"4"});return r?p.default.createElement(E,{className:t||""},p.default.createElement(S,{className:l?"error":""},u),"votingDisabled"===l&&p.default.createElement(v.default,{icon:"lock-outlined"},p.default.createElement(y.default,{votingDescriptor:d,projectId:n}))):u}}]),a}(p.PureComponent),P=(0,g.adopt)({idea:function(e){var t=e.ideaId,a=e.render;return p.default.createElement(w.default,{ideaId:t},a)}});t.default=function(e){return p.default.createElement(P,e,(function(t){return p.default.createElement(_,(0,i.default)({},e,t))}))}},UQTo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({sharingModalTitle:{id:"app.containers.IdeasShow.sharingModalTitle",defaultMessage:"Thanks for submitting your idea!"},optionSharingModalTitle:{id:"app.containers.IdeasShow.optionSharingModalTitle",defaultMessage:"Your option has been successfully posted!"},projectSharingModalTitle:{id:"app.containers.IdeasShow.projectSharingModalTitle",defaultMessage:"Thanks for submitting your project!"},questionSharingModalTitle:{id:"app.containers.IdeasShow.questionSharingModalTitle",defaultMessage:"Your question has been successfully posted!"},issueSharingModalTitle:{id:"app.containers.IdeasShow.issueSharingModalTitle",defaultMessage:"Thanks for submitting your issue!"},contributionSharingModalTitle:{id:"app.containers.IdeasShow.contributionSharingModalTitle",defaultMessage:"Thanks for submitting your contribution!"},sharingModalSubtitle:{id:"app.containers.IdeasShow.sharingModalSubtitle",defaultMessage:"Reach more people and make your voice heard."},deletedUser:{id:"app.containers.IdeasShow.deletedUser",defaultMessage:"deleted user"},currentStatus:{id:"app.containers.IdeasShow.currentStatus",defaultMessage:"Current status"},moreOptions:{id:"app.components.IdeasShow.moreOptions",defaultMessage:"More options"},reportAsSpam:{id:"app.components.IdeasShow.reportAsSpam",defaultMessage:"Report as spam"},editPost:{id:"app.components.IdeasShow.editPost",defaultMessage:"Edit"},deletePost:{id:"app.components.IdeasShow.deletePost",defaultMessage:"Delete"},deleteInputConfirmation:{id:"app.components.IdeasShow.deleteInputConfirmation",defaultMessage:"Are you sure you want to delete this input? This action cannot be undone."},deleteInputInTimelineConfirmation:{id:"app.components.IdeasShow.deleteInputInTimelineConfirmation",defaultMessage:"Are you sure you want to delete this input? The input will be deleted from all project phases and cannot be recovered."},goBack:{id:"app.components.IdeasShow.goBack",defaultMessage:"Go back"},send:{id:"app.components.IdeasShow.send",defaultMessage:"Send"},skipSharing:{id:"app.components.IdeasShow.skipSharing",defaultMessage:"Skip it, I'll do it later"},reportAsSpamModalTitle:{id:"app.containers.IdeasShow.reportAsSpamModalTitle",defaultMessage:"Why do you want to report this as spam?"},byUserOnDate:{id:"app.components.IdeasShow.byUserOnDate",defaultMessage:"By {userName} on {date}"},createdTimeAgo:{id:"app.components.IdeasShow.createdTimeAgo",defaultMessage:"Created {timeAgo}"},or:{id:"app.components.IdeasShow.or",defaultMessage:"or"},proposedBudgetTitle:{id:"app.components.IdeasShow.proposedBudgetTitle",defaultMessage:"Proposed budget"},bodyTitle:{id:"app.components.IdeasShow.bodyTitle",defaultMessage:"Description"},ideaTwitterMessage:{id:"app.containers.IdeasShow.ideaTwitterMessage",defaultMessage:"Support this idea: {postTitle}"},optionTwitterMessage:{id:"app.containers.IdeasShow.optionTwitterMessage",defaultMessage:"Support this option: {postTitle}"},issueTwitterMessage:{id:"app.containers.IdeasShow.issueTwitterMessage",defaultMessage:"Support this issue: {postTitle}"},projectTwitterMessage:{id:"app.containers.IdeasShow.projectTwitterMessage",defaultMessage:"Support this project: {postTitle}"},questionTwitterMessage:{id:"app.containers.IdeasShow.questionTwitterMessage",defaultMessage:"Join the discussion: {postTitle}"},contributionTwitterMessage:{id:"app.containers.IdeasShow.contributionTwitterMessage",defaultMessage:"Support this contribution: {postTitle}"},ideaWhatsAppMessage:{id:"app.containers.IdeasShow.ideaWhatsAppMessage",defaultMessage:"Support this idea: {postTitle}"},optionWhatsAppMessage:{id:"app.containers.IdeasShow.optionWhatsAppMessage",defaultMessage:"Support this option: {postTitle}"},contributionWhatsAppMessage:{id:"app.containers.IdeasShow.contributionWhatsAppMessage",defaultMessage:"Support this contribution: {postTitle}"},projectWhatsAppMessage:{id:"app.containers.IdeasShow.projectWhatsAppMessage",defaultMessage:"Support this project: {postTitle}"},questionWhatsAppMessage:{id:"app.containers.IdeasShow.questionWhatsAppMessage",defaultMessage:"Join the discussion: {postTitle}"},issueWhatsAppMessage:{id:"app.containers.IdeasShow.ideasWhatsAppMessage",defaultMessage:"Support this issue: {postTitle}"},ideaEmailSharingSubject:{id:"app.containers.IdeasShow.ideaEmailSharingSubject",defaultMessage:"Support this idea: {ideaTitle}"},ideaEmailSharingBody:{id:"app.containers.IdeasShow.ideaEmailSharingBody",defaultMessage:"Support this idea '{ideaTitle}' at {ideaUrl}!"},optionEmailSharingSubject:{id:"app.containers.IdeasShow.optionEmailSharingSubject",defaultMessage:"Support this option: {ideaTitle}"},optionEmailSharingBody:{id:"app.containers.IdeasShow.optionEmailSharingBody",defaultMessage:"Support this option '{ideaTitle}' at {ideaUrl}!"},contributionEmailSharingSubject:{id:"app.containers.IdeasShow.contributionEmailSharingSubject",defaultMessage:"Support this contribution: {ideaTitle}"},contributionEmailSharingBody:{id:"app.containers.IdeasShow.contributionEmailSharingBody",defaultMessage:"Support this contribution '{ideaTitle}' at {ideaUrl}!"},questionEmailSharingSubject:{id:"app.containers.IdeasShow.questionEmailSharingSubject",defaultMessage:"Join the discussion: {ideaTitle}"},questionEmailSharingBody:{id:"app.containers.IdeasShow.questionEmailSharingBody",defaultMessage:"Join the discussion about this question '{ideaTitle}' at {ideaUrl}!"},issueEmailSharingSubject:{id:"app.containers.IdeasShow.issueEmailSharingSubject",defaultMessage:"Support this issue: {ideaTitle}"},issueEmailSharingBody:{id:"app.containers.IdeasShow.issueEmailSharingBody",defaultMessage:"Support this issue '{ideaTitle}' at {ideaUrl}!"},projectEmailSharingSubject:{id:"app.containers.IdeasShow.projectEmailSharingSubject",defaultMessage:"Support this project: {ideaTitle}"},projectEmailSharingBody:{id:"app.containers.IdeasShow.projectEmailSharingBody",defaultMessage:"Support this project '{ideaTitle}' at {ideaUrl}!"},share:{id:"app.containers.IdeasShow.share",defaultMessage:"Share"},commentCTA:{id:"app.containers.IdeasShow.commentCTA",defaultMessage:"Add a comment"}});t.default=n},Uj4o:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("yWo2"),a("2B1R"),a("TeQF");var i,r,l=n(a("VkAN")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),u=a("KLnl"),s=n(a("vfLC")),c=n(a("V3HD")),f=n(a("vOnD")),p=a("96Cm"),m=a("ufqH");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}var h=f.default.div.withConfig({displayName:"Topics__Container",componentId:"tfo4q2-0"})(["display:flex;flex-wrap:wrap;",""],(0,p.isRtl)(i||(i=(0,l.default)(["\n    flex-direction: row-reverse;\n  "])))),v=f.default.div.withConfig({displayName:"Topics__Topic",componentId:"tfo4q2-1"})(["color:",";font-size:","px;font-weight:400;padding:6px 12px;margin-right:5px;margin-bottom:5px;border:1px solid ",";border-radius:",";",""],(function(e){return e.theme.colorSecondary}),p.fontSizes.small,(function(e){var t=e.theme;return(0,m.transparentize)(.7,t.colorSecondary)}),(function(e){return e.theme.borderRadius}),(0,p.isRtl)(r||(r=(0,l.default)(["\n    margin-right: 0;\n    margin-left: 5px;\n  "])))),b=(0,d.memo)((function(e){var t=e.topicIds,a=e.className,n=e.postType,o=e.localize,i=(0,s.default)({topicIds:t});return!(0,u.isNilOrError)(i)&&i.length>0?d.default.createElement(h,{id:"e2e-".concat(n,"-topics"),className:a},i.filter((function(e){return!(0,u.isNilOrError)(e)})).map((function(e){return d.default.createElement(v,{key:e.id,className:"e2e-".concat(n,"-topic")},o(e.attributes.title_multiloc))}))):null})),y=(0,c.default)(b);t.default=y},XgTl:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("2fl8")),r=function(e){var t=e.className,a=e.buttonText,n=e.iconName,r=e.onClick,l=e.ariaExpanded;return o.default.createElement(i.default,{className:t,icon:n,iconAriaHidden:!0,buttonStyle:"white",fontWeight:"500",onClick:r,ariaExpanded:l},a)};t.default=r},"YOT+":function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("pVnL"));a("ma9I"),a("sMBO");var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),l=a("ifvJ"),d=a("T89o"),u=a("qhky"),s=n(a("yiTP")),c=n(a("yYlr")),f=n(a("YLV/")),p=n(a("OL75")),m=n(a("M7uY")),g=n(a("PC5P")),h=n(a("CA+D")),v=n(a("V3HD")),b=a("N1C2"),y=a("KLnl"),w=a("1YJs"),M=n(a("wbnS")),I=n(a("+YyL"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}var S=(0,r.memo)((function(e){var t=e.idea,a=e.locale,n=e.tenant,o=e.authUser,i=e.ideaImages,l=e.author,d=e.project,s=e.localize;if(!(0,y.isNilOrError)(a)&&!(0,y.isNilOrError)(n)&&!(0,y.isNilOrError)(t)){var c=t.attributes,f=c.title_multiloc,p=c.body_multiloc,m=n.attributes.settings.core.locales,g=s(f,50),h=(0,b.stripHtml)(s(p),250),v=!(0,y.isNilOrError)(i)&&i.length>0?i[0].attributes.versions.fb:null,E=window.location.href,S=!(0,y.isNilOrError)(d)&&s(d.attributes.title_multiloc,20),_=!(0,y.isNilOrError)(d)&&d.attributes.slug,P={"@type":"Article",image:v,headline:g,author:(0,y.isNilOrError)(l)?"anonymous":"".concat(l.attributes.first_name," ").concat(l.attributes.last_name),mainEntityOfPage:{"@type":"WebPage","@id":E},datePublished:t.attributes.published_at},j={"@context":"http://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,item:{"@id":n.attributes.host,name:n.attributes.name,image:n.attributes.logo?n.attributes.logo.large:null}},{"@type":"ListItem",position:2,item:{"@id":"".concat(n.attributes.host,"/projects"),name:"Projects"}},{"@type":"ListItem",position:2,item:{"@id":"".concat(n.attributes.host,"/projects/").concat(_),name:S}},{"@type":"ListItem",position:4,item:{"@id":"".concat(n.attributes.host,"/ideas"),name:"Ideas"}}]};return r.default.createElement(u.Helmet,null,r.default.createElement("title",null,"\n            ".concat(o&&o.attributes.unread_notifications?"(".concat(o.attributes.unread_notifications,") "):"","\n            ").concat(g)),(0,I.default)(),(0,M.default)(m),r.default.createElement("meta",{name:"title",content:g}),r.default.createElement("meta",{name:"description",content:h}),r.default.createElement("meta",{property:"og:type",content:"article"}),r.default.createElement("meta",{property:"og:title",content:g}),r.default.createElement("meta",{property:"ideaOgDescription",content:h}),v&&r.default.createElement("meta",{property:"og:image",content:v}),r.default.createElement("meta",{property:"og:image:width",content:"".concat(w.imageSizes.ideaImg.fb[0])}),r.default.createElement("meta",{property:"og:image:height",content:"".concat(w.imageSizes.ideaImg.fb[1])}),r.default.createElement("meta",{name:"twitter:title",content:g}),r.default.createElement("meta",{name:"twitter:description",content:h}),v&&r.default.createElement("meta",{name:"twitter:image",content:v}),r.default.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),v&&r.default.createElement("script",{type:"application/ld+json"},JSON.stringify(P)),r.default.createElement("script",{type:"application/ld+json"},JSON.stringify(j)),r.default.createElement("meta",{property:"og:url",content:E}),r.default.createElement("meta",{property:"og:locale",content:a}))}return null})),_=(0,l.adopt)({idea:function(e){var t=e.ideaId,a=e.render;return r.default.createElement(p.default,{ideaId:t},a)},ideaImages:function(e){var t=e.ideaId,a=e.render;return r.default.createElement(h.default,{ideaId:t},a)},project:function(e){var t=e.idea,a=e.render;return(0,y.isNilOrError)(t)?null:r.default.createElement(m.default,{projectId:t.relationships.project.data.id},a)},author:function(e){var t=e.idea,a=e.render;return r.default.createElement(g.default,{id:(0,d.get)(t,"relationships.author.data.id",null)},a)},locale:r.default.createElement(s.default,null),tenant:r.default.createElement(c.default,null),authUser:r.default.createElement(f.default,null)}),P=(0,v.default)(S);t.default=function(e){return r.default.createElement(_,e,(function(t){return r.default.createElement(P,(0,i.default)({},e,t))}))}},aJX8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({twitterMessage:{id:"app.components.PostComponents.SharingModalContent.twitterMessage",defaultMessage:"Vote for {postTitle} on"},ideaEmailSharingSubjectText:{id:"app.components.PostComponents.SharingModalContent.ideaEmailSharingSubjectText",defaultMessage:"Support my idea: {postTitle}"},optionEmailSharingSubject:{id:"app.components.PostComponents.SharingModalContent.optionEmailSharingSubject",defaultMessage:"Support my proposed option: {postTitle}."},issueEmailSharingSubject:{id:"app.components.PostComponents.SharingModalContent.issueEmailSharingSubject",defaultMessage:"I just posted an issue: {postTitle}."},questionEmailSharingSubject:{id:"app.components.PostComponents.SharingModalContent.questionEmailSharingSubject",defaultMessage:"Join the discussion: {postTitle}."},contributionEmailSharingSubject:{id:"app.components.PostComponents.SharingModalContent.contributionEmailSharingSubject",defaultMessage:"Support my contribution: {postTitle}."},projectEmailSharingSubject:{id:"app.components.PostComponents.SharingModalContent.projectEmailSharingSubject",defaultMessage:"Support my project: {postTitle}."},initiativeEmailSharingSubject:{id:"app.components.PostComponents.SharingModalContent.initiativeEmailSharingSubject",defaultMessage:"Support my initiative: {postTitle}."},ideaEmailSharingBody:{id:"app.components.PostComponents.SharingModalContent.ideaEmailSharingBody",defaultMessage:"Support my idea '{postTitle}' at {postUrl}!"},issueEmailSharingBody:{id:"app.components.PostComponents.SharingModalContent.issueEmailSharingBody",defaultMessage:"I posted an issue '{postTitle}' at {postUrl}!"},optionEmailSharingBody:{id:"app.components.PostComponents.SharingModalContent.optionEmailSharingBody",defaultMessage:"Support my proposed option '{postTitle}' at {postUrl}!"},contributionEmailSharingBody:{id:"app.components.PostComponents.SharingModalContent.contributionEmailSharingBody",defaultMessage:"Support my contribution '{postTitle}' at {postUrl}!"},questionEmailSharingModalContentBody:{id:"app.components.PostComponents.SharingModalContent.questionEmailSharingModalContentBody",defaultMessage:"Join the discussion about this question '{postTitle}' at {postUrl}!"},projectEmailSharingBody:{id:"app.components.PostComponents.SharingModalContent.projectEmailSharingBody",defaultMessage:"Support my project '{postTitle}' at {postUrl}!"},initiativeEmailSharingBody:{id:"app.components.PostComponents.SharingModalContent.initiativeEmailSharingBody",defaultMessage:"What do you think of this initiative? Vote on it and share the discussion at {postUrl} to make your voice heard!"},ideaWhatsAppMessage:{id:"app.components.PostComponents.SharingModalContent.ideaWhatsAppMessage",defaultMessage:"Support my idea: {postTitle}."},optionWhatsAppMessage:{id:"app.components.PostComponents.SharingModalContent.optionWhatsAppMessage",defaultMessage:"Support my option: {postTitle}."},questionWhatsAppMessage:{id:"app.components.PostComponents.SharingModalContent.questionWhatsAppMessage",defaultMessage:"Join the discussion: {postTitle}."},contributionWhatsAppMessage:{id:"app.components.PostComponents.SharingModalContent.contributionWhatsAppMessage",defaultMessage:"Support my contribution: {postTitle}."},projectWhatsAppMessage:{id:"app.components.PostComponents.SharingModalContent.projectWhatsAppMessage",defaultMessage:"Support my project: {postTitle}."},issueWhatsAppMessage:{id:"app.components.PostComponents.SharingModalContent.issueWhatsAppMessage",defaultMessage:"I just posted an issue: {postTitle}."},whatsAppMessageProposal:{id:"app.components.PostComponents.SharingModalContent.whatsAppMessageProposal",defaultMessage:"I just posted a proposal for {orgName}: {postTitle}"}});t.default=n},bPnU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={sharingModalOpened:{name:"initiativeflow social sharing modal opened"}}},dcoO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({votingDisabledProjectInactive:{id:"app.components.VoteControl.votingDisabledProjectInactive",defaultMessage:"You can no longer vote on ideas in {projectName}"},votingDisabledPhaseOver:{id:"app.components.VoteControl.votingDisabledPhaseOver",defaultMessage:"It's no longer possible to vote in this phase"},votingDisabledFutureEnabled:{id:"app.components.VoteControl.votingDisabledFutureEnabled",defaultMessage:"Voting will be enabled once this phase starts"},votingPossibleLater:{id:"app.components.VoteControl.votingPossibleLater",defaultMessage:"Voting will start on {enabledFromDate}"},votingNotEnabled:{id:"app.components.VoteControl.votingNotEnabled",defaultMessage:"Voting is currently not enabled for this project"},votingDisabledMaxReached:{id:"app.components.VoteControl.votingDisabledMaxReached",defaultMessage:"You've reached your maximum number of votes in {projectName}"},votingNotPermitted:{id:"app.components.VoteControl.votingNotPermitted",defaultMessage:"Voting is only enabled for certain groups"},votingNotVerified:{id:"app.components.VoteControl.votingNotVerified",defaultMessage:"{linkToVerification} in order to vote."},linkToVerificationText:{id:"app.components.VoteControl.linkToVerificationText",defaultMessage:"Verify your identity"},upvote:{id:"app.components.VoteControl.upvote",defaultMessage:"Upvote"},downvote:{id:"app.components.VoteControl.downvote",defaultMessage:"Downvote"},a11y_upvotesDownvotes:{id:"app.containers.VoteControl.a11y_upvotesDownvotes",defaultMessage:"Total upvotes: {upvotesCount}, total downvotes: {downvotesCount}"},voteSuccessTitle:{id:"app.containers.VoteControl.voteSuccessTitle",defaultMessage:"Your vote was successfully registered!"},voteErrorTitle:{id:"app.containers.VoteControl.voteErrorTitle",defaultMessage:"Something went wrong"},voteErrorSubTitle:{id:"app.containers.VoteControl.voteErrorSubTitle",defaultMessage:"Due to an error your vote could not being registered. Please try again in a few minutes."},close:{id:"app.containers.VoteControl.close",defaultMessage:"Close"}});t.default=n},"fM+I":function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.initiativeByIdStream=m,t.initiativeBySlugStream=function(e){return u.default.get({apiEndpoint:"".concat(d.API_PATH,"/initiatives/by_slug/").concat(e)})},t.initiativesStream=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u.default.get(p({apiEndpoint:"".concat(d.API_PATH,"/initiatives")},e))},t.initiativesFilterCountsStream=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u.default.get(p(p({apiEndpoint:"".concat(d.API_PATH,"/initiatives/filter_counts")},e),{},{cacheStream:!1}))},t.initiativesMarkersStream=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u.default.get(p(p({apiEndpoint:"".concat(d.API_PATH,"/initiatives/as_markers")},e),{},{cacheStream:!1}))},t.addInitiative=function(e){return g.apply(this,arguments)},t.updateInitiative=function(e,t){return h.apply(this,arguments)},t.deleteInitiative=function(e){return v.apply(this,arguments)},t.initiativeAllowedTransitionsStream=function(e){return u.default.get({apiEndpoint:"".concat(d.API_PATH,"/initiatives/").concat(e,"/allowed_transitions")})},t.initiativeActivities=function(e){return u.default.get({apiEndpoint:"".concat(d.API_PATH,"/initiatives/").concat(e,"/activities")})},t.getInitiativeActionDescriptors=function(){return u.default.get({apiEndpoint:"".concat(d.API_PATH,"/action_descriptors/initiatives")})};var o=n(a("o0o1")),i=n(a("J4zp")),r=n(a("yXPU")),l=n(a("lSNA"));a("ma9I"),a("4mDm"),a("07d7"),a("5s+n"),a("PKPk"),a("3bBZ");var d=a("p0gT"),u=n(a("1Kqg")),s=a("ahDk"),c=a("T89o");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e){return u.default.get({apiEndpoint:"".concat(d.API_PATH,"/initiatives/").concat(e)})}function g(){return(g=(0,r.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.add("".concat(d.API_PATH,"/initiatives"),{initiative:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,r.default)(o.default.mark((function e(t,a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.update("".concat(d.API_PATH,"/initiatives/").concat(t),t,{initiative:a});case 2:return n=e.sent,u.default.fetchAllWith({apiEndpoint:["".concat(d.API_PATH,"/stats/initiatives_count"),"".concat(d.API_PATH,"/initiatives"),"".concat(d.API_PATH,"/initiatives/").concat(t,"/activities")]}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,r.default)(o.default.mark((function e(t){var a,n,r,l,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([m(t).observable.pipe((0,s.first)()).toPromise(),u.default.delete("".concat(d.API_PATH,"/initiatives/").concat(t),t)]);case 2:return a=e.sent,n=(0,i.default)(a,2),r=n[0],l=n[1],f=(0,c.get)(r,"relationships.author.data.id",!1),u.default.fetchAllWith({apiEndpoint:f?["".concat(d.API_PATH,"/users/").concat(f,"/initiatives_count")]:[]}),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},jxG7:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=n(a("vOnD")),r=n(a("L0i+")),l=n(a("IEAL")),d=n(a("MqdI")),u=a("KLnl"),s=n(a("38aM")),c=i.default.div.withConfig({displayName:"Buttons__Container",componentId:"sc-6amf6j-0"})([""]),f=(0,i.default)(r.default).withConfig({displayName:"Buttons__StyledGoToCommentsButton",componentId:"sc-6amf6j-1"})(["margin-bottom:10px;"]),p=function(e){var t=e.ideaId,a=e.className,n=(0,s.default)({ideaId:t});if(!(0,u.isNilOrError)(n)){var i=n.attributes.action_descriptor.commenting_idea.enabled;return o.default.createElement(c,{className:a||""},i&&o.default.createElement(f,null),o.default.createElement(l.default,{ideaId:t,buttonComponent:o.default.createElement(d.default,null)}))}return null};t.default=p},kemx:function(e,t,a){"use strict";a("yq1k"),a("JTJg"),a("4mDm"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("o0o1"));a("07d7"),a("5s+n"),a("2B1R"),a("TeQF"),a("ma9I");var r,l=n(a("RIqP")),d=n(a("yXPU")),u=n(a("J4zp")),s=n(a("VkAN")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=B(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),f=a("T89o"),p=a("KLnl"),m=n(a("2fl8")),g=a("MfpC"),h=a("FSpq"),v=n(a("uN1B")),b=n(a("I9mC")),y=n(a("JvRQ")),w=n(a("38aM")),M=n(a("kqpI")),I=n(a("x3zm")),E=n(a("dpb+")),S=a("KuRP"),_=n(a("Y+nY")),P=n(a("1Kqg")),j=a("q3BX"),O=a("Rw3A"),x=n(a("4sB7")),C=n(a("6L1S")),k=n(a("vOnD")),T=a("96Cm"),N=a("+9pX"),D=n(a("2AJv"));function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(B=function(e){return e?a:t})(e)}var A=k.default.div.withConfig({displayName:"AssignBudgetControl__IdeaCardContainer",componentId:"sc-1e5jska-0"})(["display:flex;align-items:center;"]),R=k.default.div.withConfig({displayName:"AssignBudgetControl__IdeaPageContainer",componentId:"sc-1e5jska-1"})(["display:flex;flex-direction:column;align-items:stretch;",""],T.media.smallerThanMaxTablet(r||(r=(0,s.default)(["\n    padding: 20px;\n    background: ",";\n  "])),T.colors.backgroundLightGrey)),W=k.default.div.withConfig({displayName:"AssignBudgetControl__BudgetWithButtonWrapper",componentId:"sc-1e5jska-2"})(["width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:center;"]),q=k.default.div.withConfig({displayName:"AssignBudgetControl__Budget",componentId:"sc-1e5jska-3"})(["width:100%;height:90px;color:",";font-size:","px;font-weight:600;text-align:center;display:flex;align-items:center;justify-content:center;margin-bottom:3px;",";"],(function(e){return e.theme.colorText}),T.fontSizes.medium,T.defaultCardStyle),L=(0,k.default)(D.default).withConfig({displayName:"AssignBudgetControl__StyledPBExpenses",componentId:"sc-1e5jska-4"})(["margin-top:25px;padding:20px;"]),F=(0,c.memo)((function(e){var t,a,n,o=e.view,r=e.ideaId,s=e.authUser,v=e.tenant,b=e.locale,y=e.idea,w=e.phases,I=e.participationContext,E=e.participationContextId,k=e.participationContextType,D=e.intl,B=e.className,F=(0,M.default)(null==I||null===(t=I.relationships)||void 0===t||null===(a=t.user_basket)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.id),V=(0,c.useState)(!1),z=(0,u.default)(V,2),U=z[0],J=z[1],H=function(){var e=(0,d.default)(i.default.mark((function e(){var t,a,n,o,u,c,m,g,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},a=function(){var e=(0,d.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(200);case 2:J(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),(0,p.isNilOrError)(y)){e.next=39;break}if(u=null===(n=y.attributes.action_descriptor.budgeting)||void 0===n?void 0:n.enabled,c=(0,p.isNilOrError)(F)?[]:F.relationships.ideas.data.map((function(e){return e.id})),m=(0,f.includes)(c,r),g=null===(o=y.attributes.action_descriptor.budgeting)||void 0===o?void 0:o.disabled_reason,!(0,p.isNilOrError)(s)&&"not_verified"!==g){e.next=11;break}(0,j.openSignUpInModal)({verification:"not_verified"===g,verificationContext:"not_verified"===g?{action:"budgeting",id:E,type:k}:void 0}),e.next=39;break;case 11:if((0,p.isNilOrError)(s)||!u){e.next=39;break}if(J(!0),(0,p.isNilOrError)(F)){e.next=29;break}return v=[],v=m?F.relationships.ideas.data.filter((function(e){return e.id!==y.id})).map((function(e){return e.id})):[].concat((0,l.default)(F.relationships.ideas.data.map((function(e){return e.id}))),[y.id]),e.prev=16,e.next=19,(0,h.updateBasket)(F.id,{user_id:s.id,participation_context_id:E,participation_context_type:(0,p.capitalizeParticipationContextType)(k),idea_ids:v,submitted_at:null});case 19:a(),(0,S.trackEventByName)(_.default.ideaAddedToBasket),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(16),a(),P.default.fetchAllWith({dataId:[F.id]});case 27:e.next=39;break;case 29:return e.prev=29,e.next=32,(0,h.addBasket)({user_id:s.id,participation_context_id:E,participation_context_type:(0,p.capitalizeParticipationContextType)(k),idea_ids:[y.id]});case 32:a(),(0,S.trackEventByName)(_.default.basketCreated),e.next=39;break;case 36:e.prev=36,e.t1=e.catch(29),a();case 39:case"end":return e.stop()}}),e,null,[[16,23],[29,36]])})));return function(){return e.apply(this,arguments)}}();if(!(0,f.isUndefined)(s)&&!(0,p.isNilOrError)(b)&&!(0,p.isNilOrError)(v)&&!(0,p.isNilOrError)(y)&&!(0,f.isUndefined)(F)&&y.attributes.budget){var K,Z,Y,$,G,Q=(0,p.isNilOrError)(F)?[]:F.relationships.ideas.data.map((function(e){return e.id})),X=(0,f.includes)(Q,r),ee=null===(K=y.attributes.action_descriptor.budgeting)||void 0===K?void 0:K.enabled,te=!!s,ae="not_permitted"!==(null===(Z=y.attributes.action_descriptor.budgeting)||void 0===Z?void 0:Z.disabled_reason),ne=!(null===(Y=y.attributes.action_descriptor.budgeting)||void 0===Y||!Y.disabled_reason),oe="budgeting"===(null==I||null===($=I.attributes)||void 0===$?void 0:$.participation_method),ie=(null===(G=(0,g.getCurrentPhase)(w))||void 0===G?void 0:G.id)===(null==I?void 0:I.id),re="project"===k&&"archived"!==I.attributes.publication_status||ie;if(oe){var le=re&&ae?c.default.createElement(m.default,{onClick:function(e){null==e||e.preventDefault(),H()},disabled:te&&!ee&&!ne,processing:U,bgColor:X?T.colors.clRedError:T.colors.clGreen,iconSize:"18px",icon:X?"basket-minus":"basket-plus",className:"e2e-assign-budget-button ".concat(X?"in-basket":"not-in-basket"),ariaLabel:D.formatMessage(X?x.default.removeFromMyBasket:x.default.addToMyBasket)},c.default.createElement(O.FormattedMessage,X?"ideaCard"===o?x.default.remove:x.default.removeFromMyBasket:"ideaCard"===o?x.default.add:x.default.addToMyBasket)):null;if("ideaCard"===o)return c.default.createElement(A,{className:"e2e-assign-budget ".concat(B||""),"aria-live":"polite"},le);if("ideaPage"===o)return c.default.createElement(R,{className:"pbAssignBudgetControlContainer e2e-assign-budget ".concat(B||""),"aria-live":"polite"},c.default.createElement(W,null,c.default.createElement(q,null,c.default.createElement(N.ScreenReaderOnly,null,c.default.createElement(O.FormattedMessage,x.default.a11y_price)),c.default.createElement(C.default,{value:y.attributes.budget})),le),ae&&c.default.createElement(L,{participationContextId:E,participationContextType:k,viewMode:"column"}))}}return null})),V=(0,c.memo)((function(e){var t,a,n,o=e.view,i=e.projectId,r=e.ideaId,l=e.className,d=e.intl,u=(0,v.default)(),s=(0,b.default)(),m=(0,y.default)(),h=(0,w.default)({ideaId:r}),M=(0,I.default)({projectId:i}),S=(0,E.default)(i),_="continuous"===(null==M?void 0:M.attributes.process_type),P=(0,p.isNilOrError)(h)?null:null==h||null===(t=h.relationships)||void 0===t||null===(a=t.phases)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.map((function(e){return e.id})),j=(0,p.isNilOrError)(S)?null:null==S?void 0:S.filter((function(e){return(0,f.includes)(P,e.id)})),O=j?(0,g.getLatestRelevantPhase)(j):null,x=_?M:O,C=_?"project":"phase",k=(null==x?void 0:x.id)||null;return(0,p.isUndefinedOrError)(u)||(0,p.isNilOrError)(s)||(0,p.isNilOrError)(m)||(0,p.isNilOrError)(h)||(0,p.isNilOrError)(M)||(0,p.isUndefinedOrError)(S)||!x||!k?null:c.default.createElement(F,{view:o,projectId:i,ideaId:r,authUser:u,tenant:s.data,locale:m,idea:h,project:M,phases:S,participationContext:x,participationContextType:C,participationContextId:k,intl:d,className:l})})),z=(0,O.injectIntl)(V);t.default=z},lq1v:function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.voteStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d.default.get(c({apiEndpoint:"".concat(l.API_PATH,"/votes/").concat(e)},t))},t.votesStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d.default.get(c({apiEndpoint:"".concat(l.API_PATH,"/ideas/").concat(e,"/votes")},t))},t.addVote=function(e,t){return f.apply(this,arguments)},t.deleteVote=function(e,t){return p.apply(this,arguments)};var o=n(a("o0o1"));a("ma9I"),a("TWNs"),a("rB9j"),a("JfAA");var i=n(a("yXPU")),r=n(a("lSNA")),l=a("p0gT"),d=n(a("1Kqg")),u=a("KLnl");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(){return(f=(0,i.default)(o.default.mark((function e(t,a){var n,i,r,s=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]&&s[2],e.next=3,d.default.add("".concat(l.API_PATH,"/ideas/").concat(t,"/votes"),{vote:a});case 3:return i=e.sent,n&&(r=new RegExp("/ideas/".concat(u.uuidRegExp,"$")),d.default.fetchAllWith({regexApiEndpoint:[r],onlyFetchActiveStreams:!0})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,i.default)(o.default.mark((function e(t,a){var n,i,r,s=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]&&s[2],e.next=3,d.default.delete("".concat(l.API_PATH,"/votes/").concat(a),a);case 3:return i=e.sent,n&&(r=new RegExp("/ideas/".concat(u.uuidRegExp,"$")),d.default.fetchAllWith({regexApiEndpoint:[r],onlyFetchActiveStreams:!0})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},mWLo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({noResultsFound:{id:"app.components.IdeasShowPage.noResultsFound",defaultMessage:"No results found."},goBack:{id:"app.components.IdeasShowPage.goBack",defaultMessage:"Go back"},goBackToList:{id:"app.components.IdeasShowPage.goBackToList",defaultMessage:"Go back to the list"}});t.default=n},"oHY+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={clickUpvote:{name:"Idea upvote clicked"},clickDownvote:{name:"Idea downvote clicked"},sharingModalOpened:{name:"ideaflow social sharing modal opened"},clickTranslateIdeaButton:{name:"Clicked button to translate idea title/description"},clickGoBackToOriginalIdeaCopyButton:{name:"Clicked button to go back to original, non-translated idea title/description"}}},oRVF:function(e,t,a){"use strict";a("SuFq");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("FZtP");var o=n(a("lwsE")),i=n(a("W8MJ")),r=n(a("PJYZ")),l=n(a("7W2i")),d=n(a("a1gu")),u=n(a("Nsbk")),s=n(a("lSNA")),c=n(a("q1tI")),f=a("DtyJ"),p=a("ahDk"),m=n(a("aTp4")),g=a("iamO"),h=a("KLnl");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var b=function(e){(0,l.default)(a,e);var t=v(a);function a(e){var n;return(0,o.default)(this,a),n=t.call(this,e),(0,s.default)((0,r.default)(n),"inputProps$",void 0),(0,s.default)((0,r.default)(n),"subscriptions",void 0),n.state={permission:void 0},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.item,n=t.action,o=t.context;this.inputProps$=new f.BehaviorSubject({item:a,action:n,context:o}),this.subscriptions=[this.inputProps$.pipe((0,p.distinctUntilChanged)((function(e,t){return(0,m.default)(e,t)})),(0,p.switchMap)((function(e){var t=e.item,a=e.action,n=e.context;return(0,h.isNilOrError)(t)?(0,f.of)(!1):(0,g.hasPermission)({item:t,action:a,context:n})}))).subscribe((function(t){return e.setState({permission:t})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.item,a=e.action,n=e.context;this.inputProps$.next({item:t,action:a,context:n})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.permission)}}]),a}(c.default.Component);t.default=b},owEH:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,l=n(a("pVnL")),d=n(a("VkAN")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),s=a("T89o"),c=a("KLnl"),f=a("dtw8"),p=a("ifvJ"),m=n(a("GpY6")),g=n(a("2fl8")),h=n(a("OsxD")),v=n(a("OL75")),b=n(a("K/LT")),y=a("Rw3A"),w=n(a("mWLo")),M=n(a("vOnD")),I=a("96Cm");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}var S=M.default.div.withConfig({displayName:"IdeasShowPage__IdeaNotFoundWrapper",componentId:"sc-18xvtnx-0"})(["height:calc( 100vh - ","px );display:flex;flex-direction:column;align-items:center;padding:4rem;font-size:","px;color:",";"],(function(e){return e.theme.menuHeight+e.theme.footerHeight}),I.fontSizes.large,I.colors.label),_=M.default.div.withConfig({displayName:"IdeasShowPage__Container",componentId:"sc-18xvtnx-1"})(["background:#fff;"]),P=(0,M.default)(h.default).withConfig({displayName:"IdeasShowPage__StyledIdeaShowPageTopBar",componentId:"sc-18xvtnx-2"})(["position:fixed;top:0;left:0;right:0;z-index:1000;"]),j=(0,M.default)(m.default).withConfig({displayName:"IdeasShowPage__StyledIdeasShow",componentId:"sc-18xvtnx-3"})(["min-height:calc( 100vh - ","px );padding-top:40px;padding-left:60px;padding-right:60px;"," ",""],(function(e){return e.theme.menuHeight+e.theme.footerHeight}),I.media.smallerThanMaxTablet(i||(i=(0,d.default)(["\n    min-height: calc(100vh - ","px);\n    padding-top: 35px;\n  "])),(function(e){var t=e.theme;return t.mobileMenuHeight+t.mobileTopBarHeight})),I.media.smallerThanMinTablet(r||(r=(0,d.default)(["\n    padding-top: 25px;\n    padding-left: 15px;\n    padding-right: 15px;\n  "])))),O=u.default.createElement(y.FormattedMessage,w.default.goBackToList),x=(0,u.memo)((function(e){var t=e.idea,a=(0,b.default)().windowWidth<=I.viewportWidths.largeTablet;return(0,s.isError)(t)?u.default.createElement(S,null,u.default.createElement("p",null,u.default.createElement(y.FormattedMessage,w.default.noResultsFound)),u.default.createElement(g.default,{linkTo:"/ideas",text:O,icon:"arrow-back"})):(0,c.isNilOrError)(t)?null:u.default.createElement(_,null,a&&u.default.createElement(P,{ideaId:t.id}),u.default.createElement(j,{ideaId:t.id,projectId:t.relationships.project.data.id,insideModal:!1}))})),C=(0,p.adopt)({idea:function(e){var t=e.params,a=e.render;return u.default.createElement(v.default,{ideaSlug:t.slug},a)}}),k=(0,f.withRouter)((function(e){return u.default.createElement(C,e,(function(t){return u.default.createElement(x,(0,l.default)({},e,t))}))}));t.default=k},qGqp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageContentMaxWidth=t.rightColumnWidthTablet=t.columnsGapTablet=t.rightColumnWidthDesktop=t.columnsGapDesktop=void 0;t.columnsGapDesktop=90;t.rightColumnWidthDesktop=350;t.columnsGapTablet=60;t.rightColumnWidthTablet=300;t.pageContentMaxWidth=1210},vztX:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("PGV/"));t.default=function(e){var t=(0,o.default)({projectId:e.projectId});return e.children(t)}},w6e4:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ma9I");var o=n(a("q1tI")),i=n(a("vOnD")),r=a("KLnl"),l=n(a("zFVC")),d=n(a("D51O")),u=n(a("N6Fc")),s=n(a("xP9l")),c=n(a("AM3C")),f=n(a("R+1c")),p=n(a("JvRQ")),m=n(a("PGV/")),g=n(a("Yjdl")),h=i.default.div.withConfig({displayName:"MetaInformation__Container",componentId:"sc-17wbhqz-0"})(["width:100%;display:flex;flex-direction:column;border-top:solid 1px #ccc;border-bottom:solid 1px #ccc;"]),v=function(e){var t=e.ideaId,a=e.projectId,n=e.statusId,i=e.authorId,v=e.compact,b=e.className,y=(0,p.default)(),w=(0,m.default)({projectId:a});if(!(0,r.isNilOrError)(y)&&!(0,r.isNilOrError)(w)){var M=(0,l.default)("topic_ids",w,y),I=(0,l.default)("location",w,y),E=(0,l.default)("attachments",w,y);return o.default.createElement(h,{className:"".concat(b||""," ").concat(v?"compact":"")},o.default.createElement(f.default,{authorId:i,ideaId:t,compact:v}),o.default.createElement(d.default,{statusId:n,compact:v}),M&&o.default.createElement(c.default,{ideaId:t,compact:v}),I&&o.default.createElement(u.default,{projectId:a,ideaId:t,compact:v}),E&&o.default.createElement(s.default,{ideaId:t,compact:v}),o.default.createElement(g.default,{id:"app.containers.IdeasShow.MetaInformation",ideaId:t,compact:v}))}return null};t.default=v},xP9l:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2B1R");var o=n(a("q1tI")),i=n(a("vOnD")),r=n(a("OjWy")),l=n(a("dQ9y")),d=a("akep"),u=a("KLnl"),s=a("Rw3A"),c=n(a("AJij")),f=i.default.div.withConfig({displayName:"Attachments__Container",componentId:"sc-5mb91c-0"})([""]),p=(0,i.default)(r.default).withConfig({displayName:"Attachments__StyledAttachment",componentId:"sc-5mb91c-1"})(["margin-bottom:",";"],(function(e){return e.isLastItem?"0":"10px"})),m=(0,s.injectIntl)((function(e){var t=e.ideaId,a=e.compact,n=e.className,i=e.intl.formatMessage,r=(0,l.default)({resourceType:"idea",resourceId:t});return!(0,u.isNilOrError)(r)&&r.length>0?o.default.createElement(d.Item,{className:n||"",compact:a},o.default.createElement(d.Header,null,i(c.default.attachments)),o.default.createElement(f,{className:n},Array.isArray(r)&&r.map((function(e,t){return o.default.createElement(p,{isLastItem:t===r.length-1,file:e,key:e.id})})))):null}));t.default=m},xksB:function(e,t,a){"use strict";a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=i?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),r=n(a("JUYq")),l=a("iP56"),d=n(a("x3zm")),u=n(a("JvRQ")),s=n(a("PagR")),c=a("KLnl"),f=n(a("IAnr"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}var m=(0,i.memo)((function(e){var t=e.projectId,a=e.className,n=e.insideModal,o=(0,d.default)({projectId:t}),p=(0,u.default)(),m=(0,s.default)();return(0,c.isNilOrError)(o)||(0,c.isNilOrError)(p)?null:i.default.createElement(l.Button,{className:a,id:"e2e-idea-other-link",locale:p,icon:"circle-arrow-left",onClick:function(e){e.preventDefault(),n?f.default.emit("closeIdeaModal"):(0,c.isNilOrError)(o)?r.default.push("/"):r.default.push("/projects/".concat(o.attributes.slug))},buttonStyle:"text",iconSize:"26px",padding:"0",textDecorationHover:"underline"},m(o.attributes.title_multiloc))}));t.default=m},zFVC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){return"hidden"!==t.ui_schema_multiloc[a][e]["ui:widget"]}},zIn5:function(e,t,a){"use strict";a("2B1R"),a("SuFq"),a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ToJy");var o=n(a("J4zp")),i=n(a("lwsE")),r=n(a("W8MJ")),l=n(a("PJYZ")),d=n(a("7W2i")),u=n(a("a1gu")),s=n(a("Nsbk")),c=n(a("lSNA")),f=n(a("q1tI")),p=a("DtyJ"),m=a("ahDk"),g=a("RLXT"),h=a("T89o"),v=a("KLnl");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var M=function(e){(0,d.default)(a,e);var t=w(a);function a(e){var n;return(0,i.default)(this,a),n=t.call(this,e),(0,c.default)((0,l.default)(n),"postId$",void 0),(0,c.default)((0,l.default)(n),"postType$",void 0),(0,c.default)((0,l.default)(n),"sort$",void 0),(0,c.default)((0,l.default)(n),"loadMore$",void 0),(0,c.default)((0,l.default)(n),"subscription",void 0),(0,c.default)((0,l.default)(n),"initialQueryParameters",{pageNumber:0,pageSize:15,sort:"-new"}),(0,c.default)((0,l.default)(n),"loadMore",(function(){n.state.hasMore&&n.loadMore$.next(null)})),(0,c.default)((0,l.default)(n),"changeSort",(function(e){n.sort$.next(e)})),n.state={commentsList:void 0,loadingInital:!1,loadingMore:!1,hasMore:!0},n}return(0,r.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.postId$=new p.BehaviorSubject(this.props.postId),this.postType$=new p.BehaviorSubject(this.props.postType),this.sort$=new p.BehaviorSubject(this.initialQueryParameters.sort),this.loadMore$=new p.BehaviorSubject(null),this.subscription=(0,p.combineLatest)(this.postId$.pipe((0,m.distinctUntilChanged)()),this.postType$.pipe((0,m.distinctUntilChanged)()),this.sort$.pipe((0,m.distinctUntilChanged)())).pipe((0,m.switchMap)((function(t){var a=(0,o.default)(t,3),n=a[0],i=a[1],r=a[2],l=void 0,d=e.initialQueryParameters.pageNumber,u=e.initialQueryParameters.pageSize,s=!0;return e.loadMore$.pipe((0,m.tap)((function(){return e.setState({loadingInital:0===d,loadingMore:d>0})})),(0,m.mergeScan)((function(){return d+=1,("idea"===i?g.commentsForIdeaStream:g.commentsForInitiativeStream)(n,{queryParameters:{sort:r,"page[number]":d,"page[size]":u}}).observable.pipe((0,m.map)((function(e){var t=(0,h.get)(e,"links.self"),a=(0,h.get)(e,"links.last");return s=(0,h.isString)(t)&&(0,h.isString)(a)&&t!==a,l=(0,v.isNilOrError)(l)?e.data:(0,h.unionBy)(l,e.data,"id"),null})))}),null),(0,m.map)((function(){return{pageNumber:d,commentsList:l,hasMore:s}})))}))).subscribe((function(t){var a=t.commentsList,n=t.hasMore;e.setState({commentsList:a,hasMore:n,loadingInital:!1,loadingMore:!1})}))}},{key:"componentDidUpdate",value:function(){this.postId$.next(this.props.postId)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){return(0,this.props.children)(y(y({},this.state),{},{onLoadMore:this.loadMore,onChangeSort:this.changeSort}))}}]),a}(f.default.Component);t.default=M}}]);
//# sourceMappingURL=70.0d0c750c7f216a564285.chunk.js.map