(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{"1d2A":function(e,t,r){"use strict";r("SuFq"),r("ENF9"),r("5DmW");var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("o0o1"));r("rB9j"),r("UxlC"),r("pNMO"),r("4Brf"),r("07d7"),r("5s+n"),r("2B1R"),r("sMBO"),r("4mDm"),r("PKPk"),r("3bBZ"),r("ma9I"),r("fbCW"),r("hByQ");var o,u,l=n(r("pVnL")),s=n(r("RIqP")),d=n(r("yXPU")),c=n(r("lwsE")),f=n(r("W8MJ")),p=n(r("PJYZ")),m=n(r("7W2i")),g=n(r("a1gu")),h=n(r("Nsbk")),b=n(r("lSNA")),v=n(r("VkAN")),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=z(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r("q1tI")),w=r("ifvJ"),P=r("T89o"),E=r("KLnl"),I=r("Qyje"),O=r("dtw8"),N=n(r("JUYq")),M=n(r("Ta6j")),j=n(r("myd5")),T=n(r("adp4")),x=r("ngE2"),_=r("c95D"),k=r("EP0W"),S=r("BjdT"),F=r("18VM"),B=n(r("yiTP")),D=n(r("YLV/")),R=n(r("M7uY")),C=r("gSG5"),q=r("mGTj"),A=r("96Cm"),W=n(r("vOnD")),U=n(r("2dU8")),J=r("KuRP"),Y=n(r("yYlr"));function z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(z=function(e){return e?r:t})(e)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,g.default)(this,r)}}var Z=W.default.div.withConfig({displayName:"IdeasNewPage__Container",componentId:"hy8xrx-0"})(["background:",";min-height:calc( 100vh - ","px );",""],A.colors.background,(function(e){return e.theme.menuHeight+e.theme.footerHeight}),A.media.smallerThanMaxTablet(o||(o=(0,v.default)(["\n    min-height: calc(100vh - ","px - ","px);\n  "])),(function(e){return e.theme.mobileMenuHeight}),(function(e){return e.theme.mobileTopBarHeight}))),V=W.default.main.withConfig({displayName:"IdeasNewPage__PageContainer",componentId:"hy8xrx-1"})(["width:100%;min-height:calc( 100vh - ","px );position:relative;",""],(function(e){return e.theme.menuHeight+e.theme.footerHeight}),A.media.smallerThanMaxTablet(u||(u=(0,v.default)(["\n    min-height: calc(100vh - ","px - ","px);\n  "])),(function(e){return e.theme.mobileMenuHeight}),(function(e){return e.theme.mobileTopBarHeight}))),H=W.default.div.withConfig({displayName:"IdeasNewPage__ButtonBarContainer",componentId:"hy8xrx-2"})(["width:100%;height:68px;position:fixed;z-index:2;bottom:0;left:0;right:0;background:#fff;border-top:solid 1px #ddd;"]),K=function(e){(0,m.default)(r,e);var t=L(r);function r(e){var n;(0,c.default)(this,r),n=t.call(this,e),(0,b.default)((0,p.default)(n),"globalState",void 0),(0,b.default)((0,p.default)(n),"redirectIfNotPermittedOnPage",(function(){var e=n.props,t=e.authUser,r=e.project;!(0,E.isNilOrError)(t)&&((0,F.isAdmin)({data:t})||(0,F.isModerator)({data:t})||(0,F.isSuperAdmin)({data:t}))||null!==t&&((0,E.isNilOrError)(r)||r.attributes.action_descriptor.posting_idea.enabled)||N.default.replace(n.props.previousPathName||(t?"/":"/sign-up"))})),(0,b.default)((0,p.default)(n),"handleOnIdeaSubmit",(0,d.default)(i.default.mark((function e(){var t,r,a,o,u,l,d,c,f,p,m,g,h,v,y,w,I,O,M,j,T,S,F,B,D,R,C,A,W,Y,z;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.locale,a=t.authUser,o=t.project,u=t.appConfiguration,e.next=3,n.globalState.get();case 3:if(l=e.sent,d=l.title,c=l.description,f=l.selectedTopics,p=l.budget,m=l.proposedBudget,g=l.position,h=l.position_coordinates,v=l.imageFile,y=l.ideaFiles,w=l.authorId,(0,E.isNilOrError)(r)||(0,E.isNilOrError)(a)||(0,E.isNilOrError)(o)){e.next=56;break}if(n.globalState.set({submitError:!1,processing:!0}),e.prev=16,I=(0,b.default)({},r,d),O=(0,b.default)({},r,c||""),M=(0,P.isEmpty)(g)?null:g,j=h){e.next=25;break}return e.next=24,(0,q.geocode)(g);case 24:j=e.sent;case 25:return T={budget:p,proposed_budget:m,author_id:w,publication_status:"published",title_multiloc:I,body_multiloc:O,topic_ids:f,project_id:o.id,location_point_geojson:j,location_description:M},e.next=28,(0,x.addIdea)(T);case 28:return S=e.sent,F=S.data.id,e.prev=30,B=v&&v[0]?(0,k.addIdeaImage)(F,v[0].base64,0):Promise.resolve(null),D=y.map((function(e){return(0,_.addIdeaFile)(F,e.base64,e.name)})),e.next=35,Promise.all([B].concat((0,s.default)(D)));case 35:e.next=42;break;case 37:e.prev=37,e.t0=e.catch(30),(R=(0,P.get)(e.t0,"json.errors"))&&R.image&&n.globalState.set({fileOrImageError:!0});case 42:return e.next=44,n.globalState.get();case 44:C=e.sent,C.fileOrImageError?setTimeout((function(){N.default.push({pathname:"/ideas/".concat(S.data.attributes.slug),search:"?new_idea_id=".concat(F)})}),4e3):N.default.push({pathname:"/ideas/".concat(S.data.attributes.slug),search:"?new_idea_id=".concat(F)}),e.next=56;break;case 49:e.prev=49,e.t1=e.catch(16),A=(0,P.get)(e.t1,"json.errors"),(W=A.base.find((function(e){return"includes_banned_words"===e.error})))&&(Y=W.blocked_words.some((function(e){return"title_multiloc"===e.attribute})),z=W.blocked_words.some((function(e){return"body_multiloc"===e.attribute})),Y&&((0,J.trackEventByName)(U.default.titleProfanityError.name,{locale:r,ideaId:null,projectId:(0,E.isNilOrError)(o)?null:o.id,profaneMessage:d,location:"IdeasNewPage (citizen side)",userId:(0,E.isNilOrError)(a)?null:a.id,host:(0,E.isNilOrError)(u)?null:u.attributes.host}),n.globalState.set({titleProfanityError:Y})),z&&((0,J.trackEventByName)(U.default.descriptionProfanityError.name,{locale:r,ideaId:null,projectId:(0,E.isNilOrError)(o)?null:o.id,profaneMessage:d,location:"IdeasNewPage (citizen side)",userId:(0,E.isNilOrError)(a)?null:a.id,host:(0,E.isNilOrError)(u)?null:u.attributes.host}),n.globalState.set({descriptionProfanityError:z}))),n.globalState.set({processing:!1,submitError:!0});case 56:case"end":return e.stop()}}),e,null,[[16,49],[30,37]])})))),(0,b.default)((0,p.default)(n),"onTitleChange",(function(e){n.globalState.set({title:e,titleProfanityError:!1})})),(0,b.default)((0,p.default)(n),"onDescriptionChange",(function(e){n.globalState.set({description:e,descriptionProfanityError:!1})}));return n.globalState=S.globalState.init("IdeasNewPage",{title:null,description:null,selectedTopics:[],budget:null,proposedBudget:null,position:"",position_coordinates:null,submitError:!1,titleProfanityError:!1,descriptionProfanityError:!1,fileOrImageError:!1,processing:!1,ideaId:null,ideaSlug:null,imageFile:[],imageId:null,ideaFiles:[],authorId:null}),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location,r=(0,I.parse)(t.search,{ignoreQueryPrefix:!0,decoder:function(e,t,r,n){return"value"===n?parseFloat(e):e}}),n=r.lat,a=r.lng;this.redirectIfNotPermittedOnPage(),(0,P.isNumber)(n)&&(0,P.isNumber)(a)&&(0,q.reverseGeocode)(n,a).then((function(t){e.globalState.set({position:t,position_coordinates:{type:"Point",coordinates:[a,n]}})}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.authUser,n=t.project;e.project===n&&e.authUser===r||this.redirectIfNotPermittedOnPage()}},{key:"render",value:function(){var e=this.props.project;return(0,E.isNilOrError)(e)?null:y.default.createElement(Z,{id:"e2e-idea-new-page"},y.default.createElement(T.default,null),y.default.createElement(V,{className:"ideaForm"},y.default.createElement(j.default,{onSubmit:this.handleOnIdeaSubmit,projectId:e.id,onTitleChange:this.onTitleChange,onDescriptionChange:this.onDescriptionChange})),y.default.createElement(H,null,y.default.createElement(M.default,{form:"idea-form",onSubmit:this.handleOnIdeaSubmit})))}}]),r}(y.PureComponent),Q=(0,w.adopt)({locale:y.default.createElement(B.default,null),appConfiguration:y.default.createElement(Y.default,null),authUser:y.default.createElement(D.default,null),project:function(e){var t=e.params,r=e.render;return y.default.createElement(R.default,{projectSlug:t.slug},r)},previousPathName:function(e){var t=e.render;return y.default.createElement(C.PreviousPathnameContext.Consumer,null,t)}}),G=(0,O.withRouter)((function(e){return y.default.createElement(Q,e,(function(t){return y.default.createElement(K,(0,l.default)({},e,t))}))}));t.default=G},"2dU8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={titleProfanityError:{name:"Profane idea title blocked"},descriptionProfanityError:{name:"Profane idea description blocked"}}},BjdT:function(e,t,r){"use strict";r("TeQF"),r("2B1R"),r("tkto"),r("pNMO"),r("5DmW"),r("FZtP"),r("27RR");var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.globalState=void 0;var a=n(r("lwsE")),i=n(r("W8MJ")),o=n(r("lSNA")),u=r("DtyJ"),l=r("ahDk"),s=r("T89o"),d=n(r("aTp4"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=new(function(){function e(){var t=this;(0,a.default)(this,e),(0,o.default)(this,"stream",void 0),this.stream={observer:null,observable:null},this.stream.observable=new u.Observable((function(e){t.stream.observer=e})).pipe((0,l.startWith)({}),(0,l.scan)((function(e,t){var r=t.propertyName,n=t.updatedStateProperties;return f(f({},e),{},(0,o.default)({},r,f(f({},e[r]),n)))})),(0,l.filter)((function(e){return(0,s.isObject)(e)&&!(0,s.isEmpty)(e)})),(0,l.publishReplay)(1),(0,l.refCount)()),this.stream.observable.subscribe()}return(0,i.default)(e,[{key:"init",value:function(e,t){var r=this,n=this.stream.observable.pipe((0,l.map)((function(t){return t[e]})),(0,l.filter)((function(e){return(0,s.isObject)(e)&&!(0,s.isEmpty)(e)})),(0,l.distinctUntilChanged)((function(e,t){return(0,d.default)(e,t)}))),a=function(t){return r.set(e,t)};return t&&(0,s.isObject)(t)&&!(0,s.isEmpty)(t)&&(this.stream.observer?a(t):setTimeout((function(){return a(t)}),0)),{observable:n,set:a,get:function(){return r.get(e)}}}},{key:"set",value:function(e,t){this.stream.observer.next({propertyName:e,updatedStateProperties:t})}},{key:"get",value:function(e){return this.stream.observable.pipe((0,l.map)((function(t){return(0,s.has)(t,e)?t[e]:null})),(0,l.first)()).toPromise()}}]),e}());t.globalState=p},NtFe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r("JRPe").defineMessages)({ideaFormTitle:{id:"app.containers.IdeasNewPage.ideaFormTitle",defaultMessage:"Add new idea"},optionFormTitle:{id:"app.containers.IdeasNewPage.optionFormTitle",defaultMessage:"Add new option"},contributionFormTitle:{id:"app.containers.IdeasNewPage.contributionFormTitle",defaultMessage:"Add new contribution"},projectFormTitle:{id:"app.containers.IdeasNewPage.projectFormTitle",defaultMessage:"Add new project"},questionFormTitle:{id:"app.containers.IdeasNewPage.questionFormTitle",defaultMessage:"Add new question"},issueFormTitle:{id:"app.containers.IdeasNewPage.issueFormTitle",defaultMessage:"Add new issue"},submitNewIdea:{id:"app.containers.IdeasNewPage.submitNewIdea",defaultMessage:"Submit"},submitApiError:{id:"app.containers.IdeasNewPage.submitApiError",defaultMessage:"There was an issue submitting the form. Please check for any errors and try again."},or:{id:"app.containers.IdeasNewPage.or",defaultMessage:"Or"},goBack:{id:"app.containers.IdeasNewPage.goBack",defaultMessage:"Go back"},shareViaMessenger:{id:"app.containers.IdeasNewPage.shareViaMessenger",defaultMessage:"Share via Messenger"},shareOnTwitter:{id:"app.containers.IdeasNewPage.shareOnTwitter",defaultMessage:"Share on Twitter"},fileUploadError:{id:"app.containers.IdeasNewPage.fileUploadError",defaultMessage:"A file failed to upload. Please check the file size and format and try again."},ideaNewMetaTitle:{id:"app.containers.IdeasNewPage.ideaNewMetaTitle",defaultMessage:"Add new idea | {projectName}"},optionMetaTitle:{id:"app.containers.IdeasNewPage.optionMetaTitle",defaultMessage:"Add new option | {projectName}"},projectMetaTitle:{id:"app.containers.IdeasNewPage.projectMetaTitle",defaultMessage:"Add new project | {projectName}"},questionMetaTitle:{id:"app.containers.IdeasNewPage.questionMetaTitle",defaultMessage:"Add new question | {projectName}"},issueMetaTitle:{id:"app.containers.IdeasNewPage.issueMetaTitle",defaultMessage:"Add new issue | {projectName}"},contributionMetaTitle:{id:"app.containers.IdeasNewPage.contributionMetaTitle",defaultMessage:"Add new contribution | {projectName}"},ideaNewMetaDescription:{id:"app.containers.IdeasNewPage.ideaNewMetaDescription",defaultMessage:"Post a submission and join the conversation at {orgName}'s participation platform."}});t.default=n},Ta6j:function(e,t,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("FZtP");var i=n(r("o0o1")),o=n(r("yXPU")),u=n(r("lwsE")),l=n(r("W8MJ")),s=n(r("PJYZ")),d=n(r("7W2i")),c=n(r("a1gu")),f=n(r("Nsbk")),p=n(r("lSNA")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r("q1tI")),g=n(r("2fl8")),h=n(r("Zc1O")),b=n(r("lOi7")),v=r("BjdT"),y=r("Rw3A"),w=n(r("NtFe")),P=n(r("IAnr"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var O=n(r("vOnD")).default.div.withConfig({displayName:"IdeasNewButtonBar__ButtonBarInner",componentId:"bi7i69-0"})(["width:100%;max-width:700px;display:flex;align-items:center;padding-right:20px;padding-left:20px;.Button{margin-right:10px;}.Error{flex:1;}"]),N=function(e){(0,d.default)(n,e);var t,r=I(n);function n(e){var t;return(0,u.default)(this,n),t=r.call(this,e),(0,p.default)((0,s.default)(t),"globalState",void 0),(0,p.default)((0,s.default)(t),"subscriptions",void 0),(0,p.default)((0,s.default)(t),"handleOnSubmitButtonClick",(function(){P.default.emit("IdeaFormSubmitEvent")})),(0,p.default)((0,s.default)(t),"getSubmitErrorMessage",(function(){var e=t.state,r=e.fileOrImageError;return e.submitError?m.default.createElement(y.FormattedMessage,w.default.submitApiError):r?m.default.createElement(y.FormattedMessage,w.default.fileUploadError):null})),t.state={submitError:!1,processing:!1,fileOrImageError:!1},t.globalState=v.globalState.init("IdeasNewPage"),t.subscriptions=[],t}return(0,l.default)(n,[{key:"componentDidMount",value:(t=(0,o.default)(i.default.mark((function e(){var t,r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.globalState.observable,this.subscriptions=[t.subscribe((function(e){var t=e.submitError,n=e.processing,a=e.fileOrImageError;r.setState({submitError:t,processing:n,fileOrImageError:a})}))];case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){var e=this.state.processing,t=this.props.form,r=this.getSubmitErrorMessage();return t=t||"",m.default.createElement(b.default,null,m.default.createElement(O,null,m.default.createElement(g.default,{form:t,id:"e2e-idea-new-submit-button",className:"e2e-submit-idea-form",processing:e,text:m.default.createElement(y.FormattedMessage,w.default.submitNewIdea),onClick:this.handleOnSubmitButtonClick}),r&&m.default.createElement(h.default,{text:r,marginTop:"0px",showBackground:!1,showIcon:!0})))}}]),n}(m.PureComponent);t.default=N},adp4:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("pVnL"));r("ma9I");var i=n(r("q1tI")),o=r("qhky"),u=r("ifvJ"),l=r("KLnl"),s=n(r("NtFe")),d=r("Rw3A"),c=n(r("V3HD")),f=r("9FT3"),p=n(r("YLV/")),m=n(r("phbu")),g=n(r("M7uY")),h=n(r("M8tl")),b=n(r("wbnS")),v=n(r("+YyL")),y=r("dtw8"),w=r("DbO4"),P=i.default.memo((function(e){var t=e.authUser,r=e.locales,n=e.project,a=e.localize,u=e.intl.formatMessage,d=e.phases,c=window.location;if(!(0,l.isNilOrError)(n)){var p=a(n.attributes.title_multiloc),m=(0,w.getInputTerm)(n.attributes.process_type,n,d),g=u((0,f.getInputTermMessage)(m,{idea:s.default.ideaNewMetaTitle,option:s.default.optionMetaTitle,project:s.default.projectMetaTitle,question:s.default.questionMetaTitle,issue:s.default.issueMetaTitle,contribution:s.default.contributionMetaTitle}),{projectName:p}),h=u(s.default.ideaNewMetaDescription,{projectName:p});return i.default.createElement(o.Helmet,null,i.default.createElement("title",null,"\n            ".concat(t&&t.attributes.unread_notifications?"(".concat(t.attributes.unread_notifications,") "):"","\n            ").concat(g,"\n          ")),(0,b.default)(r),(0,v.default)(),i.default.createElement("meta",{name:"title",content:g}),i.default.createElement("meta",{name:"description",content:h}),i.default.createElement("meta",{property:"og:title",content:g}),i.default.createElement("meta",{property:"og:description",content:h}),i.default.createElement("meta",{property:"og:url",content:c.href}))}return null})),E=(0,d.injectIntl)((0,c.default)(P)),I=(0,u.adopt)({locales:i.default.createElement(m.default,null),authUser:i.default.createElement(p.default,null),project:function(e){var t=e.params,r=e.render;return i.default.createElement(g.default,{projectSlug:t.slug},r)},phases:function(e){var t=e.project,r=e.render;return i.default.createElement(h.default,{projectId:(0,l.isNilOrError)(t)?null:t.id},r)}}),O=(0,y.withRouter)((function(e){return i.default.createElement(I,e,(function(t){return i.default.createElement(E,(0,a.default)({},e,t))}))}));t.default=O},lOi7:function(e,t,r){"use strict";r("SuFq");var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("lwsE")),i=n(r("W8MJ")),o=n(r("7W2i")),u=n(r("a1gu")),l=n(r("Nsbk")),s=n(r("q1tI")),d=n(r("pQ8y")),c=n(r("vOnD"));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var p=c.default.div.withConfig({displayName:"ButtonBar__ButtonBarContainer",componentId:"sc-1qi5v7k-0"})(["width:100%;height:68px;position:fixed;z-index:2;bottom:0;left:0;right:0;background:#fff;border-top:solid 1px #ddd;&.buttonbar-enter{transform:translateY(64px);&.buttonbar-enter-active{transform:translateY(0);transition:transform ","ms cubic-bezier(0.165,0.84,0.44,1);}}&.buttonbar-exit{transform:translateY(0);&.buttonbar-exit-active{transform:translateY(64px);transition:transform ","ms cubic-bezier(0.165,0.84,0.44,1);}}"],600,600),m=c.default.div.withConfig({displayName:"ButtonBar__Container",componentId:"sc-1qi5v7k-1"})(["width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;"]),g=function(e){(0,o.default)(r,e);var t=f(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return s.default.createElement(d.default,{classNames:"buttonbar",timeout:600},s.default.createElement(p,null,s.default.createElement(m,null,this.props.children)))}}]),r}(s.default.PureComponent);t.default=g},lPdK:function(e,t,r){"use strict";r("SuFq");var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("ToJy"),r("2B1R"),r("TeQF"),r("FZtP");var a=n(r("lwsE")),i=n(r("W8MJ")),o=n(r("PJYZ")),u=n(r("7W2i")),l=n(r("a1gu")),s=n(r("Nsbk")),d=n(r("lSNA")),c=n(r("q1tI")),f=r("T89o"),p=r("DtyJ"),m=r("ahDk"),g=r("Sxt5"),h=r("rltp"),b=r("KLnl");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(r,e);var t=v(r);function r(e){var n;return(0,a.default)(this,r),n=t.call(this,e),(0,d.default)((0,o.default)(n),"inputProps$",void 0),(0,d.default)((0,o.default)(n),"subscriptions",void 0),n.state={topics:void 0},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.topicIds,n=t.code,a=t.exclude_code,i=t.sort,o=t.projectId;this.inputProps$=new p.BehaviorSubject({topicIds:r,code:n,exclude_code:a,sort:i,projectId:o}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(e,t){return(0,f.isEqual)(e,t)})),(0,m.switchMap)((function(e){var t=e.topicIds,r=e.code,n=e.exclude_code,a=e.sort,i=e.projectId,o={code:r,exclude_code:n,sort:a};return i?(0,h.projectTopicsStream)(i).observable.pipe((0,m.map)((function(e){return e.data.filter((function(e){return e})).map((function(e){return e.relationships.topic.data.id}))})),(0,m.switchMap)((function(e){return(0,p.combineLatest)(e.map((function(e){return(0,g.topicByIdStream)(e).observable.pipe((0,m.map)((function(e){return(0,b.isNilOrError)(e)?e:e.data})))})))}))):t?t.length>0?(0,p.combineLatest)(t.map((function(e){return(0,g.topicByIdStream)(e).observable.pipe((0,m.map)((function(e){return(0,b.isNilOrError)(e)?e:e.data})))}))):(0,p.of)(null):(0,g.topicsStream)({queryParameters:o}).observable.pipe((0,m.map)((function(e){return e.data})))}))).subscribe((function(t){e.setState({topics:t})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.topicIds,r=e.code,n=e.exclude_code,a=e.sort,i=e.projectId;this.inputProps$.next({topicIds:t,code:r,exclude_code:n,sort:a,projectId:i})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.topics)}}]),r}(c.default.Component);t.default=y},myd5:function(e,t,r){"use strict";r("SuFq"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ"),r("5DmW");var n=r("TqRt"),a=r("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("o0o1"));r("pNMO"),r("4Brf"),r("FZtP");var o,u,l=n(r("pVnL")),s=n(r("yXPU")),d=n(r("lwsE")),c=n(r("W8MJ")),f=n(r("PJYZ")),p=n(r("7W2i")),m=n(r("a1gu")),g=n(r("Nsbk")),h=n(r("lSNA")),b=n(r("VkAN")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r("q1tI")),y=r("ifvJ"),w=r("KLnl"),P=n(r("i59K")),E=n(r("M7uY")),I=n(r("M8tl")),O=r("BjdT"),N=r("DbO4"),M=r("Rw3A"),j=n(r("NtFe")),T=r("9FT3"),x=r("96Cm"),_=n(r("vOnD"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,g.default)(e);if(t){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var F=_.default.div.withConfig({displayName:"NewIdeaForm__Container",componentId:"calw9g-0"})(["width:100%;max-width:700px;display:'flex';flex-direction:column;align-items:center;padding-bottom:100px;padding-right:20px;padding-left:20px;margin-left:auto;margin-right:auto;",""],x.media.smallerThanMaxTablet(o||(o=(0,b.default)(["\n    padding-bottom: 80px;\n    padding-right: 0;\n    padding-left: 0;\n  "])))),B=_.default.h1.withConfig({displayName:"NewIdeaForm__Title",componentId:"calw9g-1"})(["color:",";font-size:","px;line-height:40px;font-weight:500;text-align:center;margin:0;padding:0;padding-top:60px;padding-bottom:40px;",""],(function(e){return e.theme.colorText}),x.fontSizes.xxxxl,x.media.smallerThanMaxTablet(u||(u=(0,b.default)(["\n    font-size: ","px;\n    line-height: 34px;\n  "])),x.fontSizes.xxxl)),D=function(e){(0,p.default)(r,e);var t=S(r);function r(e){var n;return(0,d.default)(this,r),n=t.call(this,e),(0,h.default)((0,f.default)(n),"globalState",void 0),(0,h.default)((0,f.default)(n),"subscriptions",void 0),(0,h.default)((0,f.default)(n),"handleIdeaFormOutput",function(){var e=(0,s.default)(i.default.mark((function e(t){var r,a,o,u,l,s,d,c,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.title,a=t.description,o=t.selectedTopics,u=t.budget,l=t.proposedBudget,s=t.address,d=t.imageFile,c=t.ideaFiles,f=t.authorId,n.globalState.set({title:r,description:a,selectedTopics:o,budget:u,proposedBudget:l,position:s,imageFile:d,ideaFiles:c,authorId:f}),n.props.onSubmit();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.state={title:null,authorId:null,description:null,selectedTopics:[],budget:null,proposedBudget:null,position:"",imageFile:[],submitError:!1,processing:!1,fileOrImageError:!1,titleProfanityError:!1,descriptionProfanityError:!1},n.globalState=O.globalState.init("IdeasNewPage"),n.subscriptions=[],n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.globalState.observable;this.subscriptions=[t.subscribe((function(t){var r={title:t.title,description:t.description,selectedTopics:t.selectedTopics,budget:t.budget,proposedBudget:t.proposedBudget,position:t.position,imageFile:t.imageFile,submitError:t.submitError,processing:t.processing,fileOrImageError:t.fileOrImageError,titleProfanityError:t.titleProfanityError,descriptionProfanityError:t.descriptionProfanityError,authorId:t.authorId};e.setState(r)}))]}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){var e=this.state,t=e.title,r=e.description,n=e.selectedTopics,a=e.budget,i=e.proposedBudget,o=e.position,u=e.imageFile,l=e.titleProfanityError,s=e.descriptionProfanityError,d=e.authorId,c=this.props,f=c.projectId,p=c.project,m=c.phases,g=c.onTitleChange,h=c.onDescriptionChange;if(!(0,w.isNilOrError)(p)){var b=(0,N.getInputTerm)(p.attributes.process_type,p,m);return v.default.createElement(F,{id:"e2e-new-idea-form"},v.default.createElement(B,{className:"e2e-idea-form-title"},v.default.createElement(M.FormattedMessage,(0,T.getInputTermMessage)(b,{idea:j.default.ideaFormTitle,option:j.default.optionFormTitle,project:j.default.projectFormTitle,question:j.default.questionFormTitle,issue:j.default.issueFormTitle,contribution:j.default.contributionFormTitle}))),v.default.createElement(P.default,{authorId:d,projectId:f,title:t,description:r,selectedTopics:n,budget:a,proposedBudget:i,address:o,imageFile:u,hasTitleProfanityError:l,hasDescriptionProfanityError:s,onSubmit:this.handleIdeaFormOutput,onTitleChange:g,onDescriptionChange:h}))}return null}}]),r}(v.PureComponent),R=(0,y.adopt)({project:function(e){var t=e.projectId,r=e.render;return v.default.createElement(E.default,{projectId:t},r)},phases:function(e){var t=e.projectId,r=e.render;return v.default.createElement(I.default,{projectId:t},r)}});t.default=function(e){return v.default.createElement(R,e,(function(t){return v.default.createElement(D,(0,l.default)({},e,t))}))}}}]);
//# sourceMappingURL=95.78720ce4ba70eff8be40.chunk.js.map