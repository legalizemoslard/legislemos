(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{Borq:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.updateProjectFolderMembership=function(e,t,a){return s.apply(this,arguments)};var n=r(a("o0o1"));a("ma9I"),a("TeQF");var o=r(a("yXPU")),d=r(a("1Kqg")),i=a("p0gT"),l="".concat(i.API_PATH,"/projects");function s(){return(s=(0,o.default)(n.default.mark((function e(t,a,r){var o;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.update("".concat(l,"/").concat(t),t,{project:{folder_id:a}});case 2:return o=e.sent,e.next=5,d.default.fetchAllWith({dataId:[a,r].filter((function(e){return e})),apiEndpoint:["".concat(i.API_PATH,"/admin_publications"),"".concat(i.API_PATH,"/projects")]});case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},QRcb:function(e,t,a){"use strict";a("SuFq");var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("FZtP");var n=r(a("lwsE")),o=r(a("W8MJ")),d=r(a("PJYZ")),i=r(a("7W2i")),l=r(a("a1gu")),s=r(a("Nsbk")),u=r(a("lSNA")),c=r(a("q1tI")),p=a("T89o"),f=a("DtyJ"),m=a("ahDk"),g=a("KLnl"),h=r(a("aTp4")),F=a("bsSu");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,i.default)(a,e);var t=b(a);function a(e){var r;return(0,n.default)(this,a),r=t.call(this,e),(0,u.default)((0,d.default)(r),"inputProps$",void 0),(0,u.default)((0,d.default)(r),"subscriptions",void 0),r.state={projectFolder:void 0},r}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.projectFolderId,r=t.projectFolderSlug,n=t.resetOnChange;this.inputProps$=new f.BehaviorSubject({projectFolderId:a,projectFolderSlug:r}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(e,t){return(0,h.default)(e,t)})),(0,m.tap)((function(){return n&&e.setState({projectFolder:void 0})})),(0,m.switchMap)((function(e){var t=e.projectFolderId,a=e.projectFolderSlug;return(0,p.isString)(t)?(0,F.projectFolderByIdStream)(t).observable:(0,p.isString)(a)?(0,F.projectFolderBySlugStream)(a).observable:(0,f.of)(null)}))).subscribe((function(t){e.setState({projectFolder:(0,g.isNilOrError)(t)?t:t.data})}))]}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.projectFolderId,a=e.projectFolderSlug;this.inputProps$.next({projectFolderId:t,projectFolderSlug:a})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.projectFolder)}}]),a}(c.default.Component);t.default=v,(0,u.default)(v,"defaultProps",{resetOnChange:!0})},t8zC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a("JRPe").defineMessages)({titleSettingsTab:{id:"app.containers.AdminPage.FoldersEdit.titleSettingsTab",defaultMessage:"Settings"},subtitleSettingsTab:{id:"app.containers.AdminPage.FoldersEdit.subtitleSettingsTab",defaultMessage:"Explain why grouped project belong together, define a visual identity, expose shared information."},viewPublicProjectFolder:{id:"app.containers.AdminPage.FoldersEdit.viewPublicProjectFolder",defaultMessage:"View Folder"},projectFolderSettingsTab:{id:"app.containers.AdminPage.FoldersEdit.projectFolderSettingsTab",defaultMessage:"Settings"},projectFolderPermissionsTab:{id:"app.containers.AdminPage.FoldersEdit.projectFolderPermissionsTab",defaultMessage:"Permissions"},projectFolderProjectsTab:{id:"app.containers.AdminPage.FoldersEdit.projectFolderProjectsTab",defaultMessage:"Projects"},titleInputLabel:{id:"app.containers.AdminPage.FoldersEdit.titleInputLabel",defaultMessage:"Title"},shortDescriptionInputLabel:{id:"app.containers.AdminPage.FoldersEdit.shortDescriptionInputLabel",defaultMessage:"Short description"},shortDescriptionInputLabelTooltip:{id:"app.containers.AdminPage.FoldersEdit.shortDescriptionInputLabelTooltip",defaultMessage:"shown in the landing page"},descriptionInputLabel:{id:"app.containers.AdminPage.FoldersEdit.descriptionInputLabel",defaultMessage:"Description"},headerImageInputLabel:{id:"app.containers.AdminPage.FoldersEdit.headerImageInputLabel",defaultMessage:"Header image"},projectFolderHeaderImageLabelTooltip:{id:"app.containers.AdminPage.ProjectEdit.projectFolderHeaderImageLabelTooltip",defaultMessage:"This is the image displayed in the header on the folder page. The ideal dimensions for this image are a width between 1480 and 1280 pixels, and a height of 250 pixels."},projectFolderCardImageLabel:{id:"app.containers.AdminPage.FoldersEdit.projectFolderCardImageLabel",defaultMessage:"Folder card image"},projectFolderCardImageTooltip:{id:"app.containers.AdminPage.ProjectEdit.projectFolderCardImageTooltip",defaultMessage:"This is the image displayed in the folder card. The ideal dimensions for this image are a width of 1440 pixels and a height between 1440 and 720 pixels."},save:{id:"app.containers.AdminPage.FoldersEdit.save",defaultMessage:"Save"},saveSuccess:{id:"app.containers.AdminPage.FoldersEdit.saveSuccess",defaultMessage:"Success!"},saveErrorMessage:{id:"app.containers.AdminPage.FoldersEdit.saveErrorMessage",defaultMessage:"Something went wrong, please try again later."},multilocError:{id:"app.containers.AdminPage.FoldersEdit.multilocError",defaultMessage:"All text fields must be fully filled in."},saveSuccessMessage:{id:"app.containers.AdminPage.FoldersEdit.saveSuccessMessage",defaultMessage:"Your changes have been saved."},titleNewFolder:{id:"app.containers.AdminPage.FoldersEdit.titleNewFolder",defaultMessage:"Create a new folder"},subtitleNewFolder:{id:"app.containers.AdminPage.FoldersEdit.subtitleNewFolder",defaultMessage:"Explain why grouped project belong together, define a visual identity, expose shared information."},projectsAlreadyAdded:{id:"app.containers.AdminPage.FoldersEdit.projectsAlreadyAdded",defaultMessage:"Projects added to this folder"},projectsYouCanAdd:{id:"app.containers.AdminPage.FoldersEdit.projectsYouCanAdd",defaultMessage:"Projects you can add to this folder"},folderEmptyGoBackToAdd:{id:"app.containers.AdminPage.FoldersEdit.folderEmptyGoBackToAdd",defaultMessage:"There are no projects in this folder. Go back to the main Projects tab to create and add projects."},addToFolder:{id:"app.containers.AdminPage.FoldersEdit.addToFolder",defaultMessage:"Add to folder"},removeFromFolder:{id:"app.containers.AdminPage.FoldersEdit.removeFromFolder",defaultMessage:"Remove from folder"},deleteFolderLabel:{id:"app.containers.AdminPage.FoldersEdit.deleteFolderLabel",defaultMessage:"Delete this folder"},noProjectsToAdd:{id:"app.containers.AdminPage.FoldersEdit.noProjectsToAdd",defaultMessage:"There are no projects that you can add to this folder."},fileUploadLabel:{id:"app.containers.AdminPage.FoldersEdit.fileUploadLabel",defaultMessage:"Add files to this folder"},fileUploadLabelTooltip:{id:"app.containers.AdminPage.FoldersEdit.fileUploadLabelTooltip",defaultMessage:"Files should not be larger than 50Mb. Added files will be shown on the folder page."},statusLabel:{id:"app.containers.AdminPage.FoldersEdit.statusLabel",defaultMessage:"Publication status"},publicationStatusTooltip:{id:"app.containers.AdminPage.FoldersEdit.publicationStatusTooltip",defaultMessage:'Choose whether this folder is "draft", "published" or "archived".'},draftStatus:{id:"app.containers.AdminPage.FoldersEdit.draftStatus",defaultMessage:"Draft"},publishedStatus:{id:"app.containers.AdminPage.FoldersEdit.publishedStatus",defaultMessage:"Published"},archivedStatus:{id:"app.containers.AdminPage.FoldersEdit.archivedStatus",defaultMessage:"Archived"}});t.default=r},xaX9:function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var r=a("TqRt"),n=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a("o0o1"));a("ma9I"),a("TeQF"),a("2B1R"),a("yq1k"),a("JTJg");var d=r(a("pVnL")),i=r(a("RIqP")),l=r(a("yXPU")),s=r(a("lwsE")),u=r(a("W8MJ")),c=r(a("PJYZ")),p=r(a("7W2i")),f=r(a("a1gu")),m=r(a("Nsbk")),g=r(a("lSNA")),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if("default"!==d&&Object.prototype.hasOwnProperty.call(e,d)){var i=o?Object.getOwnPropertyDescriptor(e,d):null;i&&(i.get||i.set)?Object.defineProperty(r,d,i):r[d]=e[d]}r.default=e,a&&a.set(e,r);return r}(a("q1tI")),F=a("KLnl"),b=a("ifvJ"),v=a("dtw8"),P=a("Borq"),j=a("18VM"),E=r(a("QRcb")),A=r(a("mkW1")),y=r(a("YLV/")),M=a("Rw3A"),w=r(a("t8zC")),T=a("gzy/"),S=a("/8IE"),I=r(a("4q64")),L=r(a("vOnD")),R=a("9vBb");function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=L.default.div.withConfig({displayName:"projects__Container",componentId:"sc-9u742m-0"})(["min-height:60vh;"]),C=L.default.div.withConfig({displayName:"projects__ListsContainer",componentId:"sc-9u742m-1"})([""]),O=L.default.div.withConfig({displayName:"projects__ListHeader",componentId:"sc-9u742m-2"})(["display:flex;align-items:center;justify-content:flex-start;margin-bottom:25px;&:not(:first-child){margin-top:70px;}& + &{margin-top:30px;}"]),D=(0,L.default)(S.HeaderTitle).withConfig({displayName:"projects__StyledHeaderTitle",componentId:"sc-9u742m-3"})(["font-weight:bold;"]),N=L.default.div.withConfig({displayName:"projects__Spacer",componentId:"sc-9u742m-4"})(["flex:1;"]),B=function(e){(0,p.default)(a,e);var t=x(a);function a(e){var r;return(0,s.default)(this,a),r=t.call(this,e),(0,g.default)((0,c.default)(r),"handleReorder",(function(e,t){(0,R.reorderAdminPublication)(e,t)})),(0,g.default)((0,c.default)(r),"addProjectToFolder",(function(e){return function(t){return(0,l.default)(o.default.mark((function a(){return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.setState((function(e){var a=e.processing;return{processing:[].concat((0,i.default)(a),[t])}})),a.next=3,(0,P.updateProjectFolderMembership)(t,e);case 3:r.setState((function(e){return{processing:e.processing.filter((function(e){return e!==t}))}}));case 4:case"end":return a.stop()}}),a)})))}})),(0,g.default)((0,c.default)(r),"removeProjectFromFolder",(function(e){return function(t){return(0,l.default)(o.default.mark((function a(){return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.setState((function(e){var a=e.processing;return{processing:[].concat((0,i.default)(a),[t])}})),a.next=3,(0,P.updateProjectFolderMembership)(t,null,e);case 3:r.setState((function(e){return{processing:e.processing.filter((function(e){return e!==t}))}}));case 4:case"end":return a.stop()}}),a)})))}})),r.state={processing:[]},r}return(0,u.default)(a,[{key:"render",value:function(){var e,t=this,a=this.props,r=a.adminPublications,n=a.authUser,o=a.projectFolder,d=this.state.processing,i=r.list,l=n&&(0,j.isAdmin)({data:n});if((0,F.isNilOrError)(o))return null;var s=r.childrenOf({id:null===(e=o.relationships.admin_publication.data)||void 0===e?void 0:e.id}),u=(0,F.isNilOrError)(i)?null:i.filter((function(e){return"project"===e.publicationType&&0===e.attributes.depth})),c=o.id;return h.default.createElement(k,null,h.default.createElement(C,null,h.default.createElement(O,null,h.default.createElement(D,null,h.default.createElement(M.FormattedMessage,w.default.projectsAlreadyAdded)),h.default.createElement(N,null)),!(0,F.isNilOrError)(s)&&s.length>0?h.default.createElement(T.SortableList,{key:"IN_FOLDER_LIST".concat(s.length),items:s,onReorder:this.handleReorder,className:"projects-list e2e-admin-folder-projects-list",id:"e2e-admin-folders-projects-list"},(function(e){var a=e.itemsList,r=e.handleDragRow,n=e.handleDropRow;return h.default.createElement(h.default.Fragment,null,a.map((function(e,o){return h.default.createElement(T.SortableRow,{key:e.id,id:e.id,index:o,moveRow:r,dropRow:n,lastItem:o===a.length-1},h.default.createElement(I.default,{publication:e,actions:l?[{buttonContent:h.default.createElement(M.FormattedMessage,w.default.removeFromFolder),handler:t.removeProjectFromFolder(c),icon:"remove",processing:d.includes(e.publicationId)},"manage"]:["manage"]}))})))})):h.default.createElement(M.FormattedMessage,w.default.folderEmptyGoBackToAdd),l&&h.default.createElement(h.default.Fragment,null,h.default.createElement(O,null,h.default.createElement(D,null,h.default.createElement(M.FormattedMessage,w.default.projectsYouCanAdd))),u?h.default.createElement(T.List,null,h.default.createElement(h.default.Fragment,null,u.map((function(e,a){return h.default.createElement(T.Row,{id:e.id,isLastItem:a===u.length-1,key:e.id},h.default.createElement(I.default,{publication:e,actions:[{buttonContent:h.default.createElement(M.FormattedMessage,w.default.addToFolder),handler:t.addProjectToFolder(c),processing:d.includes(e.publicationId),icon:"plus-circle"}]}))})))):h.default.createElement(M.FormattedMessage,w.default.noProjectsToAdd))))}}]),a}(h.Component),q=["draft","archived","published"],J=(0,b.adopt)({authUser:h.default.createElement(y.default,null),projectFolder:function(e){var t=e.params,a=e.render;return h.default.createElement(E.default,{projectFolderId:t.projectFolderId},a)},adminPublications:function(e){var t=e.render;return h.default.createElement(A.default,{publicationStatusFilter:q},t)}}),U=(0,v.withRouter)((function(e){return h.default.createElement(J,e,(function(t){return h.default.createElement(B,(0,d.default)({},e,t))}))}));t.default=U}}]);
//# sourceMappingURL=141.c2e724881e988bf85ff0.chunk.js.map