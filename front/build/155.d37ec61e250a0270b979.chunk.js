(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{"49vD":function(t,e,r){"use strict";r("TeQF"),r("SuFq");var n=r("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("FZtP");var u=n(r("lwsE")),i=n(r("W8MJ")),a=n(r("PJYZ")),o=n(r("7W2i")),c=n(r("a1gu")),l=n(r("Nsbk")),f=n(r("lSNA")),s=n(r("q1tI")),d=r("T89o"),p=r("DtyJ"),m=r("ahDk"),v=n(r("aTp4")),h=r("ghxK"),b=r("KLnl");function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,l.default)(t);if(e){var u=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var g=function(t){(0,o.default)(r,t);var e=y(r);function r(t){var n;return(0,u.default)(this,r),n=e.call(this,t),(0,f.default)((0,a.default)(n),"inputProps$",void 0),(0,f.default)((0,a.default)(n),"subscriptions",void 0),n.state={campaign:void 0},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.id;this.inputProps$=new p.BehaviorSubject({id:e}),this.subscriptions=[this.inputProps$.pipe((0,m.distinctUntilChanged)((function(t,e){return(0,v.default)(t,e)})),(0,m.filter)((function(t){var e=t.id;return(0,d.isString)(e)})),(0,m.switchMap)((function(t){var e=t.id;return(0,h.campaignByIdStream)(e).observable}))).subscribe((function(e){return t.setState({campaign:(0,b.isNilOrError)(e)?e:e.data})}))]}},{key:"componentDidUpdate",value:function(){var t=this.props.id;this.inputProps$.next({id:t})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(this.state.campaign)}}]),r}(s.default.Component);e.default=g},qdmR:function(t,e,r){"use strict";r("SuFq"),r("tkto"),r("pNMO"),r("TeQF"),r("5DmW"),r("FZtP"),r("27RR"),r("4mDm"),r("07d7"),r("PKPk"),r("ENF9"),r("3bBZ");var n=r("TqRt"),u=r("cDf5");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("ma9I"),r("2B1R");var i=n(r("pVnL")),a=n(r("lwsE")),o=n(r("W8MJ")),c=n(r("PJYZ")),l=n(r("7W2i")),f=n(r("a1gu")),s=n(r("Nsbk")),d=n(r("lSNA")),p=R(r("q1tI")),m=r("ghxK"),v=n(r("JUYq")),h=n(r("y5tA")),b=R(r("dAIm")),y=r("KYPV"),g=r("Rw3A"),O=n(r("bd4U")),P=r("dtw8"),w=n(r("49vD")),j=r("KLnl"),k=r("88OY");function E(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(E=function(t){return t?r:e})(t)}function R(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==u(t)&&"function"!=typeof t)return{default:t};var r=E(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){(0,d.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.default)(t);if(e){var u=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var F=function(t){(0,l.default)(r,t);var e=_(r);function r(){var t;(0,a.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return t=e.call.apply(e,[this].concat(u)),(0,d.default)((0,c.default)(t),"handleSubmit",(function(e,r){var n=r.setErrors,u=r.setSubmitting,i=r.setStatus;(0,m.updateCampaign)(t.props.campaign.id,D({},e)).then((function(){v.default.push("/admin/emails/custom/".concat(t.props.campaign.id))})).catch((function(t){if((0,k.isCLErrorJSON)(t)){var e=t.json.errors;n(e)}else i("error");u(!1)}))})),(0,d.default)((0,c.default)(t),"initialValues",(function(){var e=t.props.campaign;return{sender:e.attributes.sender,reply_to:e.attributes.reply_to,subject_multiloc:e.attributes.subject_multiloc,body_multiloc:e.attributes.body_multiloc,group_ids:e.relationships.groups.data.map((function(t){return t.id}))}})),(0,d.default)((0,c.default)(t),"renderFn",(function(t){return p.createElement(b.default,(0,i.default)({},t,{mode:"edit"}))})),(0,d.default)((0,c.default)(t),"goBack",(function(){var e=t.props.campaign.id;v.default.push("/admin/emails/custom/".concat(e))})),t}return(0,o.default)(r,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(h.default,{onClick:this.goBack}),p.createElement(b.PageTitle,null,p.createElement(g.FormattedMessage,O.default.editCampaignTitle)),p.createElement(y.Formik,{initialValues:this.initialValues(),onSubmit:this.handleSubmit,render:this.renderFn,validate:b.validateCampaignForm}))}}]),r}(p.Component),M=(0,P.withRouter)(F);e.default=function(t){return p.createElement(w.default,{id:t.params.campaignId},(function(e){return(0,j.isNilOrError)(e)?null:p.createElement(M,(0,i.default)({},t,{campaign:e}))}))}}}]);
//# sourceMappingURL=155.d37ec61e250a0270b979.chunk.js.map