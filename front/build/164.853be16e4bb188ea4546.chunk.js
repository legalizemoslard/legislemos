(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{A3D5:function(e,t,a){"use strict";a("SuFq"),a("4mDm"),a("07d7"),a("PKPk"),a("ENF9"),a("3bBZ"),a("5DmW");var s=a("TqRt"),r=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("o0o1"));a("2B1R"),a("tkto");var o=s(a("pVnL")),l=s(a("yXPU")),u=s(a("lwsE")),i=s(a("W8MJ")),d=s(a("PJYZ")),c=s(a("7W2i")),p=s(a("a1gu")),f=s(a("Nsbk")),m=s(a("lSNA")),w=s(a("q1tI")),h=a("ifvJ"),g=a("T89o"),P=a("KLnl"),v=s(a("JUYq")),y=s(a("jWBj")),E=a("iP56"),b=s(a("2fl8")),R=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=D(t);if(a&&a.has(e))return a.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(s,o,l):s[o]=e[o]}s.default=e,a&&a.set(e,s);return s}(a("GvAF")),x=s(a("LARv")),k=a("qhky"),M=s(a("Dko/")),_=a("OUuu"),O=s(a("Zc1O")),S=a("x303"),I=a("Rw3A"),C=s(a("vOnD")),L=s(a("zB0l")),N=a("96Cm"),j=s(a("yYlr"));function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(D=function(e){return e?a:t})(e)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,s=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(s,arguments,r)}else a=s.apply(this,arguments);return(0,p.default)(this,a)}}var B=C.default.div.withConfig({displayName:"PasswordReset__Container",componentId:"sc-16unitr-0"})(["width:100%;min-height:calc( 100vh - ","px );background:",";"],(function(e){return e.theme.menuHeight+e.theme.footerHeight}),N.colors.background),F=(0,C.default)(M.default).withConfig({displayName:"PasswordReset__StyledContentContainer",componentId:"sc-16unitr-1"})(["padding-bottom:100px;"]),J=C.default.h1.withConfig({displayName:"PasswordReset__Title",componentId:"sc-16unitr-2"})(["width:100%;color:#333;font-size:","px;line-height:40px;font-weight:500;text-align:center;margin:0;padding:0;padding-top:60px;margin-bottom:50px;"],N.fontSizes.xxxxl),T=(0,C.default)(b.default).withConfig({displayName:"PasswordReset__StyledButton",componentId:"sc-16unitr-3"})(["margin-top:20px;margin-bottom:10px;"]),W=C.default.form.withConfig({displayName:"PasswordReset__Form",componentId:"sc-16unitr-4"})(["width:100%;max-width:380px;padding-left:20px;padding-right:20px;margin-left:auto;margin-right:auto;display:flex;flex-direction:column;"]),z=C.default.div.withConfig({displayName:"PasswordReset__LabelContainer",componentId:"sc-16unitr-5"})(["display:flex;align-items:center;"]),A=(0,C.default)(_.FormLabel).withConfig({displayName:"PasswordReset__StyledFormLabel",componentId:"sc-16unitr-6"})(["width:max-content;margin-right:5px;"]),Y=(0,C.default)(x.default).withConfig({displayName:"PasswordReset__StyledPasswordIconTooltip",componentId:"sc-16unitr-7"})(["margin-bottom:6px;"]),H=function(e){(0,c.default)(a,e);var t=q(a);function a(e){var s;(0,u.default)(this,a),s=t.call(this,e),(0,m.default)((0,d.default)(s),"passwordInputElement",void 0),(0,m.default)((0,d.default)(s),"hasPasswordMinimumLengthError",(function(){var e,t=s.props.tenant,a=s.state.password;return"string"!=typeof a||(0,R.hasPasswordMinimumLength)(a,(0,P.isNilOrError)(t)||null===(e=t.attributes.settings.password_login)||void 0===e?void 0:e.minimum_length)})),(0,m.default)((0,d.default)(s),"validate",(function(){var e=s.hasPasswordMinimumLengthError();return s.setState({minimumLengthError:e}),s.passwordInputElement&&e&&s.passwordInputElement.focus(),!e})),(0,m.default)((0,d.default)(s),"handlePasswordOnChange",(function(e){s.setState({password:e,minimumLengthError:!1,submitError:!1,apiErrors:null})})),(0,m.default)((0,d.default)(s),"handlePasswordInputSetRef",(function(e){s.passwordInputElement=e})),(0,m.default)((0,d.default)(s),"handleOnSubmit",function(){var e=(0,l.default)(n.default.mark((function e(t){var a,r,o,l,u,i,d;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.state,r=a.password,o=a.token,t.preventDefault(),!(s.validate()&&r&&o)){e.next=17;break}return e.prev=3,s.setState({processing:!0,success:!1}),e.next=7,(0,S.resetPassword)(r,o);case 7:s.setState({password:null,processing:!1,success:!0}),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(3),l=e.t0.json.errors,(u=l.token)&&u.length>0&&-1!==(i=u.map((function(e){return e.error})).indexOf("invalid"))&&(u[i].payload={passwordResetLink:w.default.createElement(y.default,{to:"/password-recovery"},w.default.createElement(I.FormattedMessage,L.default.requestNewPasswordReset))}),Object.keys(l).length>0&&(null===(d=s.passwordInputElement)||void 0===d||d.focus()),s.setState({apiErrors:l,processing:!1,success:!1,submitError:!0});case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}());var r=v.default.getCurrentLocation().query,o=(0,g.isString)(r.token)?r.token:null;return s.state={token:o,password:null,minimumLengthError:!1,submitError:!1,processing:!1,success:!1,apiErrors:null},s.passwordInputElement=null,s}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this.state.token;(0,g.isString)(e)?this.passwordInputElement&&this.passwordInputElement.focus():v.default.push("/")}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.state,a=t.password,s=t.processing,r=t.success,n=t.apiErrors,o=t.minimumLengthError,l=e(L.default.helmetTitle),u=e(L.default.helmetDescription),i=e(L.default.title),d=e(L.default.passwordPlaceholder),c=e(L.default.updatePassword),p=r?e(L.default.successMessage):null;return w.default.createElement(B,null,w.default.createElement(k.Helmet,{title:l,meta:[{name:"description",content:u}]}),w.default.createElement("main",null,w.default.createElement(F,null,w.default.createElement(J,null,i),w.default.createElement(W,{onSubmit:this.handleOnSubmit},w.default.createElement(z,null,w.default.createElement(A,{labelMessage:L.default.passwordLabel,htmlFor:"password-reset-input"}),w.default.createElement(Y,null)),w.default.createElement(R.default,{id:"password",password:a,placeholder:d,onChange:this.handlePasswordOnChange,setRef:this.handlePasswordInputSetRef,errors:{minimumLengthError:o}}),n&&Object.keys(n).map((function(e){return w.default.createElement(O.default,{key:e,apiErrors:n[e],fieldName:e})})),w.default.createElement(T,{size:"2",processing:s,text:c,onClick:this.handleOnSubmit}),w.default.createElement(E.Success,{text:p})))))}}]),a}(w.default.PureComponent),U=(0,I.injectIntl)(H),Z=(0,h.adopt)({tenant:w.default.createElement(j.default,null)});t.default=function(e){return w.default.createElement(Z,null,(function(t){return w.default.createElement(U,(0,o.default)({},e,t))}))}},zB0l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a("JRPe").defineMessages)({helmetTitle:{id:"app.containers.PasswordReset.helmetTitle",defaultMessage:"Reset your password"},helmetDescription:{id:"app.containers.PasswordReset.helmetDescription",defaultMessage:"Reset your password page"},title:{id:"app.containers.PasswordReset.title",defaultMessage:"Reset your password"},passwordPlaceholder:{id:"app.containers.PasswordReset.passwordPlaceholder",defaultMessage:"New password"},passwordLabel:{id:"app.containers.PasswordReset.passwordLabel",defaultMessage:"Password"},passwordError:{id:"app.containers.PasswordReset.passwordError",defaultMessage:"Your password must contain at least 8 characters"},submitError:{id:"app.containers.PasswordReset.submitError",defaultMessage:"Something went wrong. Please try again later."},successMessage:{id:"app.containers.PasswordReset.successMessage",defaultMessage:"Your password has been successfully updated"},updatePassword:{id:"app.containers.PasswordReset.updatePassword",defaultMessage:"Confirm new password"},requestNewPasswordReset:{id:"app.containers.PasswordReset.requestNewPasswordReset",defaultMessage:"Request a new password reset"}});t.default=s}}]);
//# sourceMappingURL=164.853be16e4bb188ea4546.chunk.js.map