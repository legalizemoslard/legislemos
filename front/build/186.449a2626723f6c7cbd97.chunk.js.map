{"version":3,"sources":["webpack:///./app/modules/commercial/project_folders/permissions/rules.ts"],"names":["definePermissionRule","item","user","tenant","canAccessRoute","isAdminRoute","isProjectFolderModerator","data","MODERATOR_ROUTES","includes","path","_folder","isAdmin","folder","moderatesFolder","id"],"mappings":"iHACA,gBAIA,YACA,YACA,aAqBA,IAAAA,sBAAqB,QAAS,UAbQ,SACpCC,EACAC,EACAC,GAEA,OACE,IAAAC,gBAAeH,EAAMC,EAAMC,KAC1B,IAAAE,cAAaJ,MACXC,IAAO,IAAAI,0BAAyBJ,EAAKK,OACtCC,mBAAiBC,SAASR,EAAKS,UAMrC,IAAAV,sBACE,iBACA,UACA,SAACW,EAA6BT,GAC5B,OAAO,IAAAU,SAAQV,OAInB,IAAAF,sBACE,iBACA,UACA,SAACW,EAA6BT,GAC5B,OAAO,IAAAU,SAAQV,OAInB,IAAAF,sBACE,iBACA,WACA,SAACW,EAA6BT,GAC5B,OAAO,IAAAU,SAAQV,OAInB,IAAAF,sBACE,iBACA,YACA,SAACa,EAA4BX,GAC3B,OAAO,IAAAY,iBAAgBZ,EAAKK,KAAMM,EAAOE","file":"186.449a2626723f6c7cbd97.chunk.js","sourcesContent":["import { IProjectFolderData } from './../services/projectFolders';\nimport {\n  definePermissionRule,\n  IRouteItem,\n} from 'services/permissions/permissions';\nimport { isProjectFolderModerator, moderatesFolder } from './roles';\nimport { isAdmin } from 'services/permissions/roles';\nimport {\n  canAccessRoute,\n  isAdminRoute,\n  MODERATOR_ROUTES,\n} from 'services/permissions/rules/routePermissions';\nimport { IUser } from 'services/users';\nimport { IAppConfigurationData } from 'services/appConfiguration';\n\nconst canUserAccessAdminFolderRoute = (\n  item: IRouteItem,\n  user: IUser | null,\n  tenant: IAppConfigurationData\n) => {\n  return (\n    canAccessRoute(item, user, tenant) ||\n    (isAdminRoute(item) &&\n      (user ? isProjectFolderModerator(user.data) : false) &&\n      MODERATOR_ROUTES.includes(item.path))\n  );\n};\n\ndefinePermissionRule('route', 'access', canUserAccessAdminFolderRoute);\n\ndefinePermissionRule(\n  'project_folder',\n  'create',\n  (_folder: IProjectFolderData, user: IUser) => {\n    return isAdmin(user);\n  }\n);\n\ndefinePermissionRule(\n  'project_folder',\n  'delete',\n  (_folder: IProjectFolderData, user: IUser) => {\n    return isAdmin(user);\n  }\n);\n\ndefinePermissionRule(\n  'project_folder',\n  'reorder',\n  (_folder: IProjectFolderData, user: IUser) => {\n    return isAdmin(user);\n  }\n);\n\ndefinePermissionRule(\n  'project_folder',\n  'moderate',\n  (folder: IProjectFolderData, user: IUser) => {\n    return moderatesFolder(user.data, folder.id);\n  }\n);\n"],"sourceRoot":""}