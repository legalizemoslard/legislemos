{"version":3,"sources":["webpack:///./app/resources/GetResourceFiles.tsx","webpack:///./app/resources/GetPageLinks.tsx","webpack:///./app/containers/PagesShowPage/messages.ts","webpack:///./app/components/ResolveTextVariables/index.tsx","webpack:///./app/services/pageLink.ts","webpack:///./app/containers/PagesShowPage/index.tsx"],"names":["GetResourceFiles","props","state","files","undefined","this","resourceId","resourceType","resetOnChange","inputProps$","BehaviorSubject","subscriptions","pipe","distinctUntilChanged","prev","next","tap","setState","filter","isString","switchMap","streamFn","projectFilesStream","phaseFilesStream","eventFilesStream","pageFilesStream","ideaFilesStream","initiativeFilesStream","observable","subscribe","isNilOrError","data","forEach","subscription","unsubscribe","children","React","Component","GetPage","pageLinks","pageId","pageByIdStream","of","page","get","relationships","page_links","isArray","isEmpty","combineLatest","map","link","getPageLink","id","pageLink","defineMessages","notFoundTitle","defaultMessage","notFoundDescription","informationPageName","termsAndConditionsPageName","privacyPolicyPageName","accessibilityStatementPageName","cookiePolicyPageName","faqPageName","ResolveTextVariables","tenant","localize","textVariables","orgName","attributes","settings","core","organization_name","initiatives","eligibility_criteria","initiativesEligibilityCriteria","threshold_reached_message","initiativesThresholdReachedMessage","initiativesVotingThreshold","voting_threshold","toString","initiativesDaysLimit","days_limit","variables","tenantVariables","mapValues","value","text","reduce","input","replacement","pattern","re","RegExp","replace","valueWithreplacedVariables","PureComponent","ResolveTextVariablesWithHOCS","inputProps","pageLinkId","streams","apiEndpoint","API_PATH","PagesFooterNavigation","lazy","Container","styled","div","theme","menuHeight","footerHeight","colors","background","media","smallerThanMaxTablet","mobileMenuHeight","mobileTopBarHeight","StyledContentContainer","ContentContainer","maxPageWidth","AttachmentsContainer","PageContent","main","PageTitle","h1","colorText","fontSizes","xxxxl","xxxl","PageDescription","StyledLink","Link","large","defaultCardStyle","LinkIcon","Icon","PagesShowPage","seoTitle","seoDescription","blockIndexing","pageTitle","pageDescription","pageSlug","formatMessage","intl","locale","tenantLocales","pageFiles","isUndefined","messages","FormattedMessage","getLocalized","title_multiloc","slug","body_multiloc","multiloc","supportHtml","className","Helmet","name","content","length","Suspense","fallback","Spinner","currentPageSlug","Data","adopt","params","render","PagesShowPageWithHOCs","injectIntl","withRouter","dataProps"],"mappings":"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","file":"8.38d4bb1cf86e879f5959.chunk.js","sourcesContent":["import React from 'react';\nimport { isString } from 'lodash-es';\nimport { Subscription, BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged, switchMap, tap, filter } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport {\n  projectFilesStream,\n  IProjectFileData,\n  IProjectFiles,\n} from 'services/projectFiles';\nimport {\n  phaseFilesStream,\n  IPhaseFileData,\n  IPhaseFiles,\n} from 'services/phaseFiles';\nimport {\n  eventFilesStream,\n  IEventFileData,\n  IEventFiles,\n} from 'services/eventFiles';\nimport { pageFilesStream, IPageFileData, IPageFiles } from 'services/pageFiles';\nimport { ideaFilesStream, IIdeaFileData, IIdeaFiles } from 'services/ideaFiles';\nimport {\n  initiativeFilesStream,\n  IInitiativeFileData,\n  IInitiativeFiles,\n} from 'services/initiativeFiles';\n\nimport { isNilOrError } from 'utils/helperUtils';\n\nexport type ResourceType =\n  | 'project'\n  | 'phase'\n  | 'event'\n  | 'page'\n  | 'idea'\n  | 'initiative';\n\nexport type IResourceFileData =\n  | IProjectFileData\n  | IPhaseFileData\n  | IEventFileData\n  | IPageFileData\n  | IIdeaFileData\n  | IInitiativeFileData;\n\nexport type IResourceFiles =\n  | IProjectFiles\n  | IPhaseFiles\n  | IEventFiles\n  | IPageFiles\n  | IIdeaFiles\n  | IInitiativeFiles;\n\ninterface InputProps {\n  resetOnChange?: boolean;\n  resourceType: ResourceType;\n  resourceId: string | null;\n}\n\ntype Children = (renderProps: GetResourceFilesChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: Children;\n}\n\ninterface State {\n  files: IResourceFileData[] | undefined | null | Error;\n}\n\nexport type GetResourceFilesChildProps = State['files'];\n\nexport default class GetResourceFiles extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  public static defaultProps = {\n    resetOnChange: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      files: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { resourceId, resourceType, resetOnChange } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ resourceId, resourceType });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          tap(() => resetOnChange && this.setState({ files: undefined })),\n          filter(({ resourceId }) => isString(resourceId)),\n          switchMap(\n            ({\n              resourceId,\n              resourceType,\n            }: {\n              resourceId: string;\n              resourceType: InputProps['resourceType'];\n            }) => {\n              let streamFn;\n              if (resourceType === 'project') {\n                streamFn = projectFilesStream;\n              }\n              if (resourceType === 'phase') {\n                streamFn = phaseFilesStream;\n              }\n              if (resourceType === 'event') {\n                streamFn = eventFilesStream;\n              }\n              if (resourceType === 'page') {\n                streamFn = pageFilesStream;\n              }\n              if (resourceType === 'idea') {\n                streamFn = ideaFilesStream;\n              }\n              if (resourceType === 'initiative') {\n                streamFn = initiativeFilesStream;\n              }\n\n              return streamFn(resourceId)\n                .observable as Observable<IResourceFiles | null>;\n            }\n          )\n        )\n        .subscribe((files) => {\n          this.setState({ files: !isNilOrError(files) ? files.data : files });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { resourceId, resourceType, resetOnChange } = this.props;\n    this.inputProps$.next({ resourceId, resourceType, resetOnChange });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { files } = this.state;\n    return (children as Children)(files);\n  }\n}\n","import React from 'react';\nimport { get, isArray, isEmpty } from 'lodash-es';\nimport { Subscription, BehaviorSubject, of, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport shallowCompare from 'utils/shallowCompare';\nimport { pageByIdStream } from 'services/pages';\nimport { getPageLink, PageLink } from 'services/pageLink';\nimport { isNilOrError } from 'utils/helperUtils';\n\ninterface InputProps {\n  pageId: string | null;\n}\n\ntype children = (renderProps: GetPageLinksChildProps) => JSX.Element | null;\n\ninterface Props extends InputProps {\n  children?: children;\n}\n\ninterface State {\n  pageLinks: (PageLink | Error)[] | undefined | null | Error;\n}\n\nexport type GetPageLinksChildProps =\n  | (PageLink | Error)[]\n  | undefined\n  | null\n  | Error;\n\nexport default class GetPage extends React.Component<Props, State> {\n  private inputProps$: BehaviorSubject<InputProps>;\n  private subscriptions: Subscription[];\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      pageLinks: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { pageId } = this.props;\n\n    this.inputProps$ = new BehaviorSubject({ pageId });\n\n    this.subscriptions = [\n      this.inputProps$\n        .pipe(\n          distinctUntilChanged((prev, next) => shallowCompare(prev, next)),\n          switchMap(({ pageId }) =>\n            pageId ? pageByIdStream(pageId).observable : of(null)\n          ),\n          switchMap((page) => {\n            if (!isNilOrError(page)) {\n              const pageLinks = get(page.data.relationships.page_links, 'data');\n\n              if (isArray(pageLinks) && !isEmpty(pageLinks)) {\n                return combineLatest(\n                  pageLinks.map((link) => getPageLink(link.id).observable)\n                );\n              }\n            }\n\n            return of(null);\n          })\n        )\n        .subscribe((pageLinks) => {\n          this.setState({\n            pageLinks:\n              pageLinks &&\n              pageLinks.map((pageLink) =>\n                !isNilOrError(pageLink) ? pageLink.data : pageLink\n              ),\n          });\n        }),\n    ];\n  }\n\n  componentDidUpdate() {\n    const { pageId } = this.props;\n    this.inputProps$.next({ pageId });\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n  }\n\n  render() {\n    const { children } = this.props;\n    const { pageLinks } = this.state;\n    return (children as children)(pageLinks);\n  }\n}\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  notFoundTitle: {\n    id: 'app.components.PagesShowPage.notFoundTitle',\n    defaultMessage: 'Page not found',\n  },\n  notFoundDescription: {\n    id: 'app.components.PagesShowPage.notFoundDescription',\n    defaultMessage: 'The requested page could not be found',\n  },\n  informationPageName: {\n    id: 'app.components.PagesShowPage.informationPageName',\n    defaultMessage: 'Information Page',\n  },\n  termsAndConditionsPageName: {\n    id: 'app.components.PagesShowPage.terms-and-conditionsPageName',\n    defaultMessage: 'Terms & conditions',\n  },\n  privacyPolicyPageName: {\n    id: 'app.components.PagesShowPage.privacy-policyPageName',\n    defaultMessage: 'Privacy Policy',\n  },\n  accessibilityStatementPageName: {\n    id: 'app.components.PagesShowPage.accessibility-statementPageName',\n    defaultMessage: 'Accessibility statement',\n  },\n  cookiePolicyPageName: {\n    id: 'app.components.PagesShowPage.cookie-policyPageName',\n    defaultMessage: 'Cookie policy',\n  },\n  faqPageName: {\n    id: 'app.components.PagesShowPage.faqPageName',\n    defaultMessage: 'Frequently Asked Questions (FAQ)',\n  },\n});\n","import React, { PureComponent } from 'react';\nimport { mapValues, reduce } from 'lodash-es';\nimport { Multiloc } from 'typings';\nimport GetAppConfiguration, {\n  GetAppConfigurationChildProps,\n} from 'resources/GetAppConfiguration';\nimport { isNilOrError } from 'utils/helperUtils';\nimport injectLocalize, { InjectedLocalized } from 'utils/localize';\n\ninterface InputProps {\n  value: Multiloc;\n  children: (multiloc: Multiloc) => JSX.Element;\n}\n\ninterface DataProps {\n  tenant: GetAppConfigurationChildProps;\n}\n\ninterface Props extends InputProps, DataProps, InjectedLocalized {}\n\n/**\n * Given a multiloc as `value` prop, calls the `children` function prop\n * with the same multiloc but with substituted patterns in the translations.\n * E.g. {en: 'This is $|orgName|'} becomes {en: 'This is New York'}\n */\nclass ResolveTextVariables extends PureComponent<Props> {\n  tenantVariables = () => {\n    const { tenant, localize } = this.props;\n\n    if (!isNilOrError(tenant)) {\n      const textVariables: { [key: string]: string } = {\n        orgName: localize(tenant.attributes.settings.core.organization_name),\n      };\n\n      const initiatives = tenant.attributes.settings.initiatives;\n      if (initiatives) {\n        if (initiatives.eligibility_criteria) {\n          textVariables.initiativesEligibilityCriteria = localize(\n            initiatives.eligibility_criteria\n          );\n        }\n        if (initiatives.threshold_reached_message) {\n          textVariables.initiativesThresholdReachedMessage = localize(\n            initiatives.threshold_reached_message\n          );\n        }\n\n        textVariables.initiativesVotingThreshold = initiatives.voting_threshold.toString();\n        textVariables.initiativesDaysLimit = initiatives.days_limit.toString();\n      }\n\n      return textVariables;\n    }\n\n    return null;\n  };\n\n  valueWithreplacedVariables = (): Multiloc => {\n    const variables = this.tenantVariables();\n\n    return mapValues(this.props.value, (text) =>\n      reduce(\n        variables,\n        (input, replacement, pattern) => {\n          const re = new RegExp(`\\\\$\\\\|${pattern}\\\\|`, 'g');\n          return (input || '').replace(re, replacement || '');\n        },\n        text\n      )\n    );\n  };\n\n  render() {\n    return this.props.children(this.valueWithreplacedVariables());\n  }\n}\n\nconst ResolveTextVariablesWithHOCS = injectLocalize<InputProps & DataProps>(\n  ResolveTextVariables\n);\n\nexport default (inputProps: InputProps) => (\n  <GetAppConfiguration>\n    {(tenant) => (\n      <ResolveTextVariablesWithHOCS {...inputProps} tenant={tenant} />\n    )}\n  </GetAppConfiguration>\n);\n","import { Multiloc } from 'typings';\nimport { API_PATH } from 'containers/App/constants';\nimport streams from 'utils/streams';\n\nconst apiEndpoint = `${API_PATH}/page_links`;\n\nexport interface PageLink {\n  type: 'page_link';\n  id: string;\n  attributes: {\n    linked_page_slug: string;\n    linked_page_title_multiloc: Multiloc;\n    ordering: number;\n  };\n}\n\nexport function getPageLink(pageLinkId: string) {\n  return streams.get<{ data: PageLink }>({\n    apiEndpoint: `${apiEndpoint}/${pageLinkId}`,\n  });\n}\n","import React, { PureComponent, Suspense, lazy } from 'react';\nimport { adopt } from 'react-adopt';\nimport { isUndefined } from 'lodash-es';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport Link from 'utils/cl-router/Link';\nimport { isNilOrError } from 'utils/helperUtils';\n\n// components\nimport { Helmet } from 'react-helmet';\nimport ContentContainer from 'components/ContentContainer';\nimport { Icon, Spinner } from 'cl2-component-library';\nimport Fragment from 'components/Fragment';\nimport FileAttachments from 'components/UI/FileAttachments';\nimport QuillEditedContent from 'components/UI/QuillEditedContent';\nconst PagesFooterNavigation = lazy(() =>\n  import('containers/PagesShowPage/PagesFooterNavigation')\n);\n\n// resources\nimport GetLocale, { GetLocaleChildProps } from 'resources/GetLocale';\nimport GetAppConfigurationLocales, {\n  GetAppConfigurationLocalesChildProps,\n} from 'resources/GetAppConfigurationLocales';\nimport GetPage, { GetPageChildProps } from 'resources/GetPage';\nimport GetPageLinks, { GetPageLinksChildProps } from 'resources/GetPageLinks';\nimport GetResourceFiles, {\n  GetResourceFilesChildProps,\n} from 'resources/GetResourceFiles';\n\n// i18n\nimport { InjectedIntlProps } from 'react-intl';\nimport { FormattedMessage, injectIntl } from 'utils/cl-intl';\nimport { getLocalized } from 'utils/i18n';\nimport T from 'components/T';\nimport messages from './messages';\n\n// styling\nimport styled from 'styled-components';\nimport { media, colors, fontSizes, defaultCardStyle } from 'utils/styleUtils';\nimport ResolveTextVariables from 'components/ResolveTextVariables';\n\nexport const Container = styled.div`\n  min-height: calc(\n    100vh - ${(props) => props.theme.menuHeight + props.theme.footerHeight}px\n  );\n  display: flex;\n  flex-direction: column;\n  background: ${colors.background};\n\n  ${media.smallerThanMaxTablet`\n    min-height: calc(100vh - ${(props) => props.theme.mobileMenuHeight}px - ${(\n    props\n  ) => props.theme.mobileTopBarHeight}px);\n  `}\n`;\n\nexport const StyledContentContainer = styled(ContentContainer)`\n  max-width: calc(${(props) => props.theme.maxPageWidth}px - 100px);\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 30px;\n`;\n\nconst AttachmentsContainer = styled.div`\n  max-width: calc(${(props) => props.theme.maxPageWidth}px - 100px);\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: 20px;\n  padding-right: 20px;\n`;\n\nexport const PageContent = styled.main`\n  flex-shrink: 0;\n  flex-grow: 1;\n  background: #fff;\n  padding-top: 60px;\n  padding-bottom: 60px;\n`;\n\nexport const PageTitle = styled.h1`\n  color: ${({ theme }) => theme.colorText};\n  font-size: ${fontSizes.xxxxl}px;\n  line-height: normal;\n  font-weight: 600;\n  text-align: left;\n  margin: 0;\n  padding: 0;\n  padding-top: 0px;\n  padding-bottom: 40px;\n\n  ${media.smallerThanMaxTablet`\n    font-size: ${fontSizes.xxxl};\n  `}\n`;\n\nexport const PageDescription = styled.div``;\n\nexport const StyledLink = styled(Link)`\n  color: #666;\n  font-size: ${fontSizes.large}px;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 15px;\n  padding: 20px 23px;\n  ${defaultCardStyle};\n  transition: all 200ms ease;\n\n  &:hover {\n    color: #000;\n    text-decoration: underline;\n  }\n`;\n\nexport const LinkIcon = styled(Icon)`\n  width: 13px;\n  height: 13px;\n`;\n\ninterface InputProps {}\n\ninterface DataProps {\n  locale: GetLocaleChildProps;\n  tenantLocales: GetAppConfigurationLocalesChildProps;\n  page: GetPageChildProps;\n  pageFiles: GetResourceFilesChildProps;\n  pageLinks: GetPageLinksChildProps;\n}\n\ninterface Props extends InputProps, DataProps {}\n\ninterface State {}\n\nclass PagesShowPage extends PureComponent<\n  Props & WithRouterProps & InjectedIntlProps,\n  State\n> {\n  render() {\n    const { formatMessage } = this.props.intl;\n    const { locale, tenantLocales, page, pageFiles, pageLinks } = this.props;\n\n    if (\n      !isNilOrError(locale) &&\n      !isNilOrError(tenantLocales) &&\n      !isUndefined(page) &&\n      !isUndefined(pageLinks)\n    ) {\n      let seoTitle: string;\n      let seoDescription: string;\n      let blockIndexing: boolean;\n      let pageTitle: JSX.Element;\n      let pageDescription: JSX.Element;\n      let pageSlug: string;\n\n      if (!isNilOrError(page)) {\n        seoTitle = getLocalized(\n          page.attributes.title_multiloc,\n          locale,\n          tenantLocales\n        );\n        seoDescription = '';\n        blockIndexing = false;\n        pageSlug = page.attributes.slug;\n        pageTitle = <T value={page.attributes.title_multiloc} />;\n        pageDescription = (\n          <ResolveTextVariables value={page.attributes.body_multiloc}>\n            {(multiloc) => <T value={multiloc} supportHtml={true} />}\n          </ResolveTextVariables>\n        );\n      } else {\n        seoTitle = formatMessage(messages.notFoundTitle);\n        seoDescription = formatMessage(messages.notFoundDescription);\n        blockIndexing = true;\n        pageTitle = <FormattedMessage {...messages.notFoundTitle} />;\n        pageDescription = (\n          <FormattedMessage {...messages.notFoundDescription} />\n        );\n        pageSlug = '';\n      }\n\n      return (\n        <Container className={`e2e-page-${pageSlug}`}>\n          <Helmet>\n            <title>{seoTitle}</title>\n            <meta name=\"description\" content={seoDescription} />\n            {blockIndexing && <meta name=\"robots\" content=\"noindex\" />}\n          </Helmet>\n\n          <PageContent>\n            <StyledContentContainer>\n              <Fragment\n                name={\n                  !isNilOrError(page) ? `pages/${page && page.id}/content` : ''\n                }\n              >\n                <PageTitle>{pageTitle}</PageTitle>\n                <PageDescription>\n                  <QuillEditedContent>{pageDescription}</QuillEditedContent>\n                </PageDescription>\n              </Fragment>\n            </StyledContentContainer>\n            {!isNilOrError(pageFiles) && pageFiles.length > 0 && (\n              <AttachmentsContainer>\n                <FileAttachments files={pageFiles} />\n              </AttachmentsContainer>\n            )}\n          </PageContent>\n\n          <Suspense fallback={<Spinner />}>\n            <PagesFooterNavigation currentPageSlug={pageSlug} />\n          </Suspense>\n        </Container>\n      );\n    }\n\n    return null;\n  }\n}\n\nconst Data = adopt<DataProps, InputProps & WithRouterProps>({\n  locale: <GetLocale />,\n  tenantLocales: <GetAppConfigurationLocales />,\n  page: ({ params, render }) => <GetPage slug={params.slug}>{render}</GetPage>,\n  pageFiles: ({ page, render }) => (\n    <GetResourceFiles\n      resourceId={!isNilOrError(page) ? page.id : null}\n      resourceType=\"page\"\n    >\n      {render}\n    </GetResourceFiles>\n  ),\n  pageLinks: ({ page, render }) => (\n    <GetPageLinks pageId={!isNilOrError(page) ? page.id : null}>\n      {render}\n    </GetPageLinks>\n  ),\n});\n\nconst PagesShowPageWithHOCs = injectIntl<InputProps & WithRouterProps>(\n  PagesShowPage\n);\n\nexport default withRouter((inputProps: InputProps & WithRouterProps) => (\n  <Data {...inputProps}>\n    {(dataProps) => <PagesShowPageWithHOCs {...inputProps} {...dataProps} />}\n  </Data>\n));\n"],"sourceRoot":""}