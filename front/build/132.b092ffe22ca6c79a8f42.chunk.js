(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{"8u6+":function(e,t,a){"use strict";a("pNMO"),a("TeQF"),a("5DmW"),a("27RR"),a("ENF9");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("o0o1"));a("cDke"),a("FZtP"),a("tkto"),a("2B1R"),a("fbCW"),a("07d7"),a("5s+n"),a("4mDm"),a("PKPk"),a("3bBZ");var r=n(a("yXPU")),i=n(a("lSNA")),d=n(a("J4zp")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=l?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),s=a("KLnl"),u=a("dtw8"),f=a("T89o"),p=n(a("ZPq+")),m=a("S+0b"),g=n(a("He/t")),b=n(a("2fl8")),v=n(a("Zc1O")),h=a("iP56"),y=a("Loij"),C=n(a("j3Xt")),w=a("Rw3A"),P=n(a("vOnD"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=P.default.div.withConfig({displayName:"ideaform__Container",componentId:"sc-1bs39sk-0"})([""]),x=P.default.div.withConfig({displayName:"ideaform__Header",componentId:"sc-1bs39sk-1"})(["width:100%;max-width:600px;margin-bottom:40px;"]),I=P.default.div.withConfig({displayName:"ideaform__TitleContainer",componentId:"sc-1bs39sk-2"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;"]),k=(0,P.default)(y.SectionTitle).withConfig({displayName:"ideaform__StyledSectionTitle",componentId:"sc-1bs39sk-3"})(["padding:0;margin:0;"]),F=(0,P.default)(y.SubSectionTitle).withConfig({displayName:"ideaform__StyledSubSectionTitle",componentId:"sc-1bs39sk-4"})(["font-weight:500;margin-bottom:20px;"]),S=(0,P.default)(b.default).withConfig({displayName:"ideaform__CollapseExpandAllButton",componentId:"sc-1bs39sk-5"})([""]),M=P.default.div.withConfig({displayName:"ideaform__Content",componentId:"sc-1bs39sk-6"})(["width:100%;max-width:600px;margin-bottom:30px;"]),N=P.default.div.withConfig({displayName:"ideaform__Footer",componentId:"sc-1bs39sk-7"})(["min-height:50px;display:flex;align-items:center;"]),T=P.default.div.withConfig({displayName:"ideaform__ErrorWrapper",componentId:"sc-1bs39sk-8"})(["flex-grow:1;"]),A=(0,c.memo)((function(e){var t=e.params,a=e.className,n=e.intl.formatMessage,o=t.projectId,u=(0,c.useState)({}),P=(0,d.default)(u,2),E=P[0],O=P[1],A=(0,c.useState)({}),q=(0,d.default)(A,2),D=q[0],R=q[1],W=(0,c.useState)(!1),L=(0,d.default)(W,2),z=L[0],H=L[1],Z=(0,c.useState)(!1),B=(0,d.default)(Z,2),J=B[0],K=B[1],X=(0,c.useState)(!1),Q=(0,d.default)(X,2),V=Q[0],U=Q[1],Y=(0,p.default)({projectId:o}),G=Object.getOwnPropertyNames(D).every((function(e){return!1===D[e]}));(0,c.useEffect)((function(){if(!(0,s.isNilOrError)(Y)&&(0,f.isEmpty)(D)){var e={};Y.data.forEach((function(t){e[t.id]=!0})),R(e)}}),[Y,D]);var $=(0,c.useCallback)((function(e){K(!1),U(!1),R((function(t){return _(_({},t),{},(0,i.default)({},e,!t[e]))}))}),[]),ee=(0,c.useCallback)((function(){var e={};G?Object.keys(D).forEach((function(t){return e[t]=!0})):Object.keys(D).forEach((function(t){return e[t]=!1})),R(e)}),[D,G]),te=(0,c.useCallback)((function(e,t){K(!1),U(!1),O((function(a){var n=a[e]?_(_({},a[e]),t):_({},t);return _(_({},a),{},(0,i.default)({},e,_({},n)))}))}),[]),ae=(0,c.useCallback)((0,r.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.isNilOrError)(Y)){e.next=17;break}return H(!0),e.prev=2,t=Object.keys(E).map((function(e){var t,a,n=null===(t=Y.data.find((function(t){return t.id===e})))||void 0===t||null===(a=t.attributes)||void 0===a?void 0:a.code;return n?(0,m.updateIdeaCustomField)(o,e,n,E[e]):Promise.resolve()})),e.next=6,Promise.all(t);case 6:O({}),H(!1),K(!0),U(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),H(!1),K(!1),U(!0);case 17:case"end":return e.stop()}}),e,null,[[2,12]])}))),[E,Y]);return(0,s.isNilOrError)(Y)?null:c.default.createElement(j,{className:a||""},c.default.createElement(x,null,c.default.createElement(I,null,c.default.createElement(k,null,c.default.createElement(w.FormattedMessage,C.default.inputForm))),c.default.createElement(y.SectionDescription,null,c.default.createElement(w.FormattedMessage,C.default.postDescription))),c.default.createElement(M,null,c.default.createElement(y.Section,null,c.default.createElement(F,null,c.default.createElement(S,{buttonStyle:"secondary",padding:"7px 10px",onClick:ee,text:n(G?C.default.collapseAll:C.default.expandAll)})),Y.data.map((function(e,t){return c.default.createElement(g.default,{key:e.id,collapsed:D[e.id],first:0===t,ideaCustomField:e,onCollapseExpand:$,onChange:te})})))),c.default.createElement(N,null,c.default.createElement(b.default,{buttonStyle:"admin-dark",onClick:ae,processing:z,disabled:(0,f.isEmpty)(E),id:"e2e-ideaform-settings-submit"},J?c.default.createElement(w.FormattedMessage,C.default.saved):c.default.createElement(w.FormattedMessage,C.default.save)),J&&c.default.createElement(h.Success,{text:n(C.default.saveSuccessMessage),showBackground:!1,showIcon:!1}),V&&c.default.createElement(T,null,c.default.createElement(v.default,{text:n(C.default.errorMessage),showBackground:!1,showIcon:!1}))))})),q=(0,u.withRouter)((0,w.injectIntl)(A));t.default=q},"He/t":function(e,t,a){"use strict";a("ENF9"),a("5DmW");var n=a("TqRt"),o=a("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("J4zp"));a("4mDm"),a("07d7"),a("5s+n"),a("PKPk"),a("3bBZ"),a("fbCW"),a("yq1k"),a("ma9I");var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=l?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),i=a("KLnl"),d=n(a("pQ8y")),c=a("iP56"),s=n(a("3A/8")),u=n(a("j3Xt")),f=a("Rw3A"),p=n(a("V3HD")),m=n(a("vOnD")),g=a("96Cm");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}var v=(0,r.lazy)((function(){return Promise.resolve().then(a.t.bind(null,"w13Z",7))})),h=m.default.div.withConfig({displayName:"IdeaCustomField__Container",componentId:"sc-11a39qh-0"})(["display:flex;flex-direction:column;align-items:stretch;border-bottom:solid 1px ",";&.first{border-top:solid 1px ",";}"],g.colors.separation,g.colors.separation),y=m.default.div.withConfig({displayName:"IdeaCustomField__CustomFieldTitle",componentId:"sc-11a39qh-1"})(["flex:1;color:",";font-size:","px;line-height:normal;font-weight:500;"],g.colors.adminTextColor,g.fontSizes.large),C=(0,m.default)(c.Icon).withConfig({displayName:"IdeaCustomField__ChevronIcon",componentId:"sc-11a39qh-2"})(["width:12px;height:12px;fill:",";margin-left:20px;transition:fill 80ms ease-out,transform 200ms ease-out;"],g.colors.label),w=m.default.div.withConfig({displayName:"IdeaCustomField__CollapsedContent",componentId:"sc-11a39qh-3"})(["display:flex;align-items:center;justify-content:space-between;padding-top:15px;padding-bottom:15px;cursor:pointer;&.expanded{","{transform:rotate(90deg);}}&:hover{","{fill:#000;}}"],C,C),P=m.default.div.withConfig({displayName:"IdeaCustomField__CollapseContainer",componentId:"sc-11a39qh-4"})(["opacity:0;display:none;transition:all ","ms cubic-bezier(0.165,0.84,0.44,1);will-change:opacity,height;&.collapse-enter{opacity:0;max-height:0px;overflow:hidden;display:block;&.collapse-enter-active{opacity:1;max-height:600px;overflow:hidden;display:block;}}&.collapse-enter-done{opacity:1;overflow:visible;display:block;}&.collapse-exit{opacity:1;max-height:600px;overflow:hidden;display:block;&.collapse-exit-active{opacity:0;max-height:0px;overflow:hidden;display:block;}}&.collapse-exit-done{display:none;}"],250),E=m.default.div.withConfig({displayName:"IdeaCustomField__CollapseContainerInner",componentId:"sc-11a39qh-5"})(["padding-top:10px;margin-bottom:25px;"]),O=m.default.div.withConfig({displayName:"IdeaCustomField__Toggles",componentId:"sc-11a39qh-6"})(["margin-bottom:30px;"]),_=m.default.span.withConfig({displayName:"IdeaCustomField__LocaleSwitcherLabelText",componentId:"sc-11a39qh-7"})(["font-weight:500;color:",";font-size:","px;"],g.colors.adminTextColor,g.fontSizes.medium),j=m.default.div.withConfig({displayName:"IdeaCustomField__ToggleContainer",componentId:"sc-11a39qh-8"})(["display:flex;align-items:center;margin-bottom:10px;"]),x=(0,m.default)(c.Toggle).withConfig({displayName:"IdeaCustomField__StyledToggle",componentId:"sc-11a39qh-9"})(["margin-right:10px;"]),I=["topic_ids","location","attachments","proposed_budget"],k=["title","body"],F=(0,r.memo)((function(e){var t=e.ideaCustomField,a=e.collapsed,n=e.first,o=e.onChange,p=e.onCollapseExpand,m=e.className,b=e.localize,F=I.find((function(e){return e===t.attributes.key})),S=!k.includes(t.attributes.key),M=(0,r.useState)(t.attributes.description_multiloc),N=(0,l.default)(M,2),T=N[0],A=N[1],q=(0,r.useState)(t.attributes.enabled),D=(0,l.default)(q,2),R=D[0],W=D[1],L=(0,r.useState)(t.attributes.required),z=(0,l.default)(L,2),H=z[0],Z=z[1],B=(0,r.useCallback)((function(e){A(e)}),[]);(0,r.useEffect)((function(){o(t.id,{description_multiloc:T})}),[T,t,o]);var J=(0,r.useCallback)((function(){W((function(e){return!e}))}),[]);(0,r.useEffect)((function(){o(t.id,{enabled:R})}),[R,t,o]);var K=(0,r.useCallback)((function(){Z((function(e){return!e}))}),[]);(0,r.useEffect)((function(){o(t.id,{required:H})}),[H,t,o]);var X=(0,r.useCallback)((function(e){e.preventDefault()}),[]),Q=(0,r.useCallback)((function(){p(t.id)}),[t]);return(0,i.isNilOrError)(t)?null:r.default.createElement(h,{className:"".concat(m||""," ").concat(n?"first":"")},r.default.createElement(w,{onMouseDown:X,onClick:Q,className:"\n            ".concat(a?"collapsed":"expanded","\n            e2e-").concat(b(t.attributes.title_multiloc).toLowerCase(),"-setting-collapsed\n          ")},r.default.createElement(y,null,r.default.createElement(s.default,{value:t.attributes.title_multiloc})),r.default.createElement(C,{name:"chevron-right"})),r.default.createElement(d.default,{classNames:"collapse",in:!1===a,timeout:250,mounOnEnter:!0,unmountOnExit:!0,enter:!0,exit:!0},r.default.createElement(P,null,r.default.createElement(E,null,r.default.createElement(O,null,F&&r.default.createElement(j,null,r.default.createElement(x,{checked:R,onChange:J,label:r.default.createElement(f.FormattedMessage,u.default.enabled),labelTextColor:g.colors.adminTextColor,className:"\n                        e2e-".concat(b(t.attributes.title_multiloc).toLowerCase(),"-enabled-toggle-label\n                      ")}),r.default.createElement(c.IconTooltip,{content:r.default.createElement(f.FormattedMessage,u.default.enabledTooltipContent)})),R&&S&&r.default.createElement(j,null,r.default.createElement(x,{checked:H,onChange:K,label:r.default.createElement(f.FormattedMessage,u.default.required),labelTextColor:g.colors.adminTextColor,className:"\n                        e2e-".concat(b(t.attributes.title_multiloc).toLowerCase(),"-required-toggle-label\n                      ")}),r.default.createElement(c.IconTooltip,{content:r.default.createElement(f.FormattedMessage,u.default.requiredTooltipContent)}))),R&&r.default.createElement(r.Suspense,{fallback:r.default.createElement(c.Spinner,null)},r.default.createElement(v,{id:"".concat(t.id,"-description"),noImages:!0,noVideos:!0,noAlign:!0,valueMultiloc:T,onChange:B,label:r.default.createElement(_,null,r.default.createElement(f.FormattedMessage,u.default.descriptionLabel))}))))))})),S=(0,p.default)(F);t.default=S},"S+0b":function(e,t,a){"use strict";a("tkto"),a("pNMO"),a("TeQF"),a("5DmW"),a("FZtP"),a("27RR");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ideaCustomFieldsStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(l.API_PATH,"/projects/").concat(e,"/custom_fields");return r.default.get(d({apiEndpoint:a},t))},t.ideaCustomFieldByCodeStream=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="".concat(l.API_PATH,"/projects/").concat(e,"/custom_fields/by_code/").concat(t);return r.default.get(d({apiEndpoint:n},a))},t.ideaCustomFieldStream=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="".concat(l.API_PATH,"/projects/").concat(e,"/custom_fields/").concat(t);return r.default.get(d({apiEndpoint:n},a))},t.updateIdeaCustomField=function(e,t,a,n){var o="".concat(l.API_PATH,"/projects/").concat(e,"/custom_fields/by_code/").concat(a),i={custom_field:n};return r.default.update(o,t,i)};var o=n(a("lSNA"));a("ma9I");var l=a("p0gT"),r=n(a("1Kqg"));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"ZPq+":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.projectId,a=(0,l.useState)(void 0),n=(0,o.default)(a,2),i=n[0],d=n[1];return(0,l.useEffect)((function(){var e=(0,r.ideaCustomFieldsStream)(t).observable.subscribe((function(e){d(e)}));return function(){return e.unsubscribe()}}),[t]),i};var o=n(a("J4zp")),l=a("q1tI"),r=a("S+0b")},j3Xt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a("JRPe").defineMessages)({inputForm:{id:"app.containers.AdminPage.ProjectIdeaForm.inputForm",defaultMessage:"Input form"},postDescription:{id:"app.containers.AdminPage.ProjectIdeaForm.postDescription",defaultMessage:"Specify what information should be provided, add short descriptions or instructions to guide participant responses and specify whether each field is optional or required"},save:{id:"app.containers.AdminPage.ProjectIdeaForm.save",defaultMessage:"Save"},saved:{id:"app.containers.AdminPage.ProjectIdeaForm.saved",defaultMessage:"Saved!"},saveSuccessMessage:{id:"app.containers.AdminPage.ProjectIdeaForm.saveSuccessMessage",defaultMessage:"Your changes have been saved successfully."},errorMessage:{id:"app.containers.AdminPage.ProjectIdeaForm.errorMessage",defaultMessage:"Something went wrong, please try again later"},descriptionLabel:{id:"app.containers.AdminPage.ProjectIdeaForm.descriptionLabel",defaultMessage:"Field description"},collapseAll:{id:"app.containers.AdminPage.ProjectIdeaForm.collapseAll",defaultMessage:"Collapse all fields"},expandAll:{id:"app.containers.AdminPage.ProjectIdeaForm.expandAll",defaultMessage:"Expand all fields"},enabled:{id:"app.containers.AdminPage.ProjectIdeaForm.enabled",defaultMessage:"Enabled"},required:{id:"app.containers.AdminPage.ProjectIdeaForm.required",defaultMessage:"Required"},enabledTooltipContent:{id:"app.containers.AdminPage.ProjectIdeaForm.enabledTooltipContent",defaultMessage:"Include this field."},requiredTooltipContent:{id:"app.containers.AdminPage.ProjectIdeaForm.requiredTooltipContent",defaultMessage:"Require this field to be filled in."}});t.default=n}}]);
//# sourceMappingURL=132.b092ffe22ca6c79a8f42.chunk.js.map