(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{"30Ov":function(e,a,t){"use strict";t("2B1R"),t("SuFq"),t("tkto"),t("pNMO"),t("TeQF"),t("5DmW"),t("27RR");var n=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("FZtP");var i=n(t("J4zp")),s=n(t("lwsE")),r=n(t("W8MJ")),o=n(t("PJYZ")),l=n(t("7W2i")),d=n(t("a1gu")),u=n(t("Nsbk")),c=n(t("lSNA")),p=n(t("q1tI")),m=t("T89o"),f=t("DtyJ"),g=t("ahDk"),h=t("ghxK"),v=t("ErwY");function b(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?b(Object(t),!0).forEach((function(a){(0,c.default)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function A(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,u.default)(e);if(a){var i=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,d.default)(this,t)}}var M=function(e){(0,l.default)(t,e);var a=A(t);function t(e){var n;return(0,s.default)(this,t),n=a.call(this,e),(0,c.default)((0,o.default)(n),"inputProps$",void 0),(0,c.default)((0,o.default)(n),"pageChanges$",void 0),(0,c.default)((0,o.default)(n),"subscriptions",void 0),(0,c.default)((0,o.default)(n),"handleOnPageChange",(function(e){n.pageChanges$.next(e)})),n.state={currentPage:1,lastPage:1,campaigns:void 0},n}return(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.campaignNames,n=a.withoutCampaignNames,s=a.pageSize,r=a.pageNumber;this.inputProps$=new f.BehaviorSubject({campaignNames:t,withoutCampaignNames:n,pageSize:s}),this.pageChanges$=new f.BehaviorSubject(r||1),this.subscriptions=[(0,f.combineLatest)(this.inputProps$,this.pageChanges$).pipe((0,g.map)((function(e){var a=(0,i.default)(e,2),t=a[0],n=a[1];return y(y({},t),{},{pageNumber:n})})),(0,g.distinctUntilChanged)((function(e,a){return(0,m.isEqual)(e,a)})),(0,g.switchMap)((function(e){var a=e.campaignNames,t=e.withoutCampaignNames,n=e.pageSize,i=e.pageNumber;return(0,h.listCampaigns)({queryParameters:{campaign_names:a,without_campaign_names:t,"page[size]":n,"page[number]":i}}).observable}))).subscribe((function(a){e.setState({campaigns:a.data,currentPage:(0,v.getPageNumberFromUrl)(a.links.self)||1,lastPage:(0,v.getPageNumberFromUrl)(a.links.last)||1})}))]}},{key:"componentDidUpdate",value:function(){this.inputProps$.next({campaignNames:this.props.campaignNames,withoutCampaignNames:this.props.withoutCampaignNames,pageSize:this.props.pageSize})}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"render",value:function(){return(0,this.props.children)(y(y({},this.state),{},{onChangePage:this.handleOnPageChange}))}}]),t}(p.default.Component);a.default=M,(0,c.default)(M,"defaultProps",{pageSize:20,pageNumber:1})},JINC:function(e,a,t){"use strict";t("SuFq");var n=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("ma9I"),t("2B1R");var i=n(t("pVnL")),s=n(t("lwsE")),r=n(t("W8MJ")),o=n(t("PJYZ")),l=n(t("7W2i")),d=n(t("a1gu")),u=n(t("Nsbk")),c=n(t("lSNA")),p=n(t("q1tI")),m=t("T89o"),f=n(t("30Ov")),g=t("ghxK"),h=t("KLnl"),v=n(t("3A/8")),b=t("iP56"),y=t("gzy/"),A=n(t("aS2l")),M=n(t("vOnD")),C=t("Rw3A"),w=n(t("bd4U"));function S(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,u.default)(e);if(a){var i=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,d.default)(this,t)}}var T=(0,M.default)(A.default).withConfig({displayName:"automated__StyledWarning",componentId:"sc-1yjadf2-0"})(["max-width:600px;margin-bottom:30px;"]),E=function(e){(0,l.default)(t,e);var a=S(t);function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=a.call.apply(a,[this].concat(i)),(0,c.default)((0,o.default)(e),"handleOnEnabledToggle",(function(e){return function(){(0,g.updateCampaign)(e.id,{enabled:!e.attributes.enabled})}})),e}return(0,r.default)(t,[{key:"render",value:function(){var e=this,a=this.props.campaigns;return(0,h.isNilOrError)(a)?null:p.default.createElement(p.default.Fragment,null,p.default.createElement(T,{text:p.default.createElement(C.FormattedMessage,w.default.automatedEmailCampaignsInfo)}),p.default.createElement(y.List,null,a.map((function(a){return p.default.createElement(y.Row,{key:a.id},p.default.createElement(b.Toggle,{disabled:(0,m.isUndefined)(a.attributes.enabled),checked:(0,m.isUndefined)(a.attributes.enabled)||a.attributes.enabled,onChange:e.handleOnEnabledToggle(a)}),p.default.createElement(y.TextCell,{className:"expand"},p.default.createElement(v.default,{value:a.attributes.admin_campaign_description_multiloc})))}))))}}]),t}(p.default.PureComponent),P=(0,C.injectIntl)(E);a.default=function(e){return p.default.createElement(f.default,{withoutCampaignNames:["manual"],pageSize:250},(function(a){return p.default.createElement(P,(0,i.default)({},e,a))}))}},bd4U:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=(0,t("JRPe").defineMessages)({titleEmails:{id:"app.containers.Admin.emails.titleEmails",defaultMessage:"Email Campaigns"},subtitleEmails:{id:"app.containers.Admin.emails.subtitleEmails",defaultMessage:"Compose your own emails to be sent out to all users or to particular groups. And control what automated emails your users receive."},helmetTitle:{id:"app.containers.Admin.emails.helmetTitle",defaultMessage:"Email Campaigns"},helmetDescription:{id:"app.containers.Admin.emails.helmetDescription",defaultMessage:"Send out manual emails to certain citizen group and active automated campaigns"},campaignDeletionConfirmation:{id:"app.containers.Admin.emails.campaignDeletionConfirmation",defaultMessage:"Are you sure?"},addCampaignButton:{id:"app.containers.Admin.emails.addCampaignButton",defaultMessage:"Create campaign"},deleteButtonLabel:{id:"app.containers.Admin.emails.deleteButtonLabel",defaultMessage:"Delete"},statsButton:{id:"app.containers.Admin.emails.statsButton",defaultMessage:"Statistics"},editButtonLabel:{id:"app.containers.Admin.emails.editButtonLabel",defaultMessage:"Edit"},manageButtonLabel:{id:"app.containers.Admin.emails.manageButtonLabel",defaultMessage:"Manage & Edit & Preview & Delete"},fieldSender:{id:"app.containers.Admin.emails.fieldSender",defaultMessage:"From"},fieldSenderTooltip:{id:"app.containers.Admin.emails.fieldSenderTooltip",defaultMessage:"Choose whom users will see as the sender of the email."},fieldReplyTo:{id:"app.containers.Admin.emails.fieldReplyTo",defaultMessage:"Replies should go to"},fieldReplyToTooltip:{id:"app.containers.Admin.emails.fieldReplyToTooltip",defaultMessage:"Choose what email address should receive direct replies from users on your email."},fieldTo:{id:"app.containers.Admin.emails.fieldTo",defaultMessage:"To"},fieldToTooltip:{id:"app.containers.Admin.emails.fieldToTooltip",defaultMessage:"Choose the group(s) of users who will receive your email."},fieldSubject:{id:"app.containers.Admin.emails.fieldSubject",defaultMessage:"Email Subject"},fieldSubjectTooltip:{id:"app.containers.Admin.emails.fieldSubjectTooltip",defaultMessage:"This will be shown in the subject line of the email and in the user’s inbox overview. Make it clear and engaging."},fieldBody:{id:"app.containers.Admin.emails.fieldBody",defaultMessage:"Email Message"},addCampaignTitle:{id:"app.containers.Admin.emails.addCampaignTitle",defaultMessage:"New campaign"},editCampaignTitle:{id:"app.containers.Admin.emails.editCampaignTitle",defaultMessage:"Edit campaign"},draft:{id:"app.containers.Admin.emails.draft",defaultMessage:"Draft"},sent:{id:"app.containers.Admin.emails.sent",defaultMessage:"Sent"},sendNowButton:{id:"app.containers.Admin.emails.sendNowButton",defaultMessage:"Send now"},sendTestEmailButton:{id:"app.containers.Admin.emails.sendTestEmailButton",defaultMessage:"Send a preview"},sendTestEmailTooltip:{id:"app.containers.Admin.emails.sendTestEmailTooltip",defaultMessage:"Send this draft email to the email address with which you are logged in, to check how it looks like in ‘real life’."},previewSentConfirmation:{id:"app.containers.Admin.emails.previewSentConfirmation",defaultMessage:"A preview email has been sent to your email address"},formSaveButton:{id:"app.containers.Admin.emails.formSaveButton",defaultMessage:"Continue"},formErrorButton:{id:"app.containers.Admin.emails.formErrorButton",defaultMessage:"Continue"},formSuccessButton:{id:"app.containers.Admin.emails.formSuccessButton",defaultMessage:"Continue"},formSuccessMessage:{id:"app.containers.Admin.emails.formSuccessMessage",defaultMessage:"formSuccessMessage"},formErrorMessage:{id:"app.containers.Admin.emails.formErrorMessage",defaultMessage:"Please correct the errors above to continue"},formUnexpectedErrorMessage:{id:"app.containers.Admin.emails.formUnexpectedErrorMessage",defaultMessage:"Something went wrong, please try again later"},previewTitle:{id:"app.containers.Admin.emails.previewTitle",defaultMessage:"Preview"},recipientsTitle:{id:"app.containers.Admin.emails.recipientsTitle",defaultMessage:"Recipients"},deliveryStatus_sent:{id:"app.containers.Admin.Campaigns.deliveryStatus_sent",defaultMessage:"Sent"},deliveryStatus_failed:{id:"app.containers.Admin.Campaigns.deliveryStatus_failed",defaultMessage:"Failed"},deliveryStatus_accepted:{id:"app.containers.Admin.Campaigns.deliveryStatus_accepted",defaultMessage:"Accepted"},deliveryStatus_delivered:{id:"app.containers.Admin.Campaigns.deliveryStatus_delivered",defaultMessage:"Delivered"},deliveryStatus_opened:{id:"app.containers.Admin.Campaigns.deliveryStatus_opened",defaultMessage:"Opened"},deliveryStatus_clicked:{id:"app.containers.Admin.Campaigns.deliveryStatus_clicked",defaultMessage:"Clicked"},deliveryStatus_clickedTooltip:{id:"app.containers.Admin.Campaigns.deliveryStatus_clickedTooltip",defaultMessage:"When you added one or more links to your email, the number of users who clicked a link will be shown here."},tabCustom:{id:"app.containers.Admin.Campaigns.tabCustom",defaultMessage:"Custom"},tabAutomated:{id:"app.containers.Admin.Campaigns.tabAutomated",defaultMessage:"Automated"},campaignFrom:{id:"app.containers.Admin.Campaigns.campaignFrom",defaultMessage:"From:"},campaignTo:{id:"app.containers.Admin.Campaigns.campaignTo",defaultMessage:"To:"},noAccess:{id:"app.containers.Admin.Campaigns.noAccess",defaultMessage:"We're sorry, but it seems like you don't have access to the emails section"},deleteCampaignButton:{id:"app.containers.Admin.emails.deleteCampaignButton",defaultMessage:"Delete Campaign"},noCampaignsHeader:{id:"app.containers.Admin.emails.noCampaignsHeader",defaultMessage:"No custom email campaigns yet"},noCampaignsDescription:{id:"app.containers.Admin.emails.noCampaignsDescription",defaultMessage:"Custom email campaigns are emails created from scratch. Their content and recipients can be chosen and you can follow up on their results through statistics."},automatedEmailCampaignsInfo:{id:"app.containers.Admin.emails.automatedEmailCampaignsInfo",defaultMessage:"Automated email campaigns are sent out by default and are triggered by a user’s actions. Some of them can be turned off. Others are an inherent part of user interactions with the platform and therefore can’t be turned off."},allUsers:{id:"app.containers.Admin.emails.allUsers",defaultMessage:"All users"},groups:{id:"app.containers.Admin.emails.groups",defaultMessage:"Groups"},nameVariablesInfo:{id:"app.containers.Admin.emails.nameVariablesInfo",defaultMessage:'You can speak directly to citizens using the variables \\{\\{first_name\\}\\} \\{\\{last_name\\}\\}. E.g. "Dear \\{\\{first_name\\}\\} \\{\\{last_name\\}\\}, ..."'},changeRecipientsButton:{id:"app.containers.Admin.emails.changeRecipientsButton",defaultMessage:"Change recipients"},send:{id:"app.containers.Admin.emails.send",defaultMessage:"Send"},confirmSendHeader:{id:"app.containers.Admin.emails.confirmSendHeader",defaultMessage:"Email to all users?"},toAllUsers:{id:"app.containers.Admin.emails.toAllUsers",defaultMessage:"Do you want to send this email to all users?"},senderRecipients:{id:"app.containers.Admin.emails.senderRecipients",defaultMessage:"Sender and recipients"}});a.default=n},ghxK:function(e,a,t){"use strict";t("tkto"),t("pNMO"),t("TeQF"),t("5DmW"),t("FZtP"),t("27RR");var n=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.listCampaigns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return l.default.get(u({apiEndpoint:"".concat(c)},e))},a.createCampaign=function(e){return l.default.add("".concat(c),{campaign:e})},a.updateCampaign=function(e,a){return l.default.update("".concat(c,"/").concat(e),e,{campaign:a})},a.sendCampaign=function(e){return p.apply(this,arguments)},a.sendCampaignPreview=function(e){return l.default.add("".concat(c,"/").concat(e,"/send_preview"),{})},a.deleteCampaign=function(e){return l.default.delete("".concat(c,"/").concat(e),e)},a.campaignByIdStream=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.default.get(u({apiEndpoint:"".concat(c,"/").concat(e)},a))},a.listCampaignDeliveries=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.default.get(u({apiEndpoint:"".concat(c,"/").concat(e,"/deliveries")},a))},a.getCampaignStats=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.default.get(u({apiEndpoint:"".concat(c,"/").concat(e,"/stats")},a))},a.isDraft=function(e){return 0===e.attributes.deliveries_count};var i=n(t("o0o1"));t("ma9I");var s=n(t("yXPU")),r=n(t("lSNA")),o=t("p0gT"),l=n(t("1Kqg"));function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(Object(t),!0).forEach((function(a){(0,r.default)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var c="".concat(o.API_PATH,"/campaigns");function p(){return(p=(0,s.default)(i.default.mark((function e(a){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.add("".concat(c,"/").concat(a,"/send"),{});case 2:return t=e.sent,e.next=5,l.default.fetchAllWith({apiEndpoint:["".concat(c,"/").concat(a),"".concat(o.API_PATH,"/campaigns")]});case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=137.f3c1bc6cfd04041f72fd.chunk.js.map